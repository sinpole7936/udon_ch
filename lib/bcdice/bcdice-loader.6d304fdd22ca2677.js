(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4402],{8914:(l,ee,re)=>{"use strict";re.r(ee),re.d(ee,{default:()=>N});var $=re(467),K=re(1275),Q=re.n(K);class N extends(Q()){dynamicImportI18n(B,E){return(0,$.A)(function*(){return(yield re(1774)(`./${B}.${E}.json`)).default})()}dynamicImport(B){return(0,$.A)(function*(){yield re(8412)(`./${B}`)})()}}},3135:(l,ee,re)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),re(7111),re(878),re(1892),re(1054);var $=re(1856),K=re(1931),Q=function(){function N(x,B){this.internal=B??$.BCDice.Base.$new(x)}return N.eval=function(x){var B=$.BCDice.Base.$eval(x);return K.parseResult(B)},Object.defineProperty(N.prototype,"randomizer",{get:function(){return this.internal.randomizer},enumerable:!1,configurable:!0}),N.prototype.eval=function(){var x=this.internal.$eval();return K.parseResult(x)},N}();ee.default=Q},7111:(l,ee,re)=>{re(5151),Opal.queue(function($){var Y,A,T,b,g,L,k,F,K=$.module,Q=$.ensure_kwargs,N=$.truthy,x=$.thrower,B=$.def,E=[],W=$.nil,U=$.$$$;return Y=E,A=F=[K(E[0],"BCDice")].concat(Y),k=[L=K(F[0],"ArithmeticEvaluator")].concat(A),b=[T=$.get_singleton_class(L)].concat(k),g=$.$r(b),B(T,"$eval",function(R,_){try{x("eval_return");var f,z=W;return null==(f=(_=Q(_)).$$smap.round_type)&&(f=U(g("RoundType"),"FLOOR")),N(R)&&N(z=g("Arithmetic").$eval(R,f))?z:0}catch(v){if(v===$.t_eval_return)return v.$v;throw v}},-2)})},1892:(l,ee,re)=>{re(5151),Opal.modules.json=function($){var k,L,K=$.module,Q=$.klass,N=$.send,x=$.Object,B=$.hash2,E=$.eqeqeq,W=$.defs,U=$.truthy,J=$.def,Y=$.return_val,H=[],F=$.nil,y=$.$$$;return function(A,L){var T,k=K(A,"JSON"),I=[k].concat(L),b=$.$r(I);Q(I[0],b("StandardError"),"JSONError"),Q(I[0],b("JSONError"),"ParserError");var g=$.hasOwnProperty;function q(_){try{return JSON.parse(_)}catch(p){k.$raise(y(b("JSON"),"ParserError"),p.message)}}function R(_,p){var f,z,v,S,m,M;switch(typeof _){case"string":case"number":return _;case"boolean":return!!_;case"undefined":return F;case"object":if(!_)return F;if(_.$$is_array){for(z=p.array_class.$new(),S=0,m=_.length;S<m;S++)z.$push(R(_[S],p));return z}for(M in v=p.object_class.$new(),_)g.call(_,M)&&(T=[M,R(_[M],p)],N(v,"[]=",T));return p.parse||(f=v["$[]"](b("JSON").$create_id()))==F?v:x.$const_get(f).$json_create(v)}}$.get_singleton_class(k).$attr_accessor("create_id"),k["$create_id="]("json_class"),W(k,"$[]",function(p,f){return null==f&&(f=B([],{})),E(b("String"),p)?this.$parse(p,f):this.$generate(p,f)},-2),W(k,"$parse",function(p,f){return null==f&&(f=B([],{})),this.$from_object(q(p),f.$merge(B(["parse"],{parse:!0})))},-2),W(k,"$parse!",function(p,f){return null==f&&(f=B([],{})),this.$parse(p,f)},-2),W(k,"$load",function(p,f){return null==f&&(f=B([],{})),this.$from_object(q(p),f)},-2),W(k,"$from_object",function(p,f){return null==f&&(f=B([],{})),U(f["$[]"]("object_class"))||f["$[]="]("object_class",b("Hash")),U(f["$[]"]("array_class"))||f["$[]="]("array_class",b("Array")),R(p,f.$$smap)},-2),W(k,"$generate",function(p,f){return null==f&&(f=B([],{})),p.$to_json(f)},-2),W(k,"$dump",function(p,f,z){var S;return null==f&&(f=F),null==z&&(z=F),S=this.$generate(p),U(f)?(U(f["$responds_to?"]("to_io"))&&(f=f.$to_io()),f.$write(S),f):S},-2)}(H[0],H),k=Q(H[0],null,"Object"),J(k,"$to_json",function(){return this.$to_s().$to_json()}),L=K(H[0],"Enumerable"),J(L,"$to_json",function(){return this.$to_a().$to_json()}),function(A,L){var k=Q(A,null,"Array");J(k,"$to_json",function(){for(var b=[],g=0,q=this.length;g<q;g++)b.push(this[g].$to_json());return"["+b.join(",")+"]"})}(H[0]),function(A,L){var k=Q(A,null,"Boolean");J(k,"$to_json",function(){return 1==this?"true":"false"})}(H[0]),function(A,L){var k=Q(A,null,"Hash");J(k,"$to_json",function(){for(var _,p,b=[],g=0,q=this.$$keys,R=q.length;g<R;g++)(_=q[g]).$$is_string?p=this.$$smap[_]:(p=_.value,_=_.key),b.push(_.$to_s().$to_json()+":"+p.$to_json());return"{"+b.join(",")+"}"})}(H[0]),function(A,L){var k=Q(A,null,"NilClass");J(k,"$to_json",Y("null"))}(H[0]),function(A,L){var k=Q(A,null,"Numeric");J(k,"$to_json",function(){return this.toString()})}(H[0]),function(A,L){var k=Q(A,null,"String");J(k,"$to_json",function(){return JSON.stringify(this)})}(H[0]),function(A,L){var k=Q(A,null,"Time");J(k,"$to_json",function(){return this.$strftime("%FT%T%z").$to_json()})}(H[0]),function(A,L){var k=Q(A,null,"Date");return J(k,"$to_json",function(){return this.$to_s().$to_json()}),J(k,"$as_json",function(){return this.$to_s()})}(H[0])},Opal.modules.i18n=function($){var g,_,f,z,q,R,K=$.module,Q=$.class_variable_set,N=$.class_variable_get,x=$.def,B=$.truthy,E=$.hash2,W=$.send,U=$.ensure_kwargs,J=$.kwrestargs,Y=$.to_a,F=$.alias,y=$.klass,A=$.return_val,k=[],T=$.nil,I=$.$$$;return $.top.$require("json"),g=k,R=[q=K(k[0],"I18n")].concat(g),_=$.get_singleton_class(q),f=[_].concat(R),z=$.$r(f),Q(f[1],"@@load_path",[]),Q(f[1],"@@table",T),x(_,"$load_path",function(){return N(f[1],"@@load_path",!1)}),x(_,"$default_locale",function(){return N(f[1],"@@default_locale",!1)}),x(_,"$default_locale=",function(S){return Q(f[1],"@@default_locale",S)}),x(_,"$fallbacks",function(){return I(I(z("I18n"),"Locale"),"Fallbacks").$new()}),x(_,"$load_default_translation",function(){return B(N(f[1],"@@table",!1)["$nil?"]())?(Q(f[1],"@@table",E([],{})),this.$load_translation(JSON.stringify(re(5516)))):T}),x(_,"$load_translation",function(S){var M;return this.$load_default_translation(),M=z("JSON").$parse(S,E(["symbolize_names"],{symbolize_names:!0})),Q(f[1],"@@table",W(N(f[1],"@@table",!1),"merge",[M],function(d,a,r){return null==d&&(d=T),null==a&&(a=T),null==r&&(r=T),a.$merge(r)}))}),x(_,"$clear_translate_table",function(){return Q(f[1],"@@table",T)}),x(_,"$translate",function(S,m){var M,h,a,r,e=T,n=T,t=T;null==(M=(m=U(m)).$$smap.locale)&&(M=T),h=J(m,{locale:!0}),this.$load_default_translation(),a=W(S.$split("."),"map",[],"to_sym".$to_proc()),r=N(f[1],"@@table",!1),e=N(f[1],"@@default_locale",!1),n=B(t=W(r,"dig",[M].concat(Y(a))))?t:W(r,"dig",[e].concat(Y(a)));try{B(n["$is_a?"](z("String")))&&(n=this.$format(n,$.to_hash(h)))}catch(s){if(!$.rescue(s,[z("ArgumentError"),z("KeyError")]))throw s;$.pop_exception()}return B(t=n)?t:h["$[]"]("default")},-2),F(_,"t","translate"),function(_,p){var S,m,M,z=[K(_,"Locale")].concat(p),v=$.$r(z);S=z[0],m=v("Hash"),M=y(S,m,"Fallbacks"),x(M,"$defaults=",A(T))}(R[0],R),function(_,p){var z=[K(_,"Backend")].concat(p);K(z[0],"Simple")}(R[0],R),function(_,p){var v,f=K(_,"Thread");return[f].concat(p),v=$.get_singleton_class(f),x(v,"$current",function(){return E(["i18n_fallbacks"],{i18n_fallbacks:T})})}(R[0],R)},Opal.modules["i18n/backend/fallbacks"]=function($){var I,q,_,p,b,g,K=$.module,Q=$.class_variable_set,N=$.truthy,x=$.class_variable_get,B=$.def,E=$.send,W=$.send2,U=$.find_super,J=$.hash2,Y=$.find_block_super,H=$.neqeq,F=$.thrower,y=$.return_val,A=[],L=$.nil,k=$.$$$;return I=A,g=[b=K(A[0],"I18n")].concat(I),Q(g[0],"@@fallbacks",L),q=$.get_singleton_class(b),_=[q].concat(g),p=$.$r(_),B(q,"$fallbacks",function(){var v=L;return Q(_[1],"@@fallbacks",N(null!=_[1].$$cvars["@@fallbacks"]?"class variable":L)&&N(v=x(_[1],"@@fallbacks",!1))?v:k(k(p("I18n"),"Locale"),"Fallbacks").$new()),N(v=p("Thread").$current()["$[]"]("i18n_fallbacks"))?v:x(_[1],"@@fallbacks",!1)}),B(q,"$fallbacks=",function(z){var v;return Q(_[1],"@@fallbacks",N(z["$is_a?"](p("Array")))?k(k(p("I18n"),"Locale"),"Fallbacks").$new(z):z),v=["i18n_fallbacks",x(_[1],"@@fallbacks",!1)],E(p("Thread").$current(),"[]=",v),v[v.length-1]}),function(q,R){var z,v,S,m,p=[K(q,"Backend")].concat(R);return z=p,S=[v=K(p[0],"Fallbacks")].concat(z),m=$.$r(S),B(v,"$translate",function M(h,d,a){try{var r=F("return"),e=M.$$p||L,n=this,t=L,s=L;return M.$$p=null,null==a&&(a=m("EMPTY_HASH")),N(a.$fetch("fallback",!0))?N(a["$[]"]("fallback_in_progress"))?W(n,U(n,"translate",M,!1,!0),"translate",[h,d,a],e):(N(a["$[]"]("default"))&&(t=n["$extract_non_symbol_default!"](a)),s=a.$merge(J(["fallback_in_progress"],{fallback_in_progress:!0})),E(m("I18n").$fallbacks()["$[]"](h),"each",[],function i(c){var o=null==i.$$s?this:i.$$s;null==c&&(c=L);try{return E(o,"catch",["exception"],function j(){var C=null==j.$$s?this:j.$$s,O=L;if(O=W(C,Y(C,"translate",j.$$def||i.$$def||M,!1,!1),"translate",[c,d,s],null),N(O["$nil?"]()))return L;H(h.$to_s(),c.$to_s())&&C.$on_fallback(h,c,d,a),r.$throw(O)},{$$s:o,$$ret:r})}catch(j){if(!$.rescue(j,[k(m("I18n"),"InvalidLocale")]))throw j;try{return L}finally{$.pop_exception()}}},{$$s:n}),N(a["$key?"]("default"))&&N(a["$[]"]("default")["$nil?"]())?L:N(t)?W(n,U(n,"translate",M,!1,!0),"translate",[h,L,a.$merge(J(["default"],{default:t}))],null):n.$throw("exception",k(m("I18n"),"MissingTranslation").$new(h,d,a))):W(n,U(n,"translate",M,!1,!0),"translate",[h,d,a],e)}catch(i){if(i===r)return i.$v;throw i}},-3),B(v,"$extract_non_symbol_default!",function(h){var a,d=L;return d=[h["$[]"]("default")].$flatten(),a=E(d,"detect",[],function(e){return null==e&&(e=L),e["$is_a?"](m("Symbol"))["$!"]()}),N(a)&&h["$[]="]("default",d["$[]"](0,d.$index(a))),a}),B(v,"$exists?",function M(h,d,a){try{var r=F("return"),e=M.$$p||L,n=this;return M.$$p=null,null==a&&(a=m("EMPTY_HASH")),N(a.$fetch("fallback",!0))?(E(m("I18n").$fallbacks()["$[]"](h),"each",[],function t(s){var i=null==t.$$s?this:t.$$s;null==s&&(s=L);try{if(!N(W(i,Y(i,"exists?",t.$$def||M,!1,!1),"exists?",[s,d],null)))return L;r.$throw(!0)}catch(c){if(!$.rescue(c,[k(m("I18n"),"InvalidLocale")]))throw c;try{return L}finally{$.pop_exception()}}},{$$s:n,$$ret:r}),!1):W(n,U(n,"exists?",M,!1,!0),"exists?",[h,d,a],e)}catch(t){if(t===r)return t.$v;throw t}},-3),v.$private(),B(v,"$on_fallback",y(L))}(g[0],g)},Opal.modules["bcdice/randomizer"]=function($){var b,f,z,v,S,m,q,R,Q=$.klass,N=$.const_set,x=$.def,B=$.truthy,E=$.rb_gt,W=$.rb_plus,U=$.rb_le,J=$.send,Y=$.rb_minus,H=$.eqeq,F=$.rb_times,y=$.eqeqeq,A=$.rb_ge,L=[],k=$.nil,T=$.$$$;return b=L,q=[(0,$.module)(L[0],"BCDice")].concat(b),R=$.$r(q),f=q,v=[z=Q(q[0],null,"Randomizer")].concat(f),S=$.$r(v),(m=z.$$prototype).rand_results=m.detailed_rand_results=k,N(v[0],"UPPER_LIMIT_DICE_TIMES",200),N(v[0],"UPPER_LIMIT_DICE_SIDES",1e4),N(v[0],"UPPER_LIMIT_RANDS",1e4),x(z,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),z.$attr_reader("rand_results"),z.$attr_reader("detailed_rand_results"),N(v[0],"DetailedRandResult",S("Struct").$new("kind","sides","value")),x(z,"$roll_barabara",function(h,d){var a=this;return B(E(W(a.rand_results.$size(),h),S("UPPER_LIMIT_RANDS")))&&a.$raise(S("TooManyRandsError")),B(U(h,0))||B(E(h,S("UPPER_LIMIT_DICE_TIMES")))?[]:J(S("Array"),"new",[h],function r(){return(null==r.$$s?this:r.$$s).$roll_once(d)},{$$s:a})}),x(z,"$roll_sum",function(h,d){return this.$roll_barabara(h,d).$sum()}),x(z,"$roll_once",function(h){var a=k;return B(U(h,0))||B(E(h,S("UPPER_LIMIT_DICE_SIDES")))?0:(a=this.$rand_inner(h),this.$push_to_detail("normal",h,a),a)}),x(z,"$roll_index",function(h){return Y(this.$roll_once(h),1)}),x(z,"$roll_tens_d10",function(){var a,d=k;return d=this.$rand_inner(10),H(d,10)&&(d=0),a=F(d,10),this.$push_to_detail("tens_d10",10,a),a}),x(z,"$roll_d9",function(){var d;return d=Y(this.$rand_inner(10),1),this.$push_to_detail("d9",10,d),d}),x(z,"$roll_d66",function(h){var r,a=k;return a=J(S("Array"),"new",[2],function e(){return(null==e.$$s?this:e.$$s).$roll_once(6)},{$$s:this}),y(T(S("D66SortType"),"ASC"),r=h)?a["$sort!"]():y(T(S("D66SortType"),"DESC"),r)&&a["$sort!"]()["$reverse!"](),W(F(a["$[]"](0),10),a["$[]"](1))}),z.$private(),x(z,"$rand_inner",function(h){var a,d=this;return B(A(d.rand_results.$size(),S("UPPER_LIMIT_RANDS")))&&d.$raise(S("TooManyRandsError")),a=d.$random(h),d.rand_results["$<<"]([a,h]),a}),x(z,"$random",function(h){return W(S("Kernel").$rand(h),1)}),x(z,"$push_to_detail",function(h,d,a){var e;return e=S("DetailedRandResult").$new(h,d,a),this.detailed_rand_results.$push(e)}),Q(q[0],R("StandardError"),"TooManyRandsError"),k},Opal.modules["bcdice/dice_table/roll_result"]=function($){var J,y,I,b,g,q,R,L,H,K=$.module,Q=$.klass,N=$.def,x=$.truthy,B=$.return_val,E=[],W=$.nil;return J=E,y=H=[K(E[0],"BCDice")].concat(J),I=L=[K(H[0],"DiceTable")].concat(y),g=[b=Q(L[0],null,"RollResult")].concat(I),q=$.$r(g),(R=b.$$prototype).table_name=R.value=R.body=W,N(b,"$initialize",function(p,f,z){var v=this;return v.table_name=p,v.value=f,v.body=z}),b.$attr_reader("table_name"),b.$attr_reader("value"),b.$attr_reader("body"),N(b,"$to_s",function(){var p=this;return p.table_name+"("+p.value+") \uff1e "+p.body}),N(b,"$last_body",function(){var p=this;return x(p.body["$is_a?"](q("RollResult")))?p.body.$last_body():p.body}),N(b,"$empty?",B(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function($){var J,y,I,b,g,q,R,L,H,K=$.module,Q=$.klass,N=$.truthy,x=$.def,B=$.rb_minus,E=[],W=$.nil;return J=E,y=H=[K(E[0],"BCDice")].concat(J),I=L=[K(H[0],"DiceTable")].concat(y),g=[b=Q(L[0],null,"ChainTable")].concat(I),q=$.$r(g),(R=b.$$prototype).times=R.sides=R.items=R.name=W,x(b,"$initialize",function(p,f,z){var v=this,S=W;return v.name=p,v.items=z.$freeze(),S=/(\d+)D(\d+)/i.$match(f),N(S)||v.$raise(q("ArgumentError"),"Unexpected table type: "+f),v.times=S["$[]"](1).$to_i(),v.sides=S["$[]"](2).$to_i()}),x(b,"$roll",function(p){var z,v,f=this,S=W;return z=p.$roll_sum(f.times,f.sides),v=B(z,f.times),S=f.items["$[]"](v),N(S["$respond_to?"]("roll"))&&(S=S.$roll(p)),q("RollResult").$new(f.name,z,S)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function($){var F,k,q,R,_,p,f,I,A,K=$.module,Q=$.klass,N=$.hash2,x=$.defs,B=$.def,E=$.rb_plus,W=$.rb_times,U=$.rb_minus,J=[],Y=$.nil;return F=J,k=A=[K(J[0],"BCDice")].concat(F),q=I=[K(A[0],"DiceTable")].concat(k),_=[R=Q(I[0],null,"D66GridTable")].concat(q),p=$.$r(_),(f=R.$$prototype).name=f.items=Y,x(R,"$from_i18n",function(v,S){var M=Y;return M=p("I18n").$t(v,N(["locale","raise"],{locale:S,raise:!0})),this.$new(M["$[]"]("name"),M["$[]"]("items"))}),B(R,"$initialize",function(v,S){return this.name=v,this.items=S.$freeze()}),B(R,"$roll",function(v){var m,M,h,d,a;return m=v.$roll_once(6),M=v.$roll_once(6),h=E(W(m,10),M),d=U(m,1),a=U(M,1),p("RollResult").$new(this.name,h,this.items["$[]"](d)["$[]"](a))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function($){var Y,A,g,q,R,_,k,T,F,K=$.module,Q=$.klass,N=$.hash2,x=$.defs,B=$.def,W=[],U=$.nil;return $.top.$require("bcdice/dice_table/d66_grid_table"),Y=W,A=F=[K(W[0],"BCDice")].concat(Y),k=[K(F[0],"DiceTable")].concat(A),T=$.$r(k),g=k,R=[q=Q(k[0],T("D66GridTable"),"D66HalfGridTable")].concat(g),_=$.$r(R),x(q,"$from_i18n",function(f,z){var S=U;return S=_("I18n").$t(f,N(["locale","raise"],{locale:z,raise:!0})),this.$new(S["$[]"]("name"),S["$[]"]("items_1_2_3"),S["$[]"]("items_4_5_6"))}),B(q,"$initialize",function(f,z,v){return this.name=f,this.items=[z,z,z,v,v,v].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function($){var Y,A,g,q,R,_,k,T,F,K=$.module,Q=$.klass,N=$.hash2,x=$.defs,B=$.def,W=[],U=$.nil;return $.top.$require("bcdice/dice_table/d66_grid_table"),Y=W,A=F=[K(W[0],"BCDice")].concat(Y),k=[K(F[0],"DiceTable")].concat(A),T=$.$r(k),g=k,R=[q=Q(k[0],T("D66GridTable"),"D66OneThirdTable")].concat(g),_=$.$r(R),x(q,"$from_i18n",function(f,z){var S=U;return S=_("I18n").$t(f,N(["locale","raise"],{locale:z,raise:!0})),this.$new(S["$[]"]("name"),S["$[]"]("items_1_2"),S["$[]"]("items_3_4"),S["$[]"]("items_5_6"))}),B(q,"$initialize",function(f,z,v,S){return this.name=f,this.items=[z,z,v,v,S,S].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function($){var A,I,_,p,f,z,v,g,k,K=$.module,Q=$.klass,N=$.hash2,x=$.defs,B=$.def,E=$.eqeqeq,W=$.rb_plus,U=$.rb_times,J=$.truthy,Y=[],H=$.nil,F=$.$$$;return A=Y,I=k=[K(Y[0],"BCDice")].concat(A),_=g=[K(k[0],"DiceTable")].concat(I),f=[p=Q(g[0],null,"D66Table")].concat(_),z=$.$r(f),(v=p.$$prototype).sort_type=v.items=v.name=H,x(p,"$from_i18n",function(m,M){var a,d=H;return d=z("I18n").$t(m,N(["locale"],{locale:M})),a=z("D66SortType").$const_get(d["$[]"]("d66_sort_type")),this.$new(d["$[]"]("name"),a,d["$[]"]("items"))}),B(p,"$initialize",function(m,M,h){var d=this;return d.name=m,d.sort_type=M,d.items=h.$freeze()}),B(p,"$roll",function(m){var M=this,h=H,d=H,a=H,r=H;return h=m.$roll_barabara(2,6),E(F(z("D66SortType"),"ASC"),d=M.sort_type)?h["$sort!"]():E(F(z("D66SortType"),"DESC"),d)&&h["$sort!"]()["$reverse!"](),a=W(U(h["$[]"](0),10),h["$[]"](1)),r=J(d=M.items["$[]"](a))?d:M.items["$[]"](a.$to_s()),J(r["$respond_to?"]("roll"))&&(r=r.$roll(m)),z("RollResult").$new(M.name,a,r)}),B(p,"$choice",function(m){return z("RollResult").$new(this.name,m,this.items["$[]"](m))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function($){var L,b,q,R,T,K=$.module,Q=$.klass,N=$.hash2,x=$.send,B=$.to_ary,E=$.rb_plus,W=$.rb_times,U=$.send2,J=$.find_super,Y=$.def,F=[],y=$.nil;return $.top.$require("bcdice/dice_table/d66_table"),L=F,b=T=[K(F[0],"BCDice")].concat(L),q=[K(T[0],"DiceTable")].concat(b),R=$.$r(q),Y(Q(q[0],R("D66Table"),"D66LeftRangeTable"),"$initialize",function z(v,S,m){var d;return z.$$p=null,d=N([],{}),x(m,"each",[],function(r){var e,s;return null==r&&(r=y),e=B(r),s=null==e[1]?y:e[1],x(null==e[0]?y:e[0],"each",[],function(c){return null==c&&(c=y),x(s,"each_with_index",[],function(j,C){var O,te;return null==j&&(j=y),null==C&&(C=y),te=E(W(c,10),E(C,1)),x(d,"[]=",O=[te,j]),O[O.length-1]})})}),U(this,J(this,"initialize",z,!1,!0),"initialize",[v,S,d],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function($){var y,T,R,_,p,f,z,b,L,K=$.module,Q=$.klass,N=$.hash2,x=$.defs,B=$.def,E=$.truthy,W=$.rb_minus,U=$.rb_plus,J=$.rb_times,Y=[],H=$.nil;return y=Y,T=L=[K(Y[0],"BCDice")].concat(y),R=b=[K(L[0],"DiceTable")].concat(T),p=[_=Q(b[0],null,"D66ParityTable")].concat(R),f=$.$r(p),(z=_.$$prototype).odd=z.even=z.name=H,x(_,"$from_i18n",function(S,m){var h=H;return h=f("I18n").$t(S,N(["locale","raise"],{locale:m,raise:!0})),this.$new(h["$[]"]("name"),h["$[]"]("odd"),h["$[]"]("even"))}),B(_,"$initialize",function(S,m,M){var h=this;return h.name=S,h.odd=m.$freeze(),h.even=M.$freeze()}),B(_,"$roll",function(S){var h,a,r,m=this,M=H;return M=S.$roll_once(6),h=S.$roll_once(6),a=(E(M["$odd?"]())?m.odd:m.even)["$[]"](W(h,1)),r=U(J(M,10),h),f("RollResult").$new(m.name,r,a)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function($){var Y,A,b,g,q,R,_,k,F,K=$.module,Q=$.klass,N=$.def,x=$.rb_plus,B=$.rb_times,E=$.send,W=[],U=$.nil;return Y=W,A=F=[K(W[0],"BCDice")].concat(Y),b=k=[K(F[0],"DiceTable")].concat(A),q=[g=Q(k[0],null,"D66RangeTable")].concat(b),R=$.$r(q),(_=g.$$prototype).items=_.name=U,N(g,"$initialize",function(f,z){return this.name=f,this.items=z.$freeze()}),N(g,"$roll",function(f){var v,S,m,M=U;return v=f.$roll_once(6),S=f.$roll_once(6),m=x(B(v,10),S),M=E(this.items,"find",[],function(d){return null==d&&(d=U),d["$[]"](0)["$include?"](m)}),R("RollResult").$new(this.name,m,M["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function($){var L,b,p,m,h,d,f,z,v,S,q,T,K=$.module,Q=$.klass,N=$.const_set,x=$.send,B=$.hash2,E=$.def,W=$.eqeqeq,U=$.truthy,J=$.to_a,Y=$.rb_times,H=$.rb_plus,F=[],y=$.nil;return L=F,b=T=[K(F[0],"BCDice")].concat(L),p=q=[K(T[0],"DiceTable")].concat(b),z=[f=Q(q[0],null,"RangeTable")].concat(p),v=$.$r(z),(S=f.$$prototype).name=S.items=S.num_of_dice=S.num_of_sides=S.formatter=y,N(z[0],"RollResult",x(v("Struct"),"new",["sum","values","content","formatted"],function m(){return(null==m.$$s?this:m.$$s).$alias_method("to_s","formatted")},{$$s:f})),N(z[0],"Item",v("Struct").$new("range","content")),N(z[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),N(z[0],"DEFAULT_FORMATTER",x(f,"lambda",[],function(M,h){return null==M&&(M=y),null==h&&(h=y),M.$name()+"("+h.$sum()+") \uff1e "+h.$content()})),f.$attr_reader("name"),f.$attr_reader("num_of_dice"),f.$attr_reader("num_of_sides"),h=[m=$.get_singleton_class(f)].concat(z),d=$.$r(h),E(m,"$from_i18n",function(r,e){var s,t=y;return t=d("I18n").$t(r,B(["locale"],{locale:e})),s=x(t["$[]"]("items"),"map",[],function i(c){return null==c&&(c=y),[(null==i.$$s?this:i.$$s).$conv_string_range(c["$[]"](0)),c["$[]"](1)]},{$$s:this}),this.$new(t["$[]"]("name"),t["$[]"]("type"),s)}),E(m,"$conv_string_range",function(r){var n,e=this;return null==e.name&&(e.name=y),W(d("Integer"),n=r)?r:W(d("String"),n)?U(r["$include?"](".."))?x(d("Range"),"new",J(x(r.$split("..",2),"map",[],function t(s){return null==s&&(s=y),(null==t.$$s?this:t.$$s).$Integer(s)},{$$s:e}))):e.$Integer(r):e.$raise(d("TypeError"),e.name+": "+r+" ("+r.$class()+") must be a String or an Integer")}),E(f,"$initialize",function m(M,h,d){var e,a=m.$$p||y,r=this,n=y;return m.$$p=null,r.name=M.$freeze(),r.formatter=U(e=a)?e:v("DEFAULT_FORMATTER"),n=v("DICE_ROLL_METHOD_RE").$match(h),U(n)||r.$raise(v("ArgumentError"),r.name+": invalid dice roll method: "+h),r.num_of_dice=n["$[]"](1).$to_i(),r.num_of_sides=n["$[]"](2).$to_i(),r.$store(d)}),E(f,"$fetch",function(M){var d,h=this;return d=x(h.items,"find",[],function(r){return null==r&&(r=y),r.$range()["$include?"](M)}),U(d)||h.$raise(v("RangeError"),h.name+": value is out of range: "+M),d}),E(f,"$roll",function(M){var a,h=this,d=y,r=y;return a=(d=M.$roll_barabara(h.num_of_dice,h.num_of_sides)).$sum(),(r=v("RollResult").$new(a,d,h.$fetch(a).$content()))["$formatted="](h.formatter["$[]"](h,r)),r}),f.$private(),E(f,"$store",function(M){var d,a,h=this;return d=x(M,"map",[],function r(e,n){return null==e&&(e=y),null==n&&(n=y),[(null==r.$$s?this:r.$$s).$coerce_to_int_range(e),n]},{$$s:h}),a=x(d,"sort_by",[],function(e,n){return null==e&&(e=y),null==n&&(n=y),e.$min()}),h.$assert_min_sum_is_covered(a),h.$assert_max_sum_is_covered(a),h.$assert_no_gap_or_overlap_in_ranges(a),h.items=x(a,"map",[],function(e,n){return null==e&&(e=y),null==n&&(n=y),v("Item").$new(e,n.$freeze()).$freeze()}).$freeze(),h}),E(f,"$coerce_to_int_range",function(M){var d;return W(v("Integer"),d=M)?v("Range").$new(M,M):W(v("Range"),d)&&U(M.$begin()["$is_a?"](v("Integer")))&&U(M.$end()["$is_a?"](v("Integer")))?M:this.$raise(v("TypeError"),this.name+": "+M+" ("+M.$class()+") must be an Integer or a Range with Integers ")}),E(f,"$assert_min_sum_is_covered",function(M){var d,h=this,a=y;return d=h.num_of_dice,a=M.$first()["$[]"](0),U(a["$include?"](d))||h.$raise(v("RangeError"),h.name+": min value ("+d+") is not covered: "+a),h}),E(f,"$assert_max_sum_is_covered",function(M){var d,h=this,a=y;return d=Y(h.num_of_dice,h.num_of_sides),a=M.$last()["$[]"](0),U(a["$include?"](d))||h.$raise(v("RangeError"),h.name+": max value ("+d+") is not covered: "+a),h}),E(f,"$assert_no_gap_or_overlap_in_ranges",function(M){return x(M,"each_cons",[2],function d(a,r){var s,i,e=null==d.$$s?this:d.$$s,n=y,t=y;return null==e.name&&(e.name=y),null==a&&(a=y),null==r&&(r=y),n=a["$[]"](0),t=r["$[]"](0),s=n.$max(),i=H(s,1),U(t["$include?"](s))&&e.$raise(v("RangeError"),e.name+": Range overlap: "+n+" and "+t),U(t["$include?"](i))?y:e.$raise(v("RangeError"),e.name+": Range gap: "+n+" and "+t)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function($){var H,L,g,f,z,v,S,R,T,y,K=$.module,Q=$.klass,N=$.send,x=$.def,B=$.rb_minus,E=$.return_ivar,W=[],U=$.nil,J=$.$$$;return H=W,L=y=[K(W[0],"BCDice")].concat(H),g=T=[K(y[0],"DiceTable")].concat(L),f=R=[Q(T[0],null,"SaiFicSkillTable")].concat(g),v=[z=Q(R[0],null,"Category")].concat(f),S=$.$r(v),x(z,"$initialize",function(M,h,d,a){var r=this;return r.name=M,r.skills=N(h.$map(),"with_index",[2],function(n,t){return null==n&&(n=U),null==t&&(t=U),J(S("SaiFicSkillTable"),"Skill").$new(M,n,d,t,a)}),r.dice=d}),x(z,"$roll",function(M){return this.$skills()["$[]"](B(M.$roll_sum(2,6),2))}),x(z,"$to_s",E("name")),z.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function($){var U,F,T,R,_,b,A,Y,K=$.module,Q=$.klass,N=$.def,x=$.hash2,B=[],E=$.nil;return U=B,F=Y=[K(B[0],"BCDice")].concat(U),T=A=[K(Y[0],"DiceTable")].concat(F),b=[Q(A[0],null,"SaiFicSkillTable")].concat(T),(_=(R=Q(b[0],null,"Skill")).$$prototype).s_format=_.category_dice=_.row_dice=_.category_name=_.name=E,N(R,"$initialize",function(f,z,v,S,m){var M=this;return M.category_name=f,M.name=z,M.category_dice=v,M.row_dice=S,M.s_format=m}),N(R,"$to_s",function(){var f=this;return f.$format(f.s_format,x(["category_dice","row_dice","category_name","skill_name"],{category_dice:f.category_dice,row_dice:f.row_dice,category_name:f.category_name,skill_name:f.name}))}),R.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function($){var b,_,S,m,M,h,d,f,q,K=$.module,Q=$.klass,N=$.ensure_kwargs,x=$.hash2,B=$.send,W=$.defs,U=$.const_set,J=$.to_ary,Y=$.def,H=$.truthy,F=$.rb_minus,y=$.rb_plus,A=$.top,L=[],k=$.nil,T=$.$$$;return A.$require("bcdice/dice_table/sai_fic_skill_table/category"),A.$require("bcdice/dice_table/sai_fic_skill_table/skill"),b=L,_=q=[K(L[0],"BCDice")].concat(b),S=f=[K(q[0],"DiceTable")].concat(_),M=[m=Q(f[0],null,"SaiFicSkillTable")].concat(S),h=$.$r(M),(d=m.$$prototype).rtt=d.rtt_format=d.rct=d.rct_format=d.rttn=d.rttn_format=d.categories=k,W(m,"$from_i18n",function(r,e,n){var t,s,i,C,j=k;return null==(t=(n=N(n)).$$smap.rtt)&&(t=k),null==(s=n.$$smap.rct)&&(s=k),null==(i=n.$$smap.rttn)&&(i=k),C=(j=h("I18n").$t("RTT",x(["locale","raise","default"],{locale:e,raise:!1,default:x([],{})})).$merge(h("I18n").$t(r,x(["locale","raise"],{locale:e,raise:!0}))))["$[]"]("items"),j=B(j,"select",[],function(te,ne){return null==te&&(te=k),null==ne&&(ne=k),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](te)}),this.$new(C,$.to_hash(j).$merge(x(["rtt","rct","rttn"],{rtt:t,rct:s,rttn:i})))},-3),U(M[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),U(M[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),U(M[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),U(M[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),Y(m,"$initialize",function(r,e){var n,t,s,i,c,o,j,C=this;return null==(n=(e=N(e)).$$smap.rtt)&&(n=k),null==(t=e.$$smap.rct)&&(t=k),null==(s=e.$$smap.rttn)&&(s=k),null==(i=e.$$smap.rtt_format)&&(i=h("DEFAULT_RTT")),null==(c=e.$$smap.rct_format)&&(c=h("DEFAULT_RCT")),null==(o=e.$$smap.rttn_format)&&(o=h("DEFAULT_RTTN")),null==(j=e.$$smap.s_format)&&(j=h("DEFAULT_S")),C.categories=B(r.$map(),"with_index",[1],function(te,ne){var ae,oe,ue;return null==te&&(te=k),null==ne&&(ne=k),oe=null==(ae=J(te))[0]?k:ae[0],ue=null==ae[1]?k:ae[1],T(h("SaiFicSkillTable"),"Category").$new(oe,ue,ne,j)},{$$has_top_level_mlhs_arg:!0}),C.rtt=n,C.rct=t,C.rttn=s.$to_a(),C.rtt_format=i,C.rct_format=c,C.rttn_format=o},-2),U(M[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),m.$attr_reader("categories"),Y(m,"$roll_command",function(r,e){var t,n=this,s=k,i=k;return H(["RTT",n.rtt]["$include?"](t=e))?n.$format_skill(n.rtt_format,n.$roll_skill(r)):H(["RCT",n.rct]["$include?"](t))?(s=n.$roll_category(r),n.$format(n.rct_format,x(["category_dice","category_name"],{category_dice:s.$dice(),category_name:s.$name()}))):H(i=h("RTTN").$index(t))||H(i=n.rttn.$index(t))?n.$format_skill(n.rttn_format,n.categories["$[]"](i).$roll(r)):k}),Y(m,"$roll_category",function(r){return this.categories["$[]"](F(r.$roll_once(6),1))}),Y(m,"$roll_skill",function(r){return this.$roll_category(r).$roll(r)}),Y(m,"$prefixes",function(){var r=this;return y(["RTT[1-6]?","RCT",r.rtt,r.rct],r.rttn).$compact()}),m.$private(),Y(m,"$format_skill",function(r,e){return this.$format(r,x(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:e.$category_dice(),row_dice:e.$row_dice(),category_name:e.$category_name(),skill_name:e.$name(),text:e.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function($){var H,L,g,q,R,_,p,T,y,K=$.module,Q=$.klass,N=$.hash2,x=$.defs,B=$.truthy,E=$.def,W=$.rb_minus,U=[],J=$.nil;return H=U,L=y=[K(U[0],"BCDice")].concat(H),g=T=[K(y[0],"DiceTable")].concat(L),R=[q=Q(T[0],null,"Table")].concat(g),_=$.$r(R),(p=q.$$prototype).times=p.sides=p.name=p.items=J,x(q,"$from_i18n",function(z,v){var m=J;return m=_("I18n").$t(z,N(["locale"],{locale:v})),this.$new(m["$[]"]("name"),m["$[]"]("type"),m["$[]"]("items"))}),E(q,"$initialize",function(z,v,S){var m=this,M=J;return m.name=z,m.items=S.$freeze(),M=/(\d+)D(\d+)/i.$match(v),B(M)||m.$raise(_("ArgumentError"),"Unexpected table type: "+v),m.times=M["$[]"](1).$to_i(),m.sides=M["$[]"](2).$to_i()}),E(q,"$roll",function(z){var S,v=this;return S=z.$roll_sum(v.times,v.sides),v.$choice(S)}),E(q,"$choice",function(z){var S,v=this;return S=W(z,v.times),_("RollResult").$new(v.name,z,v.items["$[]"](S))})},Opal.modules["bcdice/dice_table"]=function($){var K=$.top;return K.$require("bcdice/dice_table/roll_result"),K.$require("bcdice/dice_table/chain_table"),K.$require("bcdice/dice_table/d66_grid_table"),K.$require("bcdice/dice_table/d66_half_grid_table"),K.$require("bcdice/dice_table/d66_one_third_table"),K.$require("bcdice/dice_table/d66_left_range_table"),K.$require("bcdice/dice_table/d66_parity_table"),K.$require("bcdice/dice_table/d66_range_table"),K.$require("bcdice/dice_table/d66_table"),K.$require("bcdice/dice_table/range_table"),K.$require("bcdice/dice_table/sai_fic_skill_table"),K.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function($){var E,Y,F,U,K=$.module,Q=$.const_set,N=[];return E=N,Y=U=[K(N[0],"BCDice")].concat(E),F=[K(U[0],"D66SortType")].concat(Y),Q(F[0],"NO_SORT","no_sort"),Q(F[0],"ASC","asc"),Q(F[0],"DESC","desc"),function(J,Y){var F=[K(J,"RoundType")].concat(Y);return Q(F[0],"CEIL","ceil"),Q(F[0],"FLOOR","floor"),Q(F[0],"ROUND","round")}(U[0],U)},Opal.modules["bcdice/translate"]=function($){var Y,A,L,k,T,F,K=$.module,Q=$.ensure_kwargs,N=$.kwrestargs,B=$.hash2,E=$.def,W=[],U=$.nil;return Y=W,A=F=[K(W[0],"BCDice")].concat(Y),k=[L=K(F[0],"Translate")].concat(A),T=$.$r(k),E(L,"$translate",function(b,g){var q,R=this;return null==R.locale&&(R.locale=U),g=Q(g),q=N(g,{}),T("I18n").$translate(b,B(["locale","raise"],{locale:R.locale,raise:!0}).$merge($.to_hash(q)))},-2)},Opal.modules["bcdice/result"]=function($){var L,I,k,Y,F,Q=$.klass,N=$.send,x=$.def,B=$.return_val,E=$.return_ivar,W=[],U=$.nil;return Y=W,L=F=[(0,$.module)(W[0],"BCDice")].concat(Y),[k=Q(F[0],null,"Result")].concat(L),x(I=$.get_singleton_class(k),"$success",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),N(p,"success=",f=[!0]),f[f.length-1]})}),x(I,"$failure",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),N(p,"failure=",f=[!0]),f[f.length-1]})}),x(I,"$critical",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),p["$critical="](!0),N(p,"success=",f=[!0]),f[f.length-1]})}),x(I,"$fumble",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),p["$fumble="](!0),N(p,"failure=",f=[!0]),f[f.length-1]})}),x(I,"$nothing",B("nothing")),x(k,"$initialize",function(b){var g=this;return null==b&&(b=U),g.text=b,g.rands=U,g.detailed_rands=U,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),x(k,"$secret?",E("secret")),x(k,"$success?",E("success")),x(k,"$failure?",E("failure")),x(k,"$critical?",E("critical")),x(k,"$fumble?",E("fumble")),x(k,"$condition=",function(b){return this.success=b,this.failure=b["$!"]()})},Opal.modules["racc/parser"]=function($){var z,S,m,K=$.module,Q=$.klass,N=$.truthy,x=$.const_set,B=$.defs,E=$.gvars,W=$.rb_lt,U=$.def,J=$.to_ary,Y=$.send,H=$.neqeq,F=$.rb_plus,y=$.eqeq,A=$.rb_ge,L=$.rb_gt,k=$.rb_minus,T=$.rb_le,I=$.rb_times,b=$.assign_ivar_val,q=[],R=$.$r(q),_=$.nil,p=$.$$$;return z=q,S=[K(q[0],"Racc")].concat(z),m=$.$r(S),Q(S[0],m("StandardError"),"ParseError"),N(p("::","ParseError","skip_raise")?"constant":_)||x(q[0],"ParseError",p(R("Racc"),"ParseError")),function(f,z){var a,r,e,n,t,m=[K(f,"Racc")].concat(z),M=$.$r(m);return N(M("Racc_No_Extensions","skip_raise")?"constant":_)||x(m[0],"Racc_No_Extensions",!1),a=m,e=[r=Q(m[0],null,"Parser")].concat(a),n=$.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,x(e[0],"Racc_Runtime_Version","1.4.6"),x(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),x(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),x(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),x(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),x(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),x(e[0],"Racc_Runtime_Core_Version",n("Racc_Runtime_Core_Version_R")),x(e[0],"Racc_Runtime_Core_Revision",n("Racc_Runtime_Core_Revision_R")),x(e[0],"Racc_Runtime_Type","ruby"),B(n("Parser"),"$racc_runtime_type",function(){return n("Racc_Runtime_Type")}),U(r,"$_racc_setup",function(){var i,c,o=this,j=_,C=_;return null==E.stderr&&(E.stderr=_),N(p(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),N(null!=(i=o.yydebug)&&i!==_?"instance-variable":_)||(o.yydebug=!1),N(o.yydebug)&&(N(null!=(c=o.racc_debug_out)&&c!==_?"instance-variable":_)||(o.racc_debug_out=E.stderr),o.racc_debug_out=N(j=o.racc_debug_out)?j:E.stderr),C=p(o.$class(),"Racc_arg"),N(W(C.$size(),14))&&C["$[]="](13,!0),C}),U(r,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=_,i.racc_val=_,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),U(r,"$do_parse",function(){return this.$__send__(n("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),U(r,"$next_token",function(){return this.$raise(n("NotImplementedError"),this.$class()+"#next_token is not defined")}),U(r,"$_racc_do_parse_rb",function(i,c){var o,C=this,O=_,te=_,ne=_,ae=_,oe=_,ue=_,ie=_,X=_;return o=J(i),O=null==o[0]?_:o[0],te=null==o[1]?_:o[1],ne=null==o[2]?_:o[2],ae=null==o[3]?_:o[3],oe=null==o[10]?_:o[10],C.$_racc_init_sysvars(),ue=ie=X=_,Y(C,"catch",["racc_end_parse"],function D(){var V,Z,u=null==D.$$s?this:D.$$s,w=_;for(null==u.racc_state&&(u.racc_state=_),null==u.racc_read_next&&(u.racc_read_next=_),null==u.racc_t&&(u.racc_t=_),null==u.yydebug&&(u.yydebug=_),null==u.racc_val&&(u.racc_val=_);N(!0);)for(N(X=ae["$[]"](u.racc_state["$[]"](-1)))?(N(u.racc_read_next)&&H(u.racc_t,0)&&(Z=u.$next_token(),V=J(Z),ue=null==V[0]?_:V[0],u.racc_val=null==V[1]?_:V[1],u.racc_t=N(ue)?N(w=oe["$[]"](ue))?w:1:0,N(u.yydebug)&&u.$racc_read_token(u.racc_t,ue,u.racc_val),u.racc_read_next=!1),X=F(X,u.racc_t),N(A(X,0))&&N(ie=O["$[]"](X))&&y(te["$[]"](X),u.racc_state["$[]"](-1))||(ie=ne["$[]"](u.racc_state["$[]"](-1)))):ie=ne["$[]"](u.racc_state["$[]"](-1));N(ie=u.$_racc_evalact(ie,i)););},{$$s:C})}),U(r,"$yyparse",function(i,c){return this.$__send__(n("Racc_YY_Parse_Method"),i,c,this.$_racc_setup(),!0)}),U(r,"$_racc_yyparse_rb",function(i,c,o,j){var C,ne=_,ae=_,le=_,oe=_,ie=_,X=_,D=_;return C=J(o),ne=null==C[0]?_:C[0],ae=null==C[1]?_:C[1],le=null==C[2]?_:C[2],oe=null==C[3]?_:C[3],ie=null==C[10]?_:C[10],this.$_racc_init_sysvars(),X=_,D=_,Y(this,"catch",["racc_end_parse"],function V(){var Z=null==V.$$s?this:V.$$s;for(null==Z.racc_state&&(Z.racc_state=_);!N(D=oe["$[]"](Z.racc_state["$[]"](-1)));)for(;N(X=Z.$_racc_evalact(le["$[]"](Z.racc_state["$[]"](-1)),o)););return Y(i,"__send__",[c],function u(w,P){var G=null==u.$$s?this:u.$$s,se=_,$e=_;for(null==G.racc_t&&(G.racc_t=_),null==G.racc_state&&(G.racc_state=_),null==G.racc_read_next&&(G.racc_read_next=_),null==w&&(w=_),null==P&&(P=_),G.racc_t=N(w)?N(se=ie["$[]"](w))?se:1:0,G.racc_val=P,G.racc_read_next=!1,D=F(D,G.racc_t),N(A(D,0))&&N(X=ne["$[]"](D))&&y(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));N(X=G.$_racc_evalact(X,o)););for(;N(N(se=N($e=(D=oe["$[]"](G.racc_state["$[]"](-1)))["$!"]())?$e:G.racc_read_next["$!"]())?se:G.racc_t["$=="](0));)for(N(D)&&N(D=F(D,G.racc_t))&&N(A(D,0))&&N(X=ne["$[]"](D))&&y(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));N(X=G.$_racc_evalact(X,o)););},{$$s:Z})},{$$s:this})}),U(r,"$_racc_evalact",function(i,c){var o,le,C=this,O=_,te=_,ae=_,oe=_,ue=_,ie=_;if(O=null==(o=J(c))[0]?_:o[0],te=null==o[1]?_:o[1],ae=null==o[3]?_:o[3],le=null==o[11]?_:o[11],oe=null==o[12]?_:o[12],N(L(i,0))&&N(W(i,le)))N(L(C.racc_error_status,0))&&(y(C.racc_t,1)||(C.racc_error_status=k(C.racc_error_status,1))),C.racc_vstack.$push(C.racc_val),C.racc_state.$push(i),C.racc_read_next=!0,N(C.yydebug)&&(C.racc_tstack.$push(C.racc_t),C.$racc_shift(C.racc_t,C.racc_tstack,C.racc_vstack));else if(N(W(i,0))&&N(L(i,oe["$-@"]()))){if(ue=Y(C,"catch",["racc_jump"],function X(){var D=null==X.$$s?this:X.$$s;return null==D.racc_state&&(D.racc_state=_),D.racc_state.$push(D.$_racc_do_reduce(c,i)),!1},{$$s:C}),N(ue))switch(ue.valueOf()){case 1:return C.racc_user_yyerror=!0,oe["$-@"]();case 2:return le;default:C.$raise("[Racc Bug] unknown jump code")}}else if(y(i,le))N(C.yydebug)&&C.$racc_accept(),C.$throw("racc_end_parse",C.racc_vstack["$[]"](0));else{if(y(i,oe["$-@"]())){switch(C.racc_error_status.valueOf()){case 0:N(c["$[]"](21))||C.$on_error(C.racc_t,C.racc_val,C.racc_vstack);break;case 3:y(C.racc_t,0)&&C.$throw("racc_end_parse",_),C.racc_read_next=!0}for(C.racc_user_yyerror=!1,C.racc_error_status=3;N(!0)&&!(N(ie=ae["$[]"](C.racc_state["$[]"](-1)))&&(ie=F(ie,1),N(A(ie,0))&&N(i=O["$[]"](ie))&&y(te["$[]"](ie),C.racc_state["$[]"](-1))));)N(T(C.racc_state.$size(),1))&&C.$throw("racc_end_parse",_),C.racc_state.$pop(),C.racc_vstack.$pop(),N(C.yydebug)&&(C.racc_tstack.$pop(),C.$racc_e_pop(C.racc_state,C.racc_tstack,C.racc_vstack));return i}C.$raise("[Racc Bug] unknown action "+i.$inspect())}return N(C.yydebug)&&C.$racc_next_state(C.racc_state["$[]"](-1),C.racc_state),_}),U(r,"$_racc_do_reduce",function(i,c){var o,oe,ie,w,P,G,ce,C=this,te=_,ne=_,ae=_,le=_,ue=_,X=_,D=_,V=_,Z=_,u=_,se=_,$e=_,fe=_;return te=null==(o=J(i))[4]?_:o[4],ne=null==o[5]?_:o[5],ae=null==o[6]?_:o[6],le=null==o[7]?_:o[7],oe=null==o[8]?_:o[8],ue=null==o[9]?_:o[9],ie=null==o[13]?_:o[13],X=C.racc_state,D=C.racc_vstack,V=C.racc_tstack,Z=I(c,-3),u=ue["$[]"](Z),w=ue["$[]"](F(Z,1)),P=ue["$[]"](F(Z,2)),G=[],N(C.yydebug)&&(se=V["$[]"](u["$-@"](),u)),$e=D["$[]"](u["$-@"](),u),N(C.yydebug)&&V["$[]="](u["$-@"](),u,G),D["$[]="](u["$-@"](),u,G),X["$[]="](u["$-@"](),u,G),N(ie)?D.$push(C.$__send__(P,$e,D,$e["$[]"](0))):D.$push(C.$__send__(P,$e,D)),V.$push(w),N(C.yydebug)&&C.$racc_reduce(se,w,V,D),ce=k(w,oe),N(Z=le["$[]"](ce))&&(Z=F(Z,X["$[]"](-1)),N(A(Z,0))&&N(fe=te["$[]"](Z))&&y(ne["$[]"](Z),ce))?fe:ae["$[]"](ce)}),U(r,"$on_error",function(i,c,o){var C,j=this;return j.$raise(n("ParseError"),j.$sprintf("\nparse error on value %s (%s)",c.$inspect(),N(C=j.$token_to_str(i))?C:"?"))}),U(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),U(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),U(r,"$yyerrok",b("racc_error_status",0)),U(r,"$racc_read_token",function(i,c,o){var j=this;return j.racc_debug_out.$print("read    "),j.racc_debug_out.$print(c.$inspect(),"(",j.$racc_token2str(i),") "),j.racc_debug_out.$puts(o.$inspect()),j.racc_debug_out.$puts()}),U(r,"$racc_shift",function(i,c,o){var j=this;return j.racc_debug_out.$puts("shift   "+j.$racc_token2str(i)),j.$racc_print_stacks(c,o),j.racc_debug_out.$puts()}),U(r,"$racc_reduce",function(i,c,o,j){var C=this,O=_;return(O=C.racc_debug_out).$print("reduce "),N(i["$empty?"]())?O.$print(" <none>"):Y(i,"each",[],function te(ne){return null==ne&&(ne=_),O.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(ne))},{$$s:C}),O.$puts(" --\x3e "+C.$racc_token2str(c)),C.$racc_print_stacks(o,j),C.racc_debug_out.$puts()}),U(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),U(r,"$racc_e_pop",function(i,c,o){var j=this;return j.racc_debug_out.$puts("error recovering mode: pop token"),j.$racc_print_states(i),j.$racc_print_stacks(c,o),j.racc_debug_out.$puts()}),U(r,"$racc_next_state",function(i,c){var o=this;return o.racc_debug_out.$puts("goto    "+i),o.$racc_print_states(c),o.racc_debug_out.$puts()}),U(r,"$racc_print_stacks",function(i,c){var j=_;return(j=this.racc_debug_out).$print("        ["),Y(i,"each_index",[],function C(O){return null==O&&(O=_),j.$print(" (",(null==C.$$s?this:C.$$s).$racc_token2str(i["$[]"](O))," ",c["$[]"](O).$inspect(),")")},{$$s:this}),j.$puts(" ]")}),U(r,"$racc_print_states",function(i){var o=_;return(o=this.racc_debug_out).$print("        ["),Y(i,"each",[],function(C){return null==C&&(C=_),o.$print(" ",C)}),o.$puts(" ]")}),U(r,"$racc_token2str",function(i){var o;return N(o=p(this.$class(),"Racc_token_to_s_table")["$[]"](i))?o:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),U(r,"$token_to_str",function(i){return p(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(q[0],q)},Opal.modules["bcdice/arithmetic/node"]=function($){var b,_,v,a,r,m,M,f,q,K=$.module,Q=$.klass,N=$.def,x=$.thrower,B=$.return_ivar,E=$.send2,W=$.find_super,U=$.eqeq,J=$.const_set,Y=$.eqeqeq,H=$.rb_divide,F=$.truthy,y=$.assign_ivar,A=$.alias,L=[],k=$.nil,T=$.$$$;return b=L,_=q=[K(L[0],"BCDice")].concat(b),v=f=[K(q[0],"Arithmetic")].concat(_),m=[K(f[0],"Node")].concat(v),M=$.$r(m),(r=(a=Q(m[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=k,N(a,"$initialize",function(n,t,s){var i=this;return i.lhs=n,i.op=t,i.rhs=s}),N(a,"$eval",function(n){try{x("eval_return");var c,s=this,i=k;return i=s.lhs.$eval(n),c=s.rhs.$eval(n),i.$send(s.op,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),N(a,"$output",function(){var n=this;return""+n.lhs.$output()+n.op+n.rhs.$output()}),N(a,"$s_exp",function(){var n=this;return"("+n.$op_for_s_exp()+" "+n.lhs.$s_exp()+" "+n.rhs.$s_exp()+")"}),N(a,"$op_for_s_exp",B("op")),function(h,d,a){var r=Q(h,d,"DivideBase"),e=[r].concat(a),n=$.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=k,N(r,"$initialize",function s(i,c){return s.$$p=null,E(this,W(this,"initialize",s,!1,!0),"initialize",[i,"/",c],null)}),N(r,"$eval",function(i){try{x("eval_return");var j,C,o=this;return j=o.lhs.$eval(i),C=o.rhs.$eval(i),U(C,0)&&o.$raise(n("ZeroDivisionError")),o.$divide_and_round(j,C,i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),N(r,"$output",function s(){var i=s.$$p||k,c=this;return s.$$p=null,""+E(c,W(c,"output",s,!1,!0),"output",[],i)+c.$rounding_method()}),r.$private(),N(r,"$rounding_method",function(){return T(this.$class(),"ROUNDING_METHOD")}),N(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),N(r,"$divide_and_round",function(i,c,o){return this.$raise(n("NotImplementedError"))})}(m[0],M("BinaryOp"),m),function(h,d,a){var r=Q(h,d,"DivideWithGameSystemDefault"),e=[r].concat(a),n=$.$r(e);J(e[0],"ROUNDING_METHOD",""),r.$private(),N(r,"$divide_and_round",function(s,i,c){var o,j=k;return Y(T(n("RoundType"),"CEIL"),o=c)?H(s.$to_f(),i).$ceil():Y(T(n("RoundType"),"ROUND"),o)?(j=H(s.$to_f(),i),F(j["$negative?"]())?j.$abs().$round()["$-@"]():j.$round()):H(s,i).$floor()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithCeil"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","C"),r.$private(),N(r,"$divide_and_round",function(t,s,i){return H(t.$to_f(),s).$ceil()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithRound"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","R"),r.$private(),N(r,"$divide_and_round",function(t,s,i){var c=k;return c=H(t.$to_f(),s),F(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithFloor"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","F"),r.$private(),N(r,"$divide_and_round",function(t,s,i){return H(t,s).$floor()})}(m[0],M("DivideBase"),m),function(h,d){var a=Q(h,null,"Negative");a.$$prototype.body=k,N(a,"$initialize",y("body")),N(a,"$eval",function(n){try{return x("eval_return"),this.body.$eval(n)["$-@"]()}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),N(a,"$output",function(){return"-"+this.body.$output()}),N(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(m[0]),function(h,d){var a=Q(h,null,"Parenthesis");a.$$prototype.expr=k,N(a,"$initialize",y("expr")),N(a,"$eval",function(n){try{return x("eval_return"),this.expr.$eval(n)}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),N(a,"$output",function(){return"("+this.expr.$output()+")"}),N(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(m[0]),function(h,d){var a=Q(h,null,"Number");return a.$$prototype.value=k,N(a,"$initialize",y("value")),N(a,"$eval",B("value")),N(a,"$output",function(){return this.value.$to_s()}),A(a,"s_exp","output")}(m[0])},Opal.modules.strscan=function($){var y,A,L,k,T,Q=$.def,N=$.truthy,x=$.eqeqeq,B=$.Opal,E=$.return_ivar,W=$.send,U=$.alias,J=[],Y=$.nil;return y=J,L=[A=(0,$.klass)(J[0],null,"StringScanner")].concat(y),k=$.$r(L),(T=A.$$prototype).pos=T.string=T.working=T.matched=T.prev_pos=T.match=Y,A.$attr_reader("pos","matched"),Q(A,"$initialize",function(b){var g=this;return g.string=b,g.pos=0,g.matched=Y,g.working=b,g.match=[]}),A.$attr_reader("string"),Q(A,"$beginning_of_line?",function(){var b=this;return 0===b.pos||"\n"===b.string.charAt(b.pos-1)}),Q(A,"$scan",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?g.matched=Y:(g.prev_pos=g.pos,g.pos+=q[0].length,g.working=g.working.substring(q[0].length),g.matched=q[0],g.match=q,q[0])}),Q(A,"$scan_until",function(b){var g=this;b=g.$anchor(b);for(var q=g.working,R=0;q.length!=R;++R){var _=b.exec(q.substr(R));if(null!==_){var p=R+_[0].length,f=q.substr(0,p);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+R,g.pos+=p,g.working=q.substr(p),f}}return g.matched=Y}),Q(A,"$[]",function(b){var q;if(N(this.match["$empty?"]()))return Y;x(k("Symbol"),q=b)?b=b.$to_s():x(k("String"),q)||(b=B["$coerce_to!"](b,k("Integer"),"to_int"));var R=this.match;return b<0&&(b+=R.length),b<0||b>=R.length||null==R[b]?Y:R[b]}),Q(A,"$check",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return g.matched=null==q?Y:q[0]}),Q(A,"$check_until",function(b){var g=this,q=g.prev_pos,R=g.pos,_=g.working,p=g.$scan_until(b);return g.prev_pos=q,g.pos=R,g.working=_,p}),Q(A,"$peek",function(b){return this.working.substring(0,b)}),Q(A,"$eos?",function(){return 0===this.working.length}),Q(A,"$exist?",function(b){var q=b.exec(this.working);return null==q?Y:0==q.index?0:q.index+1}),Q(A,"$skip",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);if(null==q)return g.match=[],g.matched=Y;var R=q[0],_=R.length;return g.matched=R,g.match=q,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),Q(A,"$skip_until",function(b){var q=this.$scan_until(b);return q===Y?Y:(this.matched=q.substr(-1),q.length)}),Q(A,"$get_byte",function(){var b=this,g=Y;return b.pos<b.string.length?(b.prev_pos=b.pos,b.pos+=1,g=b.matched=b.working.substring(0,1),b.working=b.working.substring(1)):b.matched=Y,g}),Q(A,"$match?",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?Y:(g.prev_pos=g.pos,q[0].length)}),Q(A,"$pos=",function(b){var g=this;return b<0&&(b+=g.string.$length()),g.pos=b,g.working=g.string.slice(b)}),Q(A,"$matched_size",function(){return this.matched===Y?Y:this.matched.length}),Q(A,"$post_match",function(){var b=this;return b.matched===Y?Y:b.string.substr(b.pos)}),Q(A,"$pre_match",function(){var b=this;return b.matched===Y?Y:b.string.substr(0,b.prev_pos)}),Q(A,"$reset",function(){var b=this;return b.working=b.string,b.matched=Y,b.pos=0}),Q(A,"$rest",E("working")),Q(A,"$rest?",function(){return 0!==this.working.length}),Q(A,"$rest_size",function(){return this.$rest().$size()}),Q(A,"$terminate",function(){var b,g=this;return g.match=Y,b=[g.string.$length()],W(g,"pos=",b),b[b.length-1]}),Q(A,"$unscan",function(){var b=this;return b.pos=b.prev_pos,b.prev_pos=Y,b.match=Y,b}),U(A,"bol?","beginning_of_line?"),U(A,"getch","get_byte"),A.$private(),Q(A,"$anchor",function(b){var g=b.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+b.source+")",g)})},Opal.modules["bcdice/normalize"]=function($){var U,F,Y,K=$.module,Q=$.eqeqeq,N=$.def,x=$.eqeq,B=[],E=$.nil;return U=B,Y=[K(B[0],"BCDice")].concat(U),(F=K(Y[0],"Normalize")).$module_function(),N(F,"$comparison_operator",function(A){var L;return Q(/<=|=</,L=A)?"<=":Q(/>=|=>/,L)?">=":Q(/<>|!=|=!/,L)?"!=":Q(/</,L)?"<":Q(/>/,L)?">":Q(/=/,L)?"==":E}),N(F,"$target_number",function(A){return x(A,"?")?A:A.$to_i()})},Opal.modules["bcdice/command/lexer"]=function($){var y,T,R,_,p,f,z,b,L,K=$.module,Q=$.klass,N=$.const_set,x=$.hash2,B=$.truthy,E=$.send,W=$.def,U=$.thrower,J=$.top,Y=[],H=$.nil;return J.$require("strscan"),J.$require("bcdice/normalize"),y=Y,T=L=[K(Y[0],"BCDice")].concat(y),R=b=[K(L[0],"Command")].concat(T),p=[_=Q(b[0],null,"Lexer")].concat(R),f=$.$r(p),(z=_.$$prototype).scanner=z.notations=H,N(p[0],"SYMBOLS",x(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),W(_,"$initialize",function(S,m){var M,h,a;return S=B(a=(M=(h=S)===H||null==h?H:h.$split(" ",2))===H||null==M?H:M.$first())?a:"",this.scanner=f("StringScanner").$new(S),this.notations=E(m,"map",[],function(e){return null==e&&(e=H),B(e["$is_a?"](f("String")))?f("Regexp").$new(e):e})}),W(_,"$next_token",function(){try{var S=U("return"),m=this,M=H,h=H,a=H,r=H;return B(m.scanner["$eos?"]())?[!1,"$"]:(E(m.notations,"each",[],function e(n){var s,t=null==e.$$s?this:e.$$s;if(null==t.scanner&&(t.scanner=H),null==n&&(n=H),s=t.scanner.$scan(n),!B(s))return H;S.$throw(["NOTATION",s])},{$$s:m,$$ret:S}),B(M=m.scanner.$scan(/\d+/))?["NUMBER",M.$to_i()]:B(h=m.scanner.$scan(/[<>!=]+/))?(h=f("Normalize").$comparison_operator(h),[B(h)?"CMP_OP":"ILLEGAL",h]):(a=m.scanner.$getch().$upcase(),[B(r=f("SYMBOLS")["$[]"](a))?r:a.$to_sym(),a]))}catch(e){if(e===S)return e.$v;throw e}}),W(_,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function($){var J,y,I,b,g,q,R,L,H,K=$.module,Q=$.klass,N=$.def,x=$.return_ivar,B=$.truthy,E=[],W=$.nil;return J=E,y=H=[K(E[0],"BCDice")].concat(J),I=L=[K(H[0],"Command")].concat(y),g=[b=Q(L[0],null,"Parsed")].concat(I),q=$.$r(g),(R=b.$$prototype).critical=R.fumble=R.dollar=R.modify_number=R.question_target=R.target_number=R.prefix_number=R.command=R.suffix_number=R.cmp_op=W,b.$attr_accessor("command"),b.$attr_accessor("prefix_number"),b.$attr_accessor("suffix_number"),b.$attr_accessor("critical"),b.$attr_accessor("fumble"),b.$attr_accessor("dollar"),b.$attr_accessor("modify_number"),b.$attr_accessor("cmp_op"),b.$attr_accessor("target_number"),b.$attr_writer("question_target"),N(b,"$initialize",function(){var p=this;return p.prefix_number=W,p.suffix_number=W,p.critical=W,p.fumble=W,p.dollar=W,p.cmp_op=W,p.target_number=W,p.question_target=!1}),N(b,"$question_target?",x("question_target")),N(b,"$to_s",function(p){var f=this,z=W,v=W,S=W,m=W,M=W;switch(null==p&&(p="after_command"),z=B(f.critical)?"@"+f.critical:W,v=B(f.fumble)?"#"+f.fumble:W,S=B(f.dollar)?"$"+f.dollar:W,m=q("Format").$modifier(f.modify_number),M=B(f.question_target)?"?":f.target_number,p.valueOf()){case"after_command":return[f.prefix_number,f.command,f.suffix_number,z,v,S,m,f.cmp_op,M].$join();case"after_modify_number":return[f.prefix_number,f.command,f.suffix_number,m,z,v,S,f.cmp_op,M].$join();case"after_target_number":return[f.prefix_number,f.command,f.suffix_number,m,f.cmp_op,M,z,v,S].$join();default:return W}},-1)},Opal.modules["bcdice/command/parser"]=function($){var p,S,r,c,o,j,C,O,te,ne,ae,le,ie,e,s,i,V,M,h,z,K=$.klass,Q=$.module,N=$.slice,x=$.extract_kwargs,B=$.ensure_kwargs,E=$.get_kwarg,W=$.send2,U=$.find_super,J=$.def,Y=$.send,H=$.eqeq,F=$.thrower,y=$.hash,A=$.const_set,L=$.truthy,k=$.to_ary,T=$.hash2,I=$.top,b=[],g=$.$r(b),q=$.nil,R=$.$$$;return I.$require("racc/parser.rb"),I.$require("bcdice/arithmetic/node"),I.$require("bcdice/command/lexer"),I.$require("bcdice/command/parsed"),K(R(g("BCDice"),"Command"),R(g("Racc"),"Parser"),"Parser"),p=b,S=z=[Q(b[0],"BCDice")].concat(p),M=[Q(z[0],"Command")].concat(S),h=$.$r(M),r=M,s=[e=K(M[0],R(h("Racc"),"Parser"),"Parser")].concat(r),i=$.$r(s),(V=e.$$prototype).notations=V.lexer=V.modifier=V.suffix_number=V.prefix_number=V.need_suffix_number=V.need_prefix_number=V.critical=V.fumble=V.dollar=V.allowed_cmp_op=V.question_target=q,J(e,"$initialize",function Z(u,w){var P,G,se,$e,fe=this;return Z.$$p=null,P=N(arguments),G=x(P),G=B(G),se=P,$e=E(G,"round_type"),W(fe,U(fe,"initialize",Z,!1,!0),"initialize",[],null),fe.notations=se,fe.round_type=$e,fe.prefix_number=!1,fe.suffix_number=!1,fe.need_prefix_number=!1,fe.need_suffix_number=!1,fe.modifier=!0,fe.critical=!1,fe.fumble=!1,fe.dollar=!1,fe.allowed_cmp_op=[q,">=",">","<=","<","==","!="],fe.question_target=!1},-2),J(e,"$disable_modifier",function(){return this.modifier=!1,this}),J(e,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),J(e,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),J(e,"$has_prefix_number",function(){var u=this;return u.prefix_number=!0,u.need_prefix_number=!0,u}),J(e,"$has_suffix_number",function(){var u=this;return u.suffix_number=!0,u.need_suffix_number=!0,u}),J(e,"$enable_critical",function(){return this.critical=!0,this}),J(e,"$enable_fumble",function(){return this.fumble=!0,this}),J(e,"$enable_dollar",function(){return this.dollar=!0,this}),J(e,"$restrict_cmp_op_to",function(u){var w;return w=N(arguments),this.allowed_cmp_op=w,this},-1),J(e,"$enable_question_target",function(){return this.question_target=!0,this}),J(e,"$parse",function(u){var w=this;try{return w.lexer=i("Lexer").$new(u,w.notations),w.$do_parse()}catch(P){if(!$.rescue(P,[i("ParseError"),i("ZeroDivisionError")]))throw P;try{return q}finally{$.pop_exception()}}}),e.$private(),J(e,"$parsed",function(u,w,P,G){try{return F("eval_return"),Y(i("Parsed").$new(),"tap",[],function ce(fe){var _e,de,me,he,ge,ve,pe,be=null==ce.$$s?this:ce.$$s;return null==be.round_type&&(be.round_type=q),null==fe&&(fe=q),fe["$command="](u["$[]"]("command")),fe["$prefix_number="]((_e=u["$[]"]("prefix"))===q||null==_e?q:_e.$eval(be.round_type)),fe["$suffix_number="]((de=u["$[]"]("suffix"))===q||null==de?q:de.$eval(be.round_type)),fe["$critical="]((me=w["$[]"]("critical"))===q||null==me?q:me.$eval(be.round_type)),fe["$fumble="]((he=w["$[]"]("fumble"))===q||null==he?q:he.$eval(be.round_type)),fe["$dollar="]((ge=w["$[]"]("dollar"))===q||null==ge?q:ge.$eval(be.round_type)),fe["$modify_number="](P.$eval(be.round_type)),fe["$cmp_op="](G["$[]"]("cmp_op")),H(G["$[]"]("target"),"?")?(fe["$question_target="](!0),Y(fe,"target_number=",ve=[0]),ve[ve.length-1]):(fe["$question_target="](!1),ve=[(pe=G["$[]"]("target"),pe===q||null==pe?q:pe.$eval(be.round_type))],Y(fe,"target_number=",ve),ve[ve.length-1])},{$$s:this})}catch(ce){if(ce===$.t_eval_return)return ce.$v;throw ce}}),J(e,"$next_token",function(){return this.lexer.$next_token()}),c=$.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),o=$.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),j=$.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),C=$.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),O=$.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),te=$.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),ne=[q,6,13,3,9,-1,27,-15,-10,-1,-38],ae=[q,q,q,q,q,q,19,16,15,q,q],le=$.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ie=y(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),A(s[0],"Racc_arg",[c,o,C,j,O,te,ae,ne,19,le,ie,58,35,!0]),L(i("Ractor","skip_raise")?"constant":q)&&i("Ractor").$make_shareable(i("Racc_arg")),A(s[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),L(i("Ractor","skip_raise")?"constant":q)&&i("Ractor").$make_shareable(i("Racc_token_to_s_table")),A(s[0],"Racc_debug_parser",!1),J(e,"$_reduce_1",function(u,w,P){var G;return L(this.modifier)||this.$raise(i("ParseError")),G=k(u),this.$parsed(null==G[0]?q:G[0],null==G[1]?q:G[1],null==G[2]?q:G[2],null==G[3]?q:G[3])}),J(e,"$_reduce_2",function(u,w,P){var G;return L(this.modifier)||this.$raise(i("ParseError")),G=k(u),this.$parsed(null==G[0]?q:G[0],null==G[2]?q:G[2],null==G[1]?q:G[1],null==G[3]?q:G[3])}),J(e,"$_reduce_3",function(u,w,P){var G,_e;return _e=null==(G=k(u))[2]?q:G[2],this.$parsed(null==G[0]?q:G[0],null==G[1]?q:G[1],R(R(i("Arithmetic"),"Node"),"Number").$new(0),_e)}),J(e,"$_reduce_4",function(u,w,P){var G=this;return L(G.prefix_number)&&L(G.suffix_number)||G.$raise(i("ParseError")),T(["command","prefix","suffix"],{command:u["$[]"](1),prefix:u["$[]"](0),suffix:u["$[]"](2)})}),J(e,"$_reduce_5",function(u,w,P){var G=this;return L(G.prefix_number)||G.$raise(i("ParseError")),L(G.need_suffix_number)&&G.$raise(i("ParseError")),T(["command","prefix"],{command:u["$[]"](1),prefix:u["$[]"](0)})}),J(e,"$_reduce_6",function(u,w,P){var G=this;return L(G.suffix_number)||G.$raise(i("ParseError")),L(G.need_prefix_number)&&G.$raise(i("ParseError")),T(["command","suffix"],{command:u["$[]"](0),suffix:u["$[]"](1)})}),J(e,"$_reduce_7",function(u,w,P){var G=this;return(L(G.need_prefix_number)||L(G.need_suffix_number))&&G.$raise(i("ParseError")),T(["command"],{command:u["$[]"](0)})}),J(e,"$_reduce_8",function(u,w,P){return T([],{})}),J(e,"$_reduce_9",function(u,w,P){var G,_e,ce=q;return ce=null==(G=k(u))[0]?q:G[0],_e=null==G[2]?q:G[2],L(this.critical)&&L(ce["$[]"]("critical")["$nil?"]())||this.$raise(i("ParseError")),ce["$[]="]("critical",_e),ce}),J(e,"$_reduce_10",function(u,w,P){var G,_e,ce=q;return ce=null==(G=k(u))[0]?q:G[0],_e=null==G[2]?q:G[2],L(this.fumble)&&L(ce["$[]"]("fumble")["$nil?"]())||this.$raise(i("ParseError")),ce["$[]="]("fumble",_e),ce}),J(e,"$_reduce_11",function(u,w,P){var G,_e,ce=q;return ce=null==(G=k(u))[0]?q:G[0],_e=null==G[2]?q:G[2],L(this.dollar)&&L(ce["$[]"]("dollar")["$nil?"]())||this.$raise(i("ParseError")),ce["$[]="]("dollar",_e),ce}),J(e,"$_reduce_12",function(u,w,P){return u["$[]"](1)}),J(e,"$_reduce_13",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"Negative").$new(u["$[]"](1))}),J(e,"$_reduce_14",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"+",u["$[]"](2))}),J(e,"$_reduce_15",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"-",u["$[]"](2))}),J(e,"$_reduce_16",function(u,w,P){return L(this.allowed_cmp_op["$include?"](q))||this.$raise(i("ParseError")),T([],{})}),J(e,"$_reduce_17",function(u,w,P){var G,ce,fe;return fe=null==(G=k(u))[1]?q:G[1],L(this.allowed_cmp_op["$include?"](ce=null==G[0]?q:G[0]))||this.$raise(i("ParseError")),T(["cmp_op","target"],{cmp_op:ce,target:fe})}),J(e,"$_reduce_18",function(u,w,P){var se,G=this;return se=u["$[]"](0),L(G.question_target)||G.$raise(i("ParseError")),L(G.allowed_cmp_op["$include?"](se))||G.$raise(i("ParseError")),T(["cmp_op","target"],{cmp_op:se,target:"?"})}),J(e,"$_reduce_19",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"+",u["$[]"](2))}),J(e,"$_reduce_20",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"-",u["$[]"](2))}),J(e,"$_reduce_22",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"*",u["$[]"](2))}),J(e,"$_reduce_23",function(u,w,P){return u["$[]"](3).$new(u["$[]"](0),u["$[]"](2))}),J(e,"$_reduce_25",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),J(e,"$_reduce_26",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"DivideWithCeil")}),J(e,"$_reduce_27",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"DivideWithCeil")}),J(e,"$_reduce_28",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"DivideWithRound")}),J(e,"$_reduce_29",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"DivideWithFloor")}),J(e,"$_reduce_30",function(u,w,P){return u["$[]"](1)}),J(e,"$_reduce_31",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"Negative").$new(u["$[]"](1))}),J(e,"$_reduce_33",function(u,w,P){return u["$[]"](1)}),J(e,"$_reduce_34",function(u,w,P){return R(R(i("Arithmetic"),"Node"),"Number").$new(u["$[]"](0))}),J(e,"$_reduce_none",function(u,w,P){return u["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function($){var Y,A,I,b,g,q,k,F,K=$.module,Q=$.send,N=$.eqeqeq,x=$.truthy,B=$.def,E=$.return_val,W=[],U=$.nil;return Y=W,A=F=[K(W[0],"BCDice")].concat(Y),I=k=[K(F[0],"Deprecated")].concat(A),g=[b=K(k[0],"Checker")].concat(I),q=$.$r(g),b.$private(),B(b,"$check_result_legacy",function(_,p,f,z){var M,v=this,S=U,m=U,h=U,d=U;return S=Q(p,"map",[],"sides".$to_proc()),M=(m=Q(p,"map",[],"value".$to_proc())).$sum(),h=N([100],d=S)?v.$check_1D100(_,M,f,z):N([20],d)?v.$check_1D20(_,M,f,z):N([6,6],d)?v.$check_2D6(_,M,m,f,z):U,(x(h["$nil?"]())||x(h["$empty?"]()))&&(h=N([10],d=S.$uniq())?v.$check_nD10(_,M,m,f,z):N([6],d)?v.$check_nD6(_,M,m,f,z):U,x(h["$nil?"]())||x(h["$empty?"]()))?U:q("Result").$new(h.$delete_prefix(" \uff1e "))}),B(b,"$check_1D100",E(U)),B(b,"$check_1D20",E(U)),B(b,"$check_nD10",E(U)),B(b,"$check_2D6",E(U)),B(b,"$check_nD6",E(U))},Opal.queue(function($){var g,v,d,t,i,c,a,r,e,n,m,K=$.module,Q=$.klass,N=$.slice,x=$.rb_plus,B=$.truthy,E=$.def,W=$.regexp,U=$.send,J=$.thrower,Y=$.return_ivar,H=$.assign_ivar_val,F=$.eqeqeq,y=$.eqeq,A=$.return_val,L=$.range,k=$.rb_minus,T=$.rb_divide,I=$.rb_times,b=$.rb_ge,q=$.top,R=[],_=$.$r(R),p=$.nil,f=$.$$$;return q.$require("i18n"),q.$require("i18n/backend/fallbacks"),q.$require("bcdice/randomizer"),q.$require("bcdice/dice_table"),q.$require("bcdice/enum"),q.$require("bcdice/translate"),q.$require("bcdice/result"),q.$require("bcdice/command/parser"),q.$require("bcdice/deprecated/checker"),v=R,d=m=[K(R[0],"BCDice")].concat(v),r=[a=Q(m[0],null,"Base")].concat(d),e=$.$r(r),(n=a.$$prototype).raw_input=n.randomizer=n.enabled_upcase_input=n.debug=p,i=[t=$.get_singleton_class(a)].concat(r),c=$.$r(i),t.$attr_reader("prefixes"),E(t,"$register_prefix",function(j){var O,ne;return null==this.prefixes&&(this.prefixes=p),O=N(arguments),this.prefixes=x(B(ne=this.prefixes)?ne:[],O.$flatten())},-1),E(t,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),E(t,"$prefixes_pattern",function(){var j=this,C=p;return null==j.prefixes_pattern&&(j.prefixes_pattern=p),null==j.prefixes&&(j.prefixes=p),j.prefixes_pattern=B(C=j.prefixes_pattern)?C:p,B(j.prefixes_pattern)?j.prefixes_pattern:(j.prefixes=B(C=j.prefixes)?C:[],j.prefixes.$freeze(),j.prefixes_pattern=(B(j.prefixes["$empty?"]())?/(?!)/:W(["^(S)?(",j.prefixes.$join("|"),")"],"i")).$freeze())}),E(t,"$command_pattern",function(){var j=this,C=p,O=p;return null==j.command_pattern&&(j.command_pattern=p),null==j.prefixes&&(j.prefixes=p),j.command_pattern=B(C=j.command_pattern)?C:p,B(j.command_pattern)?j.command_pattern:(j.prefixes=B(C=j.prefixes)?C:[],j.prefixes.$freeze(),O=x(U(f(c("CommonCommand"),"COMMANDS"),"map",[],function(ne){return null==ne&&(ne=p),f(ne,"PREFIX_PATTERN").$source()}),j.prefixes),j.command_pattern=W(["^S?(",O.$join("|"),")"],"i").$freeze())}),E(t,"$eval",function(j){try{return J("eval_return"),this.$new(j).$eval()}catch(te){if(te===$.t_eval_return)return te.$v;throw te}}),a.$include(e("Translate")),a.$include(f(e("Deprecated"),"Checker")),E(a,"$initialize",function(s){var i=this;return i.raw_input=s,i.sort_add_dice=!1,i.sort_barabara_dice=!1,i.d66_sort_type=f(e("D66SortType"),"NO_SORT"),i.enabled_d9=!1,i.round_type=f(e("RoundType"),"FLOOR"),i.sides_implicit_d=6,i.upper_dice_reroll_threshold=p,i.reroll_dice_reroll_threshold=p,i.default_cmp_op=p,i.default_target_number=p,i.enabled_upcase_input=!0,i.locale="ja_jp",i.randomizer=f(e("BCDice"),"Randomizer").$new(),i.debug=!1}),a.$attr_accessor("randomizer"),a.$attr_reader("d66_sort_type"),a.$attr_reader("round_type"),a.$attr_reader("sides_implicit_d"),a.$attr_reader("upper_dice_reroll_threshold"),a.$attr_reader("reroll_dice_reroll_threshold"),a.$attr_reader("default_cmp_op"),a.$attr_reader("default_target_number"),E(a,"$sort_add_dice?",Y("sort_add_dice")),E(a,"$sort_barabara_dice?",Y("sort_barabara_dice")),E(a,"$enabled_d9?",Y("enabled_d9")),E(a,"$enable_debug",H("debug",!0)),E(a,"$eval",function(){var i,o,s=this,c=p;return i=f(e("BCDice"),"Preprocessor").$process(s.raw_input,s),c=B(o=s.$dice_command(i))?o:s.$eval_common_command(s.raw_input),B(c)?(c["$rands="](s.randomizer.$rand_results()),c["$detailed_rands="](s.randomizer.$detailed_rand_results()),c):p}),E(a,"$change_text",function(s){return s}),E(a,"$check_result",function(s,i,c,o){var j=this,C=p,O=p,te=p,ne=p,ae=p;return C=j.$check_result_legacy(s,i,c,o),B(C)?C:(O=U(i,"map",[],"sides".$to_proc()),ne=(te=U(i,"map",[],"value".$to_proc())).$sum(),C=F([100],ae=O)?j.$result_1d100(s,ne,c,o):F([20],ae)?j.$result_1d20(s,ne,c,o):F([6,6],ae)?j.$result_2d6(s,ne,te,c,o):p,y(C,e("Result").$nothing())?p:B(C)?C:(C=F([10],ae=O.$uniq())?j.$result_nd10(s,ne,te,c,o):F([6],ae)?j.$result_nd6(s,ne,te,c,o):p,y(C,e("Result").$nothing())?p:B(C)?C:j.$result_ndx(s,c,o)))}),E(a,"$grich_text",A(p)),a.$private(),E(a,"$eval_common_command",function(s){try{J("eval_return");var c=J("return");return s=this.$change_text(s),U(f(e("CommonCommand"),"COMMANDS"),"each",[],function j(C){var te,O=null==j.$$s?this:j.$$s;if(null==O.randomizer&&(O.randomizer=p),null==C&&(C=p),te=C.$eval(s,O,O.randomizer),!B(te))return p;c.$throw(te)},{$$s:this,$$ret:c}),p}catch(j){if(j===$.t_eval_return||j===c)return j.$v;throw j}}),E(a,"$dice_command",function(s){var i=this,c=p,o=p,j=p,C=p;return B(i.enabled_upcase_input)&&(s=s.$upcase()),c=i.$class().$prefixes_pattern().$match(s),B(c)?(o=c["$[]"](1)["$nil?"]()["$!"](),B(o)&&(s=s["$[]"](L(1,-1,!1))),j=i.$eval_game_system_specific_command(s),B(j["$is_a?"](e("Result")))?(j["$secret="](B(C=j["$secret?"]())?C:o),j):B(j["$nil?"]())||B(j["$empty?"]())||y(j,"1")?p:U(e("Result").$new(),"tap",[],function(te){var ne;return null==te&&(te=p),te["$text="](j.$to_s()),U(te,"secret=",ne=[o]),ne[ne.length-1]})):p}),E(a,"$eval_game_system_specific_command",A(p)),E(a,"$result_ndx",function(s,i,c){return B(c["$is_a?"](e("String")))?p:B(s.$send(i,c))?e("Result").$success(this.$translate("success")):e("Result").$failure(this.$translate("failure"))}),E(a,"$result_1d100",A(p)),E(a,"$result_1d20",A(p)),E(a,"$result_nd10",A(p)),E(a,"$result_2d6",A(p)),E(a,"$result_nd6",A(p)),E(a,"$get_table_by_2d6",function(s){return this.$get_table_by_nD6(s,2)}),E(a,"$get_table_by_1d6",function(s){return this.$get_table_by_nD6(s,1)}),E(a,"$get_table_by_nD6",function(s,i){return this.$get_table_by_nDx(s,i,6)}),E(a,"$get_table_by_nDx",function(s,i,c){var j,C=p;return j=this.randomizer.$roll_sum(i,c),C=this.$get_table_value(s["$[]"](k(j,i))),B(C["$nil?"]())?["1",0]:[C,j]}),E(a,"$get_table_by_1d3",function(s){var o,j,i=this,C=p;return i.$debug("get_table_by_1d3"),o=i.randomizer.$roll_sum(1,6),i.$debug("num",o),j=T(k(o,1),2).$to_i(),i.$debug("index",j),C=s["$[]"](j),B(C["$nil?"]())?["1",0]:[C,o]}),E(a,"$get_table_by_d66_swap",function(s){var c;return c=this.randomizer.$roll_d66(f(e("D66SortType"),"ASC")),[this.$get_table_by_number(c,s),c]}),E(a,"$get_table_by_d66",function(s){var c,o,j,O,C=p;return c=this.randomizer.$roll_once(6),o=this.randomizer.$roll_once(6),j=x(I(k(c,1),6),k(o,1)),C=s["$[]"](j),O=""+c+o,B(C["$nil?"]())?["1",O]:[C,O]}),E(a,"$get_table_by_number",function(s,i,c){try{var o=J("return");return null==c&&(c="1"),U(i,"each",[],function C(O){var ne,te=null==C.$$s?this:C.$$s;if(null==O&&(O=p),ne=O["$[]"](0),!B(b(ne,s)))return p;o.$throw(te.$get_table_value(O["$[]"](1)))},{$$s:this,$$ret:o}),this.$get_table_value(c)}catch(C){if(C===o)return C.$v;throw C}},-3),E(a,"$get_table_value",function(s){return B(s["$is_a?"](e("Proc")))?s.$call():s}),E(a,"$roll_tables",function(s,i){var o=p;return o=i["$[]"](s),B(o)?o.$roll(this.randomizer).$to_s():p}),E(a,"$debug",function(s,i){var o,j=this,C=p,O=p;return o=N(arguments,1),B(j.debug)?(C=B(s["$is_a?"](e("String")))?s:s.$inspect(),B(o["$empty?"]())?j.$warn(C):(O=U(o,"map",[],function(ne){return null==ne&&(ne=p),B(ne["$is_a?"](e("String")))?'"'+ne+'"':ne.$inspect()}),j.$warn(C+": "+O.$join(", ")))):p},-2),f(f(_("I18n"),"Backend"),"Simple").$include(f(f(_("I18n"),"Backend"),"Fallbacks")),_("I18n").$load_path()["$<<"](_("Dir")["$[]"](_("File").$join("bcdice","../../i18n/**/*.yml"))),_("I18n")["$default_locale="]("ja_jp"),g=[["ja_jp"]],U(_("I18n").$fallbacks(),"defaults=",g),g[g.length-1]})},878:(l,ee,re)=>{re(5151),Opal.modules["bcdice/normalize"]=function($){var U,F,Y,K=$.module,Q=$.eqeqeq,N=$.def,x=$.eqeq,B=[],E=$.nil;return U=B,Y=[K(B[0],"BCDice")].concat(U),(F=K(Y[0],"Normalize")).$module_function(),N(F,"$comparison_operator",function(A){var L;return Q(/<=|=</,L=A)?"<=":Q(/>=|=>/,L)?">=":Q(/<>|!=|=!/,L)?"!=":Q(/</,L)?"<":Q(/>/,L)?">":Q(/=/,L)?"==":E}),N(F,"$target_number",function(A){return x(A,"?")?A:A.$to_i()})},Opal.modules["racc/parser"]=function($){var z,S,m,K=$.module,Q=$.klass,N=$.truthy,x=$.const_set,B=$.defs,E=$.gvars,W=$.rb_lt,U=$.def,J=$.to_ary,Y=$.send,H=$.neqeq,F=$.rb_plus,y=$.eqeq,A=$.rb_ge,L=$.rb_gt,k=$.rb_minus,T=$.rb_le,I=$.rb_times,b=$.assign_ivar_val,q=[],R=$.$r(q),_=$.nil,p=$.$$$;return z=q,S=[K(q[0],"Racc")].concat(z),m=$.$r(S),Q(S[0],m("StandardError"),"ParseError"),N(p("::","ParseError","skip_raise")?"constant":_)||x(q[0],"ParseError",p(R("Racc"),"ParseError")),function(f,z){var a,r,e,n,t,m=[K(f,"Racc")].concat(z),M=$.$r(m);return N(M("Racc_No_Extensions","skip_raise")?"constant":_)||x(m[0],"Racc_No_Extensions",!1),a=m,e=[r=Q(m[0],null,"Parser")].concat(a),n=$.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,x(e[0],"Racc_Runtime_Version","1.4.6"),x(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),x(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),x(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),x(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),x(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),x(e[0],"Racc_Runtime_Core_Version",n("Racc_Runtime_Core_Version_R")),x(e[0],"Racc_Runtime_Core_Revision",n("Racc_Runtime_Core_Revision_R")),x(e[0],"Racc_Runtime_Type","ruby"),B(n("Parser"),"$racc_runtime_type",function(){return n("Racc_Runtime_Type")}),U(r,"$_racc_setup",function(){var i,c,o=this,j=_,C=_;return null==E.stderr&&(E.stderr=_),N(p(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),N(null!=(i=o.yydebug)&&i!==_?"instance-variable":_)||(o.yydebug=!1),N(o.yydebug)&&(N(null!=(c=o.racc_debug_out)&&c!==_?"instance-variable":_)||(o.racc_debug_out=E.stderr),o.racc_debug_out=N(j=o.racc_debug_out)?j:E.stderr),C=p(o.$class(),"Racc_arg"),N(W(C.$size(),14))&&C["$[]="](13,!0),C}),U(r,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=_,i.racc_val=_,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),U(r,"$do_parse",function(){return this.$__send__(n("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),U(r,"$next_token",function(){return this.$raise(n("NotImplementedError"),this.$class()+"#next_token is not defined")}),U(r,"$_racc_do_parse_rb",function(i,c){var o,C=this,O=_,te=_,ne=_,ae=_,oe=_,ue=_,ie=_,X=_;return o=J(i),O=null==o[0]?_:o[0],te=null==o[1]?_:o[1],ne=null==o[2]?_:o[2],ae=null==o[3]?_:o[3],oe=null==o[10]?_:o[10],C.$_racc_init_sysvars(),ue=ie=X=_,Y(C,"catch",["racc_end_parse"],function D(){var V,Z,u=null==D.$$s?this:D.$$s,w=_;for(null==u.racc_state&&(u.racc_state=_),null==u.racc_read_next&&(u.racc_read_next=_),null==u.racc_t&&(u.racc_t=_),null==u.yydebug&&(u.yydebug=_),null==u.racc_val&&(u.racc_val=_);N(!0);)for(N(X=ae["$[]"](u.racc_state["$[]"](-1)))?(N(u.racc_read_next)&&H(u.racc_t,0)&&(Z=u.$next_token(),V=J(Z),ue=null==V[0]?_:V[0],u.racc_val=null==V[1]?_:V[1],u.racc_t=N(ue)?N(w=oe["$[]"](ue))?w:1:0,N(u.yydebug)&&u.$racc_read_token(u.racc_t,ue,u.racc_val),u.racc_read_next=!1),X=F(X,u.racc_t),N(A(X,0))&&N(ie=O["$[]"](X))&&y(te["$[]"](X),u.racc_state["$[]"](-1))||(ie=ne["$[]"](u.racc_state["$[]"](-1)))):ie=ne["$[]"](u.racc_state["$[]"](-1));N(ie=u.$_racc_evalact(ie,i)););},{$$s:C})}),U(r,"$yyparse",function(i,c){return this.$__send__(n("Racc_YY_Parse_Method"),i,c,this.$_racc_setup(),!0)}),U(r,"$_racc_yyparse_rb",function(i,c,o,j){var C,ne=_,ae=_,le=_,oe=_,ie=_,X=_,D=_;return C=J(o),ne=null==C[0]?_:C[0],ae=null==C[1]?_:C[1],le=null==C[2]?_:C[2],oe=null==C[3]?_:C[3],ie=null==C[10]?_:C[10],this.$_racc_init_sysvars(),X=_,D=_,Y(this,"catch",["racc_end_parse"],function V(){var Z=null==V.$$s?this:V.$$s;for(null==Z.racc_state&&(Z.racc_state=_);!N(D=oe["$[]"](Z.racc_state["$[]"](-1)));)for(;N(X=Z.$_racc_evalact(le["$[]"](Z.racc_state["$[]"](-1)),o)););return Y(i,"__send__",[c],function u(w,P){var G=null==u.$$s?this:u.$$s,se=_,$e=_;for(null==G.racc_t&&(G.racc_t=_),null==G.racc_state&&(G.racc_state=_),null==G.racc_read_next&&(G.racc_read_next=_),null==w&&(w=_),null==P&&(P=_),G.racc_t=N(w)?N(se=ie["$[]"](w))?se:1:0,G.racc_val=P,G.racc_read_next=!1,D=F(D,G.racc_t),N(A(D,0))&&N(X=ne["$[]"](D))&&y(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));N(X=G.$_racc_evalact(X,o)););for(;N(N(se=N($e=(D=oe["$[]"](G.racc_state["$[]"](-1)))["$!"]())?$e:G.racc_read_next["$!"]())?se:G.racc_t["$=="](0));)for(N(D)&&N(D=F(D,G.racc_t))&&N(A(D,0))&&N(X=ne["$[]"](D))&&y(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));N(X=G.$_racc_evalact(X,o)););},{$$s:Z})},{$$s:this})}),U(r,"$_racc_evalact",function(i,c){var o,le,C=this,O=_,te=_,ae=_,oe=_,ue=_,ie=_;if(O=null==(o=J(c))[0]?_:o[0],te=null==o[1]?_:o[1],ae=null==o[3]?_:o[3],le=null==o[11]?_:o[11],oe=null==o[12]?_:o[12],N(L(i,0))&&N(W(i,le)))N(L(C.racc_error_status,0))&&(y(C.racc_t,1)||(C.racc_error_status=k(C.racc_error_status,1))),C.racc_vstack.$push(C.racc_val),C.racc_state.$push(i),C.racc_read_next=!0,N(C.yydebug)&&(C.racc_tstack.$push(C.racc_t),C.$racc_shift(C.racc_t,C.racc_tstack,C.racc_vstack));else if(N(W(i,0))&&N(L(i,oe["$-@"]()))){if(ue=Y(C,"catch",["racc_jump"],function X(){var D=null==X.$$s?this:X.$$s;return null==D.racc_state&&(D.racc_state=_),D.racc_state.$push(D.$_racc_do_reduce(c,i)),!1},{$$s:C}),N(ue))switch(ue.valueOf()){case 1:return C.racc_user_yyerror=!0,oe["$-@"]();case 2:return le;default:C.$raise("[Racc Bug] unknown jump code")}}else if(y(i,le))N(C.yydebug)&&C.$racc_accept(),C.$throw("racc_end_parse",C.racc_vstack["$[]"](0));else{if(y(i,oe["$-@"]())){switch(C.racc_error_status.valueOf()){case 0:N(c["$[]"](21))||C.$on_error(C.racc_t,C.racc_val,C.racc_vstack);break;case 3:y(C.racc_t,0)&&C.$throw("racc_end_parse",_),C.racc_read_next=!0}for(C.racc_user_yyerror=!1,C.racc_error_status=3;N(!0)&&!(N(ie=ae["$[]"](C.racc_state["$[]"](-1)))&&(ie=F(ie,1),N(A(ie,0))&&N(i=O["$[]"](ie))&&y(te["$[]"](ie),C.racc_state["$[]"](-1))));)N(T(C.racc_state.$size(),1))&&C.$throw("racc_end_parse",_),C.racc_state.$pop(),C.racc_vstack.$pop(),N(C.yydebug)&&(C.racc_tstack.$pop(),C.$racc_e_pop(C.racc_state,C.racc_tstack,C.racc_vstack));return i}C.$raise("[Racc Bug] unknown action "+i.$inspect())}return N(C.yydebug)&&C.$racc_next_state(C.racc_state["$[]"](-1),C.racc_state),_}),U(r,"$_racc_do_reduce",function(i,c){var o,oe,ie,w,P,G,ce,C=this,te=_,ne=_,ae=_,le=_,ue=_,X=_,D=_,V=_,Z=_,u=_,se=_,$e=_,fe=_;return te=null==(o=J(i))[4]?_:o[4],ne=null==o[5]?_:o[5],ae=null==o[6]?_:o[6],le=null==o[7]?_:o[7],oe=null==o[8]?_:o[8],ue=null==o[9]?_:o[9],ie=null==o[13]?_:o[13],X=C.racc_state,D=C.racc_vstack,V=C.racc_tstack,Z=I(c,-3),u=ue["$[]"](Z),w=ue["$[]"](F(Z,1)),P=ue["$[]"](F(Z,2)),G=[],N(C.yydebug)&&(se=V["$[]"](u["$-@"](),u)),$e=D["$[]"](u["$-@"](),u),N(C.yydebug)&&V["$[]="](u["$-@"](),u,G),D["$[]="](u["$-@"](),u,G),X["$[]="](u["$-@"](),u,G),N(ie)?D.$push(C.$__send__(P,$e,D,$e["$[]"](0))):D.$push(C.$__send__(P,$e,D)),V.$push(w),N(C.yydebug)&&C.$racc_reduce(se,w,V,D),ce=k(w,oe),N(Z=le["$[]"](ce))&&(Z=F(Z,X["$[]"](-1)),N(A(Z,0))&&N(fe=te["$[]"](Z))&&y(ne["$[]"](Z),ce))?fe:ae["$[]"](ce)}),U(r,"$on_error",function(i,c,o){var C,j=this;return j.$raise(n("ParseError"),j.$sprintf("\nparse error on value %s (%s)",c.$inspect(),N(C=j.$token_to_str(i))?C:"?"))}),U(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),U(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),U(r,"$yyerrok",b("racc_error_status",0)),U(r,"$racc_read_token",function(i,c,o){var j=this;return j.racc_debug_out.$print("read    "),j.racc_debug_out.$print(c.$inspect(),"(",j.$racc_token2str(i),") "),j.racc_debug_out.$puts(o.$inspect()),j.racc_debug_out.$puts()}),U(r,"$racc_shift",function(i,c,o){var j=this;return j.racc_debug_out.$puts("shift   "+j.$racc_token2str(i)),j.$racc_print_stacks(c,o),j.racc_debug_out.$puts()}),U(r,"$racc_reduce",function(i,c,o,j){var C=this,O=_;return(O=C.racc_debug_out).$print("reduce "),N(i["$empty?"]())?O.$print(" <none>"):Y(i,"each",[],function te(ne){return null==ne&&(ne=_),O.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(ne))},{$$s:C}),O.$puts(" --\x3e "+C.$racc_token2str(c)),C.$racc_print_stacks(o,j),C.racc_debug_out.$puts()}),U(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),U(r,"$racc_e_pop",function(i,c,o){var j=this;return j.racc_debug_out.$puts("error recovering mode: pop token"),j.$racc_print_states(i),j.$racc_print_stacks(c,o),j.racc_debug_out.$puts()}),U(r,"$racc_next_state",function(i,c){var o=this;return o.racc_debug_out.$puts("goto    "+i),o.$racc_print_states(c),o.racc_debug_out.$puts()}),U(r,"$racc_print_stacks",function(i,c){var j=_;return(j=this.racc_debug_out).$print("        ["),Y(i,"each_index",[],function C(O){return null==O&&(O=_),j.$print(" (",(null==C.$$s?this:C.$$s).$racc_token2str(i["$[]"](O))," ",c["$[]"](O).$inspect(),")")},{$$s:this}),j.$puts(" ]")}),U(r,"$racc_print_states",function(i){var o=_;return(o=this.racc_debug_out).$print("        ["),Y(i,"each",[],function(C){return null==C&&(C=_),o.$print(" ",C)}),o.$puts(" ]")}),U(r,"$racc_token2str",function(i){var o;return N(o=p(this.$class(),"Racc_token_to_s_table")["$[]"](i))?o:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),U(r,"$token_to_str",function(i){return p(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(q[0],q)},Opal.modules.strscan=function($){var y,A,L,k,T,Q=$.def,N=$.truthy,x=$.eqeqeq,B=$.Opal,E=$.return_ivar,W=$.send,U=$.alias,J=[],Y=$.nil;return y=J,L=[A=(0,$.klass)(J[0],null,"StringScanner")].concat(y),k=$.$r(L),(T=A.$$prototype).pos=T.string=T.working=T.matched=T.prev_pos=T.match=Y,A.$attr_reader("pos","matched"),Q(A,"$initialize",function(b){var g=this;return g.string=b,g.pos=0,g.matched=Y,g.working=b,g.match=[]}),A.$attr_reader("string"),Q(A,"$beginning_of_line?",function(){var b=this;return 0===b.pos||"\n"===b.string.charAt(b.pos-1)}),Q(A,"$scan",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?g.matched=Y:(g.prev_pos=g.pos,g.pos+=q[0].length,g.working=g.working.substring(q[0].length),g.matched=q[0],g.match=q,q[0])}),Q(A,"$scan_until",function(b){var g=this;b=g.$anchor(b);for(var q=g.working,R=0;q.length!=R;++R){var _=b.exec(q.substr(R));if(null!==_){var p=R+_[0].length,f=q.substr(0,p);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+R,g.pos+=p,g.working=q.substr(p),f}}return g.matched=Y}),Q(A,"$[]",function(b){var q;if(N(this.match["$empty?"]()))return Y;x(k("Symbol"),q=b)?b=b.$to_s():x(k("String"),q)||(b=B["$coerce_to!"](b,k("Integer"),"to_int"));var R=this.match;return b<0&&(b+=R.length),b<0||b>=R.length||null==R[b]?Y:R[b]}),Q(A,"$check",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return g.matched=null==q?Y:q[0]}),Q(A,"$check_until",function(b){var g=this,q=g.prev_pos,R=g.pos,_=g.working,p=g.$scan_until(b);return g.prev_pos=q,g.pos=R,g.working=_,p}),Q(A,"$peek",function(b){return this.working.substring(0,b)}),Q(A,"$eos?",function(){return 0===this.working.length}),Q(A,"$exist?",function(b){var q=b.exec(this.working);return null==q?Y:0==q.index?0:q.index+1}),Q(A,"$skip",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);if(null==q)return g.match=[],g.matched=Y;var R=q[0],_=R.length;return g.matched=R,g.match=q,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),Q(A,"$skip_until",function(b){var q=this.$scan_until(b);return q===Y?Y:(this.matched=q.substr(-1),q.length)}),Q(A,"$get_byte",function(){var b=this,g=Y;return b.pos<b.string.length?(b.prev_pos=b.pos,b.pos+=1,g=b.matched=b.working.substring(0,1),b.working=b.working.substring(1)):b.matched=Y,g}),Q(A,"$match?",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?Y:(g.prev_pos=g.pos,q[0].length)}),Q(A,"$pos=",function(b){var g=this;return b<0&&(b+=g.string.$length()),g.pos=b,g.working=g.string.slice(b)}),Q(A,"$matched_size",function(){return this.matched===Y?Y:this.matched.length}),Q(A,"$post_match",function(){var b=this;return b.matched===Y?Y:b.string.substr(b.pos)}),Q(A,"$pre_match",function(){var b=this;return b.matched===Y?Y:b.string.substr(0,b.prev_pos)}),Q(A,"$reset",function(){var b=this;return b.working=b.string,b.matched=Y,b.pos=0}),Q(A,"$rest",E("working")),Q(A,"$rest?",function(){return 0!==this.working.length}),Q(A,"$rest_size",function(){return this.$rest().$size()}),Q(A,"$terminate",function(){var b,g=this;return g.match=Y,b=[g.string.$length()],W(g,"pos=",b),b[b.length-1]}),Q(A,"$unscan",function(){var b=this;return b.pos=b.prev_pos,b.prev_pos=Y,b.match=Y,b}),U(A,"bol?","beginning_of_line?"),U(A,"getch","get_byte"),A.$private(),Q(A,"$anchor",function(b){var g=b.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+b.source+")",g)})},Opal.modules["bcdice/common_command/lexer"]=function($){var H,L,g,q,R,_,T,y,K=$.module,Q=$.klass,N=$.const_set,x=$.hash2,B=$.truthy,E=$.def,W=$.top,U=[],J=$.nil;return W.$require("strscan"),W.$require("bcdice/normalize"),H=U,L=y=[K(U[0],"BCDice")].concat(H),g=T=[K(y[0],"CommonCommand")].concat(L),R=[q=Q(T[0],null,"Lexer")].concat(g),_=$.$r(R),q.$$prototype.scanner=J,N(R[0],"SYMBOLS",x(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),E(q,"$initialize",function(z){var S;return z=B(S=z.$split(" ",2).$first())?S:"",this.scanner=_("StringScanner").$new(z)}),E(q,"$next_token",function(){var z=this,v=J,S=J,m=J,h=J;return B(z.scanner["$eos?"]())?[!1,"$"]:B(v=z.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:B(S=z.scanner.$scan(/[<>!=]+/))?["CMP_OP",_("Normalize").$comparison_operator(S)]:(m=z.scanner.$getch().$upcase(),[B(h=_("SYMBOLS")["$[]"](m))?h:m.$to_sym(),m])}),E(q,"$source",function(){return this.scanner.$string()})},Opal.modules.singleton=function($){var H,k,T,I,b,F,y,A,K=$.module,Q=$.def,N=$.send2,x=$.find_super,B=$.send,E=$.truthy,W=$.defs,U=[],J=$.nil;return H=U,y=[F=K(U[0],"Singleton")].concat(H),A=$.$r(y),Q(F,"$clone",function(){return this.$raise(A("TypeError"),"can't clone instance of singleton "+this.$class())}),Q(F,"$dup",function(){return this.$raise(A("TypeError"),"can't dup instance of singleton "+this.$class())}),k=y,I=[T=K(y[0],"SingletonClassMethods")].concat(k),b=$.$r(I),Q(T,"$clone",function g(){var q=g.$$p||J;return g.$$p=null,b("Singleton").$__init__(N(this,x(this,"clone",g,!1,!0),"clone",[],q))}),Q(T,"$inherited",function g(q){var R=g.$$p||J;return g.$$p=null,N(this,x(this,"inherited",g,!1,!0),"inherited",[q],R),b("Singleton").$__init__(q)}),function(L,k){var T=[L].concat(k),I=$.$r(T);return Q(L,"$__init__",function(g){return B(g,"instance_eval",[],function R(){return(null==R.$$s?this:R.$$s).singleton__instance__=J},{$$s:this}),W(g,"$instance",function(){var _=this;return null==_.singleton__instance__&&(_.singleton__instance__=J),E(_.singleton__instance__)?_.singleton__instance__:_.singleton__instance__=_.$new()}),g}),Q(L,"$included",function b(g){var q=b.$$p||J;return b.$$p=null,N(this,x(this,"included",b,!1,!0),"included",[g],q),g.$extend(I("SingletonClassMethods")),I("Singleton").$__init__(g)})}($.get_singleton_class(A("Singleton")),y)},Opal.modules["bcdice/common_command/add_dice/node"]=function($){var f,m,a,t,C,O,te,ne,ae,i,c,e,h,v,K=$.module,Q=$.klass,N=$.def,x=$.rb_plus,B=$.thrower,E=$.truthy,W=$.rb_le,U=$.send,J=$.return_val,Y=$.alias,H=$.return_ivar,F=$.send2,y=$.find_super,A=$.const_set,L=$.eqeqeq,k=$.rb_divide,T=$.assign_ivar,I=$.not,b=$.neqeq,q=[],R=$.nil,_=$.$$$;return $.top.$require("singleton"),f=q,m=v=[K(q[0],"BCDice")].concat(f),a=h=[K(v[0],"CommonCommand")].concat(m),t=e=[K(h[0],"AddDice")].concat(a),i=[K(e[0],"Node")].concat(t),c=$.$r(i),C=i,te=[O=Q(i[0],null,"Command")].concat(C),ne=$.$r(te),(ae=O.$$prototype).lhs=ae.rhs=ae.cmp_op=R,O.$attr_reader("lhs"),O.$attr_reader("cmp_op"),O.$attr_reader("rhs"),N(O,"$initialize",function(oe,ue,ie,X){var D=this;return null==ie&&(ie=R),null==X&&(X=R),D.secret=oe,D.lhs=ue,D.cmp_op=ie,D.rhs=X},-3),N(O,"$expr",function(oe){try{B("eval_return");var ie,X=this;return x(x(X.lhs.$expr(oe),X.$cmp_op_text()),(ie=X.rhs,ie===R||null==ie?R:ie.$eval(oe,R)).$to_s())}catch(D){if(D===$.t_eval_return)return D.$v;throw D}}),N(O,"$s_exp",function(){var oe=this;return E(oe.cmp_op)?"(Command ("+oe.cmp_op+" "+oe.lhs.$s_exp()+" "+oe.rhs.$s_exp()+"))":"(Command "+oe.lhs.$s_exp()+")"}),N(O,"$eval",function(oe,ue){try{B("eval_return");var X,P,D=this,V=R,Z=R,u=R,w=R,G=R;return ue=ne("Randomizer").$new(ue,oe),V=D.lhs.$eval(oe,ue),Z=E(W(ue.$rand_results().$size(),1))&&E(D.lhs["$is_a?"](_(ne("Node"),"DiceRoll")))?R:D.lhs.$output(),u=E(D.cmp_op)?(w=D.rhs.$eval(oe,R),oe.$check_result(V,ue.$rand_results(),D.cmp_op,w)):R,u=E(P=u)?P:ne("Result").$new(),G=["("+D.$expr(oe)+")",Z,V,(X=u,X===R||null==X?R:X.$text())].$compact(),U(u,"tap",[],function se($e){var ce,fe=null==se.$$s?this:se.$$s;return null==fe.secret&&(fe.secret=R),null==$e&&($e=R),$e["$secret="](fe.secret),ce=[G.$join(" \uff1e ")],U($e,"text=",ce),ce[ce.length-1]},{$$s:D})}catch(se){if(se===$.t_eval_return)return se.$v;throw se}}),O.$private(),N(O,"$cmp_op_text",function(){switch(this.cmp_op.valueOf()){case"!=":return"<>";case"==":return"=";default:return this.cmp_op.$to_s()}}),function(o,j,C){var O=Q(o,null,"UndecidedTarget"),te=[O].concat(C),ne=$.$r(te);O.$include(ne("Singleton")),N(O,"$eval",J("?")),N(O,"$include_dice?",J(!1)),N(O,"$expr",J("?")),N(O,"$output",J("?")),Y(O,"s_exp","output")}(i[0],0,i),function(o,j){var C=Q(o,null,"BinaryOp"),O=C.$$prototype;O.lhs=O.rhs=O.op=R,N(C,"$initialize",function(ne,ae,le){return this.lhs=ne,this.op=ae,this.rhs=le}),N(C,"$eval",function(ne,ae){try{var ue,ie;return B("eval_return"),ue=this.lhs.$eval(ne,ae),ie=this.rhs.$eval(ne,ae),this.$calc(ue,ie,ne.$round_type()).$to_i()}catch(X){if(X===$.t_eval_return)return X.$v;throw X}}),N(C,"$include_dice?",function(){var ae;return E(ae=this.lhs["$include_dice?"]())?ae:this.rhs["$include_dice?"]()}),N(C,"$expr",function(ne){var le,oe;return le=this.lhs.$expr(ne),oe=this.rhs.$expr(ne),""+le+this.op+oe}),N(C,"$output",function(){return""+this.lhs.$output()+this.op+this.rhs.$output()}),N(C,"$s_exp",function(){return"("+this.$op_for_s_exp()+" "+this.lhs.$s_exp()+" "+this.rhs.$s_exp()+")"}),C.$private(),N(C,"$calc",function(ne,ae,le){return ne.$send(this.op,ae).$to_i()}),N(C,"$op_for_s_exp",H("op"))}(i[0]),function(o,j,C){var O=Q(o,j,"DivideBase"),te=[O].concat(C),ne=$.$r(te);O.$$prototype.op=R,N(O,"$initialize",function le(oe,ue){return le.$$p=null,F(this,y(this,"initialize",le,!1,!0),"initialize",[oe,"/",ue],null)}),N(O,"$expr",function le(oe){return le.$$p=null,""+F(this,y(this,"expr",le,!1,!0),"expr",[oe],null)+this.$rounding_method()}),N(O,"$output",function le(){var oe=le.$$p||R;return le.$$p=null,""+F(this,y(this,"output",le,!1,!0),"output",[],oe)+this.$rounding_method()}),O.$private(),N(O,"$rounding_method",function(){return _(this.$class(),"ROUNDING_METHOD")}),N(O,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),N(O,"$calc",function(oe,ue,ie){return E(ue["$zero?"]())?1:this.$divide_and_round(oe,ue,ie).$to_i()}),N(O,"$divide_and_round",function(oe,ue,ie){return this.$raise(ne("NotImplementedError"))})}(i[0],c("BinaryOp"),i),function(o,j,C){var O=Q(o,j,"DivideWithGameSystemDefault"),te=[O].concat(C),ne=$.$r(te);A(te[0],"ROUNDING_METHOD",""),O.$private(),N(O,"$divide_and_round",function(le,oe,ue){var ie,X=R;return L(_(ne("RoundType"),"CEIL"),ie=ue)?k(le.$to_f(),oe).$ceil():L(_(ne("RoundType"),"ROUND"),ie)?(X=k(le.$to_f(),oe),E(X["$negative?"]())?X.$abs().$round()["$-@"]():X.$round()):k(le,oe).$floor()})}(i[0],c("DivideBase"),i),function(o,j,C){var O=Q(o,j,"DivideWithRoundingUp"),te=[O].concat(C);A(te[0],"ROUNDING_METHOD","U"),O.$private(),N(O,"$divide_and_round",function(ae,le,oe){return k(ae.$to_f(),le).$ceil()})}(i[0],c("DivideBase"),i),function(o,j,C){var O=Q(o,j,"DivideWithRoundingOff"),te=[O].concat(C);A(te[0],"ROUNDING_METHOD","R"),O.$private(),N(O,"$divide_and_round",function(ae,le,oe){var ue=R;return ue=k(ae.$to_f(),le),E(ue["$negative?"]())?ue.$abs().$round()["$-@"]():ue.$round()})}(i[0],c("DivideBase"),i),function(o,j,C){var O=Q(o,j,"DivideWithRoundingDown"),te=[O].concat(C);A(te[0],"ROUNDING_METHOD","F"),O.$private(),N(O,"$divide_and_round",function(ae,le,oe){return k(ae,le).$floor()})}(i[0],c("DivideBase"),i),function(o,j){var C=Q(o,null,"Negate");C.$$prototype.body=R,C.$attr_reader("body"),N(C,"$initialize",T("body")),N(C,"$eval",function(ne,ae){try{return B("eval_return"),this.body.$eval(ne,ae).$to_i()["$-@"]()}catch(ue){if(ue===$.t_eval_return)return ue.$v;throw ue}}),N(C,"$include_dice?",function(){return this.body["$include_dice?"]()}),N(C,"$expr",function(ne){return"-"+this.body.$expr(ne)}),N(C,"$output",function(){return"-"+this.body.$output()}),N(C,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(i[0]),function(o,j){var C=Q(o,null,"DiceRoll"),O=C.$$prototype;O.times=O.sides=R,N(C,"$initialize",function(ne,ae){return this.times=ne,this.sides=ae,this.text=R}),N(C,"$eval",function(ne,ae){try{B("eval_return");var ue,ie,X=R,D=R;return ue=this.times.$eval(ne,R),ie=this.$eval_sides(ne),D=(X=ae.$roll(ue,ie)).$sum(),this.text=D+"["+X.$join(",")+"]",D.$to_i()}catch(V){if(V===$.t_eval_return)return V.$v;throw V}}),N(C,"$include_dice?",J(!0)),N(C,"$expr",function(ne){try{return B("eval_return"),this.times.$eval(ne,R)+"D"+this.$eval_sides(ne)}catch(ie){if(ie===$.t_eval_return)return ie.$v;throw ie}}),N(C,"$output",H("text")),N(C,"$s_exp",function(){return"(DiceRoll "+this.times.$s_exp()+" "+this.sides.$s_exp()+")"}),C.$private(),N(C,"$eval_sides",function(ne){try{return B("eval_return"),this.sides.$eval(ne,R)}catch(oe){if(oe===$.t_eval_return)return oe.$v;throw oe}})}(i[0]),function(o,j){var C=Q(o,j,"ImplicitSidesDiceRoll");C.$$prototype.times=R,N(C,"$initialize",function(ne){return this.times=ne,this.text=R}),N(C,"$s_exp",function(){return"(ImplicitSidesDiceRoll "+this.times.$s_exp()+")"}),C.$private(),N(C,"$eval_sides",function(ne){return ne.$sides_implicit_d()})}(i[0],c("DiceRoll")),function(o,j,C){var O=Q(o,null,"DiceRollWithFilter"),te=[O].concat(C),ne=$.$r(te),ae=O.$$prototype;ae.times=ae.n_filtering=ae.filter=ae.sides=R,A(te[0],"Filter",ne("Struct").$new("abbr","apply")),A(te[0],"KEEP_HIGHEST",ne("Filter").$new("KH",U(O,"lambda",[],function(oe,ue){return null==oe&&(oe=R),null==ue&&(ue=R),oe.$reverse().$take(ue)})).$freeze()),A(te[0],"KEEP_LOWEST",ne("Filter").$new("KL",U(O,"lambda",[],function(oe,ue){return null==oe&&(oe=R),null==ue&&(ue=R),oe.$take(ue)})).$freeze()),A(te[0],"DROP_HIGHEST",ne("Filter").$new("DH",U(O,"lambda",[],function(oe,ue){return null==oe&&(oe=R),null==ue&&(ue=R),oe.$reverse().$drop(ue)})).$freeze()),A(te[0],"DROP_LOWEST",ne("Filter").$new("DL",U(O,"lambda",[],function(oe,ue){return null==oe&&(oe=R),null==ue&&(ue=R),oe.$drop(ue)})).$freeze()),N(O,"$initialize",function(oe,ue,ie,X){var D=this;return b(ue,"implicit")&&I(ue["$respond_to?"]("eval"))&&D.$raise(ne("TypeError"),"sides must be a Node or :implicit ("+ue.$inspect()+")"),D.times=oe,D.sides=ue,D.n_filtering=ie,D.filter=X,D.text=R}),N(O,"$eval",function(oe,ue){try{B("eval_return");var D,V,Z,X=this,u=R,w=R;return D=X.times.$eval(oe,R),V=X.$eval_sides(oe),Z=X.n_filtering.$eval(oe,R),u=ue.$roll(D,V).$sort(),w=X.filter.$apply()["$[]"](u,Z).$sum(),X.text=w+"["+u.$join(",")+"]",w.$to_i()}catch(P){if(P===$.t_eval_return)return P.$v;throw P}}),N(O,"$include_dice?",J(!0)),N(O,"$implicit_sides?",function(){return this.sides["$=="]("implicit")}),N(O,"$expr",function(oe){try{var X,D,V;return B("eval_return"),X=this.times.$eval(oe,R),D=this.$eval_sides(oe),V=this.n_filtering.$eval(oe,R),X+"D"+D+this.filter.$abbr()+V}catch(Z){if(Z===$.t_eval_return)return Z.$v;throw Z}}),N(O,"$output",H("text")),N(O,"$s_exp",function(){var ue,oe=this;return ue=E(oe["$implicit_sides?"]())?oe.sides.$inspect():oe.sides.$s_exp(),"(DiceRollWithFilter "+oe.times.$s_exp()+" "+ue+" "+oe.filter.$abbr().$inspect()+" "+oe.n_filtering.$s_exp()+")"}),O.$private(),N(O,"$eval_sides",function(oe){try{return B("eval_return"),E(this["$implicit_sides?"]())?oe.$sides_implicit_d():this.sides.$eval(oe,R)}catch(X){if(X===$.t_eval_return)return X.$v;throw X}})}(i[0],0,i),function(o,j){var C=Q(o,null,"Parenthesis");C.$$prototype.expr=R,N(C,"$initialize",T("expr")),N(C,"$eval",function(ne,ae){try{return B("eval_return"),this.expr.$eval(ne,ae).$to_i()}catch(ue){if(ue===$.t_eval_return)return ue.$v;throw ue}}),N(C,"$include_dice?",function(){return this.expr["$include_dice?"]()}),N(C,"$expr",function(ne){return"("+this.expr.$expr(ne)+")"}),N(C,"$output",function(){return"("+this.expr.$output()+")"}),N(C,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(i[0]),function(o,j,C){var O=Q(o,null,"Number"),te=[O].concat(C),ne=$.$r(te);return O.$$prototype.literal=R,O.$attr_reader("literal"),N(O,"$initialize",function(oe){return this.literal=oe.$to_i()}),N(O,"$negate",function(){return ne("Number").$new(this.literal["$-@"]())}),N(O,"$eval",function(oe,ue){return this.literal.$to_i()}),N(O,"$include_dice?",J(!1)),N(O,"$expr",function(oe){return this.literal.$to_s()}),N(O,"$output",function(){return this.literal.$to_s()}),Y(O,"s_exp","output")}(i[0],0,i)},Opal.modules["bcdice/common_command/add_dice/parser"]=function($){var b,_,v,a,i,c,o,j,C,O,te,ne,ae,ue,r,t,s,m,M,f,q,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.truthy,E=$.eqeq,W=$.hash,U=$.const_set,J=$.to_ary,Y=$.not,H=$.return_val,F=$.neqeq,y=$.hash2,A=$.top,L=[],k=$.nil,T=$.$$$;return A.$require("racc/parser.rb"),A.$require("bcdice/common_command/lexer"),A.$require("bcdice/common_command/add_dice/node"),b=L,_=q=[K(L[0],"BCDice")].concat(b),v=f=[K(q[0],"CommonCommand")].concat(_),m=[K(f[0],"AddDice")].concat(v),M=$.$r(m),a=m,t=[r=Q(m[0],T(M("Racc"),"Parser"),"Parser")].concat(a),s=$.$r(t),r.$$prototype.lexer=k,N(r,"$parse",function(Z){return this.$new().$parse(Z)}),x(r,"$parse",function(Z){try{return this.lexer=s("Lexer").$new(Z),this.$do_parse()}catch(w){if(!$.rescue(w,[s("ParseError")]))throw w;try{return k}finally{$.pop_exception()}}}),r.$private(),x(r,"$next_token",function(){return this.lexer.$next_token()}),x(r,"$expand_negate",function(Z,u){if(B(u["$is_a?"](T(s("Node"),"Negate")))){if(E(Z,"+"))return["-",u.$body()];if(E(Z,"-"))return["+",u.$body()]}return[Z,u]}),i=$.large_array_unpack("14,14,50,12,51,19,20,14,14,14,12,3,12,17,18,14,8,9,12,4,13,13,28,8,9,8,9,13,13,13,14,8,9,12,15,13,14,23,14,12,56,12,19,20,57,14,8,9,12,,13,,8,9,8,9,13,14,13,,12,8,9,14,16,13,-27,-27,19,20,-27,17,18,8,9,,42,13,,17,18,40,39,13,,38,-28,-28,40,39,-28,,38,45,47,44,46,52,53,54,55"),c=$.large_array_unpack("16,12,38,16,38,6,6,2,36,8,2,0,8,27,27,9,16,16,9,1,16,12,16,2,2,8,8,2,36,8,13,9,9,13,4,9,17,11,18,17,50,18,29,29,51,19,13,13,19,,13,,17,17,18,18,17,20,18,,20,19,19,23,5,19,23,23,30,30,23,25,25,20,20,,25,20,,5,5,24,24,23,,24,33,33,34,34,33,,34,32,32,32,32,39,39,40,40"),o=$.large_array_unpack("7,19,5,,34,61,-15,,7,13,,32,-1,28,,,-2,34,36,43,55,,,61,76,53,,-5,,22,48,,79,81,83,,6,,-8,90,92,,,,,,,,,,29,31,,,,,,"),j=$.large_array_unpack("-3,-41,-41,-4,-41,-1,-9,-12,-41,-41,-20,-26,-41,-41,-40,58,-41,-41,-41,-41,-41,-18,-19,-22,-24,-41,-2,-5,-6,-7,-8,-10,-13,-21,-41,-25,-37,-30,-41,-41,-41,-38,-39,-11,-14,-15,-16,-17,-23,-29,-41,-41,-33,-34,-35,-36,-31,-32"),C=[24,5,21,22,29,30,35,1,2,26,43,33,25,31,32,27,48,34,k,k,k,k,k,k,49],O=[9,3,6,6,5,5,11,1,2,4,7,9,3,6,6,3,11,10,k,k,k,k,k,k,9],te=[k,7,8,-1,-7,-13,-6,-22,k,-12,-6,-18,k,k,k],ne=[k,k,k,k,k,6,7,k,10,11,k,k,36,37,41],ae=$.large_array_unpack("0,0,racc_error,2,26,_reduce_1,4,26,_reduce_2,0,27,_reduce_3,1,27,_reduce_4,1,29,_reduce_none,1,29,_reduce_6,3,28,_reduce_7,3,28,_reduce_8,1,28,_reduce_none,3,30,_reduce_10,4,30,_reduce_11,1,30,_reduce_none,0,32,_reduce_13,1,32,_reduce_14,1,32,_reduce_15,1,32,_reduce_16,1,32,_reduce_17,2,31,_reduce_18,2,31,_reduce_19,1,31,_reduce_none,3,33,_reduce_21,2,33,_reduce_22,4,33,_reduce_23,2,33,_reduce_24,3,33,_reduce_25,1,33,_reduce_none,0,35,_reduce_27,1,35,_reduce_28,2,36,_reduce_29,1,36,_reduce_30,3,39,_reduce_31,3,39,_reduce_32,2,37,_reduce_33,2,37,_reduce_34,2,37,_reduce_35,2,37,_reduce_36,1,38,_reduce_none,1,38,_reduce_none,3,34,_reduce_39,1,34,_reduce_40"),ue=W(!1,0,"error",1,"NUMBER",2,"CMP_OP",3,"S",4,"D",5,"K",6,"H",7,"L",8,"M",9,"A",10,"X",11,"I",12,"N",13,"U",14,"R",15,"F",16,"C",17,"PLUS",18,"MINUS",19,"ASTERISK",20,"SLASH",21,"PARENL",22,"PARENR",23,"QUESTION",24),U(t[0],"Racc_arg",[i,c,j,o,C,O,ne,te,25,ae,ue,58,41,!0]),B(s("Ractor","skip_raise")?"constant":k)&&s("Ractor").$make_shareable(s("Racc_arg")),U(t[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,CMP_OP,S,D,K,H,L,M,A,X,I,N,U,R,F,C,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,QUESTION,$start,command,secret,add,target,mul,unary,round_type,dice,term,explicit_or_implicit_sides,filter,filter_type,filter_type_with_shorthand,filter_shorthand")),B(s("Ractor","skip_raise")?"constant":k)&&s("Ractor").$make_shareable(s("Racc_token_to_s_table")),U(t[0],"Racc_debug_parser",!1),x(r,"$_reduce_1",function(Z,u,w){var P,$e,ce=k;return $e=null==(P=J(Z))[0]?k:P[0],B((ce=null==P[1]?k:P[1])["$include_dice?"]())||this.$raise(s("ParseError")),T(s("Node"),"Command").$new($e,ce)}),x(r,"$_reduce_2",function(Z,u,w){var P,$e,ce=k,fe=k,_e=k;return $e=null==(P=J(Z))[0]?k:P[0],fe=null==P[2]?k:P[2],_e=null==P[3]?k:P[3],(Y((ce=null==P[1]?k:P[1])["$include_dice?"]())||B(_e["$include_dice?"]())||B(fe["$nil?"]()))&&this.$raise(s("ParseError")),T(s("Node"),"Command").$new($e,ce,fe,_e)}),x(r,"$_reduce_3",H(!1)),x(r,"$_reduce_4",H(!0)),x(r,"$_reduce_6",function(Z,u,w){return T(s("Node"),"UndecidedTarget").$instance()}),x(r,"$_reduce_7",function(Z,u,w){var P,G,$e,ce,fe;return $e=Z["$[]"](0),G=this.$expand_negate("+",Z["$[]"](2)),ce=null==(P=J(G))[0]?k:P[0],fe=null==P[1]?k:P[1],T(s("Node"),"BinaryOp").$new($e,ce,fe)}),x(r,"$_reduce_8",function(Z,u,w){var P,G,$e,ce,fe;return $e=Z["$[]"](0),G=this.$expand_negate("-",Z["$[]"](2)),ce=null==(P=J(G))[0]?k:P[0],fe=null==P[1]?k:P[1],T(s("Node"),"BinaryOp").$new($e,ce,fe)}),x(r,"$_reduce_10",function(Z,u,w){var P,G;return P=Z["$[]"](0),G=Z["$[]"](2),T(s("Node"),"BinaryOp").$new(P,"*",G)}),x(r,"$_reduce_11",function(Z,u,w){var P,G;return P=Z["$[]"](0),G=Z["$[]"](2),Z["$[]"](3).$new(P,G)}),x(r,"$_reduce_13",function(Z,u,w){return T(s("Node"),"DivideWithGameSystemDefault")}),x(r,"$_reduce_14",function(Z,u,w){return T(s("Node"),"DivideWithRoundingDown")}),x(r,"$_reduce_15",function(Z,u,w){return T(s("Node"),"DivideWithRoundingUp")}),x(r,"$_reduce_16",function(Z,u,w){return T(s("Node"),"DivideWithRoundingUp")}),x(r,"$_reduce_17",function(Z,u,w){return T(s("Node"),"DivideWithRoundingOff")}),x(r,"$_reduce_18",function(Z,u,w){return Z["$[]"](1)}),x(r,"$_reduce_19",function(Z,u,w){var P=k;return P=Z["$[]"](1),B(P["$is_a?"](T(s("Node"),"Negate")))?P.$body():T(s("Node"),"Negate").$new(P)}),x(r,"$_reduce_21",function(Z,u,w){var G=k,se=k;return G=Z["$[]"](0),se=Z["$[]"](2),(B(G["$include_dice?"]())||B(se["$include_dice?"]()))&&this.$raise(s("ParseError")),T(s("Node"),"DiceRoll").$new(G,se)}),x(r,"$_reduce_22",function(Z,u,w){var G=k;return G=Z["$[]"](0),B(G["$include_dice?"]())&&this.$raise(s("ParseError")),T(s("Node"),"ImplicitSidesDiceRoll").$new(G)}),x(r,"$_reduce_23",function(Z,u,w){var $e,G=k,se=k,ce=k;return G=Z["$[]"](0),se=Z["$[]"](2),$e=Z["$[]"](3)["$[]"]("filter"),ce=Z["$[]"](3)["$[]"]("n_filtering"),F(se,"implicit")&&B(se["$include_dice?"]())&&this.$raise(s("ParseError")),(B(G["$include_dice?"]())||B(ce["$include_dice?"]()))&&this.$raise(s("ParseError")),T(s("Node"),"DiceRollWithFilter").$new(G,se,ce,$e)}),x(r,"$_reduce_24",function(Z,u,w){var G,se=k;return G=T(s("Node"),"Number").$new(1),se=Z["$[]"](1),B(se["$include_dice?"]())&&this.$raise(s("ParseError")),B(se["$instance_of?"](T(s("Node"),"Number")))&&E(se.$literal(),66)&&this.$raise(s("ParseError")),T(s("Node"),"DiceRoll").$new(G,se)}),x(r,"$_reduce_25",function(Z,u,w){var G,$e,P=this,se=k,ce=k;return G=T(s("Node"),"Number").$new(1),se=Z["$[]"](1),$e=Z["$[]"](2)["$[]"]("filter"),ce=Z["$[]"](2)["$[]"]("n_filtering"),F(se,"implicit")&&B(se["$include_dice?"]())&&P.$raise(s("ParseError")),B(ce["$include_dice?"]())&&P.$raise(s("ParseError")),B(se["$instance_of?"](T(s("Node"),"Number")))&&E(se.$literal(),66)&&P.$raise(s("ParseError")),T(s("Node"),"DiceRollWithFilter").$new(G,se,ce,$e)}),x(r,"$_reduce_27",H("implicit")),x(r,"$_reduce_28",function(Z,u,w){return Z["$[]"](0)}),x(r,"$_reduce_29",function(Z,u,w){return y(["filter","n_filtering"],{filter:Z["$[]"](0),n_filtering:Z["$[]"](1)})}),x(r,"$_reduce_30",function(Z,u,w){return y(["filter","n_filtering"],{filter:Z["$[]"](0),n_filtering:T(s("Node"),"Number").$new(1)})}),x(r,"$_reduce_31",function(Z,u,w){return T(T(s("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),x(r,"$_reduce_32",function(Z,u,w){return T(T(s("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),x(r,"$_reduce_33",function(Z,u,w){return T(T(s("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),x(r,"$_reduce_34",function(Z,u,w){return T(T(s("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),x(r,"$_reduce_35",function(Z,u,w){return T(T(s("Node"),"DiceRollWithFilter"),"DROP_HIGHEST")}),x(r,"$_reduce_36",function(Z,u,w){return T(T(s("Node"),"DiceRollWithFilter"),"DROP_LOWEST")}),x(r,"$_reduce_39",function(Z,u,w){return T(s("Node"),"Parenthesis").$new(Z["$[]"](1))}),x(r,"$_reduce_40",function(Z,u,w){return T(s("Node"),"Number").$new(Z["$[]"](0))}),x(r,"$_reduce_none",function(Z,u,w){return Z["$[]"](0)})},Opal.modules["bcdice/common_command/add_dice/randomizer"]=function($){var H,L,b,p,f,z,v,S,q,T,y,K=$.module,Q=$.klass,N=$.const_set,x=$.def,B=$.eqeq,E=$.send,W=$.truthy,U=[],J=$.nil;return H=U,L=y=[K(U[0],"BCDice")].concat(H),b=T=[K(y[0],"CommonCommand")].concat(L),p=q=[K(T[0],"AddDice")].concat(b),z=[f=Q(q[0],null,"Randomizer")].concat(p),v=$.$r(z),(S=f.$$prototype).game_system=S.rand_source=S.rand_results=J,f.$attr_reader("rand_results"),N(z[0],"RandResult",v("Struct").$new("sides","value")),x(f,"$initialize",function(M,h){var d=this;return d.rand_source=M,d.game_system=h,d.rand_results=[]}),x(f,"$roll",function(M,h){var r,d=this,a=J;return a=B(h,66)?E(v("Array"),"new",[M],function e(){var n=null==e.$$s?this:e.$$s;return null==n.rand_source&&(n.rand_source=J),null==n.game_system&&(n.game_system=J),n.rand_source.$roll_d66(n.game_system.$d66_sort_type())},{$$s:d}):B(h,9)&&W(d.game_system["$enabled_d9?"]())?E(v("Array"),"new",[M],function e(){var n=null==e.$$s?this:e.$$s;return null==n.rand_source&&(n.rand_source=J),n.rand_source.$roll_d9()},{$$s:d}):d.rand_source.$roll_barabara(M,h),W(d.game_system["$sort_add_dice?"]())&&a["$sort!"](),r=E(a,"map",[],function(n){return null==n&&(n=J),v("RandResult").$new(h,n)}),d.rand_results.$concat(r),a})},Opal.modules["bcdice/common_command/add_dice"]=function($){var J,y,T,g,R,_,I,b,L,H,K=$.module,Q=$.const_set,N=$.thrower,x=$.def,B=$.top,E=[],W=$.nil;return B.$require("bcdice/normalize"),B.$require("bcdice/common_command/add_dice/parser"),B.$require("bcdice/common_command/add_dice/randomizer"),J=E,y=H=[K(E[0],"BCDice")].concat(J),T=L=[K(H[0],"CommonCommand")].concat(y),Q((b=[I=K(L[0],"AddDice")].concat(T))[0],"PREFIX_PATTERN",/[+\-(]*(\d+|D\d+)/.$freeze()),R=[g=$.get_singleton_class(I)].concat(b),_=$.$r(R),x(g,"$eval",function(f,z,v){try{var m;return N("eval_return"),(m=_("Parser").$parse(f))===W||null==m?W:m.$eval(z,v)}catch(h){if(h===$.t_eval_return)return h.$v;throw h}})},Opal.modules["bcdice/common_command/reroll_dice/node"]=function($){var I,R,z,M,e,n,t,s,i,d,S,p,g,K=$.module,Q=$.klass,N=$.ensure_kwargs,x=$.get_kwarg,B=$.def,E=$.truthy,W=$.send,U=$.thrower,J=$.rb_lt,Y=$.rb_plus,H=$.rb_gt,F=$.eqeq,y=$.rb_le,A=$.rb_ge,L=[],k=$.nil;return I=L,R=g=[K(L[0],"BCDice")].concat(I),z=p=[K(g[0],"CommonCommand")].concat(R),M=S=[K(p[0],"RerollDice")].concat(z),e=d=[K(S[0],"Node")].concat(M),t=[n=Q(d[0],null,"Command")].concat(e),s=$.$r(t),(i=n.$$prototype).cmp_op=i.reroll_cmp_op=i.target_number_node=i.reroll_threshold_node=i.notations=i.source=k,B(n,"$initialize",function(o){var j,C,O,te,ne,ae,le,oe=this;return o=N(o),j=x(o,"secret"),C=x(o,"notations"),O=x(o,"source"),null==(te=o.$$smap.cmp_op)&&(te=k),null==(ne=o.$$smap.target_number)&&(ne=k),null==(ae=o.$$smap.reroll_cmp_op)&&(ae=k),null==(le=o.$$smap.reroll_threshold)&&(le=k),oe.secret=j,oe.notations=C,oe.cmp_op=te,oe.target_number_node=ne,oe.reroll_cmp_op=ae,oe.reroll_threshold_node=le,oe.source=O}),B(n,"$eval",function(o,j){try{U("eval_return");var O,te,ae,le,ue,X,D,Z,ne=this,oe=k,ie=k,V=k,u=k,w=k,P=k,G=k,se=k;return ae=o.$round_type(),le=E(oe=ne.cmp_op)?oe:o.$default_cmp_op(),ue=E(oe=E(ie=ne.reroll_cmp_op)?ie:le)?oe:">=",X=E(oe=(O=ne.target_number_node)===k||null==O?k:O.$eval(ae))?oe:o.$default_target_number(),D=E(oe=E(ie=(te=ne.reroll_threshold_node)===k||null==te?k:te.$eval(ae))?ie:o.$reroll_dice_reroll_threshold())?oe:X,V=s("RerollCondition").$new(ue,D),Z=W(ne.notations,"map",[],function(ce){return null==ce&&(ce=k),ce.$to_dice(ae)}),E(W(Z,"all?",[],function(ce){return null==ce&&(ce=k),V["$valid?"](ce.$sides())}))?(w=(u=ne.$roll(Z,j,V,o["$sort_barabara_dice?"]())).$flatten(),P=u.$take(ne.notations.$size()).$flatten().$count(1),G=E(le)?W(w,"count",[],function(ce){return null==ce&&(ce=k),ce.$send(le,X)}):0,se=[ne.$expr(ae,V,le,X),W(u,"map",[],function(ce){return null==ce&&(ce=k),ce.$join(",")}).$join(" + "),"\u6210\u529f\u6570"+G,o.$grich_text(P,w.$size(),G)].$compact(),ne.$result_with_text(se.$join(" \uff1e "))):ne.$result_with_text(ne.source+" \uff1e \u6761\u4ef6\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u30022R6>=5 \u3042\u308b\u3044\u306f 2R6[5] \u306e\u3088\u3046\u306b\u632f\u308a\u8db3\u3057\u76ee\u6a19\u5024\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}catch($e){if($e===$.t_eval_return)return $e.$v;throw $e}}),n.$private(),B(n,"$roll",function(o,j,C,O){var te=k,ne=k,ae=k,le=k,oe=k,ue=k;for(te=[],ne=0;E(E(ae=o["$empty?"]()["$!"]())?J(ne,s("REROLL_LIMIT")):ae);)le=o.$shift(),ne=Y(ne,1),oe=le.$roll(j),E(O)&&oe["$sort!"](),te.$push(oe),ue=W(oe,"count",[],function(X){return null==X&&(X=k),C["$reroll?"](X)}),E(H(ue,0))&&o.$push(s("Dice").$new(ue,le.$sides()));return te}),B(n,"$expr",function(o,j,C,O){var ne,ae,le;return ne=W(this.notations,"map",[],function(ue){return null==ue&&(ue=k),ue.$to_dice(o)}).$join("+"),ae=F(j.$cmp_op(),C)?"":s("Format").$comparison_operator(j.$cmp_op()),le=s("Format").$comparison_operator(C),"("+ne+"["+ae+j.$threshold()+"]"+le+O+")"}),B(n,"$result_with_text",function(o){return W(s("Result").$new(),"tap",[],function C(O){var te,ne=null==C.$$s?this:C.$$s;return null==ne.secret&&(ne.secret=k),null==O&&(O=k),O["$secret="](ne.secret),W(O,"text=",te=[o]),te[te.length-1]},{$$s:this})}),function(a,r){var e=Q(a,null,"RerollCondition"),n=e.$$prototype;n.threshold=n.cmp_op=k,e.$attr_reader("cmp_op"),e.$attr_reader("threshold"),B(e,"$initialize",function(s,i){return this.cmp_op=s,this.threshold=i}),B(e,"$valid?",function(s){var i=this;if(!E(i.threshold))return!1;switch(i.cmp_op.valueOf()){case"<=":return J(i.threshold,s);case"<":return y(i.threshold,s);case">=":return H(i.threshold,1);case">":return A(i.threshold,1);case"!=":return $.Range.$new(1,s,!1)["$include?"](i.threshold);default:return!0}}),B(e,"$reroll?",function(s){return s.$send(this.cmp_op,this.threshold)})}(d[0]),function(a,r,e){var n=Q(a,null,"Notation"),t=[n].concat(e),s=$.$r(t),i=n.$$prototype;i.times=i.sides=k,B(n,"$initialize",function(o,j){return this.times=o,this.sides=j}),B(n,"$to_dice",function(o){try{var O,te;return U("eval_return"),O=this.times.$eval(o),te=this.sides.$eval(o),s("Dice").$new(O,te)}catch(ne){if(ne===$.t_eval_return)return ne.$v;throw ne}})}(d[0],0,d),function(a,r){var e=Q(a,null,"Dice");return e.$attr_reader("times","sides"),B(e,"$initialize",function(t,s){return this.times=t,this.sides=s}),B(e,"$roll",function(t){return t.$roll_barabara(this.$times(),this.$sides())}),B(e,"$to_s",function(){return this.$times()+"R"+this.$sides()})}(d[0])},Opal.modules["bcdice/arithmetic/node"]=function($){var b,_,v,a,r,m,M,f,q,K=$.module,Q=$.klass,N=$.def,x=$.thrower,B=$.return_ivar,E=$.send2,W=$.find_super,U=$.eqeq,J=$.const_set,Y=$.eqeqeq,H=$.rb_divide,F=$.truthy,y=$.assign_ivar,A=$.alias,L=[],k=$.nil,T=$.$$$;return b=L,_=q=[K(L[0],"BCDice")].concat(b),v=f=[K(q[0],"Arithmetic")].concat(_),m=[K(f[0],"Node")].concat(v),M=$.$r(m),(r=(a=Q(m[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=k,N(a,"$initialize",function(n,t,s){var i=this;return i.lhs=n,i.op=t,i.rhs=s}),N(a,"$eval",function(n){try{x("eval_return");var c,s=this,i=k;return i=s.lhs.$eval(n),c=s.rhs.$eval(n),i.$send(s.op,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),N(a,"$output",function(){var n=this;return""+n.lhs.$output()+n.op+n.rhs.$output()}),N(a,"$s_exp",function(){var n=this;return"("+n.$op_for_s_exp()+" "+n.lhs.$s_exp()+" "+n.rhs.$s_exp()+")"}),N(a,"$op_for_s_exp",B("op")),function(h,d,a){var r=Q(h,d,"DivideBase"),e=[r].concat(a),n=$.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=k,N(r,"$initialize",function s(i,c){return s.$$p=null,E(this,W(this,"initialize",s,!1,!0),"initialize",[i,"/",c],null)}),N(r,"$eval",function(i){try{x("eval_return");var j,C,o=this;return j=o.lhs.$eval(i),C=o.rhs.$eval(i),U(C,0)&&o.$raise(n("ZeroDivisionError")),o.$divide_and_round(j,C,i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),N(r,"$output",function s(){var i=s.$$p||k,c=this;return s.$$p=null,""+E(c,W(c,"output",s,!1,!0),"output",[],i)+c.$rounding_method()}),r.$private(),N(r,"$rounding_method",function(){return T(this.$class(),"ROUNDING_METHOD")}),N(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),N(r,"$divide_and_round",function(i,c,o){return this.$raise(n("NotImplementedError"))})}(m[0],M("BinaryOp"),m),function(h,d,a){var r=Q(h,d,"DivideWithGameSystemDefault"),e=[r].concat(a),n=$.$r(e);J(e[0],"ROUNDING_METHOD",""),r.$private(),N(r,"$divide_and_round",function(s,i,c){var o,j=k;return Y(T(n("RoundType"),"CEIL"),o=c)?H(s.$to_f(),i).$ceil():Y(T(n("RoundType"),"ROUND"),o)?(j=H(s.$to_f(),i),F(j["$negative?"]())?j.$abs().$round()["$-@"]():j.$round()):H(s,i).$floor()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithCeil"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","C"),r.$private(),N(r,"$divide_and_round",function(t,s,i){return H(t.$to_f(),s).$ceil()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithRound"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","R"),r.$private(),N(r,"$divide_and_round",function(t,s,i){var c=k;return c=H(t.$to_f(),s),F(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithFloor"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","F"),r.$private(),N(r,"$divide_and_round",function(t,s,i){return H(t,s).$floor()})}(m[0],M("DivideBase"),m),function(h,d){var a=Q(h,null,"Negative");a.$$prototype.body=k,N(a,"$initialize",y("body")),N(a,"$eval",function(n){try{return x("eval_return"),this.body.$eval(n)["$-@"]()}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),N(a,"$output",function(){return"-"+this.body.$output()}),N(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(m[0]),function(h,d){var a=Q(h,null,"Parenthesis");a.$$prototype.expr=k,N(a,"$initialize",y("expr")),N(a,"$eval",function(n){try{return x("eval_return"),this.expr.$eval(n)}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),N(a,"$output",function(){return"("+this.expr.$output()+")"}),N(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(m[0]),function(h,d){var a=Q(h,null,"Number");return a.$$prototype.value=k,N(a,"$initialize",y("value")),N(a,"$eval",B("value")),N(a,"$output",function(){return this.value.$to_s()}),A(a,"s_exp","output")}(m[0])},Opal.modules["bcdice/common_command/barabara_dice/parser"]=function($){var k,g,p,M,n,t,s,i,c,o,j,C,O,ae,h,r,e,z,v,R,I,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.hash,E=$.const_set,W=$.truthy,U=$.hash2,J=$.return_val,Y=$.to_ary,H=$.top,F=[],y=$.nil,A=$.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/common_command/lexer"),H.$require("bcdice/common_command/reroll_dice/node"),H.$require("bcdice/arithmetic/node"),k=F,g=I=[K(F[0],"BCDice")].concat(k),p=R=[K(I[0],"CommonCommand")].concat(g),z=[K(R[0],"BarabaraDice")].concat(p),v=$.$r(z),M=z,r=[h=Q(z[0],A(v("Racc"),"Parser"),"Parser")].concat(M),e=$.$r(r),h.$$prototype.lexer=y,N(h,"$parse",function(X){return this.$new().$parse(X)}),x(h,"$parse",function(X){try{return this.lexer=e("Lexer").$new(X),this.$do_parse()}catch(V){if(!$.rescue(V,[e("ParseError")]))throw V;try{return y}finally{$.pop_exception()}}}),h.$private(),x(h,"$next_token",function(){return this.lexer.$next_token()}),n=$.large_array_unpack("13,9,3,9,24,25,9,9,9,26,18,19,8,12,8,18,19,8,8,8,9,4,9,38,36,37,39,18,19,18,19,8,9,8,9,27,28,24,25,18,19,18,19,8,9,8,9,27,28,27,28,18,19,18,19,8,10,8,14"),t=$.large_array_unpack("5,2,0,8,15,15,13,14,12,15,8,8,2,5,8,12,12,13,14,12,18,1,19,34,34,34,34,18,18,19,19,18,24,19,25,16,16,21,21,24,24,25,25,24,27,25,28,31,31,32,32,27,27,28,28,27,4,28,7"),s=$.large_array_unpack("-6,21,-1,,56,-9,,55,1,,,,6,4,5,-5,24,,18,20,,28,,,30,32,,42,44,,,36,38,,19,,,,,"),i=$.large_array_unpack("-2,-25,-25,-3,-25,-4,-7,-25,-25,-24,40,-1,-25,-25,-25,-25,-11,-14,-25,-25,-22,-5,-6,-8,-25,-25,-23,-25,-25,-20,-21,-9,-10,-12,-15,-13,-16,-17,-18,-19"),c=[7,1,6,15,2,29,30,21,31,32,5,7,23,22,33,34,11,35],o=[7,1,6,5,2,9,9,5,8,8,3,7,7,6,9,9,4,10],j=[y,1,4,8,11,-5,0,-2,-16,-13,-17],C=[y,y,y,y,y,y,y,20,16,17,y],O=$.large_array_unpack("0,0,racc_error,3,24,_reduce_1,0,25,_reduce_2,1,25,_reduce_3,0,27,_reduce_4,2,27,_reduce_5,3,26,_reduce_6,1,26,_reduce_7,3,29,_reduce_8,3,28,_reduce_9,3,28,_reduce_10,1,28,_reduce_none,3,31,_reduce_12,4,31,_reduce_13,1,31,_reduce_none,0,33,_reduce_15,1,33,_reduce_16,1,33,_reduce_17,1,33,_reduce_18,1,33,_reduce_19,2,32,_reduce_20,2,32,_reduce_21,1,32,_reduce_none,3,30,_reduce_23,1,30,_reduce_24"),ae=B(!1,0,"error",1,"NUMBER",2,"B",3,"R",4,"U",5,"C",6,"F",7,"S",8,"PLUS",9,"MINUS",10,"ASTERISK",11,"SLASH",12,"PARENL",13,"PARENR",14,"BRACKETL",15,"BRACKETR",16,"LESS",17,"GREATER",18,"EQUAL",19,"NOT",20,"AT",21,"CMP_OP",22),E(r[0],"Racc_arg",[n,t,i,s,c,o,C,j,23,O,ae,40,25,!0]),W(e("Ractor","skip_raise")?"constant":y)&&e("Ractor").$make_shareable(e("Racc_arg")),E(r[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,B,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,add,dice,term,mul,unary,round_type")),W(e("Ractor","skip_raise")?"constant":y)&&e("Ractor").$make_shareable(e("Racc_token_to_s_table")),E(r[0],"Racc_debug_parser",!1),x(h,"$_reduce_1",function(X,D,V){return A(e("Node"),"Command").$new(U(["secret","notations","cmp_op","target_number"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:X["$[]"](2)["$[]"]("cmp_op"),target_number:X["$[]"](2)["$[]"]("target")}))}),x(h,"$_reduce_2",J(!1)),x(h,"$_reduce_3",J(!0)),x(h,"$_reduce_4",function(X,D,V){return U([],{})}),x(h,"$_reduce_5",function(X,D,V){var Z,P,G;return G=null==(Z=Y(X))[1]?y:Z[1],W(P=null==Z[0]?y:Z[0])||this.$raise(e("ParseError")),U(["cmp_op","target"],{cmp_op:P,target:G})}),x(h,"$_reduce_6",function(X,D,V){var Z=y;return(Z=X["$[]"](0)).$push(X["$[]"](2)),Z}),x(h,"$_reduce_7",function(X,D,V){return[X["$[]"](0)]}),x(h,"$_reduce_8",function(X,D,V){var Z,u;return Z=X["$[]"](0),u=X["$[]"](2),A(e("Node"),"Notation").$new(Z,u)}),x(h,"$_reduce_9",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),x(h,"$_reduce_10",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),x(h,"$_reduce_12",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"*",X["$[]"](2))}),x(h,"$_reduce_13",function(X,D,V){return X["$[]"](3).$new(X["$[]"](0),X["$[]"](2))}),x(h,"$_reduce_15",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),x(h,"$_reduce_16",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),x(h,"$_reduce_17",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),x(h,"$_reduce_18",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithRound")}),x(h,"$_reduce_19",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithFloor")}),x(h,"$_reduce_20",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_21",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),x(h,"$_reduce_23",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_24",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(X["$[]"](0))}),x(h,"$_reduce_none",function(X,D,V){return X["$[]"](0)})},Opal.modules["bcdice/common_command/barabara_dice"]=function($){var J,y,T,g,R,_,I,b,L,H,K=$.module,Q=$.const_set,N=$.thrower,x=$.def,E=[],W=$.nil;return $.top.$require("bcdice/common_command/barabara_dice/parser"),J=E,y=H=[K(E[0],"BCDice")].concat(J),T=L=[K(H[0],"CommonCommand")].concat(y),Q((b=[I=K(L[0],"BarabaraDice")].concat(T))[0],"PREFIX_PATTERN",/\d+B\d+/.$freeze()),R=[g=$.get_singleton_class(I)].concat(b),_=$.$r(R),x(g,"$eval",function(f,z,v){try{var m;return N("eval_return"),(m=_("Parser").$parse(f))===W||null==m?W:m.$eval(z,v)}catch(h){if(h===$.t_eval_return)return h.$v;throw h}})},Opal.modules["bcdice/result"]=function($){var L,I,k,Y,F,Q=$.klass,N=$.send,x=$.def,B=$.return_val,E=$.return_ivar,W=[],U=$.nil;return Y=W,L=F=[(0,$.module)(W[0],"BCDice")].concat(Y),[k=Q(F[0],null,"Result")].concat(L),x(I=$.get_singleton_class(k),"$success",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),N(p,"success=",f=[!0]),f[f.length-1]})}),x(I,"$failure",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),N(p,"failure=",f=[!0]),f[f.length-1]})}),x(I,"$critical",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),p["$critical="](!0),N(p,"success=",f=[!0]),f[f.length-1]})}),x(I,"$fumble",function(q){return N(this.$new(),"tap",[],function(p){var f;return null==p&&(p=U),p["$text="](q),p["$fumble="](!0),N(p,"failure=",f=[!0]),f[f.length-1]})}),x(I,"$nothing",B("nothing")),x(k,"$initialize",function(b){var g=this;return null==b&&(b=U),g.text=b,g.rands=U,g.detailed_rands=U,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),x(k,"$secret?",E("secret")),x(k,"$success?",E("success")),x(k,"$failure?",E("failure")),x(k,"$critical?",E("critical")),x(k,"$fumble?",E("fumble")),x(k,"$condition=",function(b){return this.success=b,this.failure=b["$!"]()})},Opal.modules["bcdice/common_command/tally_dice/node"]=function($){var b,_,v,h,n,t,s,i,a,m,f,q,K=$.module,Q=$.klass,N=$.const_set,x=$.ensure_kwargs,B=$.get_kwarg,E=$.def,W=$.truthy,U=$.rb_gt,J=$.send,Y=$.not,H=$.eqeq,F=$.hash2,y=$.thrower,A=$.alias,k=[],T=$.nil;return $.top.$require("bcdice/result"),b=k,_=q=[K(k[0],"BCDice")].concat(b),v=f=[K(q[0],"CommonCommand")].concat(_),h=m=[K(f[0],"TallyDice")].concat(v),n=a=[K(m[0],"Node")].concat(h),s=[t=Q(a[0],null,"Command")].concat(n),i=$.$r(s),t.$$prototype.notation=T,N(s[0],"MAX_SIDES",20),E(t,"$initialize",function(j){var C,O;return j=x(j),C=B(j,"secret"),O=B(j,"notation"),this.secret=C,this.notation=O}),E(t,"$eval",function(j,C){var te=T,ne=T,ae=T,le=T,oe=T,ue=T;return te=this.notation.$to_dice(j.$round_type()),W(te["$valid?"]())?W(U(te.$sides(),i("MAX_SIDES")))?i("Result").$new("("+te+") \uff1e \u9762\u6570\u306f1\u4ee5\u4e0a\u3001"+i("MAX_SIDES")+"\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):(ne=te.$roll(C),ae=(W(j["$sort_barabara_dice?"]())?ne.$sort():ne).$join(","),le=J(J(ne,"group_by",[],"itself".$to_proc()),"transform_values",[],"length".$to_proc()),oe=J($.Range.$new(1,te.$sides(),!1),"map",[],function(X){var D;return null==X&&(X=T),D=le.$fetch(X,0),H(D,0)&&Y(te["$show_zeros?"]())?T:"["+X+"]\xd7"+le.$fetch(X,0)}),ue=["("+te+")",ae,oe.$compact().$join(", ")].$compact(),J(i("Result").$new(),"tap",[],function ie(X){var D,V=null==ie.$$s?this:ie.$$s;return null==V.secret&&(V.secret=T),null==X&&(X=T),X["$secret="](V.secret),D=[ue.$join(" \uff1e ")],J(X,"text=",D),D[D.length-1]},{$$s:this})):T}),function(r,e,n){var t=Q(r,null,"Notation"),s=[t].concat(n),i=$.$r(s),c=t.$$prototype;c.times=c.sides=c.show_zeros=T,t.$attr_reader("times"),t.$attr_reader("sides"),t.$attr_reader("show_zeros"),E(t,"$initialize",function(j){var C,O,te;return j=x(j),C=B(j,"times"),O=B(j,"sides"),te=B(j,"show_zeros"),this.times=C,this.sides=O,this.show_zeros=te}),E(t,"$to_dice",function(j){try{y("eval_return");var te,ne,O=this;return te=O.times.$eval(j),ne=O.sides.$eval(j),i("Dice").$new(F(["times","sides","show_zeros"],{times:te,sides:ne,show_zeros:O.show_zeros}))}catch(ae){if(ae===$.t_eval_return)return ae.$v;throw ae}})}(a[0],0,a),function(r,e){var n=Q(r,null,"Dice"),t=n.$$prototype;return t.times=t.sides=t.show_zeros=T,n.$attr_reader("times"),n.$attr_reader("sides"),n.$attr_reader("show_zeros"),A(n,"show_zeros?","show_zeros"),E(n,"$initialize",function(i){var c,o,j,C=this;return i=x(i),c=B(i,"times"),o=B(i,"sides"),j=B(i,"show_zeros"),C.times=c,C.sides=o,C.show_zeros=j}),E(n,"$valid?",function(){var c;return W(c=U(this.times,0))?U(this.sides,0):c}),E(n,"$roll",function(i){return i.$roll_barabara(this.times,this.sides)}),E(n,"$to_s",function(){var c,i=this;return c=W(i.show_zeros)?"Z":"Y",i.times+"T"+c+i.sides})}(a[0])},Opal.modules["bcdice/common_command/tally_dice/parser"]=function($){var L,b,_,m,e,n,t,s,i,c,o,j,C,ne,M,a,r,f,z,q,T,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.hash,E=$.const_set,W=$.truthy,U=$.hash2,J=$.return_val,Y=$.top,H=[],F=$.nil,y=$.$$$;return Y.$require("racc/parser.rb"),Y.$require("bcdice/common_command/lexer"),Y.$require("bcdice/common_command/tally_dice/node"),Y.$require("bcdice/arithmetic/node"),L=H,b=T=[K(H[0],"BCDice")].concat(L),_=q=[K(T[0],"CommonCommand")].concat(b),f=[K(q[0],"TallyDice")].concat(_),z=$.$r(f),m=f,a=[M=Q(f[0],y(z("Racc"),"Parser"),"Parser")].concat(m),r=$.$r(a),M.$$prototype.lexer=F,N(M,"$parse",function(ie){return this.$new().$parse(ie)}),x(M,"$parse",function(ie){try{return this.lexer=r("Lexer").$new(ie),this.$do_parse()}catch(D){if(!$.rescue(D,[r("ParseError")]))throw D;try{return F}finally{$.pop_exception()}}}),M.$private(),x(M,"$next_token",function(){return this.lexer.$next_token()}),e=$.large_array_unpack("8,8,18,19,20,21,8,8,8,22,14,15,3,7,7,14,15,14,15,7,7,7,8,4,8,35,33,34,36,8,9,14,15,14,15,7,8,7,14,15,23,24,7,23,24,14,15,23,24,7,10"),n=$.large_array_unpack("2,7,10,10,11,11,14,17,15,11,7,7,0,2,7,14,14,15,15,14,17,15,20,1,21,31,31,31,31,23,4,20,20,21,21,20,24,21,23,23,12,12,23,28,28,24,24,29,29,24,6"),t=$.large_array_unpack("2,23,-2,,30,,47,-1,,,-2,-7,27,,4,6,,5,,,20,22,,27,34,,,,30,34,,19,,,,,"),s=$.large_array_unpack("-2,-23,-23,-3,-23,-1,-23,-23,-22,37,-23,-23,-9,-12,-23,-23,-20,-23,-5,-6,-23,-23,-21,-23,-23,-18,-19,-4,-7,-8,-10,-13,-11,-14,-15,-16,-17"),i=[6,25,26,12,1,2,5,17,11,32,30,31,F,F,F,27,28,29],c=[4,8,8,7,1,2,3,5,6,9,8,8,F,F,F,4,7,7],o=[F,4,5,4,-2,-3,1,-4,-13,-22],j=[F,F,F,F,16,F,F,F,13,F],C=$.large_array_unpack("0,0,racc_error,2,18,_reduce_1,0,19,_reduce_2,1,19,_reduce_3,4,20,_reduce_4,1,22,_reduce_5,1,22,_reduce_6,3,23,_reduce_7,3,23,_reduce_8,1,23,_reduce_none,3,24,_reduce_10,4,24,_reduce_11,1,24,_reduce_none,0,26,_reduce_13,1,26,_reduce_14,1,26,_reduce_15,1,26,_reduce_16,1,26,_reduce_17,2,25,_reduce_18,2,25,_reduce_19,1,25,_reduce_none,3,21,_reduce_21,1,21,_reduce_22"),ne=B(!1,0,"error",1,"NUMBER",2,"T",3,"Y",4,"Z",5,"R",6,"U",7,"C",8,"F",9,"S",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16),E(a[0],"Racc_arg",[e,n,s,t,i,c,j,o,17,C,ne,37,23,!0]),W(r("Ractor","skip_raise")?"constant":F)&&r("Ractor").$make_shareable(r("Racc_arg")),E(a[0],"Racc_token_to_s_table",["$end","error","NUMBER","T","Y","Z","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","notation","term","show_zeros","add","mul","unary","round_type"]),W(r("Ractor","skip_raise")?"constant":F)&&r("Ractor").$make_shareable(r("Racc_token_to_s_table")),E(a[0],"Racc_debug_parser",!1),x(M,"$_reduce_1",function(ie,X,D){return y(r("Node"),"Command").$new(U(["secret","notation"],{secret:ie["$[]"](0),notation:ie["$[]"](1)}))}),x(M,"$_reduce_2",J(!1)),x(M,"$_reduce_3",J(!0)),x(M,"$_reduce_4",function(ie,X,D){return y(r("Node"),"Notation").$new(U(["times","sides","show_zeros"],{times:ie["$[]"](0),sides:ie["$[]"](3),show_zeros:ie["$[]"](2)}))}),x(M,"$_reduce_5",J(!1)),x(M,"$_reduce_6",J(!0)),x(M,"$_reduce_7",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"+",ie["$[]"](2))}),x(M,"$_reduce_8",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"-",ie["$[]"](2))}),x(M,"$_reduce_10",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"*",ie["$[]"](2))}),x(M,"$_reduce_11",function(ie,X,D){return ie["$[]"](3).$new(ie["$[]"](0),ie["$[]"](2))}),x(M,"$_reduce_13",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),x(M,"$_reduce_14",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithCeil")}),x(M,"$_reduce_15",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithCeil")}),x(M,"$_reduce_16",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithRound")}),x(M,"$_reduce_17",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithFloor")}),x(M,"$_reduce_18",function(ie,X,D){return ie["$[]"](1)}),x(M,"$_reduce_19",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"Negative").$new(ie["$[]"](1))}),x(M,"$_reduce_21",function(ie,X,D){return ie["$[]"](1)}),x(M,"$_reduce_22",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"Number").$new(ie["$[]"](0))}),x(M,"$_reduce_none",function(ie,X,D){return ie["$[]"](0)})},Opal.modules["bcdice/common_command/tally_dice"]=function($){var J,y,T,g,R,_,I,b,L,H,K=$.module,Q=$.const_set,N=$.thrower,x=$.def,E=[],W=$.nil;return $.top.$require("bcdice/common_command/tally_dice/parser"),J=E,y=H=[K(E[0],"BCDice")].concat(J),T=L=[K(H[0],"CommonCommand")].concat(y),Q((b=[I=K(L[0],"TallyDice")].concat(T))[0],"PREFIX_PATTERN",/\d+T[YZ]\d+/.$freeze()),R=[g=$.get_singleton_class(I)].concat(b),_=$.$r(R),x(g,"$eval",function(f,z,v){try{var m;return N("eval_return"),(m=_("Parser").$parse(f))===W||null==m?W:m.$eval(z,v)}catch(h){if(h===$.t_eval_return)return h.$v;throw h}})},Opal.modules["bcdice/common_command/calc/node"]=function($){var A,I,R,z,h,d,a,r,S,p,g,k,K=$.module,Q=$.klass,N=$.ensure_kwargs,x=$.get_kwarg,B=$.def,E=$.truthy,W=$.send,U=$.thrower,Y=[],H=$.nil,F=$.$$$;return $.top.$require("bcdice/arithmetic/node"),A=Y,I=k=[K(Y[0],"BCDice")].concat(A),R=g=[K(k[0],"CommonCommand")].concat(I),z=p=[K(g[0],"Calc")].concat(R),h=S=[K(p[0],"Node")].concat(z),a=[d=Q(S[0],null,"Command")].concat(h),r=$.$r(a),d.$$prototype.expr=H,B(d,"$initialize",function(t){var s,i;return t=N(t),s=x(t,"secret"),i=x(t,"expr"),this.secret=s,this.expr=i}),B(d,"$eval",function(t){try{U("eval_return");var c,o,i=this;return c=function(){try{return i.expr.$eval(t).$to_i()}catch(j){if(!$.rescue(j,[r("ZeroDivisionError")]))throw j;try{return"\u30bc\u30ed\u9664\u7b97\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u8a08\u7b97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"}finally{$.pop_exception()}}}(),o=E(i.expr["$is_a?"](F(F(r("Arithmetic"),"Node"),"Parenthesis")))?i.expr.$output():"("+i.expr.$output()+")",W(r("Result").$new(),"tap",[],function j(C){var O,te=null==j.$$s?this:j.$$s;return null==te.secret&&(te.secret=H),null==C&&(C=H),C["$secret="](te.secret),W(C,"text=",O=["c"+o+" \uff1e "+c]),O[O.length-1]},{$$s:i})}catch(j){if(j===$.t_eval_return)return j.$v;throw j}})},Opal.modules["bcdice/common_command/calc/parser"]=function($){var L,b,_,m,e,n,t,s,i,c,o,j,C,ne,M,a,r,f,z,q,T,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.hash,E=$.const_set,W=$.truthy,U=$.hash2,J=$.return_val,Y=$.top,H=[],F=$.nil,y=$.$$$;return Y.$require("racc/parser.rb"),Y.$require("bcdice/common_command/lexer"),Y.$require("bcdice/common_command/calc/node"),Y.$require("bcdice/arithmetic/node"),L=H,b=T=[K(H[0],"BCDice")].concat(L),_=q=[K(T[0],"CommonCommand")].concat(b),f=[K(q[0],"Calc")].concat(_),z=$.$r(f),m=f,a=[M=Q(f[0],y(z("Racc"),"Parser"),"Parser")].concat(m),r=$.$r(a),M.$$prototype.lexer=F,N(M,"$parse",function(ie){return this.$new().$parse(ie)}),x(M,"$parse",function(ie){try{return this.lexer=r("Lexer").$new(ie),this.$do_parse()}catch(D){if(!$.rescue(D,[r("ParseError")]))throw D;try{return F}finally{$.pop_exception()}}}),M.$private(),x(M,"$next_token",function(){return this.lexer.$next_token()}),e=$.large_array_unpack("14,3,14,15,16,4,10,11,10,11,13,14,13,14,17,18,5,10,11,10,11,13,14,13,14,17,18,6,10,11,10,11,13,14,13,14,17,18,,10,11,10,11,13,,13,15,16,,,,26,30,28,29,31"),n=$.large_array_unpack("5,0,10,7,7,1,5,5,10,10,5,11,10,13,8,8,2,11,11,13,13,11,15,13,16,22,22,4,15,15,16,16,15,17,16,18,23,23,,17,17,18,18,17,,18,21,21,,,,21,25,25,25,25"),t=[-6,5,11,F,27,-2,F,-5,4,F,0,9,F,11,F,20,22,31,33,F,F,38,15,26,F,49,F,F,F,F,F,F],s=[-2,-20,-20,-3,-20,-20,32,-1,-6,-9,-20,-20,-17,-20,-19,-20,-20,-20,-20,-15,-16,-20,-4,-5,-7,-10,-18,-8,-11,-12,-13,-14],i=[7,1,19,20,22,23,2,27,21,24,25],c=[3,1,5,5,4,4,2,6,3,5,5],o=[F,1,6,-5,-11,-8,-18,F],j=[F,F,F,F,8,9,F,12],C=$.large_array_unpack("0,0,racc_error,3,15,_reduce_1,0,16,_reduce_2,1,16,_reduce_3,3,17,_reduce_4,3,17,_reduce_5,1,17,_reduce_none,3,18,_reduce_7,4,18,_reduce_8,1,18,_reduce_none,0,20,_reduce_10,1,20,_reduce_11,1,20,_reduce_12,1,20,_reduce_13,1,20,_reduce_14,2,19,_reduce_15,2,19,_reduce_16,1,19,_reduce_none,3,21,_reduce_18,1,21,_reduce_19"),ne=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13),E(a[0],"Racc_arg",[e,n,s,t,i,c,j,o,14,C,ne,32,20,!0]),W(r("Ractor","skip_raise")?"constant":F)&&r("Ractor").$make_shareable(r("Racc_arg")),E(a[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","add","mul","unary","round_type","term"]),W(r("Ractor","skip_raise")?"constant":F)&&r("Ractor").$make_shareable(r("Racc_token_to_s_table")),E(a[0],"Racc_debug_parser",!1),x(M,"$_reduce_1",function(ie,X,D){return y(r("Node"),"Command").$new(U(["secret","expr"],{secret:ie["$[]"](0),expr:ie["$[]"](2)}))}),x(M,"$_reduce_2",J(!1)),x(M,"$_reduce_3",J(!0)),x(M,"$_reduce_4",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"+",ie["$[]"](2))}),x(M,"$_reduce_5",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"-",ie["$[]"](2))}),x(M,"$_reduce_7",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"*",ie["$[]"](2))}),x(M,"$_reduce_8",function(ie,X,D){return ie["$[]"](3).$new(ie["$[]"](0),ie["$[]"](2))}),x(M,"$_reduce_10",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),x(M,"$_reduce_11",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithCeil")}),x(M,"$_reduce_12",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithCeil")}),x(M,"$_reduce_13",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithRound")}),x(M,"$_reduce_14",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"DivideWithFloor")}),x(M,"$_reduce_15",function(ie,X,D){return ie["$[]"](1)}),x(M,"$_reduce_16",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"Negative").$new(ie["$[]"](1))}),x(M,"$_reduce_18",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"Parenthesis").$new(ie["$[]"](1))}),x(M,"$_reduce_19",function(ie,X,D){return y(y(r("Arithmetic"),"Node"),"Number").$new(ie["$[]"](0))}),x(M,"$_reduce_none",function(ie,X,D){return ie["$[]"](0)})},Opal.modules["bcdice/common_command/calc"]=function($){var J,y,T,g,R,_,I,b,L,H,K=$.module,Q=$.const_set,N=$.thrower,x=$.def,E=[],W=$.nil;return $.top.$require("bcdice/common_command/calc/parser"),J=E,y=H=[K(E[0],"BCDice")].concat(J),T=L=[K(H[0],"CommonCommand")].concat(y),Q((b=[I=K(L[0],"Calc")].concat(T))[0],"PREFIX_PATTERN",/C[+\-(]*\d+/.$freeze()),R=[g=$.get_singleton_class(I)].concat(b),_=$.$r(R),x(g,"$eval",function(f,z,v){try{var m;return N("eval_return"),(m=_("Parser").$parse(f))===W||null==m?W:m.$eval(z.$round_type())}catch(h){if(h===$.t_eval_return)return h.$v;throw h}})},Opal.modules["bcdice/common_command/choice"]=function($){var g,p,m,e,t,M,h,d,a,z,R,K=$.module,Q=$.klass,N=$.const_set,x=$.hash2,B=$.def,E=$.truthy,W=$.eqeq,U=$.eqeqeq,J=$.send,Y=$.rb_lt,H=$.thrower,F=$.rb_gt,y=$.ensure_kwargs,A=$.get_kwarg,k=[],T=$.nil,I=$.$$$;return $.top.$require("strscan"),g=k,p=R=[K(k[0],"BCDice")].concat(g),m=z=[K(R[0],"CommonCommand")].concat(p),h=[M=Q(z[0],null,"Choice")].concat(m),d=$.$r(h),(a=M.$$prototype).items=a.takes=a.block_delimiter=T,N(h[0],"PREFIX_PATTERN",/choice/.$freeze()),e=h,N((t=[K(h[0],"BlockDelimiter")].concat(e))[0],"BRACKET","bracket"),N(t[0],"PAREN","paren"),N(t[0],"SPACE","space"),N(h[0],"DELIMITER",x(["bracket","paren","space"],{bracket:/,/,paren:/,/,space:/\s+/}).$freeze()),N(h[0],"DELIMITER_CHAR",x(["bracket","paren","space"],{bracket:", ",paren:", ",space:" "}).$freeze()),N(h[0],"TERMINATION",x(["bracket","paren","space"],{bracket:/\]/,paren:/\)/,space:/$/}).$freeze()),N(h[0],"SUFFIX",x(["bracket","paren","space"],{bracket:"]",paren:")",space:""}).$freeze()),function(r,e){var n=[r].concat(e),t=$.$r(n);B(r,"$eval",function(i,c,o){var j;return(j=this.$parse(i))===T||null==j?T:j.$roll(o)}),r.$private(),B(r,"$parse",function(i){try{var o,O,ae,le,oe,c=H("return"),C=T,te=T,ne=T,ue=T,ie=T,X=T;if((C=t("StringScanner").$new(i)).$skip(/\s+/),O=C.$scan(/S/i)["$nil?"]()["$!"](),!E(C.$scan(/choice/i))||(te=E(ne=(o=C.$scan(/\d+/))===T||null==o?T:o.$to_i())?ne:1,W(te,0)))return T;for(ae=U("[",ne=C.$scan(/\(|\[|\s+/))?I(t("BlockDelimiter"),"BRACKET"):U("(",ne)?I(t("BlockDelimiter"),"PAREN"):U(t("String"),ne)?I(t("BlockDelimiter"),"SPACE"):void c.$throw(),le=t("DELIMITER")["$[]"](ae),oe=t("TERMINATION")["$[]"](ae),ue=[];E(ie=C.$scan_until(le));)ue.$push(ie.$delete_suffix(","));return X=C.$scan_until(oe),!E(X)||(ue.$push(X.$delete_suffix(t("SUFFIX")["$[]"](ae))),ue=J(J(ue,"map",[],"strip".$to_proc()),"reject",[],"empty?".$to_proc()),W(ue.$size(),1)&&(ue=this.$parse_multi_item_shorthand(ue.$first())),E(ue["$empty?"]())||E(Y(ue.$size(),te)))?T:this.$new(x(["secret","block_delimiter","takes","items"],{secret:O,block_delimiter:ae,takes:te,items:ue}))}catch(D){if(D===c)return D.$v;throw D}}),B(r,"$parse_multi_item_shorthand",function(i){var o,j;return E(o=E(j=this.$parse_multi_nums_shorthand(i))?j:this.$parse_multi_chars_shorthand(i))?o:[]}),B(r,"$parse_multi_nums_shorthand",function(i){var c=T,o=T,j=T;return c=/^(\d+)-(\d+)$/.$match(i),!E(c)||(o=c["$[]"](1).$to_i(),j=c["$[]"](2).$to_i(),E(F(o,j)))?T:o.$upto(j).$to_a()}),B(r,"$parse_multi_chars_shorthand",function(i){var o,c=T,j=T,C=T;return c=E(o=/^([a-z])-([a-z])$/.$match(i))?o:/^([A-Z])-([A-Z])$/.$match(i),!E(c)||(j=c["$[]"](1),C=c["$[]"](2),E(F(j,C)))?T:j.$upto(C).$to_a()})}($.get_singleton_class(M),h),B(M,"$initialize",function(e){var n,t,s,i,c=this;return e=y(e),n=A(e,"secret"),t=A(e,"block_delimiter"),s=A(e,"takes"),i=A(e,"items"),c.secret=n,c.block_delimiter=t,c.takes=s,c.items=i}),B(M,"$roll",function(e){var n=this,t=T,s=T;return E(F(n.items.$size(),100))?d("Result").$new("\u9805\u76ee\u6570\u306f100\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):(t=n.items.$dup(),s=[],J(n.takes,"times",[],function(){var c;return c=e.$roll_index(t.$size()),s["$<<"](t.$delete_at(c))}),J(d("Result").$new(),"tap",[],function i(c){var o,C,j=null==i.$$s?this:i.$$s;return null==j.block_delimiter&&(j.block_delimiter=T),null==j.secret&&(j.secret=T),null==c&&(c=T),C=s.$join(d("DELIMITER_CHAR")["$[]"](j.block_delimiter)),c["$secret="](j.secret),o=["("+j.$expr()+") \uff1e "+C],J(c,"text=",o),o[o.length-1]},{$$s:n}))}),B(M,"$expr",function(){var n,t,e=this;return n=W(e.takes,1)?T:e.takes,U(I(d("BlockDelimiter"),"SPACE"),t=e.block_delimiter)?"choice"+n+" "+e.items.$join(" "):U(I(d("BlockDelimiter"),"BRACKET"),t)?"choice"+n+"["+e.items.$join(",")+"]":U(I(d("BlockDelimiter"),"PAREN"),t)?"choice"+n+"("+e.items.$join(",")+")":T})},Opal.modules["bcdice/common_command/d66_dice"]=function($){var I,R,v,d,r,e,S,m,M,p,g,K=$.module,Q=$.klass,N=$.const_set,x=$.thrower,B=$.def,E=$.truthy,W=$.hash2,U=$.ensure_kwargs,J=$.get_kwarg,Y=$.send,H=$.eqeqeq,F=$.rb_plus,y=$.rb_times,A=[],L=$.nil,k=$.$$$;return I=A,R=g=[K(A[0],"BCDice")].concat(I),v=p=[K(g[0],"CommonCommand")].concat(R),m=[S=Q(p[0],null,"D66Dice")].concat(v),M=$.$r(m),S.$$prototype.sort_type=L,N(m[0],"PREFIX_PATTERN",/D66/.$freeze()),r=[d=$.get_singleton_class(S)].concat(m),e=$.$r(r),B(d,"$eval",function(t,s,i){try{var o;return x("eval_return"),(o=this.$parse(t,s))===L||null==o?L:o.$eval(i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),d.$private(),B(d,"$parse",function(t,s){var c=L,o=L;return t=t.$split(" ",2).$first(),c=/^(S)?D66([ANSD])?$/i.$match(t.$upcase()),E(c)?this.$new(W(["secret","sort_type","suffix"],{secret:c["$[]"](1)["$nil?"]()["$!"](),sort_type:E(o=this.$sort_type_from_suffix(c["$[]"](2)))?o:s.$d66_sort_type(),suffix:c["$[]"](2)})):L}),B(d,"$sort_type_from_suffix",function(t){switch(t.valueOf()){case"A":case"S":return k(e("D66SortType"),"ASC");case"D":return k(e("D66SortType"),"DESC");case"N":return k(e("D66SortType"),"NO_SORT");default:return L}}),B(S,"$initialize",function(a){var r,e,n,t=this;return a=U(a),r=J(a,"secret"),e=J(a,"sort_type"),n=J(a,"suffix"),t.secret=r,t.sort_type=e,t.suffix=n}),B(S,"$eval",function(a){var e;return e=this.$roll(a),Y(M("Result").$new(),"tap",[],function n(t){var s,i=null==n.$$s?this:n.$$s;return null==i.secret&&(i.secret=L),null==i.suffix&&(i.suffix=L),null==t&&(t=L),t["$secret="](i.secret),Y(t,"text=",s=["(D66"+i.suffix+") \uff1e "+e]),s[s.length-1]},{$$s:this})}),S.$private(),B(S,"$roll",function(a){var n,e=L;return e=Y(M("Array"),"new",[2],function(){return a.$roll_once(6)}),H(k(M("D66SortType"),"ASC"),n=this.sort_type)?e["$sort!"]():H(k(M("D66SortType"),"DESC"),n)&&e["$sort!"]()["$reverse!"](),F(y(e["$[]"](0),10),e["$[]"](1))})},Opal.modules["bcdice/common_command/repeat"]=function($){var T,q,z,h,a,r,v,S,m,M,_,b,K=$.module,Q=$.klass,N=$.const_set,x=$.def,B=$.truthy,E=$.hash2,W=$.ensure_kwargs,U=$.get_kwarg,J=$.send,Y=$.eqeq,H=$.thrower,F=$.rb_lt,A=[],L=$.nil;return $.top.$require("strscan"),T=A,q=b=[K(A[0],"BCDice")].concat(T),z=_=[K(b[0],"CommonCommand")].concat(q),S=[v=Q(_[0],null,"Repeat")].concat(z),m=$.$r(S),(M=v.$$prototype).times=M.trailer=M.secret=L,N(S[0],"PREFIX_PATTERN",/(repeat|rep|x)\d+/.$freeze()),N(S[0],"REPEAT_LIMIT",100),a=[h=$.get_singleton_class(v)].concat(S),r=$.$r(a),x(h,"$eval",function(n,t,s){var i;return(i=this.$parse(n))===L||null==i?L:i.$roll(t,s)}),h.$private(),x(h,"$parse",function(n){var t,c,i=L,o=L,j=L,C=L,O=L;return c=(i=r("StringScanner").$new(n)).$scan(/s/i)["$nil?"]()["$!"](),o=i.$scan(/repeat|rep|x/i),j=(t=i.$scan(/\d+/))===L||null==t?L:t.$to_i(),C=i.$scan(/\s+/),B(o["$nil?"]())||B(j["$nil?"]())||B(C["$nil?"]())||(O=i.$post_match(),B(O["$nil?"]())||B(O["$empty?"]()))?L:this.$new(E(["secret","times","trailer"],{secret:c,times:j,trailer:O}))}),x(v,"$initialize",function(d){var a,r,e,n=this;return d=W(d),a=U(d,"secret"),r=U(d,"times"),e=U(d,"trailer"),n.secret=a,n.times=r,n.trailer=e}),x(v,"$roll",function(d,a){try{H("eval_return");var n,e=this,t=L,s=L,i=L,c=L;return n=e.$validate(),B(n)?n:(t=J(m("Array"),"new",[e.times],function o(){var j=null==o.$$s?this:o.$$s,C=L;return null==j.trailer&&(j.trailer=L),(C=d.$class().$new(j.trailer))["$randomizer="](a),C.$eval()},{$$s:e}),Y(J(t,"count",[],function(j){return null==j&&(j=L),j["$=="](L)}),e.times)?e.$result_with_text("\u7e70\u308a\u8fd4\u3057\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f ("+e.trailer+")"):(s=J(t.$map(),"with_index",[1],function(j,C){return null==j&&(j=L),null==C&&(C=L),"#"+C+"\n"+j.$text()}).$join("\n\n"),i=B(c=e.secret)?c:J(t,"any?",[],"secret?".$to_proc()),J(m("Result").$new(),"tap",[],function(j){var C;return null==j&&(j=L),j["$secret="](i),J(j,"text=",C=[s]),C[C.length-1]})))}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),v.$private(),x(v,"$validate",function(){var d=this;return B(/^(repeat|rep|x)\d+/["$match?"](d.trailer))?d.$result_with_text("Repeat\u30b3\u30de\u30f3\u30c9\u306e\u91cd\u8907\u306f\u3067\u304d\u307e\u305b\u3093"):B(F(d.times,1))||B(F(m("REPEAT_LIMIT"),d.times))?d.$result_with_text("\u7e70\u308a\u8fd4\u3057\u56de\u6570\u306f1\u4ee5\u4e0a\u3001"+m("REPEAT_LIMIT")+"\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):L}),x(v,"$result_with_text",function(d){return J(m("Result").$new(),"tap",[],function r(e){var n,t=null==r.$$s?this:r.$$s;return null==t.secret&&(t.secret=L),null==e&&(e=L),e["$secret="](t.secret),J(e,"text=",n=[d]),n[n.length-1]},{$$s:this})})},Opal.modules["bcdice/format"]=function($){var Y,A,L,k,T,F,K=$.module,Q=$.eqeqeq,N=$.def,x=$.truthy,B=$.eqeq,E=$.rb_gt,W=[],U=$.nil;return Y=W,A=F=[K(W[0],"BCDice")].concat(Y),k=[L=K(F[0],"Format")].concat(A),T=$.$r(k),L.$module_function(),N(L,"$comparison_operator",function(b){var g;return Q("==",g=b)?"=":Q("!=",g)?"<>":Q(T("Symbol"),g)?b.$to_s():U}),N(L,"$modifier",function(b){return x(b["$nil?"]())?U:B(b,0)?"":x(E(b,0))?"+"+b:b.$to_s()})},Opal.modules["bcdice/common_command/barabara_dice/result"]=function($){var H,L,b,p,T,y,K=$.module,Q=$.klass,N=$.send2,x=$.find_super,B=$.def,W=[],U=$.nil,J=$.$$$;return $.top.$require("bcdice/result"),H=W,L=y=[K(W[0],"BCDice")].concat(H),b=T=[K(y[0],"CommonCommand")].concat(L),(p=Q([K(T[0],"BarabaraDice")].concat(b)[0],J(J("BCDice"),"Result"),"Result")).$attr_accessor("last_dice_list_list"),p.$attr_accessor("last_dice_list"),p.$attr_accessor("success_num"),B(p,"$initialize",function f(z){var S=this;return f.$$p=null,null==z&&(z=U),N(S,x(S,"initialize",f,!1,!0),"initialize",[z],null),S.last_dice_list_list=[],S.last_dice_list=[],S.success_num=0},-1)},Opal.modules["bcdice/common_command/barabara_dice/node"]=function($){var y,T,q,f,M,h,d,a,r,v,_,b,L,K=$.module,Q=$.klass,N=$.ensure_kwargs,x=$.get_kwarg,B=$.def,E=$.send,W=$.truthy,U=$.thrower,J=$.top,Y=[],H=$.nil;return J.$require("bcdice/format"),J.$require("bcdice/common_command/barabara_dice/result"),y=Y,T=L=[K(Y[0],"BCDice")].concat(y),q=b=[K(L[0],"CommonCommand")].concat(T),f=_=[K(b[0],"BarabaraDice")].concat(q),M=v=[K(_[0],"Node")].concat(f),d=[h=Q(v[0],null,"Command")].concat(M),a=$.$r(d),(r=h.$$prototype).notations=r.cmp_op=r.target_number=H,B(h,"$initialize",function(n){var t,s,i,c,o=this;return n=N(n),t=x(n,"secret"),s=x(n,"notations"),i=x(n,"cmp_op"),c=x(n,"target_number"),o.secret=t,o.notations=s,o.cmp_op=i,o.target_number=c}),B(h,"$eval",function(n,t){try{U("eval_return");var i,o,C,te,le,oe,c=this,j=H,O=H,ne=H,ae=H,ue=H,ie=H;return o=n.$round_type(),j=E(c.notations,"map",[],function(D){return null==D&&(D=H),D.$to_dice(o)}),C=W(O=c.cmp_op)?O:n.$default_cmp_op(),te=W(O=(i=c.target_number)===H||null==i?H:i.$eval(o))?O:n.$default_target_number(),ne=E(j,"map",[],function(D){return null==D&&(D=H),D.$roll(t)}),W(n["$sort_barabara_dice?"]())&&E(ne,"map!",[],"sort".$to_proc()),le=(ae=ne.$flatten()).$count(1),oe=W(C)?E(ae,"count",[],function(D){return null==D&&(D=H),D.$send(C,te)}):0,W(C)&&(ue="\u6210\u529f\u6570"+oe),ie=["("+j.$join("+")+a("Format").$comparison_operator(C)+te+")",ae.$join(","),ue,n.$grich_text(le,ae.$size(),oe)].$compact(),E(a("Result").$new(),"tap",[],function X(D){var V,Z=null==X.$$s?this:X.$$s;return null==Z.secret&&(Z.secret=H),null==D&&(D=H),D["$secret="](Z.secret),D["$text="](ie.$join(" \uff1e ")),D["$last_dice_list_list="](ne),D["$last_dice_list="](ae),E(D,"success_num=",V=[oe]),V[V.length-1]},{$$s:c})}catch(X){if(X===$.t_eval_return)return X.$v;throw X}}),function(S,m,M){var h=Q(S,null,"Notation"),d=[h].concat(M),a=$.$r(d),r=h.$$prototype;r.times=r.sides=H,B(h,"$initialize",function(n,t){return this.times=n,this.sides=t}),B(h,"$to_dice",function(n){try{var i,c;return U("eval_return"),i=this.times.$eval(n),c=this.sides.$eval(n),a("Dice").$new(i,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}})}(v[0],0,v),function(S,m){var M=Q(S,null,"Dice"),h=M.$$prototype;return h.times=h.sides=H,B(M,"$initialize",function(a,r){return this.times=a,this.sides=r}),B(M,"$roll",function(a){return a.$roll_barabara(this.times,this.sides)}),B(M,"$to_s",function(){return this.times+"B"+this.sides})}(v[0])},Opal.modules["bcdice/common_command/reroll_dice/parser"]=function($){var k,g,p,M,n,t,s,i,c,o,j,C,O,ae,h,r,e,z,v,R,I,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.hash,E=$.const_set,W=$.truthy,U=$.hash2,J=$.return_val,Y=$.to_ary,H=$.top,F=[],y=$.nil,A=$.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/common_command/lexer"),H.$require("bcdice/common_command/barabara_dice/node"),H.$require("bcdice/arithmetic/node"),k=F,g=I=[K(F[0],"BCDice")].concat(k),p=R=[K(I[0],"CommonCommand")].concat(g),z=[K(R[0],"RerollDice")].concat(p),v=$.$r(z),M=z,r=[h=Q(z[0],A(v("Racc"),"Parser"),"Parser")].concat(M),e=$.$r(r),h.$$prototype.lexer=y,N(h,"$parse",function(X){return this.$new().$parse(X)}),x(h,"$parse",function(X){try{return this.lexer=e("Lexer").$new(X),this.$do_parse()}catch(V){if(!$.rescue(V,[e("ParseError")]))throw V;try{return y}finally{$.pop_exception()}}}),h.$private(),x(h,"$next_token",function(){return this.lexer.$next_token()}),n=$.large_array_unpack("9,3,9,9,9,15,20,21,20,21,8,14,8,8,8,9,9,4,13,28,10,39,20,21,9,8,8,31,32,9,20,21,33,16,8,20,21,9,24,8,34,35,9,20,21,31,32,8,20,21,9,13,8,31,32,9,20,21,34,35,8,20,21,9,,8,34,35,9,20,21,31,32,8,20,21,9,,8,,31,32,20,21,31,32,8,40,,,,47,51,49,50,52"),t=$.large_array_unpack("14,0,24,2,15,5,14,14,24,24,14,5,24,2,15,16,8,1,5,14,4,24,8,8,13,16,8,17,17,20,13,13,17,7,13,20,20,21,11,20,18,18,28,21,21,26,26,21,28,28,31,12,28,38,38,32,31,31,42,42,31,32,32,34,,32,43,43,35,34,34,46,46,34,35,35,39,,35,,27,27,39,39,41,41,39,27,,,,41,45,45,45,45"),s=$.large_array_unpack("-6,17,1,,20,-3,,30,14,,,18,30,22,-2,2,13,19,30,,27,35,,,0,,37,72,40,,,48,53,,61,66,,,45,74,,76,48,56,,89,63,,,,,,"),i=$.large_array_unpack("-4,-31,-31,-5,-31,-6,-13,-31,-31,-30,53,-1,-6,-31,-31,-31,-31,-31,-17,-20,-31,-31,-28,-3,-31,-2,-7,-31,-31,-12,-14,-31,-31,-29,-31,-31,-26,-27,-10,-31,-8,-31,-15,-16,-18,-21,-11,-9,-19,-22,-23,-24,-25"),c=[17,7,11,36,37,26,27,1,6,25,42,43,2,5,7,30,38,44,45,12,41,29,23,48,y,y,y,y,y,y,y,46],o=[7,9,4,11,11,7,7,1,8,4,10,10,2,3,9,9,7,11,11,5,7,8,6,12,y,y,y,y,y,y,y,7],j=[y,7,12,11,-3,14,11,-8,6,-1,-21,-17,-22],C=[y,y,y,y,y,y,y,y,y,22,18,19,y],O=$.large_array_unpack("0,0,racc_error,3,23,_reduce_1,4,23,_reduce_2,4,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,2,26,_reduce_7,3,27,_reduce_8,4,27,_reduce_9,2,28,_reduce_10,3,28,_reduce_11,3,25,_reduce_12,1,25,_reduce_13,3,30,_reduce_14,3,29,_reduce_15,3,29,_reduce_16,1,29,_reduce_none,3,32,_reduce_18,4,32,_reduce_19,1,32,_reduce_none,0,34,_reduce_21,1,34,_reduce_22,1,34,_reduce_23,1,34,_reduce_24,1,34,_reduce_25,2,33,_reduce_26,2,33,_reduce_27,1,33,_reduce_none,3,31,_reduce_29,1,31,_reduce_30"),ae=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),E(r[0],"Racc_arg",[n,t,i,s,c,o,C,j,22,O,ae,53,31,!0]),W(e("Ractor","skip_raise")?"constant":y)&&e("Ractor").$make_shareable(e("Racc_arg")),E(r[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,bracket,at,add,dice,term,mul,unary,round_type")),W(e("Ractor","skip_raise")?"constant":y)&&e("Ractor").$make_shareable(e("Racc_token_to_s_table")),E(r[0],"Racc_debug_parser",!1),x(h,"$_reduce_1",function(X,D,V){return A(e("Node"),"Command").$new(U(["secret","notations","cmp_op","target_number","source"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:X["$[]"](2)["$[]"]("cmp_op"),target_number:X["$[]"](2)["$[]"]("target"),source:this.lexer.$source()}))}),x(h,"$_reduce_2",function(X,D,V){var u=y,w=y;return u=X["$[]"](3),w=X["$[]"](2),A(e("Node"),"Command").$new(U(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:u["$[]"]("cmp_op"),target_number:u["$[]"]("target"),reroll_cmp_op:w["$[]"]("cmp_op"),reroll_threshold:w["$[]"]("threshold"),source:this.lexer.$source()}))}),x(h,"$_reduce_3",function(X,D,V){var u=y,w=y;return u=X["$[]"](2),w=X["$[]"](3),A(e("Node"),"Command").$new(U(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:u["$[]"]("cmp_op"),target_number:u["$[]"]("target"),reroll_cmp_op:w["$[]"]("cmp_op"),reroll_threshold:w["$[]"]("threshold"),source:this.lexer.$source()}))}),x(h,"$_reduce_4",J(!1)),x(h,"$_reduce_5",J(!0)),x(h,"$_reduce_6",function(X,D,V){return U([],{})}),x(h,"$_reduce_7",function(X,D,V){var Z,P,G;return G=null==(Z=Y(X))[1]?y:Z[1],W(P=null==Z[0]?y:Z[0])||this.$raise(e("ParseError")),U(["cmp_op","target"],{cmp_op:P,target:G})}),x(h,"$_reduce_8",function(X,D,V){return U(["threshold"],{threshold:X["$[]"](1)})}),x(h,"$_reduce_9",function(X,D,V){var u,w;return u=X["$[]"](1),w=X["$[]"](2),W(u)||this.$raise(e("ParseError")),U(["cmp_op","threshold"],{cmp_op:u,threshold:w})}),x(h,"$_reduce_10",function(X,D,V){return U(["threshold"],{threshold:X["$[]"](1)})}),x(h,"$_reduce_11",function(X,D,V){var u,w;return u=X["$[]"](1),w=X["$[]"](2),W(u)||this.$raise(e("ParseError")),U(["cmp_op","threshold"],{cmp_op:u,threshold:w})}),x(h,"$_reduce_12",function(X,D,V){var Z=y;return(Z=X["$[]"](0)).$push(X["$[]"](2)),Z}),x(h,"$_reduce_13",function(X,D,V){return[X["$[]"](0)]}),x(h,"$_reduce_14",function(X,D,V){var Z,u;return Z=X["$[]"](0),u=X["$[]"](2),A(e("Node"),"Notation").$new(Z,u)}),x(h,"$_reduce_15",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),x(h,"$_reduce_16",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),x(h,"$_reduce_18",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"*",X["$[]"](2))}),x(h,"$_reduce_19",function(X,D,V){return X["$[]"](3).$new(X["$[]"](0),X["$[]"](2))}),x(h,"$_reduce_21",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),x(h,"$_reduce_22",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),x(h,"$_reduce_23",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),x(h,"$_reduce_24",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithRound")}),x(h,"$_reduce_25",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithFloor")}),x(h,"$_reduce_26",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_27",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),x(h,"$_reduce_29",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_30",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(X["$[]"](0))}),x(h,"$_reduce_none",function(X,D,V){return X["$[]"](0)})},Opal.modules["bcdice/common_command/reroll_dice"]=function($){var J,y,T,g,R,_,I,b,L,H,K=$.module,Q=$.const_set,N=$.thrower,x=$.def,B=$.top,E=[],W=$.nil;return B.$require("bcdice/normalize"),B.$require("bcdice/format"),B.$require("bcdice/common_command/reroll_dice/parser"),J=E,y=H=[K(E[0],"BCDice")].concat(J),T=L=[K(H[0],"CommonCommand")].concat(y),Q((b=[I=K(L[0],"RerollDice")].concat(T))[0],"PREFIX_PATTERN",/\d+R\d+/.$freeze()),Q(b[0],"REROLL_LIMIT",1e4),R=[g=$.get_singleton_class(I)].concat(b),_=$.$r(R),x(g,"$eval",function(f,z,v){try{var m;return N("eval_return"),(m=_("Parser").$parse(f))===W||null==m?W:m.$eval(z,v)}catch(h){if(h===$.t_eval_return)return h.$v;throw h}})},Opal.modules["bcdice/common_command/upper_dice/node"]=function($){var T,q,f,m,r,e,n,t,s,h,v,_,b,K=$.module,Q=$.klass,N=$.ensure_kwargs,x=$.get_kwarg,B=$.def,E=$.send,W=$.truthy,U=$.rb_le,J=$.thrower,Y=$.rb_plus,H=$.eqeq,F=$.hash2,y=$.rb_lt,A=[],L=$.nil;return T=A,q=b=[K(A[0],"BCDice")].concat(T),f=_=[K(b[0],"CommonCommand")].concat(q),m=v=[K(_[0],"UpperDice")].concat(f),r=h=[K(v[0],"Node")].concat(m),n=[e=Q(h[0],null,"Command")].concat(r),t=$.$r(n),(s=e.$$prototype).notations=s.reroll_threshold=s.modifier=s.target_number=s.cmp_op=L,B(e,"$initialize",function(c){var o,j,C,O,te,ne,ae=this;return c=N(c),o=x(c,"secret"),j=x(c,"notations"),C=x(c,"modifier"),O=x(c,"cmp_op"),te=x(c,"target_number"),null==(ne=c.$$smap.reroll_threshold)&&(ne=L),ae.secret=o,ae.notations=j,ae.modifier=C,ae.cmp_op=O,ae.target_number=te,ae.reroll_threshold=ne}),B(e,"$eval",function(c,o){try{J("eval_return");var C,O,te,ae,le,oe,X,V,ie,D,ne=this,ue=L,Z=L,u=L,w=L;return ae=c.$round_type(),le=E(ne.notations,"map",[],function(G){return null==G&&(G=L),G.$to_dice(ae)}),oe=W(ue=W(ie=(C=ne.reroll_threshold)===L||null==C?L:C.$eval(ae))?ie:c.$upper_dice_reroll_threshold())?ue:0,X=W(ue=(O=ne.modifier)===L||null==O?L:O.$eval(ae))?ue:0,D=(te=ne.target_number)===L||null==te?L:te.$eval(ae),V=ne.$expr(le,oe,X,D),W(U(oe,1))?ne.$result_with_text("("+V+") \uff1e \u7121\u9650\u30ed\u30fc\u30eb\u306e\u6761\u4ef6\u304c\u307e\u3061\u304c\u3063\u3066\u3044\u307e\u3059"):(Z=E(le,"map",[],function(G){return null==G&&(G=L),G.$roll(o,oe,c["$sort_barabara_dice?"]())}).$reduce([],"concat"),u=W(ne.cmp_op)?ne.$result_success_count(Z,X,D):ne.$result_max_sum(Z,X),w=["("+V+")",ne.$interlim_expr(Z,X),u],ne.$result_with_text(w.$join(" \uff1e ")))}catch(P){if(P===$.t_eval_return)return P.$v;throw P}}),e.$private(),B(e,"$result_success_count",function(c,o,j){return"\u6210\u529f\u6570"+E(c,"count",[],function te(ne){var ae=null==te.$$s?this:te.$$s;return null==ae.cmp_op&&(ae.cmp_op=L),null==ne&&(ne=L),Y(ne["$[]"]("sum"),o).$send(ae.cmp_op,j)},{$$s:this})}),B(e,"$result_max_sum",function(c,o){var C,j=L;return j=E(c,"map",[],function(ne){return null==ne&&(ne=L),ne["$[]"]("sum")}),C=Y(j.$sum(),o),E(j,"map",[],function(ne){return null==ne&&(ne=L),Y(ne,o)}).$max()+"/"+C+"(\u6700\u5927/\u5408\u8a08)"}),B(e,"$interlim_expr",function(c,o){var j;return j=E(c,"map",[],function(O){return null==O&&(O=L),H(O["$[]"]("list").$size(),1)?O["$[]"]("sum"):O["$[]"]("sum")+"["+O["$[]"]("list").$join(",")+"]"}).$join(","),Y(j,t("Format").$modifier(o))}),B(e,"$expr",function(c,o,j,C){var te,ne;return te=t("Format").$comparison_operator(this.cmp_op),ne=t("Format").$modifier(j),c.$join("+")+"["+o+"]"+ne+te+C}),B(e,"$result_with_text",function(c){return E(t("Result").$new(),"tap",[],function j(C){var O,te=null==j.$$s?this:j.$$s;return null==te.secret&&(te.secret=L),null==C&&(C=L),C["$secret="](te.secret),E(C,"text=",O=[c]),O[O.length-1]},{$$s:this})}),function(d,a,r){var e=Q(d,null,"Notation"),n=[e].concat(r),t=$.$r(n),s=e.$$prototype;s.roll_times=s.sides=L,B(e,"$initialize",function(c,o){return this.roll_times=c,this.sides=o}),B(e,"$to_dice",function(c){try{var C,O;return J("eval_return"),C=this.roll_times.$eval(c),O=this.sides.$eval(c),t("Dice").$new(C,O)}catch(te){if(te===$.t_eval_return)return te.$v;throw te}})}(h[0],0,h),function(d,a,r){var e=Q(d,null,"Dice"),n=[e].concat(r),t=$.$r(n),s=e.$$prototype;return s.roll_times=s.sides=L,B(e,"$initialize",function(c,o){return this.roll_times=c,this.sides=o}),B(e,"$roll",function(c,o,j){var O=L;return O=E(t("Array"),"new",[this.roll_times],function te(){var ae=L;return ae=(null==te.$$s?this:te.$$s).$roll_ones(c,o),F(["sum","list"],{sum:ae.$sum(),list:ae})},{$$s:this}),W(j)&&(O=E(O,"sort_by",[],function(ne){return null==ne&&(ne=L),ne["$[]"]("sum")})),O}),B(e,"$to_s",function(){return this.roll_times+"U"+this.sides}),e.$private(),B(e,"$roll_ones",function(c,o){var j=this,C=L;return C=[],function(){try{var O=J("break");return E(j,"loop",[],function te(){var ae,ne=null==te.$$s?this:te.$$s;if(null==ne.sides&&(ne.sides=L),ae=c.$roll_once(ne.sides),C.$push(ae),!W(y(ae,o)))return L;O.$throw()},{$$s:j})}catch(te){if(te===O)return te.$v;throw te}}(),C})}(h[0],0,h)},Opal.modules["bcdice/common_command/upper_dice/parser"]=function($){var k,g,p,M,n,t,s,i,c,o,j,C,O,ae,h,r,e,z,v,R,I,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.hash,E=$.const_set,W=$.truthy,U=$.hash2,J=$.return_val,Y=$.to_ary,H=$.top,F=[],y=$.nil,A=$.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/common_command/lexer"),H.$require("bcdice/common_command/upper_dice/node"),H.$require("bcdice/arithmetic/node"),k=F,g=I=[K(F[0],"BCDice")].concat(k),p=R=[K(I[0],"CommonCommand")].concat(g),z=[K(R[0],"UpperDice")].concat(p),v=$.$r(z),M=z,r=[h=Q(z[0],A(v("Racc"),"Parser"),"Parser")].concat(M),e=$.$r(r),h.$$prototype.lexer=y,N(h,"$parse",function(X){return this.$new().$parse(X)}),x(h,"$parse",function(X){try{return this.lexer=e("Lexer").$new(X),this.$do_parse()}catch(V){if(!$.rescue(V,[e("ParseError")]))throw V;try{return y}finally{$.pop_exception()}}}),h.$private(),x(h,"$next_token",function(){return this.lexer.$next_token()}),n=$.large_array_unpack("9,9,36,37,3,9,9,21,22,49,8,8,21,22,9,8,8,14,15,9,21,22,4,16,8,21,22,9,10,8,36,37,9,21,22,38,17,8,21,22,9,25,8,27,15,9,21,22,28,29,8,21,22,9,44,8,39,40,9,21,22,39,40,8,21,22,9,25,8,39,40,9,21,22,36,37,8,21,22,9,17,8,39,40,9,21,22,39,40,8,21,22,9,,8,39,40,,21,22,39,40,8,58,56,57,59,36,37"),t=$.large_array_unpack("2,8,34,34,0,17,14,8,8,34,2,8,14,14,15,17,14,5,5,16,15,15,1,5,15,16,16,21,4,16,18,18,22,21,21,18,7,21,22,22,25,11,22,12,12,27,25,25,13,13,25,27,27,28,24,27,19,19,29,28,28,30,30,28,29,29,36,26,29,33,33,37,36,36,45,45,36,37,37,39,32,37,47,47,40,39,39,48,48,39,40,40,44,,40,50,50,,44,44,51,51,44,53,53,53,53,54,54"),s=$.large_array_unpack("-3,22,-2,,28,9,,32,-1,,,20,35,40,4,12,17,3,22,46,,25,30,,34,38,46,43,51,56,51,,76,59,-6,,64,69,,77,82,,,,90,66,,72,77,,85,90,,100,99,,,,,"),i=$.large_array_unpack("-4,-35,-35,-5,-35,-6,-17,-35,-35,-34,60,-12,-6,-7,-35,-35,-35,-35,-35,-21,-24,-35,-35,-32,-1,-35,-12,-35,-35,-35,-8,-16,-32,-9,-35,-18,-35,-35,-33,-35,-35,-30,-31,-3,-35,-13,-2,-10,-11,-14,-19,-20,-22,-25,-15,-23,-26,-27,-28,-29"),c=$.large_array_unpack("18,30,33,41,42,24,6,1,34,2,5,12,11,7,30,47,48,45,31,26,46,52,53,50,51,32,43,55,35,,,,,,,,54"),o=$.large_array_unpack("10,9,9,13,13,5,11,1,10,2,3,6,4,12,9,9,9,10,11,4,5,13,13,9,9,12,7,14,12,,,,,,,,10"),j=[y,7,9,8,7,-6,6,2,y,-13,-8,4,11,-18,-26],C=[y,y,y,y,y,y,y,y,13,19,y,y,23,20,y],O=$.large_array_unpack("0,0,racc_error,4,23,_reduce_1,5,23,_reduce_2,5,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,1,26,_reduce_7,2,30,_reduce_8,2,30,_reduce_9,3,30,_reduce_10,3,30,_reduce_11,0,27,_reduce_12,2,27,_reduce_13,3,28,_reduce_14,2,29,_reduce_15,3,25,_reduce_16,1,25,_reduce_17,3,33,_reduce_18,3,32,_reduce_19,3,32,_reduce_20,1,32,_reduce_none,3,31,_reduce_22,4,31,_reduce_23,1,31,_reduce_none,0,36,_reduce_25,1,36,_reduce_26,1,36,_reduce_27,1,36,_reduce_28,1,36,_reduce_29,2,35,_reduce_30,2,35,_reduce_31,1,35,_reduce_none,3,34,_reduce_33,1,34,_reduce_34"),ae=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),E(r[0],"Racc_arg",[n,t,i,s,c,o,C,j,22,O,ae,60,35,!0]),W(e("Ractor","skip_raise")?"constant":y)&&e("Ractor").$make_shareable(e("Racc_arg")),E(r[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,modifier,target,bracket,at,modifier_expr,mul,add,dice,term,unary,round_type")),W(e("Ractor","skip_raise")?"constant":y)&&e("Ractor").$make_shareable(e("Racc_token_to_s_table")),E(r[0],"Racc_debug_parser",!1),x(h,"$_reduce_1",function(X,D,V){return A(A(e("UpperDice"),"Node"),"Command").$new(U(["secret","notations","modifier","cmp_op","target_number"],{secret:X["$[]"](0),notations:X["$[]"](1),modifier:X["$[]"](2),cmp_op:X["$[]"](3)["$[]"]("cmp_op"),target_number:X["$[]"](3)["$[]"]("target")}))}),x(h,"$_reduce_2",function(X,D,V){return A(A(e("UpperDice"),"Node"),"Command").$new(U(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:X["$[]"](0),notations:X["$[]"](1),modifier:X["$[]"](3),cmp_op:X["$[]"](4)["$[]"]("cmp_op"),target_number:X["$[]"](4)["$[]"]("target"),reroll_threshold:X["$[]"](2)}))}),x(h,"$_reduce_3",function(X,D,V){return A(A(e("UpperDice"),"Node"),"Command").$new(U(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:X["$[]"](0),notations:X["$[]"](1),modifier:X["$[]"](2),cmp_op:X["$[]"](3)["$[]"]("cmp_op"),target_number:X["$[]"](3)["$[]"]("target"),reroll_threshold:X["$[]"](4)}))}),x(h,"$_reduce_4",J(!1)),x(h,"$_reduce_5",J(!0)),x(h,"$_reduce_6",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(0)}),x(h,"$_reduce_7",function(X,D,V){return X["$[]"](0)}),x(h,"$_reduce_8",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_9",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),x(h,"$_reduce_10",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),x(h,"$_reduce_11",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),x(h,"$_reduce_12",function(X,D,V){return U([],{})}),x(h,"$_reduce_13",function(X,D,V){var Z,P,G;return G=null==(Z=Y(X))[1]?y:Z[1],W(P=null==Z[0]?y:Z[0])||this.$raise(e("ParseError")),U(["cmp_op","target"],{cmp_op:P,target:G})}),x(h,"$_reduce_14",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_15",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_16",function(X,D,V){var Z=y;return(Z=X["$[]"](0)).$push(X["$[]"](2)),Z}),x(h,"$_reduce_17",function(X,D,V){return[X["$[]"](0)]}),x(h,"$_reduce_18",function(X,D,V){var Z,u;return Z=X["$[]"](0),u=X["$[]"](2),A(A(e("UpperDice"),"Node"),"Notation").$new(Z,u)}),x(h,"$_reduce_19",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),x(h,"$_reduce_20",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),x(h,"$_reduce_22",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"*",X["$[]"](2))}),x(h,"$_reduce_23",function(X,D,V){return X["$[]"](3).$new(X["$[]"](0),X["$[]"](2))}),x(h,"$_reduce_25",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),x(h,"$_reduce_26",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),x(h,"$_reduce_27",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),x(h,"$_reduce_28",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithRound")}),x(h,"$_reduce_29",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithFloor")}),x(h,"$_reduce_30",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_31",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),x(h,"$_reduce_33",function(X,D,V){return X["$[]"](1)}),x(h,"$_reduce_34",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(X["$[]"](0))}),x(h,"$_reduce_none",function(X,D,V){return X["$[]"](0)})},Opal.modules["bcdice/common_command/upper_dice"]=function($){var J,y,T,g,R,_,I,b,L,H,K=$.module,Q=$.const_set,N=$.thrower,x=$.def,E=[],W=$.nil;return $.top.$require("bcdice/common_command/upper_dice/parser"),J=E,y=H=[K(E[0],"BCDice")].concat(J),T=L=[K(H[0],"CommonCommand")].concat(y),Q((b=[I=K(L[0],"UpperDice")].concat(T))[0],"PREFIX_PATTERN",/\d+U\d+/.$freeze()),R=[g=$.get_singleton_class(I)].concat(b),_=$.$r(R),x(g,"$eval",function(f,z,v){try{var m;return N("eval_return"),(m=_("Parser").$parse(f))===W||null==m?W:m.$eval(z,v)}catch(h){if(h===$.t_eval_return)return h.$v;throw h}})},Opal.modules["bcdice/common_command/version"]=function($){var Y,A,I,q,_,p,b,g,k,F,K=$.module,Q=$.const_set,N=$.truthy,x=$.send,B=$.def,E=[],W=$.nil,U=$.$$$;return Y=E,A=F=[K(E[0],"BCDice")].concat(Y),I=k=[K(F[0],"CommonCommand")].concat(A),Q((g=[b=K(k[0],"Version")].concat(I))[0],"PREFIX_PATTERN",/BCDiceVersion/.$freeze()),_=[q=$.get_singleton_class(b)].concat(g),p=$.$r(_),B(q,"$eval",function(z,v,S){return z=z.$split(" ",2).$first(),N(z["$match?"](/^BCDiceVersion$/i))?x(p("Result").$new(),"tap",[],function(M){var h;return null==M&&(M=W),h=["BCDice "+U(p("BCDice"),"VERSION")],x(M,"text=",h),h[h.length-1]}):W})},Opal.queue(function($){var W,H,y,A,J,K=$.module,Q=$.const_set,N=$.top,x=[];return N.$require("bcdice/common_command/add_dice"),N.$require("bcdice/common_command/barabara_dice"),N.$require("bcdice/common_command/tally_dice"),N.$require("bcdice/common_command/calc"),N.$require("bcdice/common_command/choice"),N.$require("bcdice/common_command/d66_dice"),N.$require("bcdice/common_command/repeat"),N.$require("bcdice/common_command/reroll_dice"),N.$require("bcdice/common_command/upper_dice"),N.$require("bcdice/common_command/version"),W=x,H=J=[K(x[0],"BCDice")].concat(W),y=[K(J[0],"CommonCommand")].concat(H),A=$.$r(y),Q(y[0],"COMMANDS",[A("AddDice"),A("BarabaraDice"),A("TallyDice"),A("Calc"),A("Choice"),A("D66Dice"),A("Repeat"),A("RerollDice"),A("UpperDice"),A("Version")].$freeze())})},5151:function(){(function(l){"use strict";var ee;if(typeof globalThis<"u"?l=globalThis:typeof global<"u"?l=global:typeof window<"u"&&(l=window),null==l.console&&(l.console={}),"log"in(ee="object"==typeof l.console?l.console:{})||(ee.log=function(){}),"warn"in ee||(ee.warn=ee.log),typeof l.Opal<"u")return ee.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),l.Opal;var re,$,K,Q,N,x,B,E=l.Opal={};E.global=l,E.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var W=Function.prototype.call,U=Function.prototype.bind,J=Object.hasOwn||W.bind(Object.prototype.hasOwnProperty),Y=Object.setPrototypeOf,H=W.bind(Array.prototype.slice),F=W.bind(Array.prototype.splice),A=4;function L(){return A+=2}E.uid=L,E.id=function(u){return u.$$is_number?2*u+1:(null==u.$$id&&I(u,"$$id",L()),u.$$id)};var k=E.gvars={};function T(u,w){if(u||(u=E.Exception||Error),!B||!B.$raise)throw u.$new?u.$new(w):new u(w);arguments.length>2?B.$raise(u.$new.apply(u,H(arguments,1))):B.$raise(u,w)}function I(u,w,P){"string"==typeof u?u[w]=P:Object.defineProperty(u,w,{value:P,enumerable:!1,configurable:!0,writable:!0})}E.exit=function(u){k.DEBUG&&ee.log("Exited with status "+u)},E.exceptions=[],E.pop_exception=function(){var u=E.exceptions.pop();u?(k["!"]=u,k["@"]=u.$backtrace()):k["!"]=k["@"]=re},E.prop=I,E.defineProperty=E.prop,E.slice=H;var b=E.truthy=function(u){return!(!1===u||re===u||null==u||u instanceof Boolean&&!0!==u.valueOf())};function g(u){var w,P,G;for(w=0,P=E.tracers_for_class.length;w<P;w++)(G=E.tracers_for_class[w]).trace_object=u,G.block.$call(G)}function q(u,w){if(u.$$autoload[w].loaded){if(u.$$autoload[w].loaded&&!u.$$autoload[w].required&&u.$$autoload[w].exception)throw u.$$autoload[w].exception}else{u.$$autoload[w].loaded=!0;try{E.Kernel.$require(u.$$autoload[w].path)}catch(P){throw u.$$autoload[w].exception=P,P}if(u.$$autoload[w].required=!0,null!=u.$$const[w])return u.$$autoload[w].success=!0,u.$$const[w]}}function R(u,w){if(u){if(null!=u.$$const[w])return u.$$const[w];if(u.$$autoload&&u.$$autoload[w])return q(u,w)}}function p(u,w){var P,G,se;if(null!=u)for(P=0,G=(se=C(u)).length;P<G;P++){if(se[P].$$const&&J(se[P].$$const,w))return se[P].$$const[w];if(se[P].$$autoload&&se[P].$$autoload[w])return q(se[P],w)}}function z(u,w){return(u||K).$const_missing(w)}function v(u,w,P){var G=!0;return(null==u||"::"===u)&&(u=K),P.$$is_a_module&&((null==P.$$name||P.$$name===re)&&(P.$$name=w),null==P.$$base_module&&(P.$$base_module=u)),u.$$const=u.$$const||Object.create(null),(w in u.$$const||"$$autoload"in u&&w in u.$$autoload)&&(G=!1),u.$$const[w]=P,u.$$=u.$$const,E.const_cache_version++,u===K&&(E[w]=P),I(u,w,P),G&&u.$const_added&&!u.$const_added.$$pristine&&u.$const_added(w),P}function S(u,w,P){var G;if(G=null!=w&&w.$$bridge?function(){var fe=H(arguments),_e=new(U.apply(w.$$constructor,[null].concat(fe)));return Y(_e,G.$$prototype),_e}:function(){},u&&u!==re&&I(G,"displayName","::"+u),I(G,"$$name",u),I(G,"$$constructor",G),I(G,"$$prototype",G.prototype),I(G,"$$const",{}),I(G,"$$is_class",!0),I(G,"$$is_a_module",!0),I(G,"$$super",w),I(G,"$$cvars",{}),I(G,"$$own_included_modules",[]),I(G,"$$own_prepended_modules",[]),I(G,"$$ancestors",[]),I(G,"$$ancestors_cache_version",null),I(G,"$$subclasses",[]),I(G.$$prototype,"$$class",G),E.Class&&Y(G,E.Class.prototype),null!=w){if(Y(G.$$prototype,w.$$prototype),!0!==P)if(typeof WeakRef<"u"){var se,$e,ce=[];for(se=0;se<w.$$subclasses.length;se++)void 0!==($e=w.$$subclasses[se]).deref()&&ce.push($e);ce.push(new WeakRef(G)),w.$$subclasses=ce}else w.$$subclasses.push(G);w.$$meta&&E.build_class_singleton_class(G)}return G}function h(u){var w=function(){},P=w;return u&&I(w,"displayName",u+".constructor"),I(P,"$$name",u),I(P,"$$prototype",w.prototype),I(P,"$$const",{}),I(P,"$$is_module",!0),I(P,"$$is_a_module",!0),I(P,"$$cvars",{}),I(P,"$$iclasses",[]),I(P,"$$own_included_modules",[]),I(P,"$$own_prepended_modules",[]),I(P,"$$ancestors",[P]),I(P,"$$ancestors_cache_version",null),Y(P,E.Module.prototype),P}function a(u,w){u.hasOwnProperty("$$meta")?u.$$meta=w:I(u,"$$meta",w),u.$$frozen?u.$$meta.$freeze():Y(u,w.$$prototype)}function r(u){return u.hasOwnProperty("$$iclass")&&u.hasOwnProperty("$$root")}function s(u){var w=i(u);return u.$$is_module&&u.$$iclasses.push(w),w}function i(u){var w={},P=u.$$prototype;P.hasOwnProperty("$$dummy")&&(P=P.$$define_methods_on);var $e,G=Object.getOwnPropertyNames(P),se=G.length;for($e=0;$e<se;$e++){var ce=G[$e];I(w,ce,P[ce])}return I(w,"$$iclass",!0),I(w,"$$module",u),w}function c(u){var w=u.length,P=u[0];if(I(P,"$$root",!0),1===w)return{first:P,last:P};for(var G=P,se=1;se<w;se++){var $e=u[se];Y(G,$e),G=$e}return{first:u[0],last:u[w-1]}}function o(u){if(!u.hasOwnProperty("$$dummy")){if(u.hasOwnProperty("$$iclass"))return u.$$module;if(u.hasOwnProperty("$$class"))return u.$$class}}function C(u){if(!u)return[];if(u.$$ancestors_cache_version===E.const_cache_version)return u.$$ancestors;var P,G,se,w=[];for(P=0,G=function j(u){return u.$$own_prepended_modules.concat([u]).concat(u.$$own_included_modules)}(u),se=G.length;P<se;P++)w.push(G[P]);if(u.$$super)for(P=0,se=(G=C(u.$$super)).length;P<se;P++)w.push(G[P]);return u.$$ancestors_cache_version=E.const_cache_version,u.$$ancestors=w,w}function O(u){return u.hasOwnProperty("$$meta")&&null!==u.$$meta?C(u.$$meta):C(u.$$class)}function te(u,w){"number"==typeof w?u.$$arity=w:"object"==typeof w&&Object.assign(u,w)}E.falsy=function(u){return!b(u)},E.type_error=function(u,w,P,G){u=u.$$class,T(E.TypeError,G&&P?"can't convert "+u+" into "+w+" ("+u+"#"+P+" gives "+(G=G.$$class)+")":"no implicit conversion of "+u+" into "+w)},E.coerce_to=function(u,w,P,G){var se;return"to_int"===P&&w===E.Integer&&u.$$is_number?u<0?Math.ceil(u):Math.floor(u):"to_str"===P&&w===E.String&&u.$$is_string||E.is_a(u,w)?u:u["$respond_to?"].$$pristine&&u.$method_missing.$$pristine?((null==(se=u[ae(P)])||se.$$stub)&&E.type_error(u,w),se.apply(u,G)):(u["$respond_to?"](P)||E.type_error(u,w),null==G&&(G=[]),E.send(u,P,G))},E.respond_to=function(u,w,P){if(null==u||!u.$$class)return!1;P=!!P;var G=u[w];return u["$respond_to?"].$$pristine?"function"==typeof G&&!G.$$stub||(u["$respond_to_missing?"].$$pristine?void 0:E.send(u,u["$respond_to_missing?"],[w.substr(1),P])):E.send(u,u["$respond_to?"],[w.substr(1),P])},E.trace_class=!1,E.tracers_for_class=[],E.const_get_local=function(u,w,P){var G;if(null!=u)return"::"===u&&(u=K),!u.$$is_module&&!u.$$is_class&&T(E.TypeError,u.toString()+" is not a class/module"),null!=(G=R(u,w))||P?G:z(u,w)},E.const_get_qualified=function(u,w,P){var G,se,$e,ce=E.const_cache_version;return null==w?(G=R(K,u))??E.const_get_qualified(K,u,P):null!=u?("::"===u&&(u=K),!u.$$is_module&&!u.$$is_class&&T(E.TypeError,u.toString()+" is not a class/module"),null==(se=u.$$const_cache)&&(I(u,"$$const_cache",Object.create(null)),se=u.$$const_cache),null==($e=se[w])||$e[0]!==ce?(null!=(G=R(u,w))||(G=p(u,w)),se[w]=[ce,G]):G=$e[1],null!=G||P?G:z(u,w)):void 0},E.const_cache_version=1,E.const_get_relative=function(u,w,P){var se,ce,fe,G=u[0],$e=E.const_cache_version;return null==(ce=u.$$const_cache)&&(I(u,"$$const_cache",Object.create(null)),ce=u.$$const_cache),null==(fe=ce[w])||fe[0]!==$e?(null!=(se=R(G,w))||null!=(se=function _(u,w){var P,G,se;if(0!==u.length)for(P=0,G=u.length;P<G;P++){if(null!=(se=u[P].$$const[w]))return se;if(u[P].$$autoload&&u[P].$$autoload[w])return q(u[P],w)}}(u,w))||null!=(se=p(G,w))||(se=function f(u,w){if(null==u||u.$$is_module)return p(K,w)}(G,w)),ce[w]=[$e,se]):se=fe[1],null!=se||P?se:z(G,w)},E.const_set=v,E.constants=function(u,w){null==w&&(w=!0);var P,se,$e,fe,G=[u],ce={};for(w&&(G=G.concat(C(u))),w&&u.$$is_module&&(G=G.concat([E.Object]).concat(C(E.Object))),se=0,$e=G.length;se<$e&&(P=G[se],u===K||P!=K);se++){for(fe in P.$$const)ce[fe]=!0;if(P.$$autoload)for(fe in P.$$autoload)ce[fe]=!0}return Object.keys(ce)},E.const_remove=function(u,w){if(E.const_cache_version++,null!=u.$$const[w]){var P=u.$$const[w];return delete u.$$const[w],P}if(u.$$autoload&&u.$$autoload[w])return delete u.$$autoload[w],re;T(E.NameError,"constant "+u+"::"+u.$name()+" not defined")},E.const_get_relative_factory=function(u){return function(w,P){return E.$$(u,w,P)}},E.$$=E.const_get_relative,E.$$$=E.const_get_qualified,E.$r=E.const_get_relative_factory,E.allocate_class=S,E.klass=function(u,w,P){var G;null==u||"::"==u?u=K:!u.$$is_class&&!u.$$is_module&&(u=u.$$class),null!=w&&(!w.hasOwnProperty||w.hasOwnProperty&&!w.hasOwnProperty("$$is_class"))&&(w.constructor&&"Function"==w.constructor.name?(G=w,w=K):T(E.TypeError,"superclass must be a Class ("+(w.constructor&&(w.constructor.name||w.constructor.$$name)||typeof w)+" given)"));var se=function m(u,w){var P=R(u,w);if(P)return P.$$is_class||T(E.TypeError,w+" is not a class"),P}(u,P);return null!=se?w&&function M(u,w){u.$$super!==w&&T(E.TypeError,"superclass mismatch for class "+u.$$name)}(se,w):(null==w&&(w=K),v(u,P,se=S(P,w)),w.$inherited&&w.$inherited(se),G&&E.bridge(G,se)),E.trace_class&&g(se),se},E.allocate_module=h,E.module=function(u,w){var P;return null==u||"::"==u?u=K:!u.$$is_class&&!u.$$is_module&&(u=u.$$class),P=function d(u,w){var P=R(u,w);return null==P&&u===K&&(P=p(K,w)),P&&!P.$$is_module&&P!==K&&T(E.TypeError,w+" is not a module"),P}(u,w),null==P&&v(u,w,P=h(w)),E.trace_class&&g(P),P},E.get_singleton_class=function(u){return u.$$is_number&&T(E.TypeError,"can't define singleton"),u.$$meta?u.$$meta:u.hasOwnProperty("$$is_class")?E.build_class_singleton_class(u):u.hasOwnProperty("$$is_module")?E.build_module_singleton_class(u):E.build_object_singleton_class(u)},E.build_class_singleton_class=function(u){if(u.$$meta)return u.$$meta;var P=S(null,u===$?N:E.get_singleton_class(u.$$super),!0);return I(P,"$$is_singleton",!0),I(P,"$$singleton_of",u),a(u,P),I(u,"$$class",E.Class),P},E.build_module_singleton_class=function(u){if(u.$$meta)return u.$$meta;var w=S(null,E.Module,!0);return I(w,"$$is_singleton",!0),I(w,"$$singleton_of",u),a(u,w),I(u,"$$class",E.Module),w},E.build_object_singleton_class=function(u){var P=S(re,u.$$class,!0);return I(P,"$$is_singleton",!0),I(P,"$$singleton_of",u),delete P.$$prototype.$$class,a(u,P),P},E.is_method=function(u){return"$"===u[0]&&"$"!==u[1]},E.instance_methods=function(u){for(var w=[],P=[],G=C(u),se=0,$e=G.length;se<$e;se++){var fe=G[se].$$prototype;fe.hasOwnProperty("$$dummy")&&(fe=fe.$$define_methods_on);for(var _e=Object.getOwnPropertyNames(fe),de=0,me=_e.length;de<me;de++){var he=_e[de];if(E.is_method(he)){var ge=he.slice(1),ve=fe[he];ve.$$stub&&-1===w.indexOf(ge)&&w.push(ge),!ve.$$stub&&-1===P.indexOf(ge)&&-1===w.indexOf(ge)&&P.push(ge)}}}return P},E.own_instance_methods=function(u){var w=[],P=u.$$prototype;P.hasOwnProperty("$$dummy")&&(P=P.$$define_methods_on);for(var G=Object.getOwnPropertyNames(P),se=0,$e=G.length;se<$e;se++){var ce=G[se];if(E.is_method(ce)&&!P[ce].$$stub){var _e=ce.slice(1);w.push(_e)}}return w},E.methods=function(u){return E.instance_methods(u.$$meta||u.$$class)},E.own_methods=function(u){return u.$$meta?E.own_instance_methods(u.$$meta):[]},E.receiver_methods=function(u){var w=E.get_singleton_class(u),P=E.own_instance_methods(w),G=E.own_instance_methods(w.$$super);return P.concat(G)},E.class_variables=function(u){var P,w=C(u),se={};for(P=w.length-1;P>=0;P--){var $e=w[P];for(var ce in $e.$$cvars)se[ce]=$e.$$cvars[ce]}return se},E.class_variable_set=function(u,w,P){var se,G=C(u);for(se=G.length-2;se>=0;se--){var ce=G[se];if(J(ce.$$cvars,w))return ce.$$cvars[w]=P,P}return u.$$cvars[w]=P,P},E.class_variable_get=function(u,w,P){if(J(u.$$cvars,w))return u.$$cvars[w];var se,G=C(u),$e=G.length;for(se=0;se<$e;se++){var ce=G[se];if(J(ce.$$cvars,w))return ce.$$cvars[w]}return P||T(E.NameError,"uninitialized class variable "+w+" in "+u.$name()),re},E.append_features=function(u,w){var P=C(u),G=[];-1!==P.indexOf(w)&&T(E.ArgumentError,"cyclic include detected");for(var se=0,$e=P.length;se<$e;se++){var fe=s(P[se]);I(fe,"$$included",!0),G.push(fe)}var me,he,_e=C(w),de=c(G);if(-1===_e.indexOf(u))me=w.$$prototype,he=Object.getPrototypeOf(w.$$prototype);else{for(var ge=w.$$prototype,ve=Object.getPrototypeOf(ge);null!=ve&&(ve.$$module!==u||!r(ve));)ge=ve,ve=Object.getPrototypeOf(ve);if(ve){for(var pe=Object.getPrototypeOf(ve);pe.hasOwnProperty("$$iclass")&&!r(pe);)pe=Object.getPrototypeOf(pe);me=ge,he=pe}else me=w.$$prototype,he=Object.getPrototypeOf(w.$$prototype)}Y(me,de.first),Y(de.last,he),w.$$own_included_modules=function e(u){for(var P,w=[],G=Object.getPrototypeOf(u.$$prototype);G&&!G.hasOwnProperty("$$class");)(P=o(G))&&w.push(P),G=Object.getPrototypeOf(G);return w}(w),E.const_cache_version++},E.prepend_features=function(u,w){var P=C(u),G=[];-1!==P.indexOf(w)&&T(E.ArgumentError,"cyclic prepend detected");for(var se=0,$e=P.length;se<$e;se++){var fe=s(P[se]);I(fe,"$$prepended",!0),G.push(fe)}var he,ge,ve,_e=c(G),de=w.$$prototype,me=Object.getPrototypeOf(de);if(de.hasOwnProperty("$$dummy")?he=de.$$define_methods_on:(he=i(w),function t(u){for(var w=u.$$prototype,P=Object.getOwnPropertyNames(w),G=0;G<P.length;G++){var se=P[G];E.is_method(se)&&delete w[se]}}(w),I(de,"$$dummy",!0),I(de,"$$define_methods_on",he),Y(de,he),Y(he,me)),-1===C(w).indexOf(u))for(ge=de,ve=Object.getPrototypeOf(de);null!=ve&&!ve.hasOwnProperty("$$root")&&ve!==he&&ve.hasOwnProperty("$$iclass");)ve=Object.getPrototypeOf(ve);else T(E.RuntimeError,"Prepending a module multiple times is not supported");Y(ge,_e.first),Y(_e.last,ve),w.$$own_prepended_modules=function n(u){var P,w=[],G=Object.getPrototypeOf(u.$$prototype);if(u.$$prototype.hasOwnProperty("$$dummy"))for(;G&&G!==u.$$prototype.$$define_methods_on;)(P=o(G))&&w.push(P),G=Object.getPrototypeOf(G);return w}(w),E.const_cache_version++},E.bridge=function(u,w){u.hasOwnProperty("$$bridge")&&T(E.ArgumentError,"already bridged"),I(u,"$$bridge",w),Y(u.prototype,(w.$$super||E.Object).$$prototype),I(w,"$$prototype",u.prototype),I(w.$$prototype,"$$class",w),I(w,"$$constructor",u),I(w,"$$bridge",!0)},E.ancestors=C,E.included_modules=function(u){for(var w=[],P=null,G=Object.getPrototypeOf(u.$$prototype);G&&Object.getPrototypeOf(G);G=Object.getPrototypeOf(G))(P=o(G))&&P.$$is_module&&G.$$iclass&&G.$$included&&w.push(P);return w},E.add_stubs=function(u){for(var P,G,w=E.BasicObject.$$prototype,se=0,$e=(u=u.split(",")).length;se<$e;se++)(null==(G=w[P=ae(u[se])])||G.$$stub)&&E.add_stub_for(w,P)},E.add_stub_for=function(u,w){I(u,w,E.stub_for(w))},E.stub_for=function(u){function w(){this.$method_missing.$$p=w.$$p,w.$$p=null;for(var P=new Array(arguments.length),G=0,se=P.length;G<se;G++)P[G]=arguments[G];return this.$method_missing.apply(this,[u.slice(1)].concat(P))}return w.$$stub=!0,w},E.ac=function(u,w,P,G){var se="";se+=P.$$is_a_module?P.$$name+".":P.$$class.$$name+"#",T(E.ArgumentError,"["+(se+=G)+"] wrong number of arguments (given "+u+", expected "+w+")")},E.block_ac=function(u,w,P){T(E.ArgumentError,"`block in "+P+"': wrong number of arguments (given "+u+", expected "+w+")")},E.find_super=function(u,w,P,G,se){for(var ce,fe,$e=ae(w),de=(ce=O(u)).indexOf(P.$$owner)+1;de<ce.length;de++){var he=ce[de].$$prototype;if(he.hasOwnProperty("$$dummy")&&(he=he.$$define_methods_on),he.hasOwnProperty($e)){fe=he[$e];break}}return!G&&fe&&fe.$$stub&&u.$method_missing.$$pristine&&T(E.NoMethodError,"super: no superclass method `"+w+"' for "+u,w),fe.$$stub&&!se?null:fe},E.find_block_super=function(u,w,P,G,se){var $e=w;return P||T(E.RuntimeError,"super called outside of method"),se&&P.$$define_meth&&T(E.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),P.$$def&&($e=P.$$jsid),E.find_super(u,$e,P,G)},E.find_super_dispatcher=E.find_super,E.find_iter_super_dispatcher=E.find_block_super,E.yield1=function(u,w){"function"!=typeof u&&T(E.LocalJumpError,"no block given");var G=u.$$has_trailing_comma_in_args;return(u.length>1||(u.$$has_top_level_mlhs_arg||G)&&1===u.length)&&(w=E.to_ary(w)),(u.length>1||G&&1===u.length)&&w.$$is_array?u.apply(null,w):u(w)},E.yieldX=function(u,w){if("function"!=typeof u&&T(E.LocalJumpError,"no block given"),u.length>1&&1===w.length&&w[0].$$is_array)return u.apply(null,w[0]);if(!w.$$is_array){for(var P=new Array(w.length),G=0,se=P.length;G<se;G++)P[G]=w[G];return u.apply(null,P)}return u.apply(null,w)},E.rescue=function(u,w){for(var P=0;P<w.length;P++){var G=w[P];if(G.$$is_array){var se=E.rescue(u,G);if(se)return se}else if(G===E.JS.Error||G["$==="](u))return G}return null},E.is_a=function(u,w){return null!=w&&u.$$meta===w||u.$$class===w||(u.$$is_number&&w.$$is_number_class?!w.$$is_integer_class||u%1==0:-1!==C(u.$$is_class?E.get_singleton_class(u):u.$$meta||u.$$class).indexOf(w))},E.to_hash=function(u){if(u.$$is_hash)return u;if(u["$respond_to?"]("to_hash",!0)){var w=u.$to_hash();if(w.$$is_hash)return w;T(E.TypeError,"Can't convert "+u.$$class+" to Hash ("+u.$$class+"#to_hash gives "+w.$$class+")")}else T(E.TypeError,"no implicit conversion of "+u.$$class+" into Hash")},E.to_ary=function(u){if(u.$$is_array)return u;if(!u["$respond_to?"]("to_ary",!0))return[u];var w=u.$to_ary();return w===re?[u]:w.$$is_array?w:void T(E.TypeError,"Can't convert "+u.$$class+" to Array ("+u.$$class+"#to_ary gives "+w.$$class+")")},E.to_a=function(u){if(u.$$is_array)return u.slice();if(!u["$respond_to?"]("to_a",!0))return[u];var w=u.$to_a();return w===re?[u]:w.$$is_array?w:void T(E.TypeError,"Can't convert "+u.$$class+" to Array ("+u.$$class+"#to_a gives "+w.$$class+")")},E.extract_kwargs=function(u){var w=u[u.length-1];if(null!=w&&E.respond_to(w,"$to_hash",!0))return F(u,u.length-1),w},E.kwrestargs=function(u,w){var se,P=[],G={},$e=u.$$smap;for(se in $e)w[se]||(P.push(se),G[se]=$e[se]);return E.hash2(P,G)};var ne=new Map;function ae(u){var w=ne.get(u);return w||ne.set(u,w="$"+u),w}function le(u){return"function"==typeof u&&!u.$$stub}E.jsid=ae,E.send=function(u,w,P,G,se){var $e;return"function"==typeof w?($e=w,w=null):"string"==typeof w?$e=u[ae(w)]:T(E.NameError,"Passed method should be a string or a function"),E.send2(u,$e,w,P,G,se)},E.send2=function(u,w,P,G,se,$e){return null==w&&null!=P&&u.$method_missing&&(w=u.$method_missing,G=[P].concat(G)),te(se,$e),"function"==typeof se&&(w.$$p=se),w.apply(u,G)},E.refined_send=function(u,w,P,G,se,$e){var ce,fe,_e,de,me,he,ge,ve,pe,be;for(de=O(w),ce=0;ce<de.length;ce++)for(me=E.id(de[ce]),fe=0;fe<u.length;fe++)for(_e=(he=u[fe]).length-1;_e>=0;_e--)if(!(typeof(ge=he[_e]).$$refine_modules>"u")&&!(typeof(ve=ge.$$refine_modules)[me]>"u")&&typeof(pe=ve[me]).$$prototype[ae(P)]<"u")return be=pe.$$prototype[ae(P)],E.send2(w,be,P,G,se,$e);return E.send(w,P,G,se,$e)},E.lambda=function(u,w){return u.$$is_lambda=!0,te(u,w),u},E.def=function(u,w,P,G){return te(P,G),u===E.top?E.defn(E.Object,w,P):!u.$$eval&&u.$$is_a_module?E.defn(u,w,P):E.defs(u,w,P)},E.defn=function(u,w,P){ue(u),P.displayName=w,P.$$owner=u;var G=w.substr(1),se=u.$$prototype;if(se.hasOwnProperty("$$dummy")&&(se=se.$$define_methods_on),I(se,w,P),u.$$is_module){u.$$module_function&&E.defs(u,w,P);for(var $e=0,ce=u.$$iclasses,fe=ce.length;$e<fe;$e++)I(ce[$e],w,P)}var de=u.$$singleton_of;return!u.$method_added||u.$method_added.$$stub||de?de&&de.$singleton_method_added&&!de.$singleton_method_added.$$stub&&de.$singleton_method_added(G):u.$method_added(G),G},E.defs=function(u,w,P,G){return te(P,G),(u.$$is_string||u.$$is_number)&&T(E.TypeError,"can't define singleton"),E.defn(E.get_singleton_class(u),w,P)},E.rdef=function(u,w){J(u.$$prototype,w)||T(E.NameError,"method '"+w.substr(1)+"' not defined in "+u.$name()),delete u.$$prototype[w],u.$$is_singleton?u.$$prototype.$singleton_method_removed&&!u.$$prototype.$singleton_method_removed.$$stub&&u.$$prototype.$singleton_method_removed(w.substr(1)):u.$method_removed&&!u.$method_removed.$$stub&&u.$method_removed(w.substr(1))},E.udef=function(u,w){(!u.$$prototype[w]||u.$$prototype[w].$$stub)&&T(E.NameError,"method '"+w.substr(1)+"' not defined in "+u.$name()),E.add_stub_for(u.$$prototype,w),u.$$is_singleton?u.$$prototype.$singleton_method_undefined&&!u.$$prototype.$singleton_method_undefined.$$stub&&u.$$prototype.$singleton_method_undefined(w.substr(1)):u.$method_undefined&&!u.$method_undefined.$$stub&&u.$method_undefined(w.substr(1))},E.alias=function(u,w,P){var $e,ce,G=ae(w),se=ae(P);if(typeof u.$$prototype>"u"&&(u=E.Object),$e=u.$$prototype[se],u.$$eval)return E.alias(E.get_singleton_class(u),w,P);if(!le($e)){for(var fe=u.$$super;"function"!=typeof $e&&fe;)$e=fe[se],fe=fe.$$super;!le($e)&&u.$$is_module&&($e=E.Object.$$prototype[se]),le($e)||T(E.NameError,"undefined method `"+P+"' for class `"+u.$name()+"'")}$e.$$alias_of&&($e=$e.$$alias_of),ce=function(){var de,me,he,_e=ce.$$p;for(de=new Array(arguments.length),me=0,he=arguments.length;me<he;me++)de[me]=arguments[me];return ce.$$p=null,E.send(this,$e,de,_e)};try{Object.defineProperty(ce,"length",{value:$e.length})}catch{}return ce.displayName=w,ce.$$arity=null==$e.$$arity?$e.length:$e.$$arity,ce.$$parameters=$e.$$parameters,ce.$$source_location=$e.$$source_location,ce.$$alias_of=$e,ce.$$alias_name=w,E.defn(u,G,ce),u},E.alias_gvar=function(u,w){return Object.defineProperty(k,u,{configurable:!0,enumerable:!0,get:function(){return k[w]},set:function(P){k[w]=P}}),re},E.alias_native=function(u,w,P){var G=ae(w),se=u.$$prototype[P];return("function"!=typeof se||se.$$stub)&&T(E.NameError,"undefined native method `"+P+"' for class `"+u.$name()+"'"),E.defn(u,G,se),u},E.hash_init=function(u){u.$$smap=Object.create(null),u.$$map=Object.create(null),u.$$keys=[]},E.hash_clone=function(u,w){w.$$none=u.$$none,w.$$proc=u.$$proc;for(var ce,fe,P=0,G=u.$$keys,se=u.$$smap,$e=G.length;P<$e;P++)(ce=G[P]).$$is_string?fe=se[ce]:(fe=ce.value,ce=ce.key),E.hash_put(w,ce,fe)},E.hash_put=function(u,w,P){if(w.$$is_string)return J(u.$$smap,w)||u.$$keys.push(w),void(u.$$smap[w]=P);var G,se,$e;if(G=u.$$by_identity?E.id(w):w.$hash(),!J(u.$$map,G))return u.$$keys.push(se={key:w,key_hash:G,value:P}),void(u.$$map[G]=se);for(se=u.$$map[G];se;){if(w===se.key||w["$eql?"](se.key)){$e=void 0,se.value=P;break}$e=se,se=se.next}$e&&(u.$$keys.push(se={key:w,key_hash:G,value:P}),$e.next=se)},E.hash_get=function(u,w){if(w.$$is_string)return J(u.$$smap,w)?u.$$smap[w]:void 0;var P,G;if(P=u.$$by_identity?E.id(w):w.$hash(),J(u.$$map,P))for(G=u.$$map[P];G;){if(w===G.key||w["$eql?"](G.key))return G.value;G=G.next}},E.hash_delete=function(u,w){var P,$e,ce,G=u.$$keys,se=G.length;if(w.$$is_string){if("string"!=typeof w&&(w=w.valueOf()),!J(u.$$smap,w))return;for(P=0;P<se;P++)if((ce=G[P]).$$is_string&&"string"!=typeof ce&&(ce=ce.valueOf()),ce===w){G.splice(P,1);break}return $e=u.$$smap[w],delete u.$$smap[w],$e}var fe=w.$hash();if(J(u.$$map,fe))for(var de,_e=u.$$map[fe];_e;){if(w===_e.key||w["$eql?"](_e.key)){for($e=_e.value,P=0;P<se;P++)if(G[P]===_e){G.splice(P,1);break}return de&&_e.next?de.next=_e.next:de?delete de.next:_e.next?u.$$map[fe]=_e.next:delete u.$$map[fe],$e}de=_e,_e=_e.next}},E.hash_rehash=function(u){for(var G,se,$e,w=0,P=u.$$keys.length;w<P;w++)if(!u.$$keys[w].$$is_string&&(G=u.$$keys[w].key.$hash())!==u.$$keys[w].key_hash){for(se=u.$$map[u.$$keys[w].key_hash],$e=void 0;se;){if(se===u.$$keys[w]){$e&&se.next?$e.next=se.next:$e?delete $e.next:se.next?u.$$map[u.$$keys[w].key_hash]=se.next:delete u.$$map[u.$$keys[w].key_hash];break}$e=se,se=se.next}if(u.$$keys[w].key_hash=G,!J(u.$$map,G)){u.$$map[G]=u.$$keys[w];continue}for(se=u.$$map[G],$e=void 0;se;){if(se===u.$$keys[w]){$e=void 0;break}$e=se,se=se.next}$e&&($e.next=u.$$keys[w])}},E.hash=function(){var w,P,G,se,$e,u=arguments.length;if(1===u&&arguments[0].$$is_hash)return arguments[0];if(P=new E.Hash,E.hash_init(P),1===u){if(w=arguments[0],arguments[0].$$is_array){for(se=w.length,G=0;G<se;G++)2!==w[G].length&&T(E.ArgumentError,"value not of length 2: "+w[G].$inspect()),E.hash_put(P,$e=w[G][0],w[G][1]);return P}for($e in w=arguments[0])J(w,$e)&&E.hash_put(P,$e,w[$e]);return P}for(u%2!=0&&T(E.ArgumentError,"odd number of arguments for Hash"),G=0;G<u;G+=2)E.hash_put(P,$e=arguments[G],arguments[G+1]);return P},E.hash2=function(u,w){var P=new E.Hash;return P.$$smap=w,P.$$map=Object.create(null),P.$$keys=u,P},E.range=function(u,w,P){var G=new E.Range;return G.begin=u,G.end=w,G.excl=P,G};var oe=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];function ue(u){u.$$frozen&&T(E.FrozenError,"can't modify frozen "+u.$class()+": "+u,E.hash2(["receiver"],{receiver:u}))}function ie(u,w){return"number"==typeof u&&"number"==typeof w}function X(u,w){return"number"==typeof u&&"number"==typeof w||"string"==typeof u&&"string"==typeof w}function V(u){return function(){return u}}E.ivar=function(u){return-1!==oe.indexOf(u)&&(u+="$"),u},E.deny_frozen_access=ue,E.freeze=function(u){return I(u,"$$frozen",!0),u.hasOwnProperty("$$id")||I(u,"$$id",L()),u.hasOwnProperty("$$meta")?u.$$meta.$freeze():I(u,"$$meta",null),u.hasOwnProperty("$$comparable")||I(u,"$$comparable",null),Object.seal(u),u},E.freeze_props=function(u){var w,P,G;for(w in u)("string"!=(P=typeof w)&&"object"!==P||"$"!==w[0])&&(G=Object.getOwnPropertyDescriptor(u,w))&&G.enumerable&&G.writable&&function(){var se=u[w];Object.defineProperty(u,w,{get:function(){return se},set:function($e){ue(u)},enumerable:!0})}()},E.escape_regexp=function(u){return u.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},E.global_regexp=function(u){return u.global?u:(null==u.$$g?u.$$g=new RegExp(u.source,(u.multiline?"gm":"g")+(u.ignoreCase?"i":"")):u.$$g.lastIndex=null,u.$$g)},E.global_multiline_regexp=function(u){var w,P;return u.global&&u.multiline?u:(P="gm"+(u.ignoreCase?"i":""),u.multiline?(null==u.$$g&&(u.$$g=new RegExp(u.source,P)),w=u.$$g):(null==u.$$gm&&(u.$$gm=new RegExp(u.source,P)),w=u.$$gm),w.lastIndex=null,w)},E.regexp=function(u,w){for(var P,G=typeof w<"u"&&w&&w.indexOf("i")>=0,se=0,$e=u.length;se<$e;se++)(P=u[se])instanceof RegExp&&(P.ignoreCase!==G&&E.Kernel.$warn("ignore case doesn't match for "+P.source.$inspect(),E.hash({uplevel:1})),P=P.source),""===P&&(P="(?:"+P+")"),u[se]=P;return w?new RegExp(u.join(""),w):new RegExp(u.join(""))},E.modules={},E.loaded_features=["corelib/runtime"],E.current_dir=".",E.require_table={"corelib/runtime":!0},E.normalize=function(u){var w,P,G=[];"."!==E.current_dir&&(u=E.current_dir.replace(/\/*$/,"/")+u);for(var $e=0,ce=(w=(u=(u=u.replace(/^\.\//,"")).replace(/\.(rb|opal|js)$/,"")).split("/")).length;$e<ce;$e++)""!==(P=w[$e])&&(".."===P?G.pop():G.push(P));return G.join("/")},E.loaded=function(u){var w,P,G;for(w=0,P=u.length;w<P;w++)G=E.normalize(u[w]),!E.require_table[G]&&(E.loaded_features.push(G),E.require_table[G]=!0)},E.load_normalized=function(u){E.loaded([u]);var w=E.modules[u];if(w){var P=w(E);if(typeof Promise<"u"&&P instanceof Promise)return P.then(V(!0))}else{var G=E.config.missing_require_severity,se="cannot load such file -- "+u;"error"===G?T(E.LoadError,se):"warning"===G&&ee.warn("WARNING: LoadError: "+se)}return!0},E.load=function(u){return u=E.normalize(u),E.load_normalized(u)},E.require=function(u){return u=E.normalize(u),!E.require_table[u]&&E.load_normalized(u)},E.encodings=Object.create(null),E.set_encoding=function(u,w,P){typeof P>"u"&&(P="encoding"),("string"==typeof u||!0===u.$$frozen)&&T(E.FrozenError,"can't modify frozen String");var G=E.find_encoding(w);return G===u[P]||(u[P]=G),u},E.find_encoding=function(u){var w=E.encodings,P=w[u]||w[u.toUpperCase()];return P||T(E.ArgumentError,"unknown encoding name - "+u),P},E.enc=function(u,w){var P=new String(u);return(P=E.set_encoding(P,w)).internal_encoding=P.encoding,P},E.binary=function(u){var w=new String(u);return E.set_encoding(w,"binary","internal_encoding")},E.last_promise=null,E.promise_unhandled_exception=!1,E.queue=function(u){if(E.last_promise)return E.last_promise=E.last_promise.then(function(){if(!E.promise_unhandled_exception)return u(E)}).catch(function(P){E.respond_to(P,"$full_message")&&(P=P.$full_message()),ee.error(P),E.promise_unhandled_exception=!0,E.exit(1)}),E.last_promise;var w=u(E);return"function"==typeof Promise&&"object"==typeof w&&w instanceof Promise&&(E.last_promise=w),w},E.rb_plus=function(u,w){return ie(u,w)?u+w:u["$+"](w)},E.rb_minus=function(u,w){return ie(u,w)?u-w:u["$-"](w)},E.rb_times=function(u,w){return ie(u,w)?u*w:u["$*"](w)},E.rb_divide=function(u,w){return ie(u,w)?u/w:u["$/"](w)},E.rb_lt=function(u,w){return ie(u,w)?u<w:u["$<"](w)},E.rb_gt=function(u,w){return ie(u,w)?u>w:u["$>"](w)},E.rb_le=function(u,w){return ie(u,w)?u<=w:u["$<="](w)},E.rb_ge=function(u,w){return ie(u,w)?u>=w:u["$>="](w)},E.eqeq=function D(u,w){return X(u,w)?u===w:b(u["$=="](w))},E.eqeqeq=function(u,w){return X(u,w)?u===w:b(u["$==="](w))},E.neqeq=function(u,w){return X(u,w)?u!==w:b(u["$!="](w))},E.not=function(u){return null==u||!1===u||re===u||!0!==u&&!u["$!"].$$pristine&&b(u["$!"]())},E.return_val=V,E.return_self=function(){return this},E.return_ivar=function(u){return function(){return null==this[u]?re:this[u]}},E.assign_ivar=function(u){return function(w){return ue(this),this[u]=w}},E.assign_ivar_val=function(u,w){return function(){return ue(this),this[u]=w}},E.ensure_kwargs=function(u){return null==u?E.hash2([],{}):u.$$is_hash?u:void T(E.ArgumentError,"expected kwargs")},E.get_kwarg=function(u,w){return J(u.$$smap,w)||T(E.ArgumentError,"missing keyword: "+w),u.$$smap[w]},E.large_array_unpack=function(u){var G,w=u.split(","),P=w.length;for(G=0;G<P;G++)switch(w[G][0]){case void 0:w[G]=re;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":w[G]=+w[G]}return w},E.BasicObject=$=S("BasicObject",null),E.Object=K=S("Object",E.BasicObject),E.Module=Q=S("Module",E.Object),E.Class=N=S("Class",E.Module),E.Opal=x=h("Opal"),E.Kernel=B=h("Kernel"),Y(E.BasicObject,E.Class.$$prototype),Y(E.Object,E.Class.$$prototype),Y(E.Module,E.Class.$$prototype),Y(E.Class,E.Class.$$prototype),$.$$const.BasicObject=$,v(K,"BasicObject",$),v(K,"Object",K),v(K,"Module",Q),v(K,"Class",N),v(K,"Opal",x),v(K,"Kernel",B),$.$$class=N,K.$$class=N,Q.$$class=N,N.$$class=N,x.$$class=Q,B.$$class=Q,I(K.$$prototype,"toString",function(){var u=this.$to_s();return u.$$is_string&&"object"==typeof u?u.valueOf():u}),I(K.$$prototype,"$require",E.require),E.top=new K,E.top.$to_s=E.top.$inspect=V("main"),E.top.$define_method=function Z(){var u=H(arguments),w=Z.$$p;return Z.$$p=null,E.send(K,"define_method",u,w)},E.NilClass=S("NilClass",E.Object),v(K,"NilClass",E.NilClass),(re=E.nil=new E.NilClass).$$id=4,re.call=re.apply=function(){T(E.LocalJumpError,"no block given")},re.$$frozen=!0,re.$$comparable=!1,Object.seal(re),E.thrower=function(u){var w=new Error("unexpected "+u);return w.$thrower_type=u,w.$throw=function(P){throw null==P&&(P=re),w.$v=P,w},w},E.t_eval_return=E.thrower("return"),TypeError.$$super=Error,E.file_sources={}}).call(this),Opal.loaded(["corelib/runtime.js"]),Opal.modules["corelib/helpers"]=function(l){var ee=l.type_error,re=l.coerce_to,$=l.module,K=l.defs,Q=l.slice,N=l.eqeqeq,x=l.Kernel,B=l.truthy,E=l.Opal,W=l.nil,U=l.$$$;return function(J){var Y=$("::","Opal");K(Y,"$bridge",function(y,A){return l.bridge(y,A)}),K(Y,"$coerce_to!",function(y,A,L,k){var T,b;return T=Q(arguments,3),b=re(y,A,L,T),N(A,b)||x.$raise(ee(y,A,L,b)),b},-4),K(Y,"$coerce_to?",function(y,A,L,k){var I,b=W;return I=Q(arguments,3),!B(y["$respond_to?"](L))||(b=re(y,A,L,I),B(b["$nil?"]()))?W:(N(A,b)||x.$raise(ee(y,A,L,b)),b)},-4),K(Y,"$try_convert",function(y,A,L){return N(A,y)?y:B(y["$respond_to?"](L))?y.$__send__(L):W}),K(Y,"$compare",function(y,A){var L;return L=y["$<=>"](A),B(L===W)&&x.$raise(U("ArgumentError"),"comparison of "+y.$class()+" with "+A.$class()+" failed"),L}),K(Y,"$destructure",function(y){if(1==y.length)return y[0];if(y.$$is_array)return y;for(var A=new Array(y.length),L=0,k=A.length;L<k;L++)A[L]=y[L];return A}),K(Y,"$respond_to?",function(y,A,L){return null==L&&(L=!1),!(null==y||!y.$$class)&&y["$respond_to?"](A,L)},-3),K(Y,"$instance_variable_name!",function(y){return y=E["$coerce_to!"](y,U("String"),"to_str"),B(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(y))||x.$raise(U("NameError").$new("'"+y+"' is not allowed as an instance variable name",y)),y}),K(Y,"$class_variable_name!",function(y){return y=E["$coerce_to!"](y,U("String"),"to_str"),B(y.length<3||"@@"!==y.slice(0,2))&&x.$raise(U("NameError").$new("`"+y+"' is not allowed as a class variable name",y)),y}),K(Y,"$const_name?",function(y){return"string"!=typeof y&&(y=E["$coerce_to!"](y,U("String"),"to_str")),y[0]===y[0].toUpperCase()}),K(Y,"$const_name!",function(y){return B(U("::","String","skip_raise")?"constant":W)&&(y=E["$coerce_to!"](y,U("String"),"to_str")),(!y||y[0]!=y[0].toUpperCase())&&this.$raise(U("NameError"),"wrong constant name "+y),y}),K(Y,"$pristine",function(y,A){for(var k,I,b=(k=Q(arguments,1)).length-1;b>=0;b--)(I=y.$$prototype[l.jsid(k[b])])&&!I.$$stub&&(I.$$pristine=!0);return W},-2);var H=[];return K(Y,"$inspect",function(y){var L=!1;return function(){try{try{return null===y?"null":void 0===y?"undefined":typeof y.$$class>"u"?Object.prototype.toString.apply(y):"function"!=typeof y.$inspect||y.$inspect.$$stub||-1!==H.indexOf(y.$__id__())?"#<"+y.$$class+":0x"+y.$__id__().$to_s(16)+">":(H.push(y.$__id__()),L=!0,y.$inspect())}catch(k){if(!l.rescue(k,[U("Exception")]))throw k;try{return"#<"+y.$$class+":0x"+y.$__id__().$to_s(16)+">"}finally{l.pop_exception()}}}finally{L&&H.pop()}}()},-1)}()},Opal.modules["corelib/module"]=function(l){var r,e,n,t,ee=l.truthy,re=l.coerce_to,$=l.const_set,K=l.Object,Q=l.return_ivar,N=l.assign_ivar,x=l.ivar,B=l.deny_frozen_access,E=l.freeze,W=l.prop,U=l.jsid,J=l.klass,Y=l.defs,H=l.send,F=l.def,y=l.eqeqeq,A=l.Module,L=l.Kernel,k=l.rb_lt,T=l.rb_gt,I=l.slice,b=l.to_a,g=l.hash2,q=l.Opal,R=l.return_val,_=l.eqeq,p=l.lambda,f=l.range,z=l.send2,v=l.find_super,S=l.alias,M=l.nil,h=l.$$$;return r=[],e=J("::",null,"Module"),n=[e].concat(r),t=l.$r(n),Y(e,"$allocate",function(){var c=l.allocate_module(M,function(){});return this!==l.Module&&Object.setPrototypeOf(c,this.$$prototype),c}),F(e,"$initialize",function s(){var i=s.$$p||M;return s.$$p=null,i!==M?H(this,"module_eval",[],i.$to_proc()):M}),F(e,"$===",function(i){return!ee(null==i)&&l.is_a(i,this)}),F(e,"$<",function(i){var j,C,O,c=this;if(y(A,i)||L.$raise(h("TypeError"),"compared with non class/module"),c===i)return!1;for(C=0,O=(j=l.ancestors(c)).length;C<O;C++)if(j[C]===i)return!0;for(C=0,O=(j=l.ancestors(i)).length;C<O;C++)if(j[C]===c)return!1;return M}),F(e,"$<=",function(i){var o;return ee(o=this["$equal?"](i))?o:k(this,i)}),F(e,"$>",function(i){return y(A,i)||L.$raise(h("TypeError"),"compared with non class/module"),k(i,this)}),F(e,"$>=",function(i){var o;return ee(o=this["$equal?"](i))?o:T(this,i)}),F(e,"$<=>",function(i){var o=M;return this===i?0:!y(A,i)||(o=k(this,i),ee(o["$nil?"]()))?M:ee(o)?-1:1}),F(e,"$alias_method",function(i,c){var o=this;return B(o),i=re(i,h("String"),"to_str"),c=re(c,h("String"),"to_str"),l.alias(o,i,c),o}),F(e,"$alias_native",function(i,c){var o=this;return null==c&&(c=i),B(o),l.alias_native(o,i,c),o},-2),F(e,"$ancestors",function(){return l.ancestors(this)}),F(e,"$append_features",function(i){return B(i),l.append_features(this,i),this}),F(e,"$attr_accessor",function(i){var c,o;return c=I(arguments),H(this,"attr_reader",b(o=c)),H(this,"attr_writer",b(o))},-1),F(e,"$attr",function(i){var o,j=this;return 2!=(o=I(arguments)).length||!0!==o[1]&&!1!==o[1]?H(j,"attr_reader",b(o)):(j.$warn("optional boolean argument is obsoleted",g(["uplevel"],{uplevel:1})),o[1]?j.$attr_accessor(o[0]):j.$attr_reader(o[0]),M)},-1),F(e,"$attr_reader",function(i){var o,j=this;o=I(arguments),B(j);for(var C=j.$$prototype,O=o.length-1;O>=0;O--){var te=o[O],ne=U(te),ae=x(te),le=Q(ae);l.prop(C,ae,M),le.$$parameters=[],le.$$arity=0,l.defn(j,ne,le)}return M},-1),F(e,"$attr_writer",function(i){var o,j=this;o=I(arguments),B(j);for(var C=j.$$prototype,O=o.length-1;O>=0;O--){var te=o[O],ne=U(te+"="),ae=x(te),le=N(ae);le.$$parameters=[["req"]],le.$$arity=1,l.prop(C,ae,M),l.defn(j,ne,le)}return M},-1),F(e,"$autoload",function(i,c){var o=this;return B(o),t("Opal")["$const_name?"](i)||L.$raise(h("NameError"),"autoload must be constant name: "+i),""==c&&L.$raise(h("ArgumentError"),"empty file name"),o.$$const.hasOwnProperty(i)||(o.$$autoload||(o.$$autoload={}),l.const_cache_version++,o.$$autoload[i]={path:c,loaded:!1,required:!1,success:!1,exception:!1},o.$const_added&&!o.$const_added.$$pristine&&o.$const_added(i)),M}),F(e,"$autoload?",function(i){var c=this;if(c.$$autoload&&c.$$autoload[i]&&!c.$$autoload[i].required&&!c.$$autoload[i].success)return c.$$autoload[i].path;for(var o=c.$ancestors(),j=0,C=o.length;j<C;j++)if(o[j].$$autoload&&o[j].$$autoload[i]&&!o[j].$$autoload[i].required&&!o[j].$$autoload[i].success)return o[j].$$autoload[i].path;return M}),F(e,"$class_variables",function(){return Object.keys(l.class_variables(this))}),F(e,"$class_variable_get",function(i){return i=q["$class_variable_name!"](i),l.class_variable_get(this,i,!1)}),F(e,"$class_variable_set",function(i,c){return B(this),i=q["$class_variable_name!"](i),l.class_variable_set(this,i,c)}),F(e,"$class_variable_defined?",function(i){return i=q["$class_variable_name!"](i),l.class_variables(this).hasOwnProperty(i)}),F(e,"$const_added",R(M)),q.$pristine(e,"const_added"),F(e,"$remove_class_variable",function(i){var c=this;if(B(c),i=q["$class_variable_name!"](i),l.hasOwnProperty.call(c.$$cvars,i)){var o=c.$$cvars[i];return delete c.$$cvars[i],o}L.$raise(h("NameError"),"cannot remove "+i+" for "+c)}),F(e,"$constants",function(i){return null==i&&(i=!0),l.constants(this,i)},-1),Y(e,"$constants",function(i){if(null==i){var j,O,te,o=(this.$$nesting||[]).concat(K),C={};for(O=0,te=o.length;O<te;O++)for(j in o[O].$$const)C[j]=!0;return Object.keys(C)}return l.constants(this,i)},-1),Y(e,"$nesting",function(){return this.$$nesting||[]}),F(e,"$const_defined?",function(i,c){var o=this;null==c&&(c=!0),i=t("Opal")["$const_name!"](i),ee(i["$=~"](h(q,"CONST_NAME_REGEXP")))||L.$raise(h("NameError").$new("wrong constant name "+i,i));var j,te,ne,C=[o];for(c&&(C=C.concat(l.ancestors(o)),o.$$is_module&&(C=C.concat([K]).concat(l.ancestors(K)))),te=0,ne=C.length;te<ne;te++)if(null!=(j=C[te]).$$const[i]||j.$$autoload&&j.$$autoload[i]&&!j.$$autoload[i].required&&!j.$$autoload[i].success)return!0;return!1},-2),F(e,"$const_get",function(i,c){var o=this;return null==c&&(c=!0),0===(i=t("Opal")["$const_name!"](i)).indexOf("::")&&"::"!==i&&(i=i.slice(2)),ee(-1!=i.indexOf("::")&&"::"!=i)?H(i.$split("::"),"inject",[o],function(C,O){return null==C&&(C=M),null==O&&(O=M),C.$const_get(O)}):(ee(i["$=~"](h(q,"CONST_NAME_REGEXP")))||L.$raise(h("NameError").$new("wrong constant name "+i,i)),c?l.$$([o],i):l.const_get_local(o,i))},-2),F(e,"$const_missing",function(i){var o;return o=_(this,K)?i:this+"::"+i,L.$raise(h("NameError").$new("uninitialized constant "+o,i))}),F(e,"$const_set",function(i,c){return B(this),i=q["$const_name!"](i),(ee(i["$!~"](h(q,"CONST_NAME_REGEXP")))||ee(i["$start_with?"]("::")))&&L.$raise(h("NameError").$new("wrong constant name "+i,i)),$(this,i,c),c}),F(e,"$public_constant",R(M)),F(e,"$define_method",function s(i,c){var C,o=s.$$p||M,j=this,O=M;return s.$$p=null,B(j),void 0===c&&o===M&&L.$raise(h("ArgumentError"),"tried to create a Proc object without a block"),o=ee(C=o)?C:y(h("Proc"),O=c)?c:y(h("Method"),O)?c.$to_proc().$$unbound:y(h("UnboundMethod"),O)?p(function ne(ae){var oe,ie,ue=null==ne.$$s?this:ne.$$s;return oe=I(arguments),ie=c.$bind(ue),H(ie,"call",b(oe))},{$$arity:-1,$$s:j}):L.$raise(h("TypeError"),"wrong argument type "+o.$class()+" (expected Proc/Method)"),typeof Proxy<"u"&&(o.$$proxy_target=o,o=new Proxy(o,{apply:function(ne,ae,le){var oe=ne.$$jsid;ne.$$jsid=i;try{return ne.apply(ae,le)}catch(ue){if(ue===ne.$$brk||ue===ne.$$ret)return ue.$v;throw ue}finally{ne.$$jsid=oe}}})),o.$$jsid=i,o.$$s=null,o.$$def=o,o.$$define_meth=!0,l.defn(j,U(i),o)},-2),F(e,"$freeze",function(){var i=this;return ee(i["$frozen?"]())?i:(i.hasOwnProperty("$$base_module")||W(i,"$$base_module",null),E(i))}),F(e,"$remove_method",function(i){var o,j=this;o=I(arguments);for(var C=0;C<o.length;C++){var O=o[C];"string"==typeof O||O.$$is_string||j.$raise(h("TypeError"),j.$name()+" is not a symbol nor a string"),B(j),l.rdef(j,"$"+O)}return j},-1),F(e,"$singleton_class?",function(){return!!this.$$is_singleton}),F(e,"$include",function(i){for(var o,j=this,C=(o=I(arguments)).length-1;C>=0;C--){var O=o[C];O.$$is_module||L.$raise(h("TypeError"),"wrong argument type "+O.$class()+" (expected Module)"),O.$append_features(j),O.$included(j)}return j},-1),F(e,"$included_modules",function(){return l.included_modules(this)}),F(e,"$include?",function(i){i.$$is_module||L.$raise(h("TypeError"),"wrong argument type "+i.$class()+" (expected Module)");var o,j,C,O=l.ancestors(this);for(o=0,j=O.length;o<j;o++)if((C=O[o])===i&&C!==this)return!0;return!1}),F(e,"$instance_method",function(i){var c=this,o=c.$$prototype[U(i)];return(!o||o.$$stub)&&L.$raise(h("NameError").$new("undefined method `"+i+"' for class `"+c.$name()+"'",i)),h("UnboundMethod").$new(c,o.$$owner||c,o,i)}),F(e,"$instance_methods",function(i){return null==i&&(i=!0),ee(i)?l.instance_methods(this):l.own_instance_methods(this)},-1),F(e,"$included",R(M)),F(e,"$extended",R(M)),F(e,"$extend_object",function(i){return B(i),M}),F(e,"$method_added",function(i){return I(arguments),M},-1),F(e,"$method_removed",function(i){return I(arguments),M},-1),F(e,"$method_undefined",function(i){return I(arguments),M},-1),F(e,"$module_eval",function s(i){var j,C,c=s.$$p||M,O=this,te=M,le=M,oe=M,ue=M,ie=M;s.$$p=null,j=I(arguments),ee(c["$nil?"]())&&ee(!!l.compile)?(ee(f(1,3,!1)["$cover?"](j.$size()))||L.$raise(h("ArgumentError"),"wrong number of arguments (0 for 1..3)"),te=null==(C=[].concat(b(j)))[0]?M:C[0],le=g(["file","eval"],{file:ee(oe=null==C[1]?M:C[1])?oe:"(eval)",eval:!0}),ue=l.hash({arity_check:!1}).$merge(le),ie=q.$compile(te,ue),c=H(L,"proc",[],function V(){var Z=null==V.$$s?this:V.$$s;return new Function("Opal,self","return "+ie)(l,Z)},{$$s:O})):ee(j["$any?"]())&&L.$raise(h("ArgumentError"),"wrong number of arguments ("+j.$size()+" for 0)\n\n  NOTE:If you want to enable passing a String argument please add \"require 'opal-parser'\" to your script\n");var D,X=c.$$s;return c.$$s=null,D=c.apply(O,[O]),c.$$s=X,D},-1),F(e,"$module_exec",function s(i){var j,c=s.$$p||M;s.$$p=null,j=I(arguments),c===M&&L.$raise(h("LocalJumpError"),"no block given");var te,O=c.$$s;return c.$$s=null,te=c.apply(this,j),c.$$s=O,te},-1),F(e,"$method_defined?",function(i){var o=this.$$prototype[U(i)];return!!o&&!o.$$stub}),F(e,"$module_function",function(i){var o,j=this;if(o=I(arguments),B(j),0===o.length)return j.$$module_function=!0,M;for(var C=0,O=o.length;C<O;C++){var ne=U(o[C]);l.defs(j,ne,j.$$prototype[ne])}return 1===o.length?o[0]:o},-1),F(e,"$name",function(){var i=this;if(i.$$full_name)return i.$$full_name;for(var c=[],o=i;o;){if(o.$$name===M||null==o.$$name)return M;if(c.unshift(o.$$name),(o=o.$$base_module)===K)break}return 0===c.length?M:i.$$full_name=c.join("::")}),F(e,"$prepend",function(i){var o,j=this;0===(o=I(arguments)).length&&L.$raise(h("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var C=o.length-1;C>=0;C--){var O=o[C];O.$$is_module||L.$raise(h("TypeError"),"wrong argument type "+O.$class()+" (expected Module)"),O.$prepend_features(j),O.$prepended(j)}return j},-1),F(e,"$prepend_features",function(i){var c=this;return B(i),c.$$is_module||L.$raise(h("TypeError"),"wrong argument type "+c.$class()+" (expected Module)"),l.prepend_features(c,i),c}),F(e,"$prepended",R(M)),F(e,"$remove_const",function(i){return B(this),l.const_remove(this,i)}),F(e,"$to_s",function(){var c,i=this;return ee(c=l.Module.$name.call(i))?c:"#<"+(i.$$is_module?"Module":"Class")+":0x"+i.$__id__().$to_s(16)+">"}),F(e,"$undef_method",function(i){var o,j=this;o=I(arguments);for(var C=0;C<o.length;C++){var O=o[C];"string"==typeof O||O.$$is_string||j.$raise(h("TypeError"),j.$name()+" is not a symbol nor a string"),B(j),l.udef(j,"$"+o[C])}return j},-1),F(e,"$instance_variables",function(){var i=this,c=M;l.Module.$$nesting=n,c=i.$constants();var o=[];for(var j in i)i.hasOwnProperty(j)&&"$"!==j.charAt(0)&&"constructor"!==j&&!c["$include?"](j)&&o.push("@"+j);return o}),F(e,"$dup",function s(){var i=s.$$p||M,c=this,o=M;return s.$$p=null,(o=z(c,v(c,"dup",s,!1,!0),"dup",[],i)).$copy_class_variables(c),o.$copy_constants(c),o}),F(e,"$copy_class_variables",function(i){for(var o in i.$$cvars)this.$$cvars[o]=i.$$cvars[o]}),F(e,"$copy_constants",function(i){var o,j=i.$$const;for(o in j)$(this,o,j[o])}),F(e,"$refine",function s(i){var o,C,te,c=s.$$p||M,j=this,O=M;return s.$$p=null,C=(o=[j,M,M])[0],O=o[1],te=l.id(i),typeof j.$$refine_modules>"u"&&(j.$$refine_modules=Object.create(null)),(O=typeof j.$$refine_modules[te]>"u"?j.$$refine_modules[te]=h("Refinement").$new():j.$$refine_modules[te]).refinement_module=C,O.refined_class=i,H(O,"class_exec",[],c.$to_proc()),O}),F(e,"$refinements",function(){var c=this.$$refine_modules,o=g([],{});if(typeof c>"u")return o;for(var j in c)o["$[]="](c[j].refined_class,c[j]);return o}),F(e,"$using",function(i){return L.$raise("Module#using is not permitted in methods")}),S(e,"class_eval","module_eval"),S(e,"class_exec","module_exec"),S(e,"inspect","to_s"),function(d,a){var r=J("::",a,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=M,r.$attr_reader("refined_class"),F(r,"$inspect",function n(){var t=n.$$p||M,s=this;return n.$$p=null,ee(s.refinement_module)?"#<refinement:"+s.refined_class.$inspect()+"@"+s.refinement_module.$inspect()+">":z(s,v(s,"inspect",n,!1,!0),"inspect",[],t)})}(0,A)},Opal.modules["corelib/class"]=function(l){var L,k,T,I,ee=l.klass,re=l.send,$=l.defs,K=l.def,Q=l.rb_plus,N=l.return_val,x=l.slice,B=l.send2,E=l.find_super,W=l.Kernel,U=l.alias,H=l.nil,F=l.$$$;return l.top.$require("corelib/module"),L=[],T=[k=ee("::",null,"Class")].concat(L),I=l.$r(T),$(k,"$new",function b(g){var q=b.$$p||H;if(b.$$p=null,null==g&&(g=I("Object")),!g.$$is_class)throw l.TypeError.$new("superclass must be a Class");var R=l.allocate_class(H,g);return g.$inherited(R),q!==H&&re(R,"class_eval",[],q.$to_proc()),R},-1),K(k,"$allocate",function(){var q=new this.$$constructor;return q.$$id=l.uid(),q}),K(k,"$descendants",function(){return Q(this.$subclasses(),re(this.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),K(k,"$inherited",N(H)),K(k,"$initialize_dup",function(g){var q=this;q.$initialize_copy(g),q.$$name=null,q.$$full_name=null}),K(k,"$new",function b(g){var _,q=b.$$p||H;b.$$p=null,_=x(arguments);var f=this.$allocate();return l.send(f,f.$initialize,_,q),f},-1),K(k,"$subclasses",function(){var g=this;if(typeof WeakRef<"u"){var q,R,_=[];for(q=0;q<g.$$subclasses.length;q++)void 0!==(R=g.$$subclasses[q].deref())&&_.push(R);return _}return g.$$subclasses}),K(k,"$superclass",function(){return this.$$super||H}),K(k,"$to_s",function b(){var q=this;b.$$p=null;var R=q.$$singleton_of;return R&&R.$$is_a_module?"#<Class:"+R.$name()+">":R?"#<Class:#<"+R.$$class.$name()+":0x"+l.id(R).$to_s(16)+">>":B(q,E(q,"to_s",b,!1,!0),"to_s",[],null)}),K(k,"$attached_object",function(){var g=this;if(null!=g.$$singleton_of)return g.$$singleton_of;W.$raise(F("TypeError"),"`"+g+"' is not a singleton class")}),U(k,"inspect","to_s")},Opal.modules["corelib/basic_object"]=function(l){"use strict";var k,re=l.slice,$=l.def,K=l.alias,Q=l.return_val,N=l.Opal,x=l.truthy,B=l.range,E=l.Kernel,W=l.to_a,U=l.hash2,J=l.send,Y=l.eqeq,H=l.rb_ge,F=l.nil,y=l.$$$;return $(k=(0,l.klass)("::",null,"BasicObject"),"$initialize",function(I){return re(arguments),F},-1),$(k,"$==",function(I){return this===I}),$(k,"$eql?",function(I){return this["$=="](I)}),K(k,"equal?","=="),$(k,"$__id__",function(){var I=this;return null!=I.$$id||l.prop(I,"$$id",l.uid()),I.$$id}),$(k,"$__send__",function T(I,b){var R,g=T.$$p||F,_=this;T.$$p=null,R=re(arguments,1),I.$$is_string||_.$raise(y("TypeError"),_.$inspect()+" is not a symbol nor a string");var p=_[l.jsid(I)];return p?(g!==F&&(p.$$p=g),p.apply(_,R)):(g!==F&&(_.$method_missing.$$p=g),_.$method_missing.apply(_,[I].concat(R)))},-2),$(k,"$!",Q(!1)),N.$pristine("!"),$(k,"$!=",function(I){return this["$=="](I)["$!"]()}),$(k,"$instance_eval",function T(I){var q,R,b=T.$$p||F,_=this,p=F,v=F,S=F,m=F,M=F;if(T.$$p=null,q=re(arguments),x(b["$nil?"]())&&x(!!l.compile))x(B(1,3,!1)["$cover?"](q.$size()))||E.$raise(y("ArgumentError"),"wrong number of arguments (0 for 1..3)"),p=null==(R=[].concat(W(q)))[0]?F:R[0],v=U(["file","eval"],{file:x(S=null==R[1]?F:R[1])?S:"(eval)",eval:!0}),m=l.hash({arity_check:!1}).$merge(v),M=N.$compile(p,m),b=J(E,"proc",[],function a(){var r=null==a.$$s?this:a.$$s;return new Function("Opal,self","return "+M)(l,r)},{$$s:_});else{if(x(b["$nil?"]())&&x(H(q.$length(),1))&&Y(q.$first()["$[]"](0),"@"))return _.$instance_variable_get(q.$first());x(q["$any?"]())&&E.$raise(y("ArgumentError"),"wrong number of arguments ("+q.$size()+" for 0)")}var d,h=b.$$s;if(b.$$s=null,_.$$is_a_module){_.$$eval=!0;try{d=b.call(_,_)}finally{_.$$eval=!1}}else d=b.call(_,_);return b.$$s=h,d},-1),$(k,"$instance_exec",function T(I){var q,b=T.$$p||F,R=this;T.$$p=null,q=re(arguments),x(b)||E.$raise(y("ArgumentError"),"no block given");var p,_=b.$$s;if(b.$$s=null,R.$$is_a_module){R.$$eval=!0;try{p=b.apply(R,q)}finally{R.$$eval=!1}}else p=b.apply(R,q);return b.$$s=_,p},-1),$(k,"$singleton_method_added",function(I){return re(arguments),F},-1),$(k,"$singleton_method_removed",function(I){return re(arguments),F},-1),$(k,"$singleton_method_undefined",function(I){return re(arguments),F},-1),$(k,"$method_missing",function T(I,b){var R,p;return T.$$p=null,R=re(arguments,1),p=N.$inspect(this),E.$raise(y("NoMethodError").$new("undefined method `"+I+"' for "+p,I,R),F,E.$caller(1))},-2),N.$pristine(k,"method_missing"),$(k,"$respond_to_missing?",function(I,b){return null==b&&(b=!1),!1},-2)},Opal.modules["corelib/kernel"]=function(l){"use strict";var h,ee=l.truthy,re=l.coerce_to,$=l.respond_to,K=l.Opal,Q=l.deny_frozen_access,N=l.freeze,x=l.freeze_props,B=l.jsid,E=l.module,W=l.return_val,U=l.def,J=l.Kernel,Y=l.gvars,H=l.slice,F=l.send,y=l.to_a,A=l.ensure_kwargs,L=l.eqeq,k=l.hash2,T=l.rb_plus,I=l.eqeqeq,b=l.return_self,g=l.rb_le,q=l.extract_kwargs,R=l.rb_lt,_=l.Object,p=l.alias,f=l.klass,v=l.nil,S=l.$$$;return function(m,M){var h=E("::","Kernel"),d=[h].concat([]),a=l.$r(d);U(h,"$=~",W(!1)),U(h,"$!~",function(n){return this["$=~"](n)["$!"]()}),U(h,"$===",function(n){var s;return ee(s=this.$object_id()["$=="](n.$object_id()))?s:this["$=="](n)}),U(h,"$<=>",function(n){this.$$comparable=!0;var s=this["$=="](n);return s&&s!==v?0:v}),U(h,"$method",function(n){var t=this,s=t[B(n)];return(!s||s.$$stub)&&J.$raise(S("NameError").$new("undefined method `"+n+"' for class `"+t.$class()+"'",n)),S("Method").$new(t,s.$$owner||t.$class(),s,n)}),U(h,"$methods",function(n){return null==n&&(n=!0),ee(n)?l.methods(this):l.own_methods(this)},-1),U(h,"$public_methods",function(n){return null==n&&(n=!0),ee(n)?l.methods(this):l.receiver_methods(this)},-1),U(h,"$Array",function(n){var t;return n===v?[]:n.$$is_array?n:(t=K["$coerce_to?"](n,S("Array"),"to_ary"))!==v||(t=K["$coerce_to?"](n,S("Array"),"to_a"))!==v?t:[n]}),U(h,"$at_exit",function e(){var t,n=e.$$p||v;return null==Y.__at_exit__&&(Y.__at_exit__=v),e.$$p=null,Y.__at_exit__=ee(t=Y.__at_exit__)?t:[],Y.__at_exit__["$<<"](n),n}),U(h,"$caller",function(n,t){var s,i;null==n&&(n=1),null==t&&(t=v),i=[];for(var c=n+1,o=(s=(new Error).$backtrace()).length;c<o;c++)s[c].match(/runtime\.js/)||i.push(s[c]);return t!=v&&(i=i.slice(0,t)),i},-1),U(h,"$caller_locations",function(n){var t;return t=H(arguments),F(F(this,"caller",y(t)),"map",[],function(o){return null==o&&(o=v),S(S(S("Thread"),"Backtrace"),"Location").$new(o)})},-1),U(h,"$class",function(){return this.$$class}),U(h,"$copy_instance_variables",function(n){var i,c,o,s=Object.keys(n);for(i=0,c=s.length;i<c;i++)"$"!==(o=s[i]).charAt(0)&&n.hasOwnProperty(o)&&(this[o]=n[o])}),U(h,"$copy_singleton_methods",function(n){var s,i,c,o;if(n.hasOwnProperty("$$meta")&&null!==n.$$meta){var j=l.get_singleton_class(n),C=l.get_singleton_class(this);for(s=0,o=(c=Object.getOwnPropertyNames(j.$$prototype)).length;s<o;s++)l.is_method(i=c[s])&&(C.$$prototype[i]=j.$$prototype[i]);C.$$const=Object.assign({},j.$$const),Object.setPrototypeOf(C.$$prototype,Object.getPrototypeOf(j.$$prototype))}for(s=0,o=(c=Object.getOwnPropertyNames(n)).length;s<o;s++)"$"===(i=c[s]).charAt(0)&&"$"!==i.charAt(1)&&n.hasOwnProperty(i)&&(this[i]=n[i])}),U(h,"$clone",function(n){var t,s=this,i=v;return null==(t=(n=A(n)).$$smap.freeze)&&(t=v),ee(t["$nil?"]())||L(t,!0)||L(t,!1)||s.$raise(a("ArgumentError"),"unexpected value for freeze: "+t.$class()),(i=s.$class().$allocate()).$copy_instance_variables(s),i.$copy_singleton_methods(s),i.$initialize_clone(s,k(["freeze"],{freeze:t})),(L(t,!0)||ee(t["$nil?"]())&&ee(s["$frozen?"]()))&&i.$freeze(),i},-1),U(h,"$initialize_clone",function(n,t){return t=A(t),this.$initialize_copy(n),this},-2),U(h,"$define_singleton_method",function e(n,t){var s=e.$$p||v;return e.$$p=null,F(this.$singleton_class(),"define_method",[n,t],s.$to_proc())},-2),U(h,"$dup",function(){var n=this,t=v;return(t=n.$class().$allocate()).$copy_instance_variables(n),t.$initialize_dup(n),t}),U(h,"$initialize_dup",function(n){return this.$initialize_copy(n)}),U(h,"$enum_for",function e(n,t){var i,c,o,s=e.$$p||v,j=this;return e.$$p=null,(i=H(arguments)).length>0&&(c=i.shift()),null==c&&(c="each"),o=i,F(S("Enumerator"),"for",[j,c].concat(y(o)),s.$to_proc())},-1),U(h,"$equal?",function(n){return this===n}),U(h,"$exit",function(n){var t;for(null==Y.__at_exit__&&(Y.__at_exit__=v),null==n&&(n=!0),Y.__at_exit__=ee(t=Y.__at_exit__)?t:[];!ee(Y.__at_exit__["$empty?"]());)Y.__at_exit__.$pop().$call();return n=n.$$is_boolean?n?0:1:re(n,S("Integer"),"to_int"),l.exit(n),v},-1),U(h,"$extend",function(n){var s,i=this;0==(s=H(arguments)).length&&i.$raise(S("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),Q(i);for(var c=i.$singleton_class(),o=s.length-1;o>=0;o--){var j=s[o];j.$$is_module||J.$raise(S("TypeError"),"wrong argument type "+j.$class()+" (expected Module)"),j.$append_features(c),j.$extend_object(i),j.$extended(i)}return i},-1),U(h,"$freeze",function(){var n=this;return ee(n["$frozen?"]())?n:"object"==typeof n?(x(n),N(n)):n}),U(h,"$frozen?",function(){switch(typeof this){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return this.$$frozen||!1;default:return!1}}),U(h,"$gets",function(n){var t;return null==Y.stdin&&(Y.stdin=v),t=H(arguments),F(Y.stdin,"gets",y(t))},-1),U(h,"$hash",function(){return this.$__id__()}),U(h,"$initialize_copy",W(v));var r=[];U(h,"$inspect",function(){var n=this,t=v,s=v,i=v;return function(){try{try{return t="",s=n.$__id__(),ee(r["$include?"](s))?t=" ...":(r["$<<"](s),i=!0,F(n.$instance_variables(),"each",[],function o(j){var O,te;return null==j&&(j=v),O=(null==o.$$s?this:o.$$s).$instance_variable_get(j),te=a("Opal").$inspect(O),t=T(t," "+j+"="+te)},{$$s:n})),"#<"+n.$class()+":0x"+s.$to_s(16)+t+">"}catch(o){if(!l.rescue(o,[a("StandardError")]))throw o;try{return"#<"+n.$class()+":0x"+s.$to_s(16)+">"}finally{l.pop_exception()}}}finally{ee(i)&&r.$pop()}}()}),U(h,"$instance_of?",function(n){return!n.$$is_class&&!n.$$is_module&&J.$raise(S("TypeError"),"class or module required"),this.$$class===n}),U(h,"$instance_variable_defined?",function(n){return n=K["$instance_variable_name!"](n),l.hasOwnProperty.call(this,n.substr(1))}),U(h,"$instance_variable_get",function(n){return n=K["$instance_variable_name!"](n),this[l.ivar(n.substr(1))]??v}),U(h,"$instance_variable_set",function(n,t){return Q(this),n=K["$instance_variable_name!"](n),this[l.ivar(n.substr(1))]=t}),U(h,"$remove_instance_variable",function(n){var t=this;n=K["$instance_variable_name!"](n);var i,s=l.ivar(n.substr(1));return t.hasOwnProperty(s)?(i=t[s],delete t[s],i):J.$raise(S("NameError"),"instance variable "+n+" not defined")}),U(h,"$instance_variables",function(){var s,t=[];for(var i in this)this.hasOwnProperty(i)&&"$"!==i.charAt(0)&&(s="$"===i.substr(-1)?i.slice(0,i.length-1):i,t.push("@"+s));return t}),U(h,"$Integer",function(n,t){var s,i,c;return n.$$is_string?"0"===n?0:(void 0===t?t=0:(1===(t=re(t,S("Integer"),"to_int"))||t<0||t>36)&&J.$raise(S("ArgumentError"),"invalid radix "+t),i=(i=(i=n.toLowerCase()).replace(/(\d)_(?=\d)/g,"$1")).replace(/^(\s*[+-]?)(0[bodx]?)/,function(o,j,C){switch(C){case"0b":if(0===t||2===t)return t=2,j;case"0":case"0o":if(0===t||8===t)return t=8,j;case"0d":if(0===t||10===t)return t=10,j;case"0x":if(0===t||16===t)return t=16,j}J.$raise(S("ArgumentError"),'invalid value for Integer(): "'+n+'"')}),c="0-"+((t=0===t?10:t)<=10?t-1:"9a-"+String.fromCharCode(t-11+97)),new RegExp("^\\s*[+-]?["+c+"]+\\s*$").test(i)||J.$raise(S("ArgumentError"),'invalid value for Integer(): "'+n+'"'),s=parseInt(i,t),isNaN(s)&&J.$raise(S("ArgumentError"),'invalid value for Integer(): "'+n+'"'),s):(void 0!==t&&J.$raise(S("ArgumentError"),"base specified for non string value"),n===v&&J.$raise(S("TypeError"),"can't convert nil into Integer"),n.$$is_number?((n===1/0||n===-1/0||isNaN(n))&&J.$raise(S("FloatDomainError"),n),Math.floor(n)):n["$respond_to?"]("to_int")&&(s=n.$to_int())!==v?s:K["$coerce_to!"](n,S("Integer"),"to_i"))},-2),U(h,"$Float",function(n){var t;return n===v&&J.$raise(S("TypeError"),"can't convert nil into Float"),n.$$is_string?(t=(t=n.toString()).replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(t)?J.$Integer(t):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(t)||J.$raise(S("ArgumentError"),'invalid value for Float(): "'+n+'"'),parseFloat(t))):K["$coerce_to!"](n,S("Float"),"to_f")}),U(h,"$Hash",function(n){return ee(n["$nil?"]())||L(n,[])?k([],{}):I(S("Hash"),n)?n:K["$coerce_to!"](n,S("Hash"),"to_hash")}),U(h,"$is_a?",function(n){return!n.$$is_class&&!n.$$is_module&&J.$raise(S("TypeError"),"class or module required"),l.is_a(this,n)}),U(h,"$itself",b),U(h,"$lambda",function e(){var n=e.$$p||v;return e.$$p=null,l.lambda(n)}),U(h,"$load",function(n){return n=K["$coerce_to!"](n,S("String"),"to_str"),l.load(n)}),U(h,"$loop",function e(){var n=e.$$p||v,s=v;if(e.$$p=null,n===v)return F(this,"enum_for",["loop"],function(){return S(S("Float"),"INFINITY")});for(;ee(!0);)try{l.yieldX(n,[])}catch(i){if(!l.rescue(i,[S("StopIteration")]))throw i;s=i;try{return s.$result()}finally{l.pop_exception()}}return this}),U(h,"$nil?",W(!1)),U(h,"$printf",function(n){var t,s;return t=H(arguments),ee((s=t)["$any?"]())&&this.$print(F(this,"format",y(s))),v},-1),U(h,"$proc",function e(){var n=e.$$p||v;return e.$$p=null,ee(n)||J.$raise(S("ArgumentError"),"tried to create Proc object without a block"),n.$$is_lambda=!1,n}),U(h,"$puts",function(n){var t;return null==Y.stdout&&(Y.stdout=v),t=H(arguments),F(Y.stdout,"puts",y(t))},-1),U(h,"$p",function(n){var t,s;return t=H(arguments),F(s=t,"each",[],function(c){return null==Y.stdout&&(Y.stdout=v),null==c&&(c=v),Y.stdout.$puts(c.$inspect())}),ee(g(s.$length(),1))?s["$[]"](0):s},-1),U(h,"$print",function(n){var t;return null==Y.stdout&&(Y.stdout=v),t=H(arguments),F(Y.stdout,"print",y(t))},-1),U(h,"$readline",function(n){var t;return null==Y.stdin&&(Y.stdin=v),t=H(arguments),F(Y.stdin,"readline",y(t))},-1),U(h,"$warn",function(n,t){var s,i,c,o,j,C,te=v;return null==Y.VERBOSE&&(Y.VERBOSE=v),null==Y.stderr&&(Y.stderr=v),s=H(arguments),i=q(s),c=s,null==(o=(i=A(i)).$$smap.uplevel)&&(o=v),ee(o)&&(o=K["$coerce_to!"](o,S("Integer"),"to_str"),ee(R(o,0))&&J.$raise(S("ArgumentError"),"negative level ("+o+")"),j=(C=this.$caller(T(o,1),1).$first())===v||null==C?v:C.$split(":in `"),te=j===v||null==j?v:j.$first(),ee(te)&&(te+=": "),c=F(c,"map",[],function(ae){return null==ae&&(ae=v),te+"warning: "+ae})),ee(Y.VERBOSE["$nil?"]())||ee(c["$empty?"]())?v:F(Y.stderr,"puts",y(c))},-1),U(h,"$raise",function(n,t,s){throw null==Y["!"]&&(Y["!"]=v),null==Y["@"]&&(Y["@"]=v),null==t&&(t=v),null==s&&(s=v),null==n&&Y["!"]!==v?Y["!"]:(null==n?n=S("RuntimeError").$new(""):$(n,"$to_str")?n=S("RuntimeError").$new(n.$to_str()):n.$$is_class&&$(n,"$exception")?n=n.$exception(t):n.$$is_exception||(n=S("TypeError").$new("exception class/object expected")),s!==v&&n.$set_backtrace(s),Y["!"]!==v&&l.exceptions.push(Y["!"]),Y["!"]=n,Y["@"]=n.$backtrace(),n)},-1),U(h,"$rand",function(n){return void 0===n?S(S("Random"),"DEFAULT").$rand():(n.$$is_number&&(n<0&&(n=Math.abs(n)),n%1!=0&&(n=n.$to_i()),0===n&&(n=void 0)),S(S("Random"),"DEFAULT").$rand(n))},-1),U(h,"$respond_to?",function(n,t){var s=this;null==t&&(t=!1);var i=s[B(n)];return"function"==typeof i&&!i.$$stub||!0!==s["$respond_to_missing?"].$$pristine&&s["$respond_to_missing?"](n,t)},-2),U(h,"$respond_to_missing?",function(n,t){return null==t&&(t=!1),!1},-2),K.$pristine(h,"respond_to?","respond_to_missing?"),U(h,"$require",function(n){return"string"!=typeof n&&l.String&&l.Array&&(n=K["$coerce_to!"](n,S("String"),"to_str")),l.require(n)}),U(h,"$require_relative",function(n){return K["$try_convert!"](n,S("String"),"to_str"),n=S("File").$expand_path(S("File").$join(l.current_file,"..",n)),l.require(n)}),U(h,"$require_tree",function(n,t){var s;null==(s=(t=A(t)).$$smap.autoload)&&(s=!1);var i=[];for(var c in n=S("File").$expand_path(n),"."===(n=l.normalize(n))&&(n=""),l.modules)c["$start_with?"](n)&&i.push(s?[c,!0]:[c,l.require(c)]);return i},-2),U(h,"$singleton_class",function(){return l.get_singleton_class(this)}),U(h,"$sleep",function(n){null==n&&(n=v),n===v&&J.$raise(S("TypeError"),"can't convert NilClass into time interval"),n.$$is_number||J.$raise(S("TypeError"),"can't convert "+n.$class()+" into time interval"),n<0&&J.$raise(S("ArgumentError"),"time interval must be positive");for(var t=l.global.performance?function(){return performance.now()}:function(){return new Date},s=t();t()-s<=1e3*n;);return Math.round(n)},-1),U(h,"$srand",function(n){return null==n&&(n=a("Random").$new_seed()),S("Random").$srand(n)},-1),U(h,"$String",function(n){var t;return ee(t=K["$coerce_to?"](n,S("String"),"to_str"))?t:K["$coerce_to!"](n,S("String"),"to_s")}),U(h,"$tap",function e(){var n=e.$$p||v;return e.$$p=null,l.yield1(n,this),this}),U(h,"$to_proc",b),U(h,"$to_s",function(){return"#<"+this.$class()+":0x"+this.$__id__().$to_s(16)+">"}),U(h,"$catch",function e(n){var t=e.$$p||v,s=v,i=v;e.$$p=null,null==n&&(n=v);try{return n=ee(s=n)?s:_.$new(),l.yield1(t,n)}catch(c){if(!l.rescue(c,[S("UncaughtThrowError")]))throw c;i=c;try{return L(i.$tag(),n)?i.$value():J.$raise()}finally{l.pop_exception()}}},-1),U(h,"$throw",function(n,t){return null==t&&(t=v),J.$raise(S("UncaughtThrowError").$new(n,t))},-2),U(h,"$open",function e(n){var i,t=e.$$p||v;return e.$$p=null,i=H(arguments),F(S("File"),"open",y(i),t.$to_proc())},-1),U(h,"$yield_self",function e(){var n=e.$$p||v;return e.$$p=null,n===v?F(this,"enum_for",["yield_self"],W(1)):l.yield1(n,this)}),p(h,"fail","raise"),p(h,"kind_of?","is_a?"),p(h,"object_id","__id__"),p(h,"public_send","__send__"),p(h,"send","__send__"),p(h,"then","yield_self"),p(h,"to_enum","enum_for")}(),h=f("::",null,"Object"),delete _.$$prototype.$require,h.$include(J)},Opal.modules["corelib/main"]=function(l){var E,ee=l.return_val,re=l.def,$=l.Object,K=l.slice,Q=l.Kernel;return re(E=l.get_singleton_class(l.top),"$to_s",ee("main")),re(E,"$include",function(J){return $.$include(J)}),re(E,"$autoload",function(J){var Y;return Y=K(arguments),l.Object.$autoload.apply(l.Object,Y)},-1),re(E,"$using",function(J){return Q.$raise("main.using is permitted only at toplevel")})},Opal.modules["corelib/error/errno"]=function(l){var J,Y,H,ee=l.module,re=l.truthy,$=l.rb_plus,K=l.send2,Q=l.find_super,N=l.def,x=l.klass,B=[],E=l.nil,W=l.$$$;return function(U,J){var F,A,Y=ee("::","Errno"),y=([Y].concat(J),E);for(F=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],y=E,A=0;A<F.length;A++)!function(){var I,k=F[A][1],T=F[A][2];(y=l.klass(Y,l.SystemCallError,F[A][0])).errno=T,I=l.get_singleton_class(y),N(I,"$new",function g(q){var p=E;return g.$$p=null,null==q&&(q=E),p=k,re(q)&&(p=$(p," - "+q)),K(this,Q(this,"new",g,!1,!0),"new",[p],null)},-1)}()}(0,B),J=W("StandardError"),Y=B,[H=x("::",J,"SystemCallError")].concat(Y),N(H,"$errno",function(){return this.$class().$errno()}),l.get_singleton_class(H).$attr_reader("errno")},Opal.modules["corelib/error"]=function(l){var g,q,ee=l.klass,re=l.slice,$=l.gvars,K=l.defs,Q=l.send,N=l.to_a,x=l.def,B=l.truthy,E=l.hash2,W=l.Kernel,U=l.not,J=l.rb_plus,Y=l.eqeq,H=l.Object,F=l.ensure_kwargs,y=l.send2,A=l.find_super,L=l.module,k=[],T=l.nil,I=l.$$$;return function(b,g,q){var z,R=ee("::",g,"Exception"),_=[R].concat(q),p=l.$r(_);function v(S){for(var M,m=[],h=0;h<S.length;h++){var d=S[h];!d||!d.$$is_string||((M=d.match(/^    at (.*?) \((.*?)\)$/))?m.push(M[2]+":in `"+M[1]+"'"):(M=d.match(/^    at (.*?)$/))?m.push(M[1]+":in `undefined'"):(M=d.match(/^  from (.*?)$/))?m.push(M[1]):(M=d.match(/^(.*?)@(.*?)$/))&&m.push(M[2]+":in `"+M[1]+"'"))}return m}R.$$prototype.message=T,l.prop(R.$$prototype,"$$is_exception",!0),Error.stackTraceLimit=100,K(R,"$new",function(m){var h;null==$["!"]&&($["!"]=T);var a=(h=re(arguments)).length>0?h[0]:T,r=new this.$$constructor(a);return r.name=this.$$name,r.message=a,r.cause=$["!"],l.send(r,r.$initialize,h),l.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(r,z),r},-1),z=R.$new,K(R,"$exception",function(m){var M;return M=re(arguments),Q(this,"new",N(M))},-1),x(R,"$initialize",function(m){var M,h;return M=re(arguments),this.message=(h=M).length>0?h[0]:T},-1),x(R,"$backtrace",function(){var m=this;if(m.backtrace)return m.backtrace;var M=m.stack;return typeof M<"u"&&M.$$is_string?m.backtrace=v(M.split("\n")):M?m.backtrace=v(M):[]}),x(R,"$backtrace_locations",function(){var m,M=this;return M.backtrace_locations||(M.backtrace_locations=(m=M.$backtrace())===T||null==m?T:Q(m,"map",[],function(d){return null==d&&(d=T),I(I(I("Thread"),"Backtrace"),"Location").$new(d)})),M.backtrace_locations}),x(R,"$cause",function(){return this.cause||T}),x(R,"$exception",function(m){var M=this;if(null==m&&(m=T),m===T||M===m)return M;var h=M.$clone();return h.message=m,M.backtrace&&(h.backtrace=M.backtrace.$dup()),h.stack=M.stack,h.cause=M.cause,h},-1),x(R,"$message",function(){return this.$to_s()}),x(R,"$full_message",function(m){var h,d=this,a=T,r=T,e=T,n=T,t=T,s=T,i=T,c=T,o=T;return null==$.stderr&&($.stderr=T),null==m&&(m=T),B(p("Hash","skip_raise")?"constant":T)?(e=(h=[(m=E(["highlight","order"],{highlight:$.stderr["$tty?"](),order:"top"}).$merge(B(a=m)?a:E([],{})))["$[]"]("highlight"),m["$[]"]("order")])[1],B([!0,!1]["$include?"](r=h[0]))||W.$raise(I("ArgumentError"),"expected true or false as highlight: "+r),B(["top","bottom"]["$include?"](e))||W.$raise(I("ArgumentError"),"expected :top or :bottom as order: "+e),B(r)?(n="\x1b[1;4m",t="\x1b[1m",s="\x1b[m"):n=t=s="",i=d.$backtrace().$dup(),(U(i)||B(i["$empty?"]()))&&(i=d.$caller()),c=i.$shift(),o=J(o=c+": ",""+t+d.$to_s()+" ("+n+d.$class()+s+t+")"+s+"\n"),o=J(o,Q(i,"map",[],function(C){return null==C&&(C=T),"\tfrom "+C+"\n"}).$join()),B(d.$cause())&&(o=J(o,d.$cause().$full_message(E(["highlight"],{highlight:r})))),Y(e,"bottom")&&(o=o.$split("\n").$reverse().$join("\n"),o=J(t+"Traceback"+s+" (most recent call last):\n",o)),o):d.message+"\n"+d.stack},-1),x(R,"$inspect",function(){var m=this,M=T;return M=m.$to_s(),B(M["$empty?"]())?m.$class().$to_s():"#<"+m.$class().$to_s()+": "+m.$to_s()+">"}),x(R,"$set_backtrace",function(m){var d,a,M=this,h=!0;if(m===T)M.backtrace=T,M.stack="";else if(m.$$is_string)M.backtrace=[m],M.stack="  from "+m;else{if(m.$$is_array){for(d=0,a=m.length;d<a;d++)if(!m[d].$$is_string){h=!1;break}}else h=!1;!1===h&&W.$raise(I("TypeError"),"backtrace must be Array of String"),M.backtrace=m,M.stack=Q(m,"map",[],function(e){return null==e&&(e=T),J("  from ",e)}).join("\n")}return m}),x(R,"$to_s",function(){var M,h,m=this;return B(M=B(h=m.message)?m.message.$to_s():h)?M:m.$class().$to_s()})}(0,Error,k),ee("::",I("Exception"),"ScriptError"),ee("::",I("ScriptError"),"SyntaxError"),ee("::",I("ScriptError"),"LoadError"),ee("::",I("ScriptError"),"NotImplementedError"),ee("::",I("Exception"),"SystemExit"),ee("::",I("Exception"),"NoMemoryError"),ee("::",I("Exception"),"SignalException"),ee("::",I("SignalException"),"Interrupt"),ee("::",I("Exception"),"SecurityError"),ee("::",I("Exception"),"SystemStackError"),ee("::",I("Exception"),"StandardError"),ee("::",I("StandardError"),"EncodingError"),ee("::",I("StandardError"),"ZeroDivisionError"),ee("::",I("StandardError"),"NameError"),ee("::",I("NameError"),"NoMethodError"),ee("::",I("StandardError"),"RuntimeError"),ee("::",I("RuntimeError"),"FrozenError"),ee("::",I("StandardError"),"LocalJumpError"),ee("::",I("StandardError"),"TypeError"),ee("::",I("StandardError"),"ArgumentError"),ee("::",I("ArgumentError"),"UncaughtThrowError"),ee("::",I("StandardError"),"IndexError"),ee("::",I("IndexError"),"StopIteration"),ee("::",I("StopIteration"),"ClosedQueueError"),ee("::",I("IndexError"),"KeyError"),ee("::",I("StandardError"),"RangeError"),ee("::",I("RangeError"),"FloatDomainError"),ee("::",I("StandardError"),"IOError"),ee("::",I("IOError"),"EOFError"),ee("::",I("StandardError"),"SystemCallError"),ee("::",I("StandardError"),"RegexpError"),ee("::",I("StandardError"),"ThreadError"),ee("::",I("StandardError"),"FiberError"),H.$autoload("Errno","corelib/error/errno"),g=I("RuntimeError"),(q=ee("::",g,"FrozenError")).$attr_reader("receiver"),x(q,"$initialize",function R(_,p){var f,v=this;return R.$$p=null,null==(f=(p=F(p)).$$smap.receiver)&&(f=T),y(v,A(v,"initialize",R,!1,!0),"initialize",[_],null),v.receiver=f},-2),function(b,g){var q=ee("::",g,"UncaughtThrowError");q.$$prototype.tag=T,q.$attr_reader("tag","value"),x(q,"$initialize",function _(p,f){var v=this;return _.$$p=null,null==f&&(f=T),v.tag=p,v.value=f,y(v,A(v,"initialize",_,!1,!0),"initialize",["uncaught throw "+v.tag.$inspect()],null)},-2)}(0,I("ArgumentError")),function(b,g){var q=ee("::",null,"NameError");q.$attr_reader("name"),x(q,"$initialize",function R(_,p){var z=this;return R.$$p=null,null==p&&(p=T),y(z,A(z,"initialize",R,!1,!0),"initialize",[_],null),z.name=p},-2)}(),function(b,g){var q=ee("::",null,"NoMethodError");q.$attr_reader("args"),x(q,"$initialize",function R(_,p,f){var v=this;return R.$$p=null,null==p&&(p=T),null==f&&(f=[]),y(v,A(v,"initialize",R,!1,!0),"initialize",[_,p],null),v.args=f},-2)}(),ee("::",null,"StopIteration").$attr_reader("result"),function(b,g){var q=ee("::",null,"KeyError"),R=q.$$prototype;R.receiver=R.key=T,x(q,"$initialize",function _(p,f){var z,v,m=this;return _.$$p=null,null==(z=(f=F(f)).$$smap.receiver)&&(z=T),null==(v=f.$$smap.key)&&(v=T),y(m,A(m,"initialize",_,!1,!0),"initialize",[p],null),m.receiver=z,m.key=v},-2),x(q,"$receiver",function(){var f;return B(f=this.receiver)?f:W.$raise(I("ArgumentError"),"no receiver is available")}),x(q,"$key",function(){var f;return B(f=this.key)?f:W.$raise(I("ArgumentError"),"no key is available")})}(),function(b,g){var R=[L("::","JS")].concat(g);return ee(R[0],null,"Error"),T}(0,k)},Opal.modules["corelib/constants"]=function(l){var ee=l.const_set,$=l.$$$;return ee("::","RUBY_PLATFORM","opal"),ee("::","RUBY_ENGINE","opal"),ee("::","RUBY_VERSION","3.2.0"),ee("::","RUBY_ENGINE_VERSION","1.7.4"),ee("::","RUBY_RELEASE_DATE","2023-09-14"),ee("::","RUBY_PATCHLEVEL",0),ee("::","RUBY_REVISION","0"),ee("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),ee("::","RUBY_DESCRIPTION","opal "+$("RUBY_ENGINE_VERSION")+" ("+$("RUBY_RELEASE_DATE")+" revision "+$("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(l){var ee=l.Object;return ee.$require("corelib/runtime"),ee.$require("corelib/helpers"),ee.$require("corelib/module"),ee.$require("corelib/class"),ee.$require("corelib/basic_object"),ee.$require("corelib/kernel"),ee.$require("corelib/main"),ee.$require("corelib/error"),ee.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(l){var k,A,re=l.Kernel,$=l.def,K=l.return_val,Q=l.ensure_kwargs,N=l.NilClass,x=l.slice,B=l.truthy,E=l.rb_gt,W=l.alias,J=l.nil,Y=l.$$$;return[A=(0,l.klass)("::",null,"NilClass")].concat([]),A.$$prototype.$$meta=A,k=l.get_singleton_class(A),$(k,"$allocate",function(){return re.$raise(Y("TypeError"),"allocator undefined for "+this.$name())}),l.udef(k,"$new"),$(A,"$!",K(!0)),$(A,"$&",K(!1)),$(A,"$|",function(T){return!1!==T&&T!==J}),$(A,"$^",function(T){return!1!==T&&T!==J}),$(A,"$==",function(T){return T===J}),$(A,"$dup",K(J)),$(A,"$clone",function(T){return T=Q(T),J},-1),$(A,"$inspect",K("nil")),$(A,"$nil?",K(!0)),$(A,"$singleton_class",function(){return N}),$(A,"$to_a",function(){return[]}),$(A,"$to_h",function(){return l.hash()}),$(A,"$to_i",K(0)),$(A,"$to_s",K("")),$(A,"$to_c",function(){return Y("Complex").$new(0,0)}),$(A,"$rationalize",function(T){var I;return I=x(arguments),B(E(I.$length(),1))&&re.$raise(Y("ArgumentError")),re.$Rational(0,1)},-1),$(A,"$to_r",function(){return re.$Rational(0,1)}),$(A,"$instance_variables",function(){return[]}),W(A,"to_f","to_i")},Opal.modules["corelib/boolean"]=function(l){"use strict";var ee=l.klass,re=l.Kernel,$=l.def,K=l.return_self,Q=l.ensure_kwargs,N=l.slice,x=l.truthy,B=l.send2,E=l.find_super,W=l.to_a,U=l.alias,Y=l.nil,H=l.$$$;return function(F,y,A){var b,L=ee("::",y,"Boolean");[L].concat([]),l.prop(L.$$prototype,"$$is_boolean",!0);for(var T=["$$class","$$meta"],I=0;I<T.length;I++)Object.defineProperty(L.$$prototype,T[I],{configurable:!0,enumerable:!1,get:function(){return 1==this?l.TrueClass:0==this?l.FalseClass:l.Boolean}});Object.defineProperty(L.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return 1==this?2:0==this?0:Y}}),b=l.get_singleton_class(L),$(b,"$allocate",function(){return re.$raise(H("TypeError"),"allocator undefined for "+this.$name())}),l.udef(b,"$new"),$(L,"$__id__",function(){return this.valueOf()?2:0}),$(L,"$!",function(){return 1!=this}),$(L,"$&",function(g){return 1==this&&!1!==g&&g!==Y}),$(L,"$|",function(g){return 1==this||!1!==g&&g!==Y}),$(L,"$^",function(g){return 1==this?!1===g||g===Y:!1!==g&&g!==Y}),$(L,"$==",function(g){return 1==this===g.valueOf()}),$(L,"$singleton_class",function(){return this.$$meta}),$(L,"$to_s",function(){return 1==this?"true":"false"}),$(L,"$dup",K),$(L,"$clone",function(g){return g=Q(g),this},-1),$(L,"$method_missing",function b(g,q){var p,R=b.$$p||Y,f=this;b.$$p=null,p=N(arguments,1);var z=f.$$class.$$prototype[l.jsid(g)];return x(typeof z<"u"&&!z.$$stub)||B(f,E(f,"method_missing",b,!1,!0),"method_missing",[g].concat(W(p)),R),l.send(f,z,p,R)},-2),$(L,"$respond_to_missing?",function(g,q){null==q&&(q=!1);var _=this.$$class.$$prototype[l.jsid(g)];return typeof _<"u"&&!_.$$stub},-2),U(L,"eql?","=="),U(L,"equal?","=="),U(L,"inspect","to_s"),U(L,"object_id","__id__")}(0,Boolean),ee("::",H("Boolean"),"TrueClass"),ee("::",H("Boolean"),"FalseClass"),Y},Opal.modules["corelib/comparable"]=function(l){var ee=l.truthy,re=l.module,$=l.rb_gt,K=l.rb_lt,Q=l.eqeqeq,N=l.Kernel,x=l.def,B=l.nil,E=l.$$$;return function(W){var U=re("::","Comparable"),J=B;function Y(y){return l.is_a(y,l.Integer)?y:$(y,0)?1:K(y,0)?-1:0}function F(y,A){var L=y["$<=>"](A);return ee(L)||function H(y,A){var L;L=Q(B,J=A)||Q(!0,J)||Q(!1,J)||Q(E("Integer"),J)||Q(E("Float"),J)?A.$inspect():A.$$class,N.$raise(E("ArgumentError"),"comparison of "+y.$class()+" with "+L+" failed")}(y,A),Y(L)}return x(U,"$==",function(A){var L=this,k=B;return!!ee(L["$equal?"](A))||L["$<=>"]!=l.Kernel["$<=>"]&&(L.$$comparable?(L.$$comparable=!1,!1):!!ee(k=L["$<=>"](A))&&0==Y(k))}),x(U,"$>",function(A){return F(this,A)>0}),x(U,"$>=",function(A){return F(this,A)>=0}),x(U,"$<",function(A){return F(this,A)<0}),x(U,"$<=",function(A){return F(this,A)<=0}),x(U,"$between?",function(A,L){return!(K(this,A)||$(this,L))}),x(U,"$clamp",function(A,L){var T,I,k=this;if(null==L&&(L=B),L===B&&(l.is_a(A,l.Range)||N.$raise(E("TypeError"),"wrong argument type "+A.$class()+" (expected Range)"),I=A.excl,L=A.end,A=A.begin,L!==B&&I&&N.$raise(E("ArgumentError"),"cannot clamp with an exclusive range")),A!==B&&L!==B&&F(A,L)>0&&N.$raise(E("ArgumentError"),"min argument must be smaller than max argument"),A!==B){if(0==(T=F(k,A)))return k;if(T<0)return A}return L!==B&&(T=F(k,L))>0?L:k},-2)}()},Opal.modules["corelib/regexp"]=function(l){var f,z,M,d,a,v,S,m,ee=l.coerce_to,re=l.prop,$=l.freeze,K=l.klass,Q=l.const_set,N=l.send2,x=l.find_super,B=l.def,E=l.truthy,W=l.gvars,U=l.slice,J=l.Kernel,Y=l.Opal,H=l.alias,F=l.send,y=l.hash2,A=l.rb_plus,L=l.ensure_kwargs,k=l.rb_ge,T=l.to_a,I=l.eqeqeq,b=l.rb_minus,g=l.return_ivar,q=[],R=l.nil,_=l.$$$;return K("::",_("StandardError"),"RegexpError"),f=RegExp,z=q,S=[v=K("::",f,"Regexp")].concat(z),m=l.$r(S),Q(v,"IGNORECASE",1),Q(v,"EXTENDED",2),Q(v,"MULTILINE",4),l.prop(v.$$prototype,"$$is_regexp",!0),d=[M=l.get_singleton_class(v)].concat(S),a=l.$r(d),B(M,"$allocate",function r(){var e=r.$$p||R,t=R;return r.$$p=null,(t=N(this,x(this,"allocate",r,!1,!0),"allocate",[],e)).uninitialized=!0,t}),B(M,"$escape",function(e){return e=ee(e,_("String"),"to_str"),l.escape_regexp(e)}),B(M,"$last_match",function(e){return null==W["~"]&&(W["~"]=R),null==e&&(e=R),E(e["$nil?"]())?W["~"]:E(W["~"])?W["~"]["$[]"](e):R},-1),B(M,"$union",function(e){var t,i,c,o,j,C,s=this;if(0==(t=U(arguments)).length)return/(?!)/;if(1==t.length&&t[0].$$is_regexp)return t[0];i=t[0].$$is_array,t.length>1&&i&&J.$raise(_("TypeError"),"no implicit conversion of Array into String"),i&&(t=t[0]),j=void 0,c=[];for(var O=0;O<t.length;O++)(o=t[O]).$$is_string?c.push(s.$escape(o)):o.$$is_regexp?(C=o.$options(),null!=j&&j!=C&&J.$raise(_("TypeError"),"All expressions must use the same options"),j=C,c.push("("+o.source+")")):c.push(s.$escape(o.$to_str()));return s.$new(c.$join("|"),j)},-1),B(M,"$new",function(e,n){if(e.$$is_regexp)return new RegExp(e);if("\\"===(e=Y["$coerce_to!"](e,_("String"),"to_str")).charAt(e.length-1)&&"\\"!==e.charAt(e.length-2)&&J.$raise(_("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),void 0===n||n["$!"]())return new RegExp(e);if(n.$$is_number){var t="";a("IGNORECASE")&n&&(t+="i"),a("MULTILINE")&n&&(t+="m"),n=t}else n="i";return new RegExp(e,n)},-2),H(M,"compile","new"),H(M,"quote","escape"),B(v,"$==",function(h){return h instanceof RegExp&&this.toString()===h.toString()}),B(v,"$===",function(h){return this.$match(Y["$coerce_to?"](h,_("String"),"to_str"))!==R}),B(v,"$=~",function(h){var a;return null==W["~"]&&(W["~"]=R),E(a=this.$match(h))?W["~"].$begin(0):a}),B(v,"$freeze",function(){var h=this;return E(h["$frozen?"]())?h:(h.hasOwnProperty("$$g")||re(h,"$$g",null),h.hasOwnProperty("$$gm")||re(h,"$$gm",null),$(h))}),B(v,"$inspect",function(){var a=this.toString(),r=/^\/(.*)\/([^\/]*)$/.exec(a);if(r){for(var n=r[2],t=r[1].split(""),s=t.length,i=!1,c="",o=0;o<s;o++){var j=t[o];!i&&"/"==j&&(c=c.concat("\\")),c=c.concat(j),i="\\"==j&&!i}return"/"+c+"/"+n}return a}),B(v,"$match",function M(h,d){var a=M.$$p||R,r=this;if(null==W["~"]&&(W["~"]=R),M.$$p=null,r.uninitialized&&J.$raise(_("TypeError"),"uninitialized Regexp"),void 0===d){if(h===R)return W["~"]=R;var e=r.exec(ee(h,_("String"),"to_str"));return e?(W["~"]=_("MatchData").$new(r,e),a===R?W["~"]:l.yield1(a,W["~"])):W["~"]=R}if(d=ee(d,_("Integer"),"to_int"),h===R||(h=ee(h,_("String"),"to_str"),d<0&&(d+=h.length)<0))return W["~"]=R;for(var n,t=l.global_regexp(r);;){if(null===(n=t.exec(h)))return W["~"]=R;if(n.index>=d)return W["~"]=_("MatchData").$new(t,n),a===R?W["~"]:l.yield1(a,W["~"]);t.lastIndex=n.index+1}},-2),B(v,"$match?",function(h,d){var r,a=this;return a.uninitialized&&J.$raise(_("TypeError"),"uninitialized Regexp"),void 0===d?h!==R&&a.test(ee(h,_("String"),"to_str")):(d=ee(d,_("Integer"),"to_int"),!(h===R||(h=ee(h,_("String"),"to_str"),d<0&&(d+=h.length)<0)||null===(r=l.global_regexp(a).exec(h))||r.index<d))},-2),B(v,"$names",function(){return F(this.$source().$scan(/\(?<(\w+)>/,y(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()}),B(v,"$named_captures",function(){return F(F(F(this.$source().$scan(/\(?<(\w+)>/,y(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(a){return null==a&&(a=R),F(a,"map",[],function(e){return null==e&&(e=R),A(e.$last(),1)})})}),B(v,"$~",function(){return null==W._&&(W._=R),this["$=~"](W._)}),B(v,"$source",function(){return this.source}),B(v,"$options",function(){var h=this;h.uninitialized&&J.$raise(_("TypeError"),"uninitialized Regexp");var d=0;return h.multiline&&(d|=m("MULTILINE")),h.ignoreCase&&(d|=m("IGNORECASE")),d}),B(v,"$casefold?",function(){return this.ignoreCase}),H(v,"eql?","=="),H(v,"to_s","source"),function(p,f,z){var v=K(p,null,"MatchData"),S=[v].concat(z),m=l.$r(S);return v.$$prototype.matches=R,v.$attr_reader("post_match","pre_match","regexp","string"),B(v,"$initialize",function(d,a,r){var e,n=this;null==(e=(r=L(r)).$$smap.no_matchdata)&&(e=!1),E(e)||(W["~"]=n),n.regexp=d,n.begin=a.index,n.string=a.input,n.pre_match=a.input.slice(0,a.index),n.post_match=a.input.slice(a.index+a[0].length),n.matches=[];for(var t=0,s=a.length;t<s;t++){var i=a[t];n.matches.push(null==i?R:i)}},-3),B(v,"$match",function(d){var r;return E(r=this["$[]"](d))?r:E(d["$is_a?"](m("Integer")))&&E(k(d,this.$length()))?J.$raise(_("IndexError"),"index "+d+" out of matches"):R}),B(v,"$match_length",function(d){var a;return(a=this.$match(d))===R||null==a?R:a.$length()}),B(v,"$[]",function(d){var r,e=this;return(r=U(arguments))[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&J.$raise(_("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):F(e.matches,"[]",T(r))},-1),B(v,"$offset",function(d){var a=this;return 0!==d&&J.$raise(_("ArgumentError"),"MatchData#offset only supports 0th element"),[a.begin,a.begin+a.matches[d].length]}),B(v,"$==",function(d){var a=this,r=R,e=R,n=R,t=R;return!!I(_("MatchData"),d)&&(E(r=E(e=E(n=E(t=a.string==d.string)?a.regexp.toString()==d.regexp.toString():t)?a.pre_match==d.pre_match:n)?a.post_match==d.post_match:e)?a.begin==d.begin:r)}),B(v,"$begin",function(d){return 0!==d&&J.$raise(_("ArgumentError"),"MatchData#begin only supports 0th element"),this.begin}),B(v,"$end",function(d){return 0!==d&&J.$raise(_("ArgumentError"),"MatchData#end only supports 0th element"),this.begin+this.matches[d].length}),B(v,"$captures",function(){return this.matches.slice(1)}),B(v,"$named_captures",function(){var a=R;return a=this.$captures(),F(this.$regexp().$named_captures(),"transform_values",[],function(e){return null==e&&(e=R),a["$[]"](b(e.$last(),1))})}),B(v,"$names",function(){return this.$regexp().$names()}),B(v,"$inspect",function(){var d=this,a="#<MatchData "+d.matches[0].$inspect();if(d.$regexp().$names()["$empty?"]())for(var r=1,e=d.matches.length;r<e;r++)a+=" "+r+":"+d.matches[r].$inspect();else F(d.$named_captures(),"each",[],function(t,s){return null==t&&(t=R),null==s&&(s=R),a+=" "+t+":"+s.$inspect()});return a+">"}),B(v,"$length",function(){return this.matches.length}),B(v,"$to_a",g("matches")),B(v,"$to_s",function(){return this.matches[0]}),B(v,"$values_at",function(d){var r;r=U(arguments);var n,t,s,i=[];for(n=0;n<r.length;n++)r[n].$$is_range&&((t=r[n].$to_a()).unshift(n,1),Array.prototype.splice.apply(r,t)),(s=Y["$coerce_to!"](r[n],_("Integer"),"to_int"))<0&&(s+=this.matches.length)<0?i.push(R):i.push(this.matches[s]);return i},-1),H(v,"eql?","=="),H(v,"size","length")}(q[0],0,q)},Opal.modules["corelib/string"]=function(l){var ee=l.coerce_to,re=l.respond_to,$=l.global_multiline_regexp,K=l.prop,Q=l.klass,N=l.def,x=l.Opal,B=l.defs,E=l.slice,W=l.send,U=l.to_a,J=l.extract_kwargs,Y=l.ensure_kwargs,H=l.eqeqeq,F=l.Kernel,y=l.truthy,A=l.gvars,L=l.rb_divide,k=l.rb_plus,T=l.eqeq,I=l.hash2,b=l.alias,g=l.const_set,q=l.top,R=[],_=l.$r(R),p=l.nil,f=l.$$$;return q.$require("corelib/comparable"),q.$require("corelib/regexp"),function(z,v,S){var m=Q("::",String,"String"),M=[m].concat(S),h=l.$r(M);function d(a){function r(O){var ne,le,oe,ue,ie,X,te="",ae=O.length;for(ne=0;ne<ae;ne++)if("-"===(le=O.charAt(ne))&&ne>0&&ne<ae-1&&!oe){for((ue=O.charCodeAt(ne-1))>(ie=O.charCodeAt(ne+1))&&F.$raise(f("ArgumentError"),'invalid range "'+ue+"-"+ie+'" in string transliteration'),X=ue+1;X<ie+1;X++)te+=String.fromCharCode(X);oe=!0,ne++}else oe="\\"===le,te+=le;return te}function e(O,te){if(0===O.length)return te;var ae,oe,ne="",le=O.length;for(ae=0;ae<le;ae++)oe=O.charAt(ae),-1!==te.indexOf(oe)&&(ne+=oe);return ne}var n,t,s,i,c,o,j="",C="";for(n=0,t=a.length;n<t;n++)i="^"===(s=ee(a[n],f("String"),"to_str")).charAt(0)&&s.length>1,s=r(i?s.slice(1):s),i?C=e(C,s):j=e(j,s);if(j.length>0&&C.length>0){for(o="",n=0,t=j.length;n<t;n++)c=j.charAt(n),-1===C.indexOf(c)&&(o+=c);j=o,C=""}return j.length>0?"["+f("Regexp").$escape(j)+"]":C.length>0?"[^"+f("Regexp").$escape(C)+"]":null}m.$include(f("Comparable")),l.prop(m.$$prototype,"$$is_string",!0),N(m,"$__id__",function(){return this.toString()}),B(m,"$try_convert",function(r){return x["$coerce_to?"](r,f("String"),"to_str")}),B(m,"$new",function(r){var n,s=(n=E(arguments))[0]||"",i=n[n.length-1];return s=ee(s,f("String"),"to_str"),i&&i.$$is_hash&&i.$$smap.encoding&&(s=s.$force_encoding(i.$$smap.encoding)),(s=new this.$$constructor(s)).$initialize.$$pristine||W(s,"initialize",U(n)),s},-1),N(m,"$initialize",function(r,e){var n,t;return n=E(arguments),t=J(n),t=Y(t),n.length>0&&n.shift(),p},-1),N(m,"$%",function(r){var e=this;return H(f("Array"),r)?W(e,"format",[e].concat(U(r))):e.$format(e,r)}),N(m,"$*",function(r){if((r=ee(r,f("Integer"),"to_int"))<0&&F.$raise(f("ArgumentError"),"negative argument"),0===r)return"";var n="",t=this.toString();for(t.length*r>=1<<28&&F.$raise(f("RangeError"),"multiply count must not overflow maximum string size");!(1&~r)&&(n+=t),0!=(r>>>=1);)t+=t;return n}),N(m,"$+",function(r){var e=this;if(""==(r=ee(r,f("String"),"to_str"))&&e.$$class===l.String)return e;if(""==e&&r.$$class===l.String)return r;var n=e+r;return e.encoding===n.encoding&&r.encoding===n.encoding||"UTF-8"===e.encoding.name||"UTF-8"===r.encoding.name?n:l.enc(n,e.encoding)}),N(m,"$<=>",function(r){var e=this;if(y(r["$respond_to?"]("to_str")))return e>(r=r.$to_str().$to_s())?1:e<r?-1:0;var n=r["$<=>"](e);return n===p?p:n>0?-1:n<0?1:0}),N(m,"$==",function(r){return r.$$is_string?this.toString()===r.toString():!!re(r,"$to_str")&&r["$=="](this)}),N(m,"$=~",function(r){return r.$$is_string&&F.$raise(f("TypeError"),"type mismatch: String given"),r["$=~"](this)}),N(m,"$[]",function(r,e){var s,i,n=this,t=n.length;if(r.$$is_range)return s=r.excl,i=r,e=r.end===p?-1:ee(r.end,f("Integer"),"to_int"),r=r.begin===p?0:ee(r.begin,f("Integer"),"to_int"),Math.abs(r)>t?p:(r<0&&(r+=t),e<0&&(e+=t),(!s||i.end===p)&&(e+=1),(e-=r)<0&&(e=0),n.substr(r,e));if(r.$$is_string)return null!=e&&F.$raise(f("TypeError")),-1!==n.indexOf(r)?r:p;if(r.$$is_regexp){var c=n.match(r);return null===c?(A["~"]=p,p):(A["~"]=f("MatchData").$new(r,c),null==e?c[0]:(e=ee(e,f("Integer"),"to_int"))<0&&-e<c.length?c[e+=c.length]:e>=0&&e<c.length?c[e]:p)}return(r=ee(r,f("Integer"),"to_int"))<0&&(r+=t),null==e?r>=t||r<0?p:n.substr(r,1):(e=ee(e,f("Integer"),"to_int"))<0||r>t||r<0?p:n.substr(r,e)},-2),N(m,"$b",function(){return new String(this).$force_encoding("binary")}),N(m,"$capitalize",function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()}),N(m,"$casecmp",function(r){var e=this;if(!y(r["$respond_to?"]("to_str")))return p;r=ee(r,f("String"),"to_str").$to_s();var n=/^[\x00-\x7F]*$/;return n.test(e)&&n.test(r)&&(e=e.toLowerCase(),r=r.toLowerCase()),e["$<=>"](r)}),N(m,"$casecmp?",function(r){var n=this.$casecmp(r);return n===p?p:0===n}),N(m,"$center",function(r,e){var n=this;if(null==e&&(e=" "),r=ee(r,f("Integer"),"to_int"),e=ee(e,f("String"),"to_str").$to_s(),y(e["$empty?"]())&&F.$raise(f("ArgumentError"),"zero width padding"),y(r<=n.length))return n;var t=n.$ljust(L(k(r,n.length),2).$ceil(),e);return n.$rjust(L(k(r,n.length),2).$floor(),e)+t.slice(n.length)},-2),N(m,"$chomp",function(r){var n,e=this;return null==A["/"]&&(A["/"]=p),null==r&&(r=A["/"]),y(r===p||0===e.length)?e:("\n"===(r=x["$coerce_to!"](r,f("String"),"to_str").$to_s())?n=e.replace(/\r?\n?$/,""):""===r?n=e.replace(/(\r?\n)+$/,""):e.length>=r.length&&e.substr(e.length-r.length,r.length)===r&&(n=e.substr(0,e.length-r.length)),n??e)},-1),N(m,"$chop",function(){var r=this,e=r.length;return e<=1?"":"\n"===r.charAt(e-1)&&"\r"===r.charAt(e-2)?r.substr(0,e-2):r.substr(0,e-1)}),N(m,"$chr",function(){return this.charAt(0)}),N(m,"$clone",function(r){var e,n=this,t=p;return null==(e=(r=Y(r)).$$smap.freeze)&&(e=p),y(e["$nil?"]())||T(e,!0)||T(e,!1)||n.$raise(h("ArgumentError"),"unexpected value for freeze: "+e.$class()),(t=new String(n)).$copy_singleton_methods(n),t.$initialize_clone(n,I(["freeze"],{freeze:e})),T(e,!0)?t.$$frozen||(t.$$frozen=!0):y(e["$nil?"]())&&n.$$frozen&&(t.$$frozen=!0),t},-1),N(m,"$dup",function(){var e=p;return(e=new String(this)).$initialize_dup(this),e}),N(m,"$count",function(r){var n;0===(n=E(arguments)).length&&F.$raise(f("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var s=d(n);return null===s?0:this.length-this.replace(new RegExp(s,"g"),"").length},-1),N(m,"$delete",function(r){var n;0===(n=E(arguments)).length&&F.$raise(f("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var s=d(n);return null===s?this:this.replace(new RegExp(s,"g"),"")},-1),N(m,"$delete_prefix",function(r){var e=this;return r.$$is_string||(r=ee(r,f("String"),"to_str")),e.slice(0,r.length)===r?e.slice(r.length):e}),N(m,"$delete_suffix",function(r){var e=this;return r.$$is_string||(r=ee(r,f("String"),"to_str")),e.slice(e.length-r.length)===r?e.slice(0,e.length-r.length):e}),N(m,"$downcase",function(){return this.toLowerCase()}),N(m,"$each_line",function a(r,e){var t,s,i,c,j,C,O,te,ne,ae,le,oe,n=a.$$p||p,o=this;if(null==A["/"]&&(A["/"]=p),a.$$p=null,t=E(arguments),s=J(t),s=Y(s),t.length>0&&(i=t.shift()),null==i&&(i=A["/"]),null==(c=s.$$smap.chomp)&&(c=!1),n===p)return o.$enum_for("each_line",i,I(["chomp"],{chomp:c}));if(i===p)return l.yield1(n,o),o;if(0===(i=ee(i,f("String"),"to_str")).length){for(C=0,O=(j=o.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/)).length;C<O;C+=2)(j[C]||j[C+1])&&(oe=(j[C]||"")+(j[C+1]||""),c&&(oe=oe.$chomp("\n")),l.yield1(n,oe));return o}for(ne=o.$chomp(i),ae=o.length!=ne.length,C=0,te=(le=ne.split(i)).length;C<te;C++)oe=le[C],(C<te-1||ae)&&(oe+=i),c&&(oe=oe.$chomp(i)),l.yield1(n,oe);return o},-1),N(m,"$empty?",function(){return 0===this.length}),N(m,"$end_with?",function(r){for(var n,t=this,s=0,i=(n=E(arguments)).length;s<i;s++){var c=ee(n[s],f("String"),"to_str").$to_s();if(t.length>=c.length&&t.substr(t.length-c.length,c.length)==c)return!0}return!1},-1),N(m,"$gsub",function a(r,e){var n=a.$$p||p,t=this;if(a.$$p=null,void 0===e&&n===p)return t.$enum_for("gsub",r);var o,j,C,s="",i=p,c=0;for(r.$$is_regexp?r=$(r):(r=ee(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(null===(o=r.exec(t))){A["~"]=p,s+=t.slice(c);break}i=f("MatchData").$new(r,o),void 0===e?(C=r.lastIndex,j=n(o[0]),r.lastIndex=C):e.$$is_hash?j=e["$[]"](o[0]).$to_s():(e.$$is_string||(e=ee(e,f("String"),"to_str")),j=e.replace(/([\\]+)([0-9+&`'])/g,function(O,te,ne){if(te.length%2==0)return O;switch(ne){case"+":for(var ae=o.length-1;ae>0;ae--)if(void 0!==o[ae])return te.slice(1)+o[ae];return"";case"&":return te.slice(1)+o[0];case"`":return te.slice(1)+t.slice(0,o.index);case"'":return te.slice(1)+t.slice(o.index+o[0].length);default:return te.slice(1)+(o[ne]||"")}}).replace(/\\\\/g,"\\")),r.lastIndex===o.index?(s+=t.slice(c,o.index)+j+(t[o.index]||""),r.lastIndex+=1):s+=t.slice(c,o.index)+j,c=r.lastIndex}return A["~"]=i,s},-2),N(m,"$hash",function(){return this.toString()}),N(m,"$hex",function(){return this.$to_i(16)}),N(m,"$include?",function(r){return r.$$is_string||(r=ee(r,f("String"),"to_str")),-1!==this.indexOf(r)}),N(m,"$index",function(r,e){var t,s,i,n=this;if(void 0===e)e=0;else if((e=ee(e,f("Integer"),"to_int"))<0&&(e+=n.length)<0)return p;if(r.$$is_regexp)for(i=$(r);;){if(null===(s=i.exec(n))){A["~"]=p,t=-1;break}if(s.index>=e){A["~"]=f("MatchData").$new(i,s),t=s.index;break}i.lastIndex=s.index+1}else t=0===(r=ee(r,f("String"),"to_str")).length&&e>n.length?-1:n.indexOf(r,e);return-1===t?p:t},-2),N(m,"$inspect",function(){var r=this,n={"\x07":"\\a","\x1b":"\\e","\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"};return'"'+r.replace(/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(s){return n[s]?n[s]:(s=s.charCodeAt(0))<=255&&(r.encoding["$binary?"]()||r.internal_encoding["$binary?"]())?"\\x"+("00"+s.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+s.toString(16).toUpperCase()).slice(-4)}).replace(/\#[\$\@\{]/g,"\\$&")+'"'}),N(m,"$intern",function(){return this.toString()}),N(m,"$length",function(){return this.length}),b(m,"size","length"),N(m,"$lines",function a(r,e){var t,s,i,c,n=a.$$p||p,j=p;return null==A["/"]&&(A["/"]=p),a.$$p=null,t=E(arguments),s=J(t),s=Y(s),t.length>0&&(i=t.shift()),null==i&&(i=A["/"]),null==(c=s.$$smap.chomp)&&(c=!1),j=W(this,"each_line",[i,I(["chomp"],{chomp:c})],n.$to_proc()),y(n)?this:j.$to_a()},-1),N(m,"$ljust",function(r,e){var n=this;if(null==e&&(e=" "),r=ee(r,f("Integer"),"to_int"),e=ee(e,f("String"),"to_str").$to_s(),y(e["$empty?"]())&&F.$raise(f("ArgumentError"),"zero width padding"),y(r<=n.length))return n;var t=-1,s="";for(r-=n.length;++t<r;)s+=e;return n+s.slice(0,r)},-2),N(m,"$lstrip",function(){return this.replace(/^[\u0000\s]*/,"")}),N(m,"$ascii_only?",function(){return!!this.encoding.ascii&&/^[\x00-\x7F]*$/.test(this)}),N(m,"$match",function a(r,e){var n=a.$$p||p;return a.$$p=null,(H(h("String"),r)||y(r["$respond_to?"]("to_str")))&&(r=f("Regexp").$new(r.$to_str())),H(f("Regexp"),r)||F.$raise(f("TypeError"),"wrong argument type "+r.$class()+" (expected Regexp)"),W(r,"match",[this,e],n.$to_proc())},-2),N(m,"$match?",function(r,e){return(H(h("String"),r)||y(r["$respond_to?"]("to_str")))&&(r=f("Regexp").$new(r.$to_str())),H(f("Regexp"),r)||F.$raise(f("TypeError"),"wrong argument type "+r.$class()+" (expected Regexp)"),r["$match?"](this,e)},-2),N(m,"$next",function(){var r=this,e=r.length;if(0===e)return"";for(var i,n=r,t=r.search(/[a-zA-Z0-9]/),s=!1;e--;){if((i=r.charCodeAt(e))>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122)switch(i){case 57:s=!0,i=48;break;case 90:s=!0,i=65;break;case 122:s=!0,i=97;break;default:s=!1,i+=1}else-1===t?255===i?(s=!0,i=0):(s=!1,i+=1):s=!0;if(n=n.slice(0,e)+String.fromCharCode(i)+n.slice(e+1),s&&(0===e||e===t)){switch(i){case 65:case 97:break;default:i+=1}n=0===e?String.fromCharCode(i)+n:n.slice(0,e)+String.fromCharCode(i)+n.slice(e),s=!1}if(!s)break}return n}),N(m,"$oct",function(){var e,n=this,t=8;return/^\s*_/.test(n)?0:(n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(s,i,c,o){switch(o.charAt(0)){case"+":case"-":return s;case"0":if("x"===o.charAt(1)&&"0x"===c)return s}switch(c){case"0b":t=2;break;case"0":case"0o":t=8;break;case"0d":t=10;break;case"0x":t=16}return i+o}),e=parseInt(n.replace(/_(?!_)/g,""),t),isNaN(e)?0:e)}),N(m,"$ord",function(){var r=this;return"function"==typeof r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}),N(m,"$partition",function(r){var n,t,e=this;return r.$$is_regexp?null===(t=r.exec(e))?n=-1:(f("MatchData").$new(r,t),r=t[0],n=t.index):(r=ee(r,f("String"),"to_str"),n=e.indexOf(r)),-1===n?[e,"",""]:[e.slice(0,n),e.slice(n,n+r.length),e.slice(n+r.length)]}),N(m,"$reverse",function(){return this.split("").reverse().join("")}),N(m,"$rindex",function(r,e){var t,s,i,c,n=this;if(void 0===e)e=n.length;else if((e=ee(e,f("Integer"),"to_int"))<0&&(e+=n.length)<0)return p;if(r.$$is_regexp){for(s=null,i=$(r);!(null===(c=i.exec(n))||c.index>e);)i.lastIndex=(s=c).index+1;null===s?(A["~"]=p,t=-1):(f("MatchData").$new(i,s),t=s.index)}else r=ee(r,f("String"),"to_str"),t=n.lastIndexOf(r,e);return-1===t?p:t},-2),N(m,"$rjust",function(r,e){var n=this;if(null==e&&(e=" "),r=ee(r,f("Integer"),"to_int"),e=ee(e,f("String"),"to_str").$to_s(),y(e["$empty?"]())&&F.$raise(f("ArgumentError"),"zero width padding"),y(r<=n.length))return n;var t=Math.floor(r-n.length),s=Math.floor(t/e.length),i=Array(s+1).join(e);return i+e.slice(0,t-i.length)+n},-2),N(m,"$rpartition",function(r){var n,t,s,i,e=this;if(r.$$is_regexp){for(t=null,s=$(r);null!==(i=s.exec(e));)s.lastIndex=(t=i).index+1;null===t?n=-1:(f("MatchData").$new(s,t),r=t[0],n=t.index)}else r=ee(r,f("String"),"to_str"),n=e.lastIndexOf(r);return-1===n?["","",e]:[e.slice(0,n),e.slice(n,n+r.length),e.slice(n+r.length)]}),N(m,"$rstrip",function(){return this.replace(/[\s\u0000]*$/,"")}),N(m,"$scan",function a(r,e){var t,n=a.$$p||p;a.$$p=null,null==(t=(e=Y(e)).$$smap.no_matchdata)&&(t=!1);var o,i=[],c=p;for(r.$$is_regexp?r=$(r):(r=ee(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=(o=r.exec(this));)c=f("MatchData").$new(r,o,I(["no_matchdata"],{no_matchdata:t})),n===p?i.push(1==o.length?o[0]:c.$captures()):l.yield1(n,1==o.length?o[0]:c.$captures()),r.lastIndex===o.index&&(r.lastIndex+=1);return t||(A["~"]=c),n!==p?this:i},-2),N(m,"$singleton_class",function(){return l.get_singleton_class(this)}),N(m,"$split",function(r,e){var n=this,t=p;if(null==A[";"]&&(A[";"]=p),0===n.length)return[];if(void 0===e)e=0;else if(1===(e=x["$coerce_to!"](e,f("Integer"),"to_int")))return[n];(void 0===r||r===p)&&(r=y(t=A[";"])?t:" ");var o,j,C,s=[],i=n.toString(),c=0;if(r.$$is_regexp?r=$(r):" "===(r=ee(r,f("String"),"to_str").$to_s())?(r=/\s+/gm,i=i.replace(/^\s+/,"")):r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"),1===(s=i.split(r)).length&&s[0]===i)return[s[0]];for(;-1!==(j=s.indexOf(void 0));)s.splice(j,1);if(0===e){for(;""===s[s.length-1];)s.length-=1;return s}if(o=r.exec(i),e<0){if(null!==o&&""===o[0]&&-1===r.source.indexOf("(?="))for(j=0,C=o.length;j<C;j++)s.push("");return s}if(null!==o&&""===o[0])return s.splice(e-1,s.length-1,s.slice(e-1).join("")),s;if(e>=s.length)return s;for(j=0;null!==o&&(j++,c=r.lastIndex,j+1!==e);)o=r.exec(i);return s.splice(e-1,s.length-1,i.slice(c)),s},-1),N(m,"$squeeze",function(r){var n,t=this;if(0===(n=E(arguments)).length)return t.replace(/(.)\1+/g,"$1");var s=d(n);return null===s?t:t.replace(new RegExp("("+s+")\\1+","g"),"$1")},-1),N(m,"$start_with?",function(r){for(var n,s=0,i=(n=E(arguments)).length;s<i;s++)if(n[s].$$is_regexp){var c=n[s],o=c.exec(this);if(null!=o&&0===o.index)return A["~"]=f("MatchData").$new(c,o),!0;A["~"]=p}else{var j=ee(n[s],f("String"),"to_str").$to_s();if(0===this.indexOf(j))return!0}return!1},-1),N(m,"$strip",function(){return this.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")}),N(m,"$sub",function a(r,e){var n=a.$$p||p,t=this;a.$$p=null,r.$$is_regexp||(r=ee(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var s,i=r.exec(t);return null===i?(A["~"]=p,s=t.toString()):(f("MatchData").$new(r,i),void 0===e?(n===p&&F.$raise(f("ArgumentError"),"wrong number of arguments (1 for 2)"),s=t.slice(0,i.index)+n(i[0])+t.slice(i.index+i[0].length)):e.$$is_hash?s=t.slice(0,i.index)+e["$[]"](i[0]).$to_s()+t.slice(i.index+i[0].length):(e=(e=ee(e,f("String"),"to_str")).replace(/([\\]+)([0-9+&`'])/g,function(c,o,j){if(o.length%2==0)return c;switch(j){case"+":for(var C=i.length-1;C>0;C--)if(void 0!==i[C])return o.slice(1)+i[C];return"";case"&":return o.slice(1)+i[0];case"`":return o.slice(1)+t.slice(0,i.index);case"'":return o.slice(1)+t.slice(i.index+i[0].length);default:return o.slice(1)+(i[j]||"")}}).replace(/\\\\/g,"\\"),s=t.slice(0,i.index)+e+t.slice(i.index+i[0].length))),s},-2),N(m,"$sum",function(r){null==r&&(r=16),r=ee(r,f("Integer"),"to_int");for(var n=0,t=this.length,s=0;s<t;s++)n+=this.charCodeAt(s);return r<=0?n:n&Math.pow(2,r)-1},-1),N(m,"$swapcase",function(){return this.replace(/([a-z]+)|([A-Z]+)/g,function(n,t,s){return t?n.toUpperCase():n.toLowerCase()})}),N(m,"$to_f",function(){if("_"===this.charAt(0))return 0;var e=parseFloat(this.replace(/_/g,""));return isNaN(e)||e==1/0||e==-1/0?0:e}),N(m,"$to_i",function(r){null==r&&(r=10);var n,t=this.toLowerCase(),s=ee(r,f("Integer"),"to_int");return(1===s||s<0||s>36)&&F.$raise(f("ArgumentError"),"invalid radix "+s),/^\s*_/.test(t)?0:(t=t.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(i,c,o,j){switch(j.charAt(0)){case"+":case"-":return i;case"0":if("x"===j.charAt(1)&&"0x"===o&&(0===s||16===s))return i}switch(o){case"0b":if(0===s||2===s)return s=2,c+j;break;case"0":case"0o":if(0===s||8===s)return s=8,c+j;break;case"0d":if(0===s||10===s)return s=10,c+j;break;case"0x":if(0===s||16===s)return s=16,c+j}return i}),n=parseInt(t.replace(/_(?!_)/g,""),s),isNaN(n)?0:n)},-1),N(m,"$to_proc",function a(){var n,t,s=p;return a.$$p=null,n=this.valueOf(),t=l.jsid(n),s=W(F,"proc",[],function i(c){var C,o=i.$$p||p;i.$$p=null,0===(C=E(arguments)).length&&F.$raise(f("ArgumentError"),"no receiver given");var O=C[0];null==O&&(O=p);var te=O[t];return te?C=C.slice(1):(te=O.$method_missing,C[0]=n),"function"==typeof o&&(te.$$p=o),0===C.length?te.call(O):te.apply(O,C)},-1),s.$$source_location=p,s}),N(m,"$to_s",function(){return this.toString()}),N(m,"$tr",function(r,e){var n=this;if(r=ee(r,f("String"),"to_str").$to_s(),e=ee(e,f("String"),"to_str").$to_s(),0==r.length||r===e)return n;var t,s,i,c,o,j,C,O={},te=r.split(""),ne=te.length,ae=e.split(""),le=ae.length,oe=!1,ue=null;"^"===te[0]&&te.length>1&&(oe=!0,te.shift(),ue=ae[le-1],ne-=1);var ie=[],X=null;for(s=!1,t=0;t<ne;t++)if(c=te[t],null==X)X=c,ie.push(c);else if("-"===c)"-"===X?(ie.push("-"),ie.push("-")):t==ne-1?ie.push("-"):s=!0;else if(s){for((o=X.charCodeAt(0))>(j=c.charCodeAt(0))&&F.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(j)+'" in string transliteration'),i=o+1;i<j;i++)ie.push(String.fromCharCode(i));ie.push(c),s=null,X=null}else ie.push(c);if(ne=(te=ie).length,oe)for(t=0;t<ne;t++)O[te[t]]=!0;else{if(le>0){var D=[],V=null;for(s=!1,t=0;t<le;t++)if(c=ae[t],null==V)V=c,D.push(c);else if("-"===c)"-"===V?(D.push("-"),D.push("-")):t==le-1?D.push("-"):s=!0;else if(s){for((o=V.charCodeAt(0))>(j=c.charCodeAt(0))&&F.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(j)+'" in string transliteration'),i=o+1;i<j;i++)D.push(String.fromCharCode(i));D.push(c),s=null,V=null}else D.push(c);le=(ae=D).length}var Z=ne-le;if(Z>0){var u=le>0?ae[le-1]:"";for(t=0;t<Z;t++)ae.push(u)}for(t=0;t<ne;t++)O[te[t]]=ae[t]}var w="";for(t=0,C=n.length;t<C;t++){var P=O[c=n.charAt(t)];w+=oe?null==P?ue:c:P??c}return w}),N(m,"$tr_s",function(r,e){var n=this;if(r=ee(r,f("String"),"to_str").$to_s(),e=ee(e,f("String"),"to_str").$to_s(),0==r.length)return n;var t,s,i,c,o,j,C,O={},te=r.split(""),ne=te.length,ae=e.split(""),le=ae.length,oe=!1,ue=null;"^"===te[0]&&te.length>1&&(oe=!0,te.shift(),ue=ae[le-1],ne-=1);var ie=[],X=null;for(s=!1,t=0;t<ne;t++)if(c=te[t],null==X)X=c,ie.push(c);else if("-"===c)"-"===X?(ie.push("-"),ie.push("-")):t==ne-1?ie.push("-"):s=!0;else if(s){for((o=X.charCodeAt(0))>(j=c.charCodeAt(0))&&F.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(j)+'" in string transliteration'),i=o+1;i<j;i++)ie.push(String.fromCharCode(i));ie.push(c),s=null,X=null}else ie.push(c);if(ne=(te=ie).length,oe)for(t=0;t<ne;t++)O[te[t]]=!0;else{if(le>0){var D=[];for(s=!1,t=0;t<le;t++)if(c=ae[t],null==X)X=c,D.push(c);else if("-"===c)t==le-1?D.push("-"):s=!0;else if(s){for((o=X.charCodeAt(0))>(j=c.charCodeAt(0))&&F.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(j)+'" in string transliteration'),i=o+1;i<j;i++)D.push(String.fromCharCode(i));D.push(c),s=null,X=null}else D.push(c);le=(ae=D).length}var Z=ne-le;if(Z>0){var u=le>0?ae[le-1]:"";for(t=0;t<Z;t++)ae.push(u)}for(t=0;t<ne;t++)O[te[t]]=ae[t]}var w="",P=null;for(t=0,C=n.length;t<C;t++){var G=O[c=n.charAt(t)];oe?null==G?null==P&&(w+=ue,P=!0):(w+=c,P=null):null!=G?(null==P||P!==G)&&(w+=G,P=G):(w+=c,P=null)}return w}),N(m,"$upcase",function(){return this.toUpperCase()}),N(m,"$upto",function a(r,e){var n=a.$$p||p,t=this;if(a.$$p=null,null==e&&(e=!1),n===p)return t.$enum_for("upto",r,e);var s,i,c=t.toString();if(r=ee(r,f("String"),"to_str"),1===c.length&&1===r.length)for(s=c.charCodeAt(0),i=r.charCodeAt(0);s<=i&&(!e||s!==i);)n(String.fromCharCode(s)),s+=1;else if(parseInt(c,10).toString()===c&&parseInt(r,10).toString()===r)for(s=parseInt(c,10),i=parseInt(r,10);s<=i&&(!e||s!==i);)n(s.toString()),s+=1;else for(;c.length<=r.length&&c<=r&&(!e||c!==r);)n(c),c=c.$succ();return t},-2),N(m,"$instance_variables",function(){return[]}),B(m,"$_load",function(r){var e;return e=E(arguments),W(this,"new",U(e))},-1),N(m,"$unicode_normalize",function(r){return null==r&&(r="nfc"),y(["nfc","nfd","nfkc","nfkd"]["$include?"](r))||F.$raise(f("ArgumentError"),"Invalid normalization form "+r),this.normalize(r.$upcase())},-1),N(m,"$unicode_normalized?",function(r){return null==r&&(r="nfc"),this.$unicode_normalize(r)["$=="](this)},-1),N(m,"$unpack",function(r){return F.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),N(m,"$unpack1",function(r){return F.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),N(m,"$freeze",function(){var r=this;return"string"==typeof r||K(r,"$$frozen",!0),r}),N(m,"$-@",function(){var r=this;return"string"==typeof r||r.$$frozen?r:"UTF-8"==r.encoding.name&&"UTF-8"==r.internal_encoding.name?r.toString():r.$dup().$freeze()}),N(m,"$frozen?",function(){return"string"==typeof this||!0===this.$$frozen}),b(m,"+@","dup"),b(m,"===","=="),b(m,"byteslice","[]"),b(m,"eql?","=="),b(m,"equal?","==="),b(m,"object_id","__id__"),b(m,"slice","[]"),b(m,"succ","next"),b(m,"to_str","to_s"),b(m,"to_sym","intern"),x.$pristine(m,"initialize")}(0,0,R),g(R[0],"Symbol",_("String"))},Opal.modules["corelib/enumerable"]=function(l){var ee=l.truthy,re=l.coerce_to,$=l.yield1,K=l.yieldX,Q=l.deny_frozen_access,N=l.module,x=l.send,B=l.slice,E=l.to_a,W=l.Opal,U=l.thrower,J=l.def,Y=l.Kernel,H=l.return_val,F=l.rb_gt,y=l.rb_times,A=l.rb_lt,L=l.eqeq,k=l.rb_plus,T=l.rb_minus,I=l.rb_divide,b=l.rb_le,g=l.hash2,q=l.lambda,R=l.not,_=l.alias,f=l.nil,z=l.$$$;return function(v,S){var m=N("::","Enumerable"),M=[m].concat([]),h=l.$r(M);function d(a){return 0===a.length&&(a=[f]),a.length>1&&(a=[a]),a}return J(m,"$all?",function a(r){try{var e=U("return"),n=a.$$p||f;return a.$$p=null,ee(void 0!==r)?x(this,"each",[],function(i){var j;if(j=d(B(arguments)),ee(x(r,"public_send",["==="].concat(E(j)))))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}):x(this,"each",[],n!==f?function(i){var c;if(c=B(arguments),ee(l.yieldX(n,E(c))))return f;e.$throw(!1)}:function(i){var c;if(c=B(arguments),ee(W.$destructure(c)))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}),!0}catch(s){if(s===e)return s.$v;throw s}},-1),J(m,"$any?",function a(r){try{var e=U("return"),n=a.$$p||f;return a.$$p=null,ee(void 0!==r)?x(this,"each",[],function(i){var j;if(j=d(B(arguments)),!ee(x(r,"public_send",["==="].concat(E(j)))))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}):x(this,"each",[],n!==f?function(i){var c;if(c=B(arguments),!ee(l.yieldX(n,E(c))))return f;e.$throw(!0)}:function(i){var c;if(c=B(arguments),!ee(W.$destructure(c)))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(s){if(s===e)return s.$v;throw s}},-1),J(m,"$chunk",function a(){var r=a.$$p||f,e=this;return a.$$p=null,r===f?x(e,"to_enum",["chunk"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e}):x(z("Enumerator"),"new",[],function n(t){var s=null==n.$$s?this:n.$$s;null==t&&(t=f);var i=f,c=[];function o(){c.length>0&&t.$yield(i,c)}s.$each.$$p=function(j){var C=$(r,j);C===f?(o(),c=[],i=f):(i===f||i===C?c.push(j):(o(),c=[j]),i=C)},s.$each(),o()},{$$s:e})}),J(m,"$chunk_while",function a(){var r=a.$$p||f;return a.$$p=null,r===f&&Y.$raise(z("ArgumentError"),"no block given"),x(this,"slice_when",[],function(t,s){return null==t&&(t=f),null==s&&(s=f),l.yieldX(r,[t,s])["$!"]()})}),J(m,"$collect",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return x(e,"enum_for",["collect"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var n=[];return e.$each.$$p=function(){var t=K(r,arguments);n.push(t)},e.$each(),n}),J(m,"$collect_concat",function a(){var r=a.$$p||f,e=this;return a.$$p=null,r===f?x(e,"enum_for",["collect_concat"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e}):x(e,"map",[],r.$to_proc()).$flatten(1)}),J(m,"$compact",function(){return this.$to_a().$compact()}),J(m,"$count",function a(r){var e=a.$$p||f,t=f;return a.$$p=null,t=0,null!=r&&e!==f&&this.$warn("warning: given block not used"),ee(null!=r)?e=x(Y,"proc",[],function(i){var c;return c=B(arguments),W.$destructure(c)["$=="](r)},-1):ee(e["$nil?"]())&&(e=x(Y,"proc",[],H(!0))),x(this,"each",[],function(i){var c;return c=B(arguments),ee(K(e,c))?t++:f},-1),t},-1),J(m,"$cycle",function a(r){var e=a.$$p||f,n=this;if(a.$$p=null,null==r&&(r=f),e===f)return x(n,"enum_for",["cycle",r],function o(){var j=null==o.$$s?this:o.$$s;return ee(r["$nil?"]())?ee(j["$respond_to?"]("size"))?z(z("Float"),"INFINITY"):f:(r=W["$coerce_to!"](r,z("Integer"),"to_int"),ee(F(r,0))?y(j.$enumerator_size(),r):0)},{$$s:n});if(!ee(r["$nil?"]())&&(r=W["$coerce_to!"](r,z("Integer"),"to_int"),ee(r<=0)))return f;var s,i,t=[];if(n.$each.$$p=function(){var o=W.$destructure(arguments);$(e,o),t.push(o)},n.$each(),0===t.length)return f;if(r===f)for(;;)for(s=0,i=t.length;s<i;s++)$(e,t[s]);else for(;r>1;){for(s=0,i=t.length;s<i;s++)$(e,t[s]);r--}},-1),J(m,"$detect",function a(r){try{var e=U("return"),n=a.$$p||f;return a.$$p=null,n===f?this.$enum_for("detect",r):(x(this,"each",[],function(i){var c,j;if(c=B(arguments),j=W.$destructure(c),!ee(l.yield1(n,j)))return f;e.$throw(j)},{$$arity:-1,$$ret:e}),void 0!==r?"function"==typeof r?r():r:f)}catch(s){if(s===e)return s.$v;throw s}},-1),J(m,"$drop",function(r){r=re(r,z("Integer"),"to_int"),ee(r<0)&&Y.$raise(z("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return this.$each.$$p=function(){r<=t&&n.push(W.$destructure(arguments)),t++},this.$each(),n}),J(m,"$drop_while",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return e.$enum_for("drop_while");var n=[],t=!0;return e.$each.$$p=function(){var s=W.$destructure(arguments);if(t){var i=$(r,s);ee(i)||(t=!1,n.push(s))}else n.push(s)},e.$each(),n}),J(m,"$each_cons",function a(r){var e=a.$$p||f,n=this;if(a.$$p=null,ee(1!=arguments.length)&&Y.$raise(z("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),r=W.$try_convert(r,z("Integer"),"to_int"),ee(r<=0)&&Y.$raise(z("ArgumentError"),"invalid size"),e===f)return x(n,"enum_for",["each_cons",r],function s(){var c=f;return c=(null==s.$$s?this:s.$$s).$enumerator_size(),ee(c["$nil?"]())?f:L(c,0)||ee(A(c,r))?0:k(T(c,r),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var s=W.$destructure(arguments);t.push(s),t.length>r&&t.shift(),t.length==r&&$(e,t.slice(0,r))},n.$each(),n}),J(m,"$each_entry",function a(r){var t,e=a.$$p||f,s=this;return a.$$p=null,t=B(arguments),e===f?x(s,"to_enum",["each_entry"].concat(E(t)),function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:s}):(s.$each.$$p=function(){var i=W.$destructure(arguments);$(e,i)},s.$each.apply(s,t),s)},-1),J(m,"$each_slice",function a(r){var e=a.$$p||f,n=this;if(a.$$p=null,r=re(r,z("Integer"),"to_int"),ee(r<=0)&&Y.$raise(z("ArgumentError"),"invalid slice size"),e===f)return x(n,"enum_for",["each_slice",r],function s(){var i=null==s.$$s?this:s.$$s;return ee(i["$respond_to?"]("size"))?I(i.$size(),r).$ceil():f},{$$s:n});var t=[];return n.$each.$$p=function(){var s=W.$destructure(arguments);t.push(s),t.length===r&&($(e,t),t=[])},n.$each(),t.length>0&&$(e,t),n}),J(m,"$each_with_index",function a(r){var t,e=a.$$p||f,s=this;if(a.$$p=null,t=B(arguments),e===f)return x(s,"enum_for",["each_with_index"].concat(E(t)),function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:s});var i=0;return s.$each.$$p=function(){var c=W.$destructure(arguments);e(c,i),i++},s.$each.apply(s,t),s},-1),J(m,"$each_with_object",function a(r){var e=a.$$p||f,n=this;return a.$$p=null,e===f?x(n,"enum_for",["each_with_object",r],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=W.$destructure(arguments);e(t,r)},n.$each(),r)}),J(m,"$entries",function(r){var n,t=this;n=B(arguments);var s=[];return t.$each.$$p=function(){s.push(W.$destructure(arguments))},t.$each.apply(t,n),s},-1),J(m,"$filter_map",function a(){var r=a.$$p||f,e=this;return a.$$p=null,r===f?x(e,"enum_for",["filter_map"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e}):x(x(e,"map",[],r.$to_proc()),"select",[],"itself".$to_proc())}),J(m,"$find_all",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return x(e,"enum_for",["find_all"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var n=[];return e.$each.$$p=function(){var t=W.$destructure(arguments),s=$(r,t);ee(s)&&n.push(t)},e.$each(),n}),J(m,"$find_index",function a(r){try{var e=U("return"),n=a.$$p||f,t=this,s=f;return a.$$p=null,ee(void 0===r&&n===f)?t.$enum_for("find_index"):(null!=r&&n!==f&&t.$warn("warning: given block not used"),s=0,ee(null!=r)?x(t,"each",[],function(c){var o;return o=B(arguments),L(W.$destructure(o),r)&&e.$throw(s),s+=1},{$$arity:-1,$$ret:e}):x(t,"each",[],function(c){var o;return o=B(arguments),ee(l.yieldX(n,E(o)))&&e.$throw(s),s+=1},{$$arity:-1,$$ret:e}),f)}catch(i){if(i===e)return i.$v;throw i}},-1),J(m,"$first",function(r){try{var e=U("return"),t=f,s=f;return ee(void 0===r)?x(this,"each",[],function(c){null==c&&(c=f),e.$throw(c)},{$$ret:e}):(t=[],r=re(r,z("Integer"),"to_int"),ee(r<0)&&Y.$raise(z("ArgumentError"),"attempt to take negative size"),ee(0==r)?[]:(s=0,x(this,"each",[],function(c){var o;if(o=B(arguments),t.push(W.$destructure(o)),!ee(r<=++s))return f;e.$throw(t)},{$$arity:-1,$$ret:e}),t))}catch(i){if(i===e)return i.$v;throw i}},-1),J(m,"$grep",function a(r){var e=a.$$p||f,t=f;return a.$$p=null,t=[],x(this,"each",[],function(i){var o,j;return j=d(o=B(arguments)),ee(x(r,"__send__",["==="].concat(E(j))))?(e!==f?(ee(F(o.$length(),1))&&(o=[o]),o=l.yieldX(e,E(o))):ee(b(o.$length(),1))&&(o=o["$[]"](0)),t.$push(o)):f},-1),t}),J(m,"$grep_v",function a(r){var e=a.$$p||f,t=f;return a.$$p=null,t=[],x(this,"each",[],function(i){var o,j;return j=d(o=B(arguments)),ee(x(r,"__send__",["==="].concat(E(j))))?f:(e!==f?(ee(F(o.$length(),1))&&(o=[o]),o=l.yieldX(e,E(o))):ee(b(o.$length(),1))&&(o=o["$[]"](0)),t.$push(o))},-1),t}),J(m,"$group_by",function a(){var e,r=a.$$p||f,n=this,t=f,s=f;return a.$$p=null,r===f?x(n,"enum_for",["group_by"],function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:n}):(t=g([],{}),n.$each.$$p=function(){var c=W.$destructure(arguments),o=$(r,c);(ee(s=t["$[]"](o))?s:(e=[o,[]],x(t,"[]=",e),e[e.length-1]))["$<<"](c)},n.$each(),t)}),J(m,"$include?",function(r){try{var e=U("return");return x(this,"each",[],function(s){var i;if(i=B(arguments),!L(W.$destructure(i),r))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(t){if(t===e)return t.$v;throw t}}),J(m,"$inject",function a(r,e){var n=a.$$p||f,t=this;a.$$p=null;var s=r;return n!==f&&void 0===e?t.$each.$$p=function(){var i=W.$destructure(arguments);void 0!==s?(i=K(n,[s,i]),s=i):s=i}:(void 0===e&&(z("Symbol")["$==="](r)||Y.$raise(z("TypeError"),r.$inspect()+" is not a Symbol"),e=r,s=void 0),t.$each.$$p=function(){var i=W.$destructure(arguments);s=void 0!==s?s.$__send__(e,i):i}),t.$each(),s??f},-1),J(m,"$lazy",function(){return x(z(z("Enumerator"),"Lazy"),"new",[this,this.$enumerator_size()],function(n,t){var s;return null==n&&(n=f),s=B(arguments,1),x(n,"yield",E(s))},-2)}),J(m,"$enumerator_size",function(){return ee(this["$respond_to?"]("size"))?this.$size():f}),J(m,"$max",function a(r){var t,s,e=a.$$p||f,n=this;return a.$$p=null,void 0===r||r===f?(n.$each.$$p=function(){var i=W.$destructure(arguments);void 0!==t?((s=e!==f?K(e,[i,t]):i["$<=>"](t))===f&&Y.$raise(z("ArgumentError"),"comparison failed"),s>0&&(t=i)):t=i},n.$each(),void 0===t?f:t):(r=re(r,z("Integer"),"to_int"),x(n,"sort",[],e.$to_proc()).$reverse().$first(r))},-1),J(m,"$max_by",function a(r){var t,s,e=a.$$p||f,n=this;return a.$$p=null,null==r&&(r=f),ee(e)?ee(r["$nil?"]())?(n.$each.$$p=function(){var i=W.$destructure(arguments),c=$(e,i);if(void 0===t)return t=i,void(s=c);c["$<=>"](s)>0&&(t=i,s=c)},n.$each(),void 0===t?f:t):x(n,"sort_by",[],e.$to_proc()).$reverse().$take(r):x(n,"enum_for",["max_by",r],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:n})},-1),J(m,"$min",function a(r){var t,e=a.$$p||f,n=this;return a.$$p=null,null==r&&(r=f),ee(r["$nil?"]())?(n.$each.$$p=e!==f?function(){var s=W.$destructure(arguments);if(void 0!==t){var i=e(s,t);i===f&&Y.$raise(z("ArgumentError"),"comparison failed"),i<0&&(t=s)}else t=s}:function(){var s=W.$destructure(arguments);void 0!==t?W.$compare(s,t)<0&&(t=s):t=s},n.$each(),void 0===t?f:t):e!==f?x(n,"sort",[],function(i,c){return null==i&&(i=f),null==c&&(c=f),l.yieldX(e,[i,c])}).$take(r):n.$sort().$take(r)},-1),J(m,"$min_by",function a(r){var t,s,e=a.$$p||f,n=this;return a.$$p=null,null==r&&(r=f),ee(e)?ee(r["$nil?"]())?(n.$each.$$p=function(){var i=W.$destructure(arguments),c=$(e,i);if(void 0===t)return t=i,void(s=c);c["$<=>"](s)<0&&(t=i,s=c)},n.$each(),void 0===t?f:t):x(n,"sort_by",[],e.$to_proc()).$take(r):x(n,"enum_for",["min_by",r],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:n})},-1),J(m,"$minmax",function a(){var n,r=a.$$p||f;a.$$p=null,r=ee(n=r)?n:x(Y,"proc",[],function(o,j){return null==o&&(o=f),null==j&&(j=f),o["$<=>"](j)});var t=f,s=f,i=!0;return this.$each.$$p=function(){var c=W.$destructure(arguments);if(i)t=s=c,i=!1;else{var o=r.$call(t,c);o===f?Y.$raise(z("ArgumentError"),"comparison failed"):o>0&&(t=c);var j=r.$call(s,c);j===f?Y.$raise(z("ArgumentError"),"comparison failed"):j<0&&(s=c)}},this.$each(),[t,s]}),J(m,"$minmax_by",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,!ee(r))return x(e,"enum_for",["minmax_by"],function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:e});var s,i,n=f,t=f;return e.$each.$$p=function(){var c=W.$destructure(arguments),o=$(r,c);(void 0===s||o["$<=>"](s)<0)&&(n=c,s=o),(void 0===i||o["$<=>"](i)>0)&&(t=c,i=o)},e.$each(),[n,t]}),J(m,"$none?",function a(r){try{var e=U("return"),n=a.$$p||f;return a.$$p=null,ee(void 0!==r)?x(this,"each",[],function(i){var j;if(j=d(B(arguments)),!ee(x(r,"public_send",["==="].concat(E(j)))))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}):x(this,"each",[],n!==f?function(i){var c;if(c=B(arguments),!ee(l.yieldX(n,E(c))))return f;e.$throw(!1)}:function(i){var c,j;if(c=B(arguments),j=W.$destructure(c),!ee(j))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}),!0}catch(s){if(s===e)return s.$v;throw s}},-1),J(m,"$one?",function a(r){try{var e=U("return"),n=a.$$p||f,s=f;return a.$$p=null,s=0,ee(void 0!==r)?x(this,"each",[],function(c){var C;return C=d(B(arguments)),ee(x(r,"public_send",["==="].concat(E(C))))?(s=k(s,1),ee(F(s,1))?void e.$throw(!1):f):f},{$$arity:-1,$$ret:e}):x(this,"each",[],n!==f?function(c){var o;return o=B(arguments),ee(l.yieldX(n,E(o)))?(s=k(s,1),ee(F(s,1))?void e.$throw(!1):f):f}:function(c){var o;return o=B(arguments),ee(W.$destructure(o))?(s=k(s,1),ee(F(s,1))?void e.$throw(!1):f):f},{$$arity:-1,$$ret:e}),s["$=="](1)}catch(i){if(i===e)return i.$v;throw i}},-1),J(m,"$partition",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return x(e,"enum_for",["partition"],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:e});var n=[],t=[];return e.$each.$$p=function(){var i=W.$destructure(arguments),c=$(r,i);ee(c)?n.push(i):t.push(i)},e.$each(),[n,t]}),J(m,"$reject",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return x(e,"enum_for",["reject"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var n=[];return e.$each.$$p=function(){var t=W.$destructure(arguments),s=$(r,t);ee(s)||n.push(t)},e.$each(),n}),J(m,"$reverse_each",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return x(e,"enum_for",["reverse_each"],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:e});var n=[];e.$each.$$p=function(){n.push(arguments)},e.$each();for(var t=n.length-1;t>=0;t--)K(r,n[t]);return n}),J(m,"$slice_before",function a(r){var e=a.$$p||f;return a.$$p=null,ee(void 0===r&&e===f)&&Y.$raise(z("ArgumentError"),"both pattern and block are given"),ee(void 0!==r&&e!==f||arguments.length>1)&&Y.$raise(z("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),x(z("Enumerator"),"new",[],function t(s){var i=null==t.$$s?this:t.$$s;null==s&&(s=f);var c=[];i.$each.$$p=e!==f?void 0===r?function(){var o=W.$destructure(arguments),j=$(e,o);ee(j)&&c.length>0&&(s["$<<"](c),c=[]),c.push(o)}:function(){var o=W.$destructure(arguments),j=e(o,r.$dup());ee(j)&&c.length>0&&(s["$<<"](c),c=[]),c.push(o)}:function(){var o=W.$destructure(arguments),j=r["$==="](o);ee(j)&&c.length>0&&(s["$<<"](c),c=[]),c.push(o)},i.$each(),c.length>0&&s["$<<"](c)},{$$s:this})},-1),J(m,"$slice_after",function a(r){var e=a.$$p||f;return a.$$p=null,ee(void 0===r&&e===f)&&Y.$raise(z("ArgumentError"),"both pattern and block are given"),ee(void 0!==r&&e!==f||arguments.length>1)&&Y.$raise(z("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),ee(void 0!==r)&&(e=x(Y,"proc",[],function(s){return null==s&&(s=f),r["$==="](s)})),x(z("Enumerator"),"new",[],function t(s){var c,i=null==t.$$s?this:t.$$s;null==s&&(s=f),i.$each.$$p=function(){var o=W.$destructure(arguments),j=$(e,o);null==c&&(c=[]),ee(j)?(c.push(o),s.$yield(c),c=null):c.push(o)},i.$each(),null!=c&&s.$yield(c)},{$$s:this})},-1),J(m,"$slice_when",function a(){var r=a.$$p||f;return a.$$p=null,r===f&&Y.$raise(z("ArgumentError"),"wrong number of arguments (0 for 1)"),x(z("Enumerator"),"new",[],function n(t){var s=null==n.$$s?this:n.$$s;null==t&&(t=f);var i=f,c=f;s.$each_cons.$$p=function(){var o=W.$destructure(arguments),j=o[0],C=o[1],O=K(r,[j,C]);c=C,i===f&&(i=[]),ee(O)?(i.push(j),t.$yield(i),i=[]):i.push(j)},s.$each_cons(2),i!==f&&(i.push(c),t.$yield(i))},{$$s:this})}),J(m,"$sort",function a(){var n,r=a.$$p||f;return a.$$p=null,n=this.$to_a(),r===f&&(r=q(function(s,i){return null==s&&(s=f),null==i&&(i=f),s["$<=>"](i)})),x(n,"sort",[],r.$to_proc())}),J(m,"$sort_by",function a(){var r=a.$$p||f,e=this,n=f;return a.$$p=null,r===f?x(e,"enum_for",["sort_by"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e}):(n=x(e,"map",[],function(){var s;return s=W.$destructure(arguments),[l.yield1(r,s),s]}),x(n,"sort!",[],function(s,i){return null==s&&(s=f),null==i&&(i=f),s[0]["$<=>"](i[0])}),x(n,"map!",[],function(s){return null==s&&(s=f),s[1]}))}),J(m,"$sum",function a(r){var e=a.$$p||f,t=f,s=f;return a.$$p=null,null==r&&(r=0),t=r,s=0,x(this,"each",[],function(c){var j,C=f,O=f,te=f;return j=B(arguments),C=e!==f?l.yieldX(e,E(j)):W.$destructure(j),R([z(z("Float"),"INFINITY"),z(z("Float"),"INFINITY")["$-@"]()]["$include?"](C))&&ee(C["$respond_to?"]("-"))?(O=T(C,s),te=k(t,O),s=T(T(te,t),O),t=te):t=k(t,C)},-1),t},-1),J(m,"$take",function(r){return this.$first(r)}),J(m,"$take_while",function a(){try{var r=U("return"),e=a.$$p||f,t=f;return a.$$p=null,ee(e)?(t=[],x(this,"each",[],function(i){var c,j;return c=B(arguments),j=W.$destructure(c),ee(l.yield1(e,j))||r.$throw(t),t.push(j)},{$$arity:-1,$$ret:r})):this.$enum_for("take_while")}catch(s){if(s===r)return s.$v;throw s}}),J(m,"$uniq",function a(){var r=a.$$p||f,n=f;return a.$$p=null,n=g([],{}),x(this,"each",[],function(s){var i,o,j,C;return i=B(arguments),j=W.$destructure(i),C=r!==f?l.yield1(r,j):j,ee(n["$key?"](C))?f:(x(n,"[]=",o=[C,j]),o[o.length-1])},-1),n.$values()}),J(m,"$tally",function(r){var n;return r&&r!==f&&Q(r),n=x(x(this,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),ee(r)?(x(n,"each",[],function(s,i){var c;return null==s&&(s=f),null==i&&(i=f),c=[s,k(r.$fetch(s,0),i)],x(r,"[]=",c),c[c.length-1]}),r):n},-1),J(m,"$to_h",function a(r){var t,e=a.$$p||f,s=this;if(a.$$p=null,t=B(arguments),e!==f)return x(x(s,"map",[],e.$to_proc()),"to_h",E(t));var i=g([],{});return s.$each.$$p=function(){var c=W.$destructure(arguments),o=W["$coerce_to?"](c,z("Array"),"to_ary");o.$$is_array||Y.$raise(z("TypeError"),"wrong element type "+o.$class()+" (expected array)"),2!==o.length&&Y.$raise(z("ArgumentError"),"wrong array length (expected 2, was "+o.$length()+")"),l.hash_put(i,o[0],o[1])},s.$each.apply(s,t),i},-1),J(m,"$to_set",function a(r,e){var t,s,n=a.$$p||f,c=this;return a.$$p=null,(t=B(arguments)).length>0&&(s=t.shift()),null==s&&(s=h("Set")),x(s,"new",[c].concat(E(t)),n.$to_proc())},-1),J(m,"$zip",function a(r){var t;return a.$$p=null,t=B(arguments),x(this.$to_a(),"zip",E(t))},-1),_(m,"find","detect"),_(m,"filter","find_all"),_(m,"flat_map","collect_concat"),_(m,"map","collect"),_(m,"member?","include?"),_(m,"reduce","inject"),_(m,"select","find_all"),_(m,"to_a","entries")}()},Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(l){var g,q,R,ee=l.klass,re=l.truthy,$=l.to_a,K=l.eqeq,Q=l.Kernel,N=l.def,x=l.rb_gt,B=l.rb_lt,E=l.rb_le,W=l.rb_ge,U=l.rb_plus,J=l.rb_minus,Y=l.eqeqeq,H=l.not,F=l.rb_times,y=l.rb_divide,A=l.alias,k=l.nil,T=l.$$$;return g=[],R=[q=ee("::",null,"Enumerator")].concat(g),function(_,p,f){var z=ee(_,p,"ArithmeticSequence"),v=[z].concat(f),S=l.$r(v),m=z.$$prototype;m.step_arg2=m.receiver_num=m.step_arg1=m.step=m.range=m.topfx=m.bypfx=m.creation_method=m.skipped_arg=k,l.prop(z.$$prototype,"$$is_arithmetic_seq",!0);var M=1/0;return N(z,"$initialize",function(d,a,r){var e,n=this,t=k;return null==r&&(r="step"),n.creation_method=r,re(d["$is_a?"](T("Array")))?(e=[].concat($(d)),n.step_arg1=null==e[0]?k:e[0],n.step_arg2=null==e[1]?k:e[1],n.topfx=null==e[2]?k:e[2],n.bypfx=null==e[3]?k:e[3],n.receiver_num=a,n.step=1,n.range=re(n.step_arg2)?(n.step=n.step_arg2,l.Range.$new(n.receiver_num,n.step_arg1,!1)):re(n.step_arg1)?l.Range.$new(n.receiver_num,n.step_arg1,!1):l.Range.$new(n.receiver_num,k,!1)):(re(a)||(n.skipped_arg=!0),e=[d,re(t=a)?t:1],n.range=e[0],n.step=e[1]),n.object=n,K(n.step,0)&&Q.$raise(S("ArgumentError"),"step can't be 0"),re(n.step["$respond_to?"]("to_int"))?k:Q.$raise(S("ArgumentError"),"no implicit conversion of "+n.step.$class()+" into Integer")},-2),z.$attr_reader("step"),N(z,"$begin",function(){return this.range.$begin()}),N(z,"$end",function(){return this.range.$end()}),N(z,"$exclude_end?",function(){return this.range["$exclude_end?"]()}),N(z,"$_lesser_than_end?",function(d){var r,e,a=this;return r=re(e=a.$end())?e:M,re(x(a.$step(),0))?re(a["$exclude_end?"]())?B(d,r):E(d,r):re(a["$exclude_end?"]())?x(d,r):W(d,r)}),N(z,"$_greater_than_begin?",function(d){var r,e;return r=re(e=this.$begin())?e:M["$-@"](),re(x(this.$step(),0))?x(d,r):B(d,r)}),N(z,"$first",function(d){var a=this,r=k,e=k,n=k;if(r=re(e=a.$begin())?e:M["$-@"](),!re(d))return re(a["$_lesser_than_end?"](r))?r:k;for(n=[];re(re(e=a["$_lesser_than_end?"](r))?x(d,0):e);)n["$<<"](r),r=U(r,a.$step()),d=J(d,1);return n},-1),N(z,"$each",function h(){var r,d=h.$$p||k,a=this,e=k;if(h.$$p=null,d===k)return a;for(Y(k,a.$begin())&&Q.$raise(S("TypeError"),"nil can't be coerced into Integer"),e=re(r=a.$begin())?r:M["$-@"]();re(a["$_lesser_than_end?"](e));)l.yield1(d,e),e=U(e,a.$step());return a}),N(z,"$last",function(d){var a=this,r=k,e=k,n=k;if(Y(M,r=a.$end())||Y(M["$-@"](),r)?Q.$raise(T("FloatDomainError"),a.$end()):Y(k,r)&&Q.$raise(T("RangeError"),"cannot get the last element of endless arithmetic sequence"),e=J(a.$end(),J(a.$end(),a.$begin())["$%"](a.$step())),re(a["$_lesser_than_end?"](e))||(e=J(e,a.$step())),!re(d))return re(a["$_greater_than_begin?"](e))?e:k;for(n=[];re(re(r=a["$_greater_than_begin?"](e))?x(d,0):r);)n["$<<"](e),e=J(e,a.$step()),d=J(d,1);return n.$reverse()},-1),N(z,"$size",function(){var a,d=this,r=k;return a=re(x(d.$step(),0))?1:-1,H(d["$_lesser_than_end?"](d.$begin()))?0:re([M["$-@"](),M]["$include?"](d.$step()))?1:re([F(M["$-@"](),a),k]["$include?"](d.$begin()))||re([F(M,a),k]["$include?"](d.$end()))?M:(r=J(d.$end(),J(d.$end(),d.$begin())["$%"](d.$step())),re(d["$_lesser_than_end?"](r))||(r=J(r,d.$step())),U(y(J(r,d.$begin()),d.$step()).$abs().$to_i(),1))}),N(z,"$==",function(d){var r,e,n,t,a=this;return re(r=re(e=re(n=re(t=a.$class()["$=="](d.$class()))?a.$begin()["$=="](d.$begin()):t)?a.$end()["$=="](d.$end()):n)?a.$step()["$=="](d.$step()):e)?a["$exclude_end?"]()["$=="](d["$exclude_end?"]()):r}),N(z,"$hash",function(){var d=this;return[d.$begin(),d.$end(),d.$step(),d["$exclude_end?"]()].$hash()}),N(z,"$inspect",function(){var d=this,a=k;return re(d.receiver_num)?(a=re(d.step_arg2)?"("+d.topfx+d.step_arg1.$inspect()+", "+d.bypfx+d.step_arg2.$inspect()+")":re(d.step_arg1)?"("+d.topfx+d.step_arg1.$inspect()+")":k,"("+d.receiver_num.$inspect()+"."+d.creation_method+a+")"):(a=re(d.skipped_arg)?k:"("+d.step+")","(("+d.range.$inspect()+")."+d.creation_method+a+")")}),A(z,"===","=="),A(z,"eql?","==")}(q,q,R)},Opal.modules["corelib/enumerator/chain"]=function(l){var A,L,H,ee=l.deny_frozen_access,re=l.klass,$=l.slice,K=l.def,Q=l.send,N=l.to_a,x=l.truthy,B=l.rb_plus,E=l.thrower,W=l.nil,U=l.$$$;return H=re("::",null,"Enumerator"),(L=(A=re(H,H,"Chain")).$$prototype).enums=L.iterated=W,K(A,"$initialize",function(T){var b,g=this;return b=$(arguments),ee(g),g.enums=b,g.iterated=[],g.object=g},-1),K(A,"$each",function k(T){var b,g,I=k.$$p||W,q=this;return k.$$p=null,b=$(arguments),g=b,I===W?Q(q,"to_enum",["each"].concat(N(g)),function R(){return(null==R.$$s?this:R.$$s).$size()},{$$s:q}):(Q(q.enums,"each",[],function R(_){var p=null==R.$$s?this:R.$$s;return null==p.iterated&&(p.iterated=W),null==_&&(_=W),p.iterated["$<<"](_),Q(_,"each",N(g),I.$to_proc())},{$$s:q}),q)},-1),K(A,"$size",function(T){try{var b,g,I=E("return"),R=W;return b=$(arguments),g=b,R=0,Q(this.enums,"each",[],function(p){var f;return null==p&&(p=W),f=Q(p,"size",N(g)),x([W,U(U("Float"),"INFINITY")]["$include?"](f))&&I.$throw(f),R=B(R,f)},{$$ret:I}),R}catch(_){if(_===I)return _.$v;throw _}},-1),K(A,"$rewind",function(){var T=this;return Q(T.iterated,"reverse_each",[],function(b){return null==b&&(b=W),x(b["$respond_to?"]("rewind"))?b.$rewind():W}),T.iterated=[],T}),K(A,"$inspect",function(){return"#<Enumerator::Chain: "+this.enums.$inspect()+">"})},Opal.modules["corelib/enumerator/generator"]=function(l){var Y,L,k,T,I,F,ee=l.deny_frozen_access,re=l.klass,$=l.truthy,K=l.Kernel,Q=l.def,N=l.slice,x=l.send,B=[],E=l.nil,W=l.$$$;return Y=B,L=F=[re(B[0],null,"Enumerator")].concat(Y),T=[k=re(F[0],null,"Generator")].concat(L),I=l.$r(T),k.$$prototype.block=E,k.$include(W("Enumerable")),Q(k,"$initialize",function g(){var q=g.$$p||E;return g.$$p=null,ee(this),$(q)||K.$raise(W("LocalJumpError"),"no block given"),this.block=q}),Q(k,"$each",function g(q){var p,z,R=g.$$p||E;g.$$p=null,p=N(arguments),z=x(I("Yielder"),"new",[],R.$to_proc());try{p.unshift(z),l.yieldX(this.block,p)}catch(v){if(v&&"breaker"==v.$thrower_type)return v.$v;throw v}return this},-1)},Opal.modules["corelib/enumerator/lazy"]=function(l){var _,S,m,M,h,p,ee=l.truthy,re=l.coerce_to,$=l.yield1,K=l.yieldX,Q=l.deny_frozen_access,N=l.klass,x=l.slice,B=l.send2,E=l.find_super,W=l.to_a,U=l.defs,J=l.Kernel,Y=l.send,H=l.def,F=l.return_self,y=l.Opal,A=l.rb_lt,L=l.eqeqeq,k=l.rb_plus,T=l.alias,b=l.nil,g=l.$$$;return _=[],S=[p=N("::",null,"Enumerator")].concat(_),M=[m=N(p,p,"Lazy")].concat(S),h=l.$r(M),m.$$prototype.enumerator=b,N(m,g("Exception"),"StopLazyError"),U(m,"$for",function a(r,e){var t,s=a.$$p||b,c=b;return a.$$p=null,t=x(arguments,1),(c=B(this,E(this,"for",a,!1,!0),"for",[r].concat(W(t)),s)).enumerator=r,c},-2),H(m,"$initialize",function a(r,e){var n=a.$$p||b,t=this;return a.$$p=null,null==e&&(e=b),Q(t),n===b&&J.$raise(g("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=r,B(t,E(t,"initialize",a,!1,!0),"initialize",[e],function(i,c){var j;null==i&&(i=b),j=x(arguments,1);try{return Y(r,"each",W(j),function(O){var ne;(ne=x(arguments)).unshift(i),K(n,ne)},-1)}catch(C){if(!l.rescue(C,[h("StopLazyError")]))throw C;try{return b}finally{l.pop_exception()}}},-2)},-2),H(m,"$lazy",F),H(m,"$collect",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||J.$raise(g("ArgumentError"),"tried to call lazy map without a block"),Y(h("Lazy"),"new",[this,this.$enumerator_size()],function(t,s){var i;null==t&&(t=b),i=x(arguments,1);var o=K(r,i);t.$yield(o)},-2)}),H(m,"$collect_concat",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||J.$raise(g("ArgumentError"),"tried to call lazy map without a block"),Y(h("Lazy"),"new",[this,b],function(t,s){var i;null==t&&(t=b),i=x(arguments,1);var o=K(r,i);o["$respond_to?"]("force")&&o["$respond_to?"]("each")?Y(o,"each",[],function(O){return null==O&&(O=b),t.$yield(O)}):y.$try_convert(o,g("Array"),"to_ary")===b?t.$yield(o):Y(o,"each",[],function(O){return null==O&&(O=b),t.$yield(O)})},-2)}),H(m,"$drop",function(r){var n,t,s=b;return r=re(r,g("Integer"),"to_int"),ee(A(r,0))&&J.$raise(g("ArgumentError"),"attempt to drop negative size"),n=this.$enumerator_size(),t=L(g("Integer"),n)&&ee(A(r,n))?r:n,s=0,Y(h("Lazy"),"new",[this,t],function(c,o){var C;return null==c&&(c=b),C=x(arguments,1),ee(A(s,r))?s=k(s,1):Y(c,"yield",W(C))},-2)}),H(m,"$drop_while",function a(){var r=a.$$p||b,n=b;return a.$$p=null,ee(r)||J.$raise(g("ArgumentError"),"tried to call lazy drop_while without a block"),n=!0,Y(h("Lazy"),"new",[this,b],function(s,i){var o;if(null==s&&(s=b),o=x(arguments,1),!ee(n))return Y(s,"yield",W(o));var j=K(r,o);ee(j)||(n=!1,Y(s,"yield",W(o)))},-2)}),H(m,"$enum_for",function a(r,e){var t,s,i,n=a.$$p||b,c=this;return a.$$p=null,(t=x(arguments)).length>0&&(s=t.shift()),null==s&&(s="each"),i=t,Y(c.$class(),"for",[c,s].concat(W(i)),n.$to_proc())},-1),H(m,"$find_all",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||J.$raise(g("ArgumentError"),"tried to call lazy select without a block"),Y(h("Lazy"),"new",[this,b],function(t,s){var i,c;null==t&&(t=b),i=x(arguments,1);var o=K(r,c=i);ee(o)&&Y(t,"yield",W(c))},-2)}),H(m,"$grep",function a(r){var e=a.$$p||b;return a.$$p=null,ee(e)?Y(h("Lazy"),"new",[this,b],function(s,i){var c;null==s&&(s=b),c=x(arguments,1);var j=y.$destructure(c),C=r["$==="](j);ee(C)&&(C=$(e,j),s.$yield($(e,j)))},-2):Y(h("Lazy"),"new",[this,b],function(s,i){var c;null==s&&(s=b),c=x(arguments,1);var j=y.$destructure(c),C=r["$==="](j);ee(C)&&s.$yield(j)},-2)}),H(m,"$reject",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||J.$raise(g("ArgumentError"),"tried to call lazy reject without a block"),Y(h("Lazy"),"new",[this,b],function(t,s){var i,c;null==t&&(t=b),i=x(arguments,1);var o=K(r,c=i);ee(o)||Y(t,"yield",W(c))},-2)}),H(m,"$take",function(r){var n,t,s=b;return r=re(r,g("Integer"),"to_int"),ee(A(r,0))&&J.$raise(g("ArgumentError"),"attempt to take negative size"),n=this.$enumerator_size(),t=L(g("Integer"),n)&&ee(A(r,n))?r:n,s=0,Y(h("Lazy"),"new",[this,t],function(c,o){var C;return null==c&&(c=b),C=x(arguments,1),ee(A(s,r))?(Y(c,"yield",W(C)),s=k(s,1)):J.$raise(h("StopLazyError"))},-2)}),H(m,"$take_while",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||J.$raise(g("ArgumentError"),"tried to call lazy take_while without a block"),Y(h("Lazy"),"new",[this,b],function(t,s){var i,c;null==t&&(t=b),i=x(arguments,1);var o=K(r,c=i);ee(o)?Y(t,"yield",W(c)):J.$raise(h("StopLazyError"))},-2)}),H(m,"$inspect",function(){return"#<"+this.$class()+": "+this.enumerator.$inspect()+">"}),T(m,"force","to_a"),T(m,"filter","find_all"),T(m,"flat_map","collect_concat"),T(m,"map","collect"),T(m,"select","find_all"),T(m,"to_enum","enum_for")},Opal.modules["corelib/enumerator/yielder"]=function(l){var W,F,J,ee=l.klass,re=l.def,$=l.slice,K=l.send,Q=l.to_a,N=[],x=l.nil;return W=N,J=[ee(N[0],null,"Enumerator")].concat(W),(F=ee(J[0],null,"Yielder")).$$prototype.block=x,re(F,"$initialize",function A(){var L=A.$$p||x;return A.$$p=null,this.block=L,this}),re(F,"$yield",function(L){var k;k=$(arguments);var b=l.yieldX(this.block,k);if(b&&"break"==b.$thrower_type)throw b;return b},-1),re(F,"$<<",function(L){return this.$yield(L),this}),re(F,"$to_proc",function(){return K(this,"proc",[],function k(T){var I,g=null==k.$$s?this:k.$$s;return I=$(arguments),K(g,"yield",Q(I))},{$$arity:-1,$$s:this})})},Opal.modules["corelib/enumerator"]=function(l){var R,_,p,f,z,ee=l.slice,re=l.coerce_to,$=l.deny_frozen_access,K=l.klass,Q=l.defs,N=l.truthy,x=l.send,B=l.not,E=l.def,W=l.rb_plus,U=l.to_a,J=l.Opal,Y=l.send2,H=l.find_super,F=l.rb_ge,y=l.Kernel,A=l.rb_le,L=l.alias,I=l.nil,b=l.$$$;return l.top.$require("corelib/enumerable"),R=[],p=[_=K("::",null,"Enumerator")].concat(R),f=l.$r(p),(z=_.$$prototype).size=z.args=z.object=z.method=z.values=z.cursor=I,_.$include(b("Enumerable")),_.$$prototype.$$is_enumerator=!0,Q(_,"$for",function v(S,m,M){var d,a,r,h=v.$$p||I;v.$$p=null,(d=ee(arguments,1)).length>0&&(a=d.shift()),null==a&&(a="each"),r=d;var n=this.$allocate();return n.object=S,n.size=h,n.method=a,n.args=r,n.cursor=0,n},-2),E(_,"$initialize",function v(S){var m=v.$$p||I,d=this;return v.$$p=null,ee(arguments),$(d),d.cursor=0,N(m)?(d.object=x(f("Generator"),"new",[],m.$to_proc()),d.method="each",d.args=[],d.size=arguments[0]||I,N(d.size)&&B(d.size["$respond_to?"]("call"))?d.size=re(d.size,b("Integer"),"to_int"):I):(d.object=arguments[0],d.method=arguments[1]||"each",d.args=ee(arguments,2),d.size=I)},-1),E(_,"$each",function v(S){var h,m=v.$$p||I,d=this;return v.$$p=null,h=ee(arguments),N(m["$nil?"]())&&N(h["$empty?"]())?d:(h=W(d.args,h),N(m["$nil?"]())?x(d.$class(),"new",[d.object,d.method].concat(U(h))):x(d.object,"__send__",[d.method].concat(U(h)),m.$to_proc()))},-1),E(_,"$size",function(){var S=this;return N(S.size["$respond_to?"]("call"))?x(S.size,"call",U(S.args)):S.size}),E(_,"$with_index",function v(S){var m=v.$$p||I,M=this;if(v.$$p=null,null==S&&(S=0),S=N(S)?re(S,b("Integer"),"to_int"):0,!N(m))return x(M,"enum_for",["with_index",S],function a(){return(null==a.$$s?this:a.$$s).$size()},{$$s:M});var d=S;return M.$each.$$p=function(){var a=J.$destructure(arguments),r=m(a,d);return d++,r},M.$each()},-1),E(_,"$each_with_index",function v(){var S=v.$$p||I,m=this;return v.$$p=null,S===I?x(m,"enum_for",["each_with_index"],function M(){return(null==M.$$s?this:M.$$s).$size()},{$$s:m}):(Y(m,H(m,"each_with_index",v,!1,!0),"each_with_index",[],S),m.object)}),E(_,"$rewind",function(){return this.cursor=0,this}),E(_,"$peek_values",function(){var m,S=this;return S.values=N(m=S.values)?m:x(S,"map",[],function(h){return ee(arguments)},-1),N(F(S.cursor,S.values.$length()))&&y.$raise(b("StopIteration"),"iteration reached an end"),S.values["$[]"](S.cursor)}),E(_,"$peek",function(){var m=I;return m=this.$peek_values(),N(A(m.$length(),1))?m["$[]"](0):m}),E(_,"$next_values",function(){var m,S=this;return m=S.$peek_values(),S.cursor=W(S.cursor,1),m}),E(_,"$next",function(){var m=I;return m=this.$next_values(),N(A(m.$length(),1))?m["$[]"](0):m}),E(_,"$feed",function(S){return this.$raise(f("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),E(_,"$+",function(S){return b(b("Enumerator"),"Chain").$new(this,S)}),E(_,"$inspect",function(){var S=this,m=I;return m="#<"+S.$class()+": "+S.object.$inspect()+":"+S.method,N(S.args["$any?"]())&&(m=W(m,"("+S.args.$inspect()["$[]"](b("Range").$new(1,-2))+")")),W(m,">")}),L(_,"with_object","each_with_object"),_.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),_.$autoload("Chain","corelib/enumerator/chain"),_.$autoload("Generator","corelib/enumerator/generator"),_.$autoload("Lazy","corelib/enumerator/lazy"),_.$autoload("Yielder","corelib/enumerator/yielder")},Opal.modules["corelib/numeric"]=function(l){var z,ee=l.klass,re=l.truthy,$=l.Kernel,K=l.def,Q=l.to_ary,N=l.return_self,x=l.rb_minus,B=l.rb_times,E=l.rb_lt,W=l.eqeq,U=l.rb_divide,J=l.return_val,Y=l.Opal,H=l.slice,F=l.extract_kwargs,y=l.ensure_kwargs,A=l.not,L=l.send,k=l.rb_ge,T=l.rb_le,I=l.rb_plus,b=l.rb_gt,g=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/comparable"),(z=ee("::",null,"Numeric")).$include(_("Comparable")),K(z,"$coerce",function(S){var m=this;return re(S["$instance_of?"](m.$class()))?[S,m]:[$.$Float(S),$.$Float(m)]}),K(z,"$__coerced__",function(S,m){var M,h;if(re(m["$respond_to?"]("coerce")))return h=m.$coerce(this),(null==(M=Q(h))[0]?R:M[0]).$__send__(S,null==M[1]?R:M[1]);switch(S.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return $.$raise(_("TypeError"),m.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return $.$raise(_("ArgumentError"),"comparison of "+this.$class()+" with "+m.$class()+" failed");default:return R}}),K(z,"$<=>",function(S){return re(this["$equal?"](S))?0:R}),K(z,"$+@",N),K(z,"$-@",function(){return x(0,this)}),K(z,"$%",function(S){return x(this,B(S,this.$div(S)))}),K(z,"$abs",function(){var S=this;return E(S,0)?S["$-@"]():S}),K(z,"$abs2",function(){return B(this,this)}),K(z,"$angle",function(){return E(this,0)?_(_("Math"),"PI"):0}),K(z,"$ceil",function(S){return null==S&&(S=0),this.$to_f().$ceil(S)},-1),K(z,"$conj",N),K(z,"$denominator",function(){return this.$to_r().$denominator()}),K(z,"$div",function(S){return W(S,0)&&$.$raise(_("ZeroDivisionError"),"divided by o"),U(this,S).$floor()}),K(z,"$divmod",function(S){return[this.$div(S),this["$%"](S)]}),K(z,"$fdiv",function(S){return U(this.$to_f(),S)}),K(z,"$floor",function(S){return null==S&&(S=0),this.$to_f().$floor(S)},-1),K(z,"$i",function(){return $.$Complex(0,this)}),K(z,"$imag",J(0)),K(z,"$integer?",J(!1)),K(z,"$nonzero?",function(){return re(this["$zero?"]())?R:this}),K(z,"$numerator",function(){return this.$to_r().$numerator()}),K(z,"$polar",function(){return[this.$abs(),this.$arg()]}),K(z,"$quo",function(S){return U(Y["$coerce_to!"](this,_("Rational"),"to_r"),S)}),K(z,"$real",N),K(z,"$real?",J(!0)),K(z,"$rect",function(){return[this,0]}),K(z,"$round",function(S){return this.$to_f().$round(S)},-1),K(z,"$step",function v(S,m,M){var d,a,r,e,n,t,h=v.$$p||R,s=this,i=R;function c(){e===R&&$.$raise(_("TypeError"),"step must be numeric"),null!=e&&e["$=="](0)&&$.$raise(_("ArgumentError"),"step can't be 0"),(e===R||null==e)&&(e=1);var ue=e["$<=>"](0);ue===R&&$.$raise(_("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===R||null==r)&&(r=ue>0?_(_("Float"),"INFINITY"):_(_("Float"),"INFINITY")["$-@"]()),Y.$compare(s,r)}function o(){if(e>0&&s>r||e<0&&s<r)return 0;if(e===1/0||e===-1/0)return 1;var ue=Math.abs,ie=Math.floor,X=(ue(s)+ue(r)+ue(r-s))/ue(e)*_(_("Float"),"EPSILON");return X===1/0||X===-1/0?0:(X>.5&&(X=.5),ie((r-s)/e+X)+1)}if(v.$$p=null,d=H(arguments),a=F(d),a=y(a),d.length>0&&(r=d.shift()),d.length>0&&(e=d.shift()),n=a.$$smap.to,t=a.$$smap.by,void 0!==r&&void 0!==n&&$.$raise(_("ArgumentError"),"to is given twice"),void 0!==e&&void 0!==t&&$.$raise(_("ArgumentError"),"step is given twice"),void 0!==n&&(r=n),void 0!==t&&(e=t),void 0===r&&(r=R),h===R)return(A(r)||re(r["$is_a?"](_("Numeric"))))&&(A(e)||re(e["$is_a?"](_("Numeric"))))?_(_("Enumerator"),"ArithmeticSequence").$new([r,e,re(n)?"to: ":R,re(t)?"by: ":R],s):L(s,"enum_for",["step",r,e],function j(){if(c(),0===e)return 1/0;if(e%1!=0)return o();if(e>0&&s>r||e<0&&s<r)return 0;var ue=Math.ceil,ie=Math.abs;return ue((ie(s-r)+1)/ie(e))}.$to_proc());c();var C=e["$negative?"](),O=e["$=="](0)||r===1/0&&!C||r===-1/0&&C;if(s.$$is_number&&e.$$is_number&&r.$$is_number){if(s%1!=0||!O&&r%1!=0||e%1!=0){var ne=s.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var ae=o();if(isFinite(e))if(0===e)for(;;)h(ne);else for(var le=0;le<ae;le++){var oe=le*e+s;(e>=0?r<oe:r>oe)&&(oe=r),h(oe)}else 0!==ae&&h(ne);return s}var te=s;if(O)for(;;te+=e)h(te);else if(C)for(;te>=r;te+=e)h(te);else for(;te<=r;te+=e)h(te);return s}for(i=s;re(C?k(i,r):T(i,r));)l.yield1(h,i),i=I(i,e)},-1),K(z,"$to_c",function(){return $.$Complex(this,0)}),K(z,"$to_int",function(){return this.$to_i()}),K(z,"$truncate",function(S){return null==S&&(S=0),this.$to_f().$truncate(S)},-1),K(z,"$zero?",function(){return this["$=="](0)}),K(z,"$positive?",function(){return b(this,0)}),K(z,"$negative?",function(){return E(this,0)}),K(z,"$dup",N),K(z,"$clone",function(S){return S=y(S),this},-1),K(z,"$finite?",J(!0)),K(z,"$infinite?",J(R)),g(z,"arg","angle"),g(z,"conjugate","conj"),g(z,"imaginary","imag"),g(z,"magnitude","abs"),g(z,"modulo","%"),g(z,"phase","arg"),g(z,"rectangular","rect")},Opal.modules["corelib/array"]=function(l){var ee=l.truthy,re=l.falsy,$=l.hash_ids,K=l.yield1,Q=l.hash_get,N=l.hash_put,x=l.hash_delete,B=l.coerce_to,E=l.respond_to,W=l.deny_frozen_access,U=l.freeze,J=l.klass,Y=l.slice,H=l.defs,F=l.Kernel,y=l.def,A=l.Opal,L=l.eqeqeq,k=l.hash2,T=l.send2,I=l.find_super,b=l.send,g=l.rb_gt,q=l.rb_times,R=l.eqeq,_=l.rb_minus,p=l.to_a,f=l.to_ary,z=l.gvars,v=l.rb_ge,S=l.assign_ivar,m=l.rb_lt,M=l.return_self,h=l.neqeq,d=l.alias,a=l.top,e=l.nil,n=l.$$$;return a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(t,s,i){var c=J("::",Array,"Array"),o=[c].concat([]),j=l.$r(o);function te(X,D,V){for(var Z,u=null,w=new Array(X.length),P=0,G=0,se=X.length;P<se;P++){if(!u)try{Z=K(V,X[P])}catch($e){u=$e}(u||D(Z))&&(w[G]=X[P],G+=1)}if(G!==P&&(X.splice.apply(X,[0,w.length].concat(w)),X.splice(G,w.length)),u)throw u}function ne(X,D){var Z,u,w,V=X.length;return Z=D.excl,u=D.begin===e?0:B(D.begin,l.Integer,"to_int"),w=D.end===e?-1:B(D.end,l.Integer,"to_int"),u<0&&(u+=V)<0||(D.excl_rev&&D.begin!==e&&(u+=1),u>V)?e:w<0&&(w+=V)<0?[]:((!Z||D.end===e)&&(w+=1),X.slice(u,w))}function oe(X,D){return X===D||0===D?1:D>0&&X>D?oe(X-1,D-1)+oe(X-1,D):0}c.$include(n("Enumerable")),l.prop(c.$$prototype,"$$is_array",!0),H(c,"$[]",function(D){return function O(X,D){return D.$$name===l.Array?X:D.$allocate().$replace(X.$to_a())}(Y(arguments),this)},-1),y(c,"$initialize",function X(D,V){var w,P,Z=X.$$p||e,u=this;if(X.$$p=null,null==D&&(D=e),null==V&&(V=e),W(u),V!==e&&Z!==e&&F.$warn("warning: block supersedes default value argument"),D>n(n("Integer"),"MAX")&&F.$raise(n("ArgumentError"),"array size too big"),arguments.length>2&&F.$raise(n("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return u.splice(0,u.length),u;if(1===arguments.length){if(D.$$is_array)return u.$replace(D.$to_a()),u;if(D["$respond_to?"]("to_ary"))return u.$replace(D.$to_ary()),u}if((D=B(D,n("Integer"),"to_int"))<0&&F.$raise(n("ArgumentError"),"negative array size"),u.splice(0,u.length),Z===e)for(w=0;w<D;w++)u.push(V);else for(w=0;w<D;w++)P=Z(w),u[w]=P;return u},-1),H(c,"$try_convert",function(D){return A["$coerce_to?"](D,n("Array"),"to_ary")}),y(c,"$&",function(D){D=L(n("Array"),D)?D.$to_a():B(D,n("Array"),"to_ary").$to_a();var w,P,G,Z=[],u=k([],{});for(w=0,P=D.length;w<P;w++)N(u,D[w],!0);for(w=0,P=this.length;w<P;w++)void 0!==x(u,G=this[w])&&Z.push(G);return Z}),y(c,"$|",function(D){D=L(n("Array"),D)?D.$to_a():B(D,n("Array"),"to_ary").$to_a();var u,w,Z=k([],{});for(u=0,w=this.length;u<w;u++)N(Z,this[u],!0);for(u=0,w=D.length;u<w;u++)N(Z,D[u],!0);return Z.$keys()}),y(c,"$*",function(D){if(ee(D["$respond_to?"]("to_str")))return this.$join(D.$to_str());D=B(D,n("Integer"),"to_int"),ee(D<0)&&F.$raise(n("ArgumentError"),"negative argument");for(var Z=[],u=this.$to_a(),w=0;w<D;w++)Z=Z.concat(u);return Z}),y(c,"$+",function(D){return D=L(n("Array"),D)?D.$to_a():B(D,n("Array"),"to_ary").$to_a(),this.concat(D)}),y(c,"$-",function(D){var V=this;if(D=L(n("Array"),D)?D.$to_a():B(D,n("Array"),"to_ary").$to_a(),ee(0===V.length))return[];if(ee(0===D.length))return V.slice();var w,P,G,Z=[],u=k([],{});for(w=0,P=D.length;w<P;w++)N(u,D[w],!0);for(w=0,P=V.length;w<P;w++)void 0===Q(u,G=V[w])&&Z.push(G);return Z}),y(c,"$<<",function(D){var V=this;return W(V),V.push(D),V}),y(c,"$<=>",function(D){var V=this;if(L(n("Array"),D))D=D.$to_a();else{if(!ee(D["$respond_to?"]("to_ary")))return e;D=D.$to_ary().$to_a()}if(V.$hash()===D.$hash())return 0;for(var Z=Math.min(V.length,D.length),u=0;u<Z;u++){var w=V[u]["$<=>"](D[u]);if(0!==w)return w}return V.length["$<=>"](D.length)}),y(c,"$==",function(D){var Z={};return function u(w,P){var G,se,$e,ce;if(w===P)return!0;if(!P.$$is_array)return!!E(P,"$to_ary")&&P["$=="](w);if(w.$$constructor!==Array&&(w=w.$to_a()),P.$$constructor!==Array&&(P=P.$to_a()),w.length!==P.length)return!1;for(Z[w.$object_id()]=!0,G=0,se=w.length;G<se;G++)if(ce=P[G],($e=w[G]).$$is_array){if(ce.$$is_array&&ce.length!==$e.length||!Z.hasOwnProperty($e.$object_id())&&!u($e,ce))return!1}else if(!$e["$=="](ce))return!1;return!0}(this,D)}),y(c,"$[]",function(D,V){var Z=this;return D.$$is_range?ne(Z,D):D.$$is_arithmetic_seq?function ae(X,D){var V,Z=[],u=0;for(V=D.step<0?ne(X,{begin:D.range.end,end:D.range.begin,excl:!1,excl_rev:D.range.excl}).$reverse():ne(X,D.range);u<V.length;)Z.push(V[u]),u+=Math.abs(D.step);return Z}(Z,D):function le(X,D,V){var Z=X.length;return(D=B(D,l.Integer,"to_int"))<0&&(D+=Z)<0?e:void 0===V?D>=Z||D<0?e:X[D]:(V=B(V,l.Integer,"to_int"))<0||D>Z||D<0?e:X.slice(D,D+V)}(Z,D,V)},-2),y(c,"$[]=",function(D,V,Z){var u=this,w=e,P=e;W(u),w=e;var G,_e,se=u.length;if(D.$$is_range){w=V.$$is_array?V.$to_a():V["$respond_to?"]("to_ary")?V.$to_ary().$to_a():[V];var $e=D.excl,ce=D.begin===e?0:B(D.begin,l.Integer,"to_int"),fe=D.end===e?-1:B(D.end,l.Integer,"to_int");if(ce<0&&(ce+=se)<0&&F.$raise(n("RangeError"),D.$inspect()+" out of range"),fe<0&&(fe+=se),(!$e||D.end===e)&&(fe+=1),ce>se)for(G=se;G<ce;G++)u[G]=e;return u.splice.apply(u,fe<0?[ce,0].concat(w):[ce,fe-ce].concat(w)),V}if(void 0===Z?P=1:(P=V,w=(V=Z).$$is_array?V.$to_a():V["$respond_to?"]("to_ary")?V.$to_ary().$to_a():[V]),D=B(D,n("Integer"),"to_int"),P=B(P,n("Integer"),"to_int"),D<0&&(_e=D,(D+=se)<0&&F.$raise(n("IndexError"),"index "+_e+" too small for array; minimum "+-u.length)),P<0&&F.$raise(n("IndexError"),"negative length ("+P+")"),D>se)for(G=se;G<D;G++)u[G]=e;return void 0===Z?u[D]=V:u.splice.apply(u,[D,P].concat(w)),V},-3),y(c,"$any?",function X(D){var V=X.$$p||e,Z=this;return X.$$p=null,0!==Z.length&&T(Z,I(Z,"any?",X,!1,!0),"any?",[D],V)},-1),y(c,"$assoc",function(D){for(var w,Z=0,u=this.length;Z<u;Z++)if((w=this[Z]).length&&w[0]["$=="](D))return w;return e}),y(c,"$at",function(D){var V=this;return(D=B(D,n("Integer"),"to_int"))<0&&(D+=V.length),D<0||D>=V.length?e:V[D]}),y(c,"$bsearch_index",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return V.$enum_for("bsearch_index");for(var w,G,Z=0,u=V.length,se=!1,$e=e;Z<u;){if(w=Z+Math.floor((u-Z)/2),!0===(G=K(D,V[w])))$e=w,se=!0;else if(!1===G||G===e)se=!1;else if(G.$$is_number){if(0===G)return w;se=G<0}else F.$raise(n("TypeError"),"wrong argument type "+G.$class()+" (must be numeric, true, false or nil)");se?u=w:Z=w+1}return $e}),y(c,"$bsearch",function X(){var D=X.$$p||e,V=this,Z=e;return X.$$p=null,D===e?V.$enum_for("bsearch"):null!=(Z=b(V,"bsearch_index",[],D.$to_proc()))&&Z.$$is_number?V[Z]:Z}),y(c,"$cycle",function X(D){var u,w,V=X.$$p||e,Z=this;if(X.$$p=null,null==D&&(D=e),V===e)return b(Z,"enum_for",["cycle",D],function G(){var se=null==G.$$s?this:G.$$s;return ee(D["$nil?"]())?n(n("Float"),"INFINITY"):(D=A["$coerce_to!"](D,n("Integer"),"to_int"),ee(g(D,0))?q(se.$enumerator_size(),D):0)},{$$s:Z});if(ee(Z["$empty?"]())||R(D,0))return e;if(D===e)for(;;)for(u=0,w=Z.length;u<w;u++)K(V,Z[u]);else{if((D=A["$coerce_to!"](D,n("Integer"),"to_int"))<=0)return Z;for(;D>0;){for(u=0,w=Z.length;u<w;u++)K(V,Z[u]);D--}}return Z},-1),y(c,"$clear",function(){var D=this;return W(D),D.splice(0,D.length),D}),y(c,"$count",function X(D){var V=X.$$p||e,Z=this;return X.$$p=null,ee(void 0!==D)||ee(V)?T(Z,I(Z,"count",X,!1,!0),"count",[D],V):Z.$size()},-1),y(c,"$initialize_copy",function(D){return this.$replace(D)}),y(c,"$collect",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["collect"],function G(){return(null==G.$$s?this:G.$$s).$size()},{$$s:V});for(var Z=[],u=0,w=V.length;u<w;u++){var P=K(D,V[u]);Z.push(P)}return Z}),y(c,"$collect!",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["collect!"],function P(){return(null==P.$$s?this:P.$$s).$size()},{$$s:V});W(V);for(var Z=0,u=V.length;Z<u;Z++){var w=K(D,V[Z]);V[Z]=w}return V}),y(c,"$combination",function X(D){var u,w,P,G,se,$e,ce,fe,V=X.$$p||e,Z=this;if(X.$$p=null,u=A["$coerce_to!"](D,n("Integer"),"to_int"),V===e)return b(Z,"enum_for",["combination",u],function _e(){return oe((null==_e.$$s?this:_e.$$s).length,u)},{$$s:Z});if(0===u)l.yield1(V,[]);else if(1===u)for(w=0,P=Z.length;w<P;w++)l.yield1(V,[Z[w]]);else if(u===Z.length)l.yield1(V,Z.slice());else if(u>=0&&u<Z.length){for(G=[],w=0;w<=u+1;w++)G.push(0);for(se=[],$e=0,ce=!1,G[0]=-1;!ce;){for(se[$e]=Z[G[$e+1]];$e<u-1;)fe=G[1+ ++$e]=G[$e]+1,se[$e]=Z[fe];l.yield1(V,se.slice()),$e++;do{ce=0===$e,G[$e]++,$e--}while(G[$e+1]+u===Z.length+$e+1)}}return Z}),y(c,"$repeated_combination",function X(D){var u,V=X.$$p||e,Z=this;return X.$$p=null,u=A["$coerce_to!"](D,n("Integer"),"to_int"),V===e?b(Z,"enum_for",["repeated_combination",u],function P(){return oe((null==P.$$s?this:P.$$s).length+u-1,u)},{$$s:Z}):(u>=0&&function w(P,G,se,$e){if(se.length!=P)for(var fe=G;fe<$e.length;fe++)se.push($e[fe]),w(P,fe,se,$e),se.pop();else{var ce=se.slice();l.yield1(V,ce)}}(u,0,[],Z),Z)}),y(c,"$compact",function(){for(var w,V=[],Z=0,u=this.length;Z<u;Z++)(w=this[Z])!==e&&V.push(w);return V}),y(c,"$compact!",function(){var D=this;W(D);for(var V=D.length,Z=0,u=D.length;Z<u;Z++)D[Z]===e&&(D.splice(Z,1),u--,Z--);return D.length===V?e:D}),y(c,"$concat",function(D){var Z,u=this;return Z=Y(arguments),W(u),Z=b(Z,"map",[],function w(P){var G=null==w.$$s?this:w.$$s;return null==P&&(P=e),P=L(n("Array"),P)?P.$to_a():B(P,n("Array"),"to_ary").$to_a(),ee(P["$equal?"](G))&&(P=P.$dup()),P},{$$s:u}),b(Z,"each",[],function w(P){var G=null==w.$$s?this:w.$$s;null==P&&(P=e);for(var se=0,$e=P.length;se<$e;se++)G.push(P[se])},{$$s:u}),u},-1),y(c,"$delete",function X(D){var V=X.$$p||e,Z=this;X.$$p=null;for(var u=Z.length,w=0,P=u;w<P;w++)Z[w]["$=="](D)&&(W(Z),Z.splice(w,1),P--,w--);return Z.length===u?V!==e?l.yieldX(V,[]):e:D}),y(c,"$delete_at",function(D){var V=this;if(W(V),(D=B(D,n("Integer"),"to_int"))<0&&(D+=V.length),D<0||D>=V.length)return e;var Z=V[D];return V.splice(D,1),Z}),y(c,"$delete_if",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["delete_if"],function Z(){return(null==Z.$$s?this:Z.$$s).$size()},{$$s:V}):(W(V),te(V,re,D),V)}),y(c,"$difference",function(D){var V;return V=Y(arguments),b(V,"reduce",[this.$to_a().$dup()],function(P,G){return null==P&&(P=e),null==G&&(G=e),_(P,G)})},-1),y(c,"$dig",function(D,V){var u,P=e;return u=Y(arguments,1),(P=this["$[]"](D))===e||0===u.length?P:(ee(P["$respond_to?"]("dig"))||F.$raise(n("TypeError"),P.$class()+" does not have #dig method"),b(P,"dig",p(u)))},-2),y(c,"$drop",function(D){return(D=B(D,n("Integer"),"to_int"))<0&&F.$raise(n("ArgumentError")),this.slice(D)}),y(c,"$dup",function X(){var D=X.$$p||e,V=this;return X.$$p=null,V.$$class===l.Array&&V.$$class.$allocate.$$pristine&&V.$copy_instance_variables.$$pristine&&V.$initialize_dup.$$pristine?V.slice(0):T(V,I(V,"dup",X,!1,!0),"dup",[],D)}),y(c,"$each",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["each"],function P(){return(null==P.$$s?this:P.$$s).$size()},{$$s:V});for(var Z=0,u=V.length;Z<u;Z++)K(D,V[Z]);return V}),y(c,"$each_index",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["each_index"],function P(){return(null==P.$$s?this:P.$$s).$size()},{$$s:V});for(var Z=0,u=V.length;Z<u;Z++)K(D,Z);return V}),y(c,"$empty?",function(){return 0===this.length}),y(c,"$eql?",function(D){var Z={};return function u(w,P){var G,se,$e,ce;if(!P.$$is_array||(P=P.$to_a(),w.length!==P.length))return!1;for(Z[w.$object_id()]=!0,G=0,se=w.length;G<se;G++)if(ce=P[G],($e=w[G]).$$is_array){if(ce.$$is_array&&ce.length!==$e.length||!Z.hasOwnProperty($e.$object_id())&&!u($e,ce))return!1}else if(!$e["$eql?"](ce))return!1;return!0}(this,D)}),y(c,"$fetch",function X(D,V){var Z=X.$$p||e,u=this;X.$$p=null;var w=D;return(D=B(D,n("Integer"),"to_int"))<0&&(D+=u.length),D>=0&&D<u.length?u[D]:(Z!==e&&null!=V&&u.$warn("warning: block supersedes default value argument"),Z!==e?Z(w):null!=V?V:void F.$raise(n("IndexError"),0===u.length?"index "+w+" outside of array bounds: 0...0":"index "+w+" outside of array bounds: -"+u.length+"..."+u.length))},-2),y(c,"$fill",function X(D){var u,w,de,he,V=X.$$p||e,G=this,se=e,$e=e,ce=e,fe=e,_e=e;if(X.$$p=null,u=Y(arguments),W(G),ee(V)?(ee(u.length>2)&&F.$raise(n("ArgumentError"),"wrong number of arguments ("+u.$length()+" for 0..2)"),se=null==(w=f(u))[0]?e:w[0],$e=null==w[1]?e:w[1]):(ee(0==u.length)?F.$raise(n("ArgumentError"),"wrong number of arguments (0 for 1..3)"):ee(u.length>3)&&F.$raise(n("ArgumentError"),"wrong number of arguments ("+u.$length()+" for 1..3)"),ce=null==(w=f(u))[0]?e:w[0],se=null==w[1]?e:w[1],$e=null==w[2]?e:w[2]),L(n("Range"),se)){if(ee($e)&&F.$raise(n("TypeError"),"length invalid with range"),fe=se.begin===e?0:B(se.begin,n("Integer"),"to_int"),ee(fe<0)&&(fe+=this.length),ee(fe<0)&&F.$raise(n("RangeError"),se.$inspect()+" out of range"),_e=se.end===e?-1:B(se.end,n("Integer"),"to_int"),ee(_e<0)&&(_e+=this.length),ee(se["$exclude_end?"]())||(_e+=1),ee(_e<=fe))return G}else if(ee(se))if(fe=B(se,n("Integer"),"to_int"),ee(fe<0)&&(fe+=this.length),ee(fe<0)&&(fe=0),ee($e)){if(_e=B($e,n("Integer"),"to_int"),ee(0==_e))return G;_e+=fe}else _e=this.length;else fe=0,_e=this.length;if(ee(fe>this.length))for(de=this.length;de<_e;de++)G[de]=e;if(ee(_e>this.length)&&(this.length=_e),ee(V))for(;fe<_e;fe++)he=V(fe),G[fe]=he;else for(;fe<_e;fe++)G[fe]=ce;return G},-1),y(c,"$first",function(D){var V=this;return null==D?0===V.length?e:V[0]:((D=B(D,n("Integer"),"to_int"))<0&&F.$raise(n("ArgumentError"),"negative array size"),V.slice(0,D))},-1),y(c,"$flatten",function(D){var V=this;return void 0!==D&&(D=B(D,n("Integer"),"to_int")),function Z(u,w){var G,se,$e,ce,P=[];for(G=0,se=(u=u.$to_a()).length;G<se;G++)if(E($e=u[G],"$to_ary",!0))if((ce=$e.$to_ary())!==e)switch(ce.$$is_array||F.$raise(n("TypeError")),ce===V&&F.$raise(n("ArgumentError")),w){case void 0:P=P.concat(Z(ce));break;case 0:P.push(ce);break;default:P.push.apply(P,Z(ce,w-1))}else P.push($e);else P.push($e);return P}(V,D)},-1),y(c,"$flatten!",function(D){var V=this;W(V);var Z=V.$flatten(D);if(V.length==Z.length){for(var u=0,w=V.length;u<w&&V[u]===Z[u];u++);if(u==w)return e}return V.$replace(Z),V},-1),y(c,"$freeze",function(){var D=this;return ee(D["$frozen?"]())?D:U(D)}),y(c,"$hash",function(){var P,G,D=this,V=void 0===$,Z=["A"],u=D.$object_id();try{if(V&&($=Object.create(null)),$[u])return"self";for(G in $)if(D["$eql?"]($[G]))return"self";for($[u]=D,P=0;P<D.length;P++)Z.push(D[P].$hash());return Z.join(",")}finally{V&&($=void 0)}}),y(c,"$include?",function(D){for(var Z=0,u=this.length;Z<u;Z++)if(this[Z]["$=="](D))return!0;return!1}),y(c,"$index",function X(D){var u,w,P,V=X.$$p||e,Z=this;if(X.$$p=null,null!=D&&V!==e&&Z.$warn("warning: given block not used"),null!=D){for(u=0,w=Z.length;u<w;u++)if(Z[u]["$=="](D))return u}else{if(V===e)return Z.$enum_for("index");for(u=0,w=Z.length;u<w;u++)if(!1!==(P=V(Z[u]))&&P!==e)return u}return e},-1),y(c,"$insert",function(D,V){var u,w=this;if(u=Y(arguments,1),W(w),D=B(D,n("Integer"),"to_int"),u.length>0){if(D<0&&(D+=w.length+1)<0&&F.$raise(n("IndexError"),D+" is out of bounds"),D>w.length)for(var P=w.length;P<D;P++)w.push(e);w.splice.apply(w,[D,0].concat(u))}return w},-2);var V,ue=[];return y(c,"$inspect",function(){var D=this,V=[],Z=D.$__id__(),u=!0;return function(){try{if(-1!==ue.indexOf(Z))return u=!1,"[...]";ue.push(Z);for(var w=0,P=D.length;w<P;w++){var G=D["$[]"](w);V.push(j("Opal").$inspect(G))}return"["+V.join(", ")+"]"}finally{u&&ue.pop()}}()}),y(c,"$intersection",function(D){var V;return V=Y(arguments),b(V,"reduce",[this.$to_a().$dup()],function(P,G){return null==P&&(P=e),null==G&&(G=e),P["$&"](G)})},-1),y(c,"$intersect?",function(D){return this.$intersection(D)["$empty?"]()["$!"]()}),y(c,"$join",function(D){var V=this;if(null==z[","]&&(z[","]=e),null==D&&(D=e),ee(0===V.length))return"";ee(D===e)&&(D=z[","]);var u,w,P,G,Z=[];for(u=0,w=V.length;u<w;u++)E(P=V[u],"$to_str")&&(G=P.$to_str())!==e?Z.push(G.$to_s()):E(P,"$to_ary")&&((G=P.$to_ary())===V&&F.$raise(n("ArgumentError")),G!==e)?Z.push(G.$join(D)):E(P,"$to_s")&&(G=P.$to_s())!==e?Z.push(G):F.$raise(n("NoMethodError").$new(j("Opal").$inspect(V.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return Z.join(D===e?"":A["$coerce_to!"](D,n("String"),"to_str").$to_s())},-1),y(c,"$keep_if",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["keep_if"],function Z(){return(null==Z.$$s?this:Z.$$s).$size()},{$$s:V}):(W(V),te(V,ee,D),V)}),y(c,"$last",function(D){var V=this;return null==D?0===V.length?e:V[V.length-1]:((D=B(D,n("Integer"),"to_int"))<0&&F.$raise(n("ArgumentError"),"negative array size"),D>V.length&&(D=V.length),V.slice(V.length-D,V.length))},-1),y(c,"$length",function(){return this.length}),y(c,"$max",function X(D){var V=X.$$p||e;return X.$$p=null,b(this.$each(),"max",[D],V.$to_proc())},-1),y(c,"$min",function X(){var D=X.$$p||e;return X.$$p=null,b(this.$each(),"min",[],D.$to_proc())}),y(c,"$permutation",function X(D){var P,G,se,V=X.$$p||e,Z=this,u=e,w=e;if(X.$$p=null,V===e)return b(Z,"enum_for",["permutation",D],function ce(){var fe=null==ce.$$s?this:ce.$$s;return function ie(X,D){for(var V=D>=0?1:0;D;)V*=X,X--,D--;return V}(fe.length,void 0===D?fe.length:D)},{$$s:Z});if(!((D=void 0===D?Z.length:B(D,n("Integer"),"to_int"))<0||Z.length<D))if(0===D)l.yield1(V,[]);else if(1===D)for(var $e=0;$e<Z.length;$e++)l.yield1(V,[Z[$e]]);else u=j("Array").$new(D),w=j("Array").$new(Z.length,!1),P=function(ce,fe,_e,de,me){Z=this;for(var he=0;he<Z.length;he++)if(de["$[]"](he)["$!"]())if(fe[_e]=he,_e<ce-1)de[he]=!0,P.call(Z,ce,fe,_e+1,de,me),de[he]=!1;else{se=[];for(var ge=0;ge<fe.length;ge++)se.push(Z[fe[ge]]);K(me,se)}},V!==e?(G=Z.slice(),P.call(G,D,u,0,w,V)):P.call(Z,D,u,0,w,V);return Z},-1),y(c,"$repeated_permutation",function X(D){var u,V=X.$$p||e,Z=this;return X.$$p=null,u=A["$coerce_to!"](D,n("Integer"),"to_int"),V===e?b(Z,"enum_for",["repeated_permutation",u],function P(){var G=null==P.$$s?this:P.$$s;return ee(v(u,0))?G.$size()["$**"](u):0},{$$s:Z}):(function w(P,G,se){if(G.length!=P)for(var ce=0;ce<se.length;ce++)G.push(se[ce]),w(P,G,se),G.pop();else{var $e=G.slice();l.yield1(V,$e)}}(u,[],Z.slice()),Z)}),y(c,"$pop",function(D){var V=this;return W(V),ee(void 0===D)?ee(0===V.length)?e:V.pop():(D=B(D,n("Integer"),"to_int"),ee(D<0)&&F.$raise(n("ArgumentError"),"negative array size"),ee(0===V.length)?[]:ee(1===D)?[V.pop()]:ee(D>V.length)?V.splice(0,V.length):V.splice(V.length-D,V.length))},-1),y(c,"$product",function X(D){var Z,u,V=X.$$p||e,w=this;X.$$p=null,Z=Y(arguments);var fe,_e,de,me,P=V!==e?null:[],G=(u=Z).length+1,se=new Array(G),$e=new Array(G),ce=new Array(G),he=1;for(ce[0]=w,fe=1;fe<G;fe++)ce[fe]=B(u[fe-1],n("Array"),"to_ary");for(fe=0;fe<G;fe++){if(0===(me=ce[fe].length))return P||w;(he*=me)>2147483647&&F.$raise(n("RangeError"),"too big to product"),$e[fe]=me,se[fe]=0}e:for(;;){for(de=[],fe=0;fe<G;fe++)de.push(ce[fe][se[fe]]);for(P?P.push(de):l.yield1(V,de),se[_e=G-1]++;se[_e]===$e[_e];){if(se[_e]=0,--_e<0)break e;se[_e]++}}return P||w},-1),y(c,"$push",function(D){var Z,u=this;Z=Y(arguments),W(u);for(var w=0,P=Z.length;w<P;w++)u.push(Z[w]);return u},-1),y(c,"$rassoc",function(D){for(var w,Z=0,u=this.length;Z<u;Z++)if((w=this[Z]).length&&void 0!==w[1]&&w[1]["$=="](D))return w;return e}),y(c,"$reject",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["reject"],function G(){return(null==G.$$s?this:G.$$s).$size()},{$$s:V});for(var P,Z=[],u=0,w=V.length;u<w;u++)(!1===(P=D(V[u]))||P===e)&&Z.push(V[u]);return Z}),y(c,"$reject!",function X(){var D=X.$$p||e,V=this,Z=e;return X.$$p=null,D===e?b(V,"enum_for",["reject!"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:V}):(W(V),Z=V.$length(),b(V,"delete_if",[],D.$to_proc()),R(V.$length(),Z)?e:V)}),y(c,"$replace",function(D){var V=this;return W(V),D=L(n("Array"),D)?D.$to_a():B(D,n("Array"),"to_ary").$to_a(),V.splice(0,V.length),V.push.apply(V,D),V}),y(c,"$reverse",function(){return this.slice(0).reverse()}),y(c,"$reverse!",function(){return W(this),this.reverse()}),y(c,"$reverse_each",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["reverse_each"],function Z(){return(null==Z.$$s?this:Z.$$s).$size()},{$$s:V}):(b(V.$reverse(),"each",[],D.$to_proc()),V)}),y(c,"$rindex",function X(D){var u,w,V=X.$$p||e,Z=this;if(X.$$p=null,null!=D&&V!==e&&Z.$warn("warning: given block not used"),null!=D){for(u=Z.length-1;u>=0&&!(u>=Z.length);u--)if(Z[u]["$=="](D))return u}else if(V!==e){for(u=Z.length-1;u>=0&&!(u>=Z.length);u--)if(!1!==(w=V(Z[u]))&&w!==e)return u}else if(null==D)return Z.$enum_for("rindex");return e},-1),y(c,"$rotate",function(D){var Z,u,w,P,V=this;return null==D&&(D=1),D=B(D,n("Integer"),"to_int"),1===V.length?V.slice():0===V.length?[]:(w=(Z=V.slice()).slice(u=D%Z.length),P=Z.slice(0,u),w.concat(P))},-1),y(c,"$rotate!",function(D){var V=this,Z=e;return null==D&&(D=1),W(V),0===V.length||1===V.length?V:(D=B(D,n("Integer"),"to_int"),Z=V.$rotate(D),V.$replace(Z))},-1),(V=J(c,null,"SampleRandom")).$$prototype.rng=e,y(V,"$initialize",S("rng")),y(V,"$rand",function(w){var G;return G=B(this.rng.$rand(w),n("Integer"),"to_int"),ee(G<0)&&F.$raise(n("RangeError"),"random value must be >= 0"),ee(G<w)||F.$raise(n("RangeError"),"random value must be less than Array size"),G}),y(c,"$sample",function(D,V){var P,G,se,$e,ce,fe,_e,de,Z=this,u=e,w=e;if(ee(void 0===D))return Z.$at(F.$rand(Z.length));if(ee(void 0===V)?ee(u=A["$coerce_to?"](D,n("Hash"),"to_hash"))?(V=u,D=e):(V=e,D=B(D,n("Integer"),"to_int")):(D=B(D,n("Integer"),"to_int"),V=B(V,n("Hash"),"to_hash")),ee(D)&&ee(D<0)&&F.$raise(n("ArgumentError"),"count must be greater than 0"),ee(V)&&(w=V["$[]"]("random")),w=ee(w)&&ee(w["$respond_to?"]("rand"))?j("SampleRandom").$new(w):F,!ee(D))return Z[w.$rand(Z.length)];switch(D>Z.length&&(D=Z.length),D){case 0:return[];case 1:return[Z[w.$rand(Z.length)]];case 2:return($e=w.$rand(Z.length))<=(ce=w.$rand(Z.length-1))&&ce++,[Z[$e],Z[ce]];default:if(Z.length/D>3){for(P=!1,G=0,$e=1,(se=j("Array").$new(D))[0]=w.$rand(Z.length);$e<D;){for(fe=w.$rand(Z.length),ce=0;ce<$e;){for(;fe===se[ce];){if(++G>100){P=!0;break}fe=w.$rand(Z.length)}if(P)break;ce++}if(P)break;se[$e]=fe,$e++}if(!P){for($e=0;$e<D;)se[$e]=Z[se[$e]],$e++;return se}}se=Z.slice();for(var me=0;me<D;me++)_e=w.$rand(Z.length-me)+me,de=se[me],se[me]=se[_e],se[_e]=de;return D===Z.length?se:se["$[]"](0,D)}},-1),y(c,"$select",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["select"],function se(){return(null==se.$$s?this:se.$$s).$size()},{$$s:V});for(var P,G,Z=[],u=0,w=V.length;u<w;u++)G=K(D,P=V[u]),ee(G)&&Z.push(P);return Z}),y(c,"$select!",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["select!"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:V});W(V);var Z=V.length;return b(V,"keep_if",[],D.$to_proc()),V.length===Z?e:V}),y(c,"$shift",function(D){var V=this;return W(V),ee(void 0===D)?ee(0===V.length)?e:function C(X){for(var D=X[0],V=1,Z=X.length;V<Z;V++)X[V-1]=X[V];return X.pop(),D}(V):(D=B(D,n("Integer"),"to_int"),ee(D<0)&&F.$raise(n("ArgumentError"),"negative array size"),ee(0===V.length)?[]:V.splice(0,D))},-1),y(c,"$shuffle",function(D){return this.$dup().$to_a()["$shuffle!"](D)},-1),y(c,"$shuffle!",function(D){var V=this;W(V);var Z,w,P,u=V.length;for(void 0!==D&&(D=A["$coerce_to?"](D,n("Hash"),"to_hash"))!==e&&(D=D["$[]"]("random"))!==e&&D["$respond_to?"]("rand")&&(Z=D);u;)Z?((w=Z.$rand(u).$to_int())<0&&F.$raise(n("RangeError"),"random number too small "+w),w>=u&&F.$raise(n("RangeError"),"random number too big "+w)):w=V.$rand(u),P=V[--u],V[u]=V[w],V[w]=P;return V},-1),y(c,"$slice!",function(D,V){var Z=this,u=e,w=e,P=e,G=e,se=e;if(W(Z),u=e,ee(void 0===V))if(L(n("Range"),D)){u=Z["$[]"](w=D),P=w.begin===e?0:B(w.begin,n("Integer"),"to_int"),G=w.end===e?-1:B(w.end,n("Integer"),"to_int"),P<0&&(P+=Z.length),G<0?G+=Z.length:G>=Z.length&&(G=Z.length-1,w.excl&&(G+=1));var $e=G-P;w.excl&&w.end!==e?G-=1:$e+=1,P<Z.length&&P>=0&&G<Z.length&&G>=0&&$e>0&&Z.splice(P,$e)}else{if((se=B(D,n("Integer"),"to_int"))<0&&(se+=Z.length),se<0||se>=Z.length)return e;u=Z[se],0===se?Z.shift():Z.splice(se,1)}else{if(se=B(D,n("Integer"),"to_int"),(V=B(V,n("Integer"),"to_int"))<0)return e;u=Z["$[]"](se,V),se<0&&(se+=Z.length),se+V>Z.length&&(V=Z.length-se),se<Z.length&&se>=0&&Z.splice(se,V)}return u},-2),y(c,"$sort",function X(){var D=X.$$p||e,V=this;return X.$$p=null,ee(V.length>1)?(D===e&&(D=function(Z,u){return Z["$<=>"](u)}),V.slice().sort(function(Z,u){var w=D(Z,u);return w===e&&F.$raise(n("ArgumentError"),"comparison of "+Z.$inspect()+" with "+u.$inspect()+" failed"),g(w,0)?1:m(w,0)?-1:0})):V}),y(c,"$sort!",function X(){var Z,D=X.$$p||e,V=this;X.$$p=null,W(V),Z=D!==e?b(V.slice(),"sort",[],D.$to_proc()):V.slice().$sort(),V.length=0;for(var u=0,w=Z.length;u<w;u++)V.push(Z[u]);return V}),y(c,"$sort_by!",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["sort_by!"],function Z(){return(null==Z.$$s?this:Z.$$s).$size()},{$$s:V}):(W(V),V.$replace(b(V,"sort_by",[],D.$to_proc())))}),y(c,"$take",function(D){return D<0&&F.$raise(n("ArgumentError")),this.slice(0,D)}),y(c,"$take_while",function X(){var D=X.$$p||e;X.$$p=null;for(var P,G,Z=[],u=0,w=this.length;u<w;u++){if(!1===(G=D(P=this[u]))||G===e)return Z;Z.push(P)}return Z}),y(c,"$to_a",function(){var D=this;return D.$$class===l.Array?D:l.Array.$new(D)}),y(c,"$to_ary",M),y(c,"$to_h",function X(){var D=X.$$p||e,Z=e;X.$$p=null,Z=this,D!==e&&(Z=b(Z,"map",[],D.$to_proc()));var u,P,w=Z.length,$e=k([],{});for(u=0;u<w;u++)(P=A["$coerce_to?"](Z[u],n("Array"),"to_ary")).$$is_array||F.$raise(n("TypeError"),"wrong element type "+P.$class()+" at "+u+" (expected array)"),2!==P.length&&F.$raise(n("ArgumentError"),"wrong array length at "+u+" (expected 2, was "+P.$length()+")"),N($e,P[0],P[1]);return $e}),y(c,"$transpose",function(){var V=e,Z=e;return ee(this["$empty?"]())?[]:(V=[],Z=e,b(this,"each",[],function(w){var P=e;return null==w&&(w=e),w=L(n("Array"),w)?w.$to_a():B(w,n("Array"),"to_ary").$to_a(),Z=ee(P=Z)?P:w.length,h(w.length,Z)&&F.$raise(n("IndexError"),"element size differs ("+w.length+" should be "+Z+")"),b(w.length,"times",[],function(se){var $e;return null==se&&(se=e),(ee(P=V["$[]"](se))?P:(b(V,"[]=",$e=[se,[]]),$e[$e.length-1]))["$<<"](w.$at(se))})}),V)}),y(c,"$union",function(D){var V;return V=Y(arguments),b(V,"reduce",[this.$uniq()],function(P,G){return null==P&&(P=e),null==G&&(G=e),P["$|"](G)})},-1),y(c,"$uniq",function X(){var D=X.$$p||e,V=this;X.$$p=null;var u,w,P,G,Z=k([],{});if(D===e)for(u=0,w=V.length;u<w;u++)void 0===Q(Z,P=V[u])&&N(Z,P,P);else for(u=0,w=V.length;u<w;u++)G=K(D,P=V[u]),void 0===Q(Z,G)&&N(Z,G,P);return Z.$values()}),y(c,"$uniq!",function X(){var D=X.$$p||e,V=this;X.$$p=null,W(V);var w,P,G,se,Z=V.length,u=k([],{});for(w=0,P=Z;w<P;w++)G=V[w],se=D===e?G:K(D,G),void 0!==Q(u,se)?(V.splice(w,1),P--,w--):N(u,se,G);return V.length===Z?e:V}),y(c,"$unshift",function(D){var Z,u=this;Z=Y(arguments),W(u);var w=u.length,P=Z.length;if(0==P)return u;for(var G=w-P,se=0;se<P;se++)u.push(u[G+se]);for(var $e=w-1;$e-P>=0;)u[$e]=u[$e-P],$e--;for(var ce=0;ce<P;ce++)u[ce]=Z[ce];return u},-1),y(c,"$values_at",function(D){var V,w=e;return V=Y(arguments),w=[],b(V,"each",[],function P(G){var se=null==P.$$s?this:P.$$s,$e=e,ce=e,fe=e;return null==G&&(G=e),ee(G["$is_a?"](n("Range")))?($e=G.$end()===e?-1:B(G.$end(),n("Integer"),"to_int"),(ce=G.$begin()===e?0:B(G.$begin(),n("Integer"),"to_int"))<0?(ce+=se.length,e):($e<0&&($e+=se.length),G["$exclude_end?"]()&&G.$end()!==e&&$e--,$e<ce?e:b(ce,"upto",[$e],function _e(de){return null==de&&(de=e),w["$<<"]((null==_e.$$s?this:_e.$$s).$at(de))},{$$s:se}))):(fe=B(G,n("Integer"),"to_int"),w["$<<"](se.$at(fe)))},{$$s:this}),w},-1),y(c,"$zip",function X(D){var Z,u,V=X.$$p||e,P=e;X.$$p=null,Z=Y(arguments);var $e,ce,fe,_e,de,G=[],se=this.length;for(_e=0,de=(u=Z).length;_e<de;_e++)if(!(ce=u[_e]).$$is_array){if(ce.$$is_range||ce.$$is_enumerator){u[_e]=ce.$take(se);continue}u[_e]=(ee(P=A["$coerce_to?"](ce,n("Array"),"to_ary"))?P:A["$coerce_to!"](ce,n("Enumerator"),"to_enum","each")).$to_a()}for(fe=0;fe<se;fe++){for($e=[this[fe]],_e=0,de=u.length;_e<de;_e++)null==(ce=u[_e][fe])&&(ce=e),$e[_e+1]=ce;G[fe]=$e}if(V!==e){for(fe=0;fe<se;fe++)l.yield1(V,G[fe]);return e}return G},-1),H(c,"$inherited",function(D){D.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),y(c,"$instance_variables",function X(){var D=X.$$p||e;return X.$$p=null,b(T(this,I(this,"instance_variables",X,!1,!0),"instance_variables",[],D),"reject",[],function(u){var w;return null==u&&(u=e),ee(w=/^@\d+$/.test(u))?w:u["$=="]("@length")})}),y(c,"$pack",function(D){return Y(arguments),F.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),d(c,"append","push"),d(c,"filter","select"),d(c,"filter!","select!"),d(c,"map","collect"),d(c,"map!","collect!"),d(c,"prepend","unshift"),d(c,"size","length"),d(c,"slice","[]"),d(c,"to_s","inspect"),A.$pristine(c.$singleton_class(),"allocate"),A.$pristine(c,"copy_instance_variables","initialize_dup")}()},Opal.modules["corelib/hash"]=function(l){var z,M,v,S,m,ee=l.yield1,re=l.hash,$=l.hash_init,K=l.hash_get,Q=l.hash_put,N=l.hash_delete,x=l.deny_frozen_access,B=l.freeze,E=l.klass,W=l.slice,U=l.Opal,J=l.Kernel,Y=l.defs,H=l.def,F=l.send,y=l.rb_ge,A=l.rb_gt,L=l.hash2,k=l.truthy,T=l.to_a,I=l.return_self,b=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),z=[],S=[v=E("::",null,"Hash")].concat(z),m=l.$r(S),v.$include(_("Enumerable")),v.$$prototype.$$is_hash=!0,Y(v,"$[]",function(d){var r,n,s,e=this,t=(r=W(arguments)).length;if(1===t){if((n=U["$coerce_to?"](r["$[]"](0),_("Hash"),"to_hash"))!==R)return e.$allocate()["$merge!"](n);for((r=U["$coerce_to?"](r["$[]"](0),_("Array"),"to_ary"))===R&&J.$raise(_("ArgumentError"),"odd number of arguments for Hash"),t=r.length,n=e.$allocate(),s=0;s<t;s++)if(r[s].$$is_array)switch(r[s].length){case 1:n.$store(r[s][0],R);break;case 2:n.$store(r[s][0],r[s][1]);break;default:J.$raise(_("ArgumentError"),"invalid number of elements ("+r[s].length+" for 1..2)")}return n}for(t%2!=0&&J.$raise(_("ArgumentError"),"odd number of arguments for Hash"),n=e.$allocate(),s=0;s<t;s+=2)n.$store(r[s],r[s+1]);return n},-1),Y(v,"$allocate",function(){var a=new this.$$constructor;return $(a),a.$$none=R,a.$$proc=R,a}),Y(v,"$try_convert",function(d){return U["$coerce_to?"](d,_("Hash"),"to_hash")}),H(v,"$initialize",function h(d){var a=h.$$p||R,r=this;return h.$$p=null,x(r),void 0!==d&&a!==R&&J.$raise(_("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=void 0===d?R:d,r.$$proc=a,r},-1),H(v,"$==",function(d){var a=this;if(a===d)return!0;if(!d.$$is_hash||a.$$keys.length!==d.$$keys.length)return!1;for(var t,s,i,r=0,e=a.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string?(s=a.$$smap[t],i=d.$$smap[t]):(s=t.value,i=K(d,t.key)),void 0===i||!s["$eql?"](i))return!1;return!0}),H(v,"$>=",function(d){var r=R;return d=U["$coerce_to!"](d,_("Hash"),"to_hash"),!(this.$$keys.length<d.$$keys.length)&&(r=!0,F(d,"each",[],function e(n,t){var i;null==n&&(n=R),null==t&&(t=R),null!=(i=(null==e.$$s?this:e.$$s).$fetch(n,null))&&i===t||(r=!1)},{$$s:this}),r)}),H(v,"$>",function(d){return d=U["$coerce_to!"](d,_("Hash"),"to_hash"),!(this.$$keys.length<=d.$$keys.length)&&y(this,d)}),H(v,"$<",function(d){return d=U["$coerce_to!"](d,_("Hash"),"to_hash"),A(d,this)}),H(v,"$<=",function(d){return d=U["$coerce_to!"](d,_("Hash"),"to_hash"),y(d,this)}),H(v,"$[]",function(d){var r=K(this,d);return void 0!==r?r:this.$default(d)}),H(v,"$[]=",function(d,a){return x(this),Q(this,d,a),a}),H(v,"$assoc",function(d){for(var t,r=0,e=this.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string){if(t["$=="](d))return[t,this.$$smap[t]]}else if(t.key["$=="](d))return[t.key,t.value];return R}),H(v,"$clear",function(){var d=this;return x(d),$(d),d}),H(v,"$clone",function(){var a=new this.$$class;return $(a),l.hash_clone(this,a),a}),H(v,"$compact",function(){for(var t,s,a=re(),r=0,e=this.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=this.$$smap[t]:(s=t.value,t=t.key),s!==R&&Q(a,t,s);return a}),H(v,"$compact!",function(){var d=this;x(d);for(var t,s,a=!1,r=0,e=d.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=d.$$smap[t]:(s=t.value,t=t.key),s===R&&void 0!==N(d,t)&&(a=!0,n--,r--);return a?d:R}),H(v,"$compare_by_identity",function(){var d=this;x(d);var a,r,e,t,n=d.$$keys;if(d.$$by_identity)return d;if(0===d.$$keys.length)return d.$$by_identity=!0,d;for(t=L([],{}).$compare_by_identity(),a=0,r=n.length;a<r;a++)(e=n[a]).$$is_string||(e=e.key),Q(t,e,K(d,e));return d.$$by_identity=!0,d.$$map=t.$$map,d.$$smap=t.$$smap,d}),H(v,"$compare_by_identity?",function(){return!0===this.$$by_identity}),H(v,"$default",function(d){var a=this;return void 0!==d&&a.$$proc!==R&&void 0!==a.$$proc?a.$$proc.$call(a,d):void 0===a.$$none?R:a.$$none},-1),H(v,"$default=",function(d){var a=this;return x(a),a.$$proc=R,a.$$none=d,d}),H(v,"$default_proc",function(){return void 0!==this.$$proc?this.$$proc:R}),H(v,"$default_proc=",function(d){var a=this;x(a);var r=d;return r!==R&&(r=U["$coerce_to!"](r,_("Proc"),"to_proc"))["$lambda?"]()&&2!==r.$arity().$abs()&&J.$raise(_("TypeError"),"default_proc takes two arguments"),a.$$none=R,a.$$proc=r,d}),H(v,"$delete",function h(d){var a=h.$$p||R;h.$$p=null,x(this);var e=N(this,d);return void 0!==e?e:a!==R?l.yield1(a,d):R}),H(v,"$delete_if",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["delete_if"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});x(a);for(var t,s,i,r=0,e=a.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=a.$$smap[t]:(s=t.value,t=t.key),!1!==(i=d(t,s))&&i!==R&&void 0!==N(a,t)&&(n--,r--);return a}),H(v,"$dig",function(d,a){var e,t=R;return e=W(arguments,1),(t=this["$[]"](d))===R||0===e.length?t:(k(t["$respond_to?"]("dig"))||J.$raise(_("TypeError"),t.$class()+" does not have #dig method"),F(t,"dig",T(e)))},-2),H(v,"$each",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["each"],function i(){return(null==i.$$s?this:i.$$s).$size()},{$$s:a});for(var t,s,r=0,e=a.$$keys.slice(),n=e.length;r<n;r++)(t=e[r]).$$is_string?s=a.$$smap[t]:(s=t.value,t=t.key),ee(d,[t,s]);return a}),H(v,"$each_key",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["each_key"],function s(){return(null==s.$$s?this:s.$$s).$size()},{$$s:a});for(var t,r=0,e=a.$$keys.slice(),n=e.length;r<n;r++)d((t=e[r]).$$is_string?t:t.key);return a}),H(v,"$each_value",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["each_value"],function s(){return(null==s.$$s?this:s.$$s).$size()},{$$s:a});for(var t,r=0,e=a.$$keys.slice(),n=e.length;r<n;r++)d((t=e[r]).$$is_string?a.$$smap[t]:t.value);return a}),H(v,"$empty?",function(){return 0===this.$$keys.length}),H(v,"$except",function(d){var r;return r=W(arguments),F(this.$dup(),"except!",T(r))},-1),H(v,"$except!",function(d){var a;return a=W(arguments),F(a,"each",[],function n(t){return null==t&&(t=R),(null==n.$$s?this:n.$$s).$delete(t)},{$$s:this}),this},-1),H(v,"$fetch",function h(d,a){var r=h.$$p||R;h.$$p=null;var n=K(this,d);return void 0!==n?n:r!==R?r(d):void 0!==a?a:J.$raise(_("KeyError").$new("key not found: "+d.$inspect(),L(["key","receiver"],{key:d,receiver:this})))},-2),H(v,"$fetch_values",function h(d){var r,a=h.$$p||R;return h.$$p=null,r=W(arguments),F(r,"map",[],function t(s){return null==s&&(s=R),F(null==t.$$s?this:t.$$s,"fetch",[s],a.$to_proc())},{$$s:this})},-1),H(v,"$flatten",function(d){null==d&&(d=1),d=U["$coerce_to!"](d,_("Integer"),"to_int");for(var s,i,r=[],e=0,n=this.$$keys,t=n.length;e<t;e++)if((s=n[e]).$$is_string?i=this.$$smap[s]:(i=s.value,s=s.key),r.push(s),i.$$is_array){if(1===d){r.push(i);continue}r=r.concat(i.$flatten(d-2))}else r.push(i);return r},-1),H(v,"$freeze",function(){var d=this;return k(d["$frozen?"]())?d:B(d)}),H(v,"$has_key?",function(d){return void 0!==K(this,d)}),H(v,"$has_value?",function(d){for(var t,r=0,e=this.$$keys,n=e.length;r<n;r++)if(((t=e[r]).$$is_string?this.$$smap[t]:t.value)["$=="](d))return!0;return!1}),H(v,"$hash",function(){var n,d=this,a=void 0===l.hash_ids,r=d.$object_id(),e=["Hash"];try{if(a&&(l.hash_ids=Object.create(null)),l[r])return"self";for(n in l.hash_ids)if(d["$eql?"](l.hash_ids[n]))return"self";l.hash_ids[r]=d;for(var s=0,i=d.$$keys,c=i.length;s<c;s++)e.push((n=i[s]).$$is_string?[n,d.$$smap[n].$hash()]:[n.key_hash,n.value.$hash()]);return e.sort().join()}finally{a&&(l.hash_ids=void 0)}}),H(v,"$index",function(d){for(var t,s,r=0,e=this.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string?s=this.$$smap[t]:(s=t.value,t=t.key),s["$=="](d))return t;return R}),H(v,"$indexes",function(d){for(var r,c,n=[],t=0,s=(r=W(arguments)).length;t<s;t++)void 0!==(c=K(this,r[t]))?n.push(c):n.push(this.$default());return n},-1),H(v,"$inspect",function(){var d=this,a=void 0===M,r=d.$object_id(),e=[];return function(){try{if(a&&(M={}),M.hasOwnProperty(r))return"{...}";M[r]=!0;for(var i,c,n=0,t=d.$$keys,s=t.length;n<s;n++)(i=t[n]).$$is_string?c=d.$$smap[i]:(c=i.value,i=i.key),i=m("Opal").$inspect(i),c=m("Opal").$inspect(c),e.push(i+"=>"+c);return"{"+e.join(", ")+"}"}finally{a&&(M=void 0)}}()}),H(v,"$invert",function(){for(var t,s,a=re(),r=0,e=this.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=this.$$smap[t]:(s=t.value,t=t.key),Q(a,s,t);return a}),H(v,"$keep_if",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["keep_if"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});x(a);for(var t,s,i,r=0,e=a.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=a.$$smap[t]:(s=t.value,t=t.key),(!1===(i=d(t,s))||i===R)&&void 0!==N(a,t)&&(n--,r--);return a}),H(v,"$keys",function(){for(var t,a=[],r=0,e=this.$$keys,n=e.length;r<n;r++)a.push((t=e[r]).$$is_string?t:t.key);return a}),H(v,"$length",function(){return this.$$keys.length}),H(v,"$merge",function h(d){var e,a=h.$$p||R;return h.$$p=null,e=W(arguments),F(this.$dup(),"merge!",T(e),a.$to_proc())},-1),H(v,"$merge!",function h(d){var e,t,s,i,c,o,j,C,O,a=h.$$p||R,n=this;for(h.$$p=null,e=W(arguments),x(n),t=0;t<e.length;++t)if(o=(c=(i=U["$coerce_to!"](e[t],_("Hash"),"to_hash")).$$keys).length,a===R)for(s=0;s<o;s++)(j=c[s]).$$is_string?O=i.$$smap[j]:(O=j.value,j=j.key),Q(n,j,O);else for(s=0;s<o;s++)(j=c[s]).$$is_string?O=i.$$smap[j]:(O=j.value,j=j.key),void 0!==(C=K(n,j))?Q(n,j,a(j,C,O)):Q(n,j,O);return n},-1),H(v,"$rassoc",function(d){for(var t,s,r=0,e=this.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string?s=this.$$smap[t]:(s=t.value,t=t.key),s["$=="](d))return[t,s];return R}),H(v,"$rehash",function(){var d=this;return x(d),l.hash_rehash(d),d}),H(v,"$reject",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["reject"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});for(var s,i,c,r=re(),e=0,n=a.$$keys,t=n.length;e<t;e++)(s=n[e]).$$is_string?i=a.$$smap[s]:(i=s.value,s=s.key),(!1===(c=d(s,i))||c===R)&&Q(r,s,i);return r}),H(v,"$reject!",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["reject!"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});x(a);for(var s,i,c,r=!1,e=0,n=a.$$keys,t=n.length;e<t;e++)(s=n[e]).$$is_string?i=a.$$smap[s]:(i=s.value,s=s.key),!1!==(c=d(s,i))&&c!==R&&void 0!==N(a,s)&&(r=!0,t--,e--);return r?a:R}),H(v,"$replace",function(d){var a=this;x(a),d=U["$coerce_to!"](d,_("Hash"),"to_hash"),$(a);for(var t,i,r=0,e=d.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=d.$$smap[t]:(i=t.value,t=t.key),Q(a,t,i);return k(d.$default_proc())?a["$default_proc="](d.$default_proc()):a["$default="](d.$default()),a}),H(v,"$select",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["select"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});for(var s,i,c,r=re(),e=0,n=a.$$keys,t=n.length;e<t;e++)(s=n[e]).$$is_string?i=a.$$smap[s]:(i=s.value,s=s.key),!1!==(c=d(s,i))&&c!==R&&Q(r,s,i);return r}),H(v,"$select!",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["select!"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});x(a);for(var s,i,c,r=R,e=0,n=a.$$keys,t=n.length;e<t;e++)(s=n[e]).$$is_string?i=a.$$smap[s]:(i=s.value,s=s.key),(!1===(c=d(s,i))||c===R)&&(void 0!==N(a,s)&&(t--,e--),r=a);return r}),H(v,"$shift",function(){var d=this;x(d);var r,a=d.$$keys;return a.length>0?[r=(r=a[0]).$$is_string?r:r.key,N(d,r)]:R}),H(v,"$slice",function(d){var r;r=W(arguments);for(var n=re(),t=0,s=r.length;t<s;t++){var i=r[t],c=K(this,i);void 0!==c&&Q(n,i,c)}return n},-1),H(v,"$to_a",function(){for(var t,s,a=[],r=0,e=this.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=this.$$smap[t]:(s=t.value,t=t.key),a.push([t,s]);return a}),H(v,"$to_h",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,d!==R)return F(a,"map",[],d.$to_proc()).$to_h();if(a.$$class===l.Hash)return a;var r=new l.Hash;return $(r),l.hash_clone(a,r),r}),H(v,"$to_hash",I),H(v,"$to_proc",function(){return F(this,"proc",[],function a(r){var e=null==a.$$s?this:a.$$s;return null==r&&J.$raise(_("ArgumentError"),"no key given"),e["$[]"](r)},{$$arity:-1,$$s:this})}),H(v,"$transform_keys",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["transform_keys"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});for(var s,i,r=re(),e=0,n=a.$$keys,t=n.length;e<t;e++)(s=n[e]).$$is_string?i=a.$$smap[s]:(i=s.value,s=s.key),s=ee(d,s),Q(r,s,i);return r}),H(v,"$transform_keys!",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["transform_keys!"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});x(a);var e,t,s,i,r=l.slice(a.$$keys),n=r.length;for(e=0;e<n;e++)(t=r[e]).$$is_string?s=a.$$smap[t]:(s=t.value,t=t.key),i=ee(d,t),N(a,t),Q(a,i,s);return a}),H(v,"$transform_values",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["transform_values"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});for(var s,i,r=re(),e=0,n=a.$$keys,t=n.length;e<t;e++)(s=n[e]).$$is_string?i=a.$$smap[s]:(i=s.value,s=s.key),i=ee(d,i),Q(r,s,i);return r}),H(v,"$transform_values!",function h(){var d=h.$$p||R,a=this;if(h.$$p=null,!k(d))return F(a,"enum_for",["transform_values!"],function i(){return(null==i.$$s?this:i.$$s).$size()},{$$s:a});x(a);for(var t,s,r=0,e=a.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=a.$$smap[t]:(s=t.value,t=t.key),s=ee(d,s),Q(a,t,s);return a}),H(v,"$values",function(){for(var t,a=[],r=0,e=this.$$keys,n=e.length;r<n;r++)a.push((t=e[r]).$$is_string?this.$$smap[t]:t.value);return a}),b(v,"dup","clone"),b(v,"each_pair","each"),b(v,"eql?","=="),b(v,"filter","select"),b(v,"filter!","select!"),b(v,"include?","has_key?"),b(v,"indices","indexes"),b(v,"key","index"),b(v,"key?","has_key?"),b(v,"member?","has_key?"),b(v,"size","length"),b(v,"store","[]="),b(v,"to_s","inspect"),b(v,"update","merge!"),b(v,"value?","has_value?"),b(v,"values_at","indexes")},Opal.modules["corelib/number"]=function(l){var v,S,h,a,r,m,M,ee=l.klass,re=l.Opal,$=l.Kernel,K=l.def,Q=l.eqeqeq,N=l.truthy,x=l.rb_gt,B=l.not,E=l.rb_lt,W=l.alias,U=l.send2,J=l.find_super,Y=l.send,H=l.rb_plus,F=l.rb_minus,y=l.eqeq,A=l.return_self,L=l.rb_divide,k=l.to_ary,T=l.rb_times,I=l.rb_le,b=l.rb_ge,g=l.return_val,q=l.const_set,_=[],p=l.nil,f=l.$$$;return l.top.$require("corelib/numeric"),function(z,v,S){var n,m=ee("::",v,"Number");function d(n){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,n,!0),t}function a(n){return new DataView(n.buffer).getFloat64(0,!0)}function r(n){for(var t=d(n),s=0;s<t.length;s++){if(255!==t[s]){t[s]++;break}t[s]=0}return a(t)}function e(n){for(var t=d(n),s=0;s<t.length;s++){if(0!==t[s]){t[s]--;break}t[s]=255}return a(t)}[m].concat(S),re.$bridge(Number,m),l.prop(m.$$prototype,"$$is_number",!0),m.$$is_number_class=!0,n=l.get_singleton_class(m),K(n,"$allocate",function(){return $.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(n,"$new"),K(m,"$coerce",function(t){var s=this;if(t===p)$.$raise(f("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[$.$Float(t),s];if(t["$respond_to?"]("to_f"))return[re["$coerce_to!"](t,f("Float"),"to_f"),s];if(t.$$is_number)return[t,s];$.$raise(f("TypeError"),"can't convert "+t.$class()+" into Float")}}),K(m,"$__id__",function(){return 2*this+1}),K(m,"$+",function(t){return t.$$is_number?this+t:this.$__coerced__("+",t)}),K(m,"$-",function(t){return t.$$is_number?this-t:this.$__coerced__("-",t)}),K(m,"$*",function(t){return t.$$is_number?this*t:this.$__coerced__("*",t)}),K(m,"$/",function(t){return t.$$is_number?this/t:this.$__coerced__("/",t)}),K(m,"$%",function(t){var s=this;return t.$$is_number?t==-1/0?t:0!=t?t<0||s<0?(s%t+t)%t:s%t:void $.$raise(f("ZeroDivisionError"),"divided by 0"):s.$__coerced__("%",t)}),K(m,"$&",function(t){return t.$$is_number?this&t:this.$__coerced__("&",t)}),K(m,"$|",function(t){return t.$$is_number?this|t:this.$__coerced__("|",t)}),K(m,"$^",function(t){return t.$$is_number?this^t:this.$__coerced__("^",t)}),K(m,"$<",function(t){return t.$$is_number?this<t:this.$__coerced__("<",t)}),K(m,"$<=",function(t){return t.$$is_number?this<=t:this.$__coerced__("<=",t)}),K(m,"$>",function(t){return t.$$is_number?this>t:this.$__coerced__(">",t)}),K(m,"$>=",function(t){return t.$$is_number?this>=t:this.$__coerced__(">=",t)}),K(m,"$<=>",function(t){try{return function(n,t){return t.$$is_number?isNaN(n)||isNaN(t)?p:n>t?1:n<t?-1:0:n.$__coerced__("<=>",t)}(this,t)}catch(i){if(!l.rescue(i,[f("ArgumentError")]))throw i;try{return p}finally{l.pop_exception()}}}),K(m,"$<<",function(t){return(t=re["$coerce_to!"](t,f("Integer"),"to_int"))>0?this<<t:this>>-t}),K(m,"$>>",function(t){return(t=re["$coerce_to!"](t,f("Integer"),"to_int"))>0?this>>t:this<<-t}),K(m,"$[]",function(t){return(t=re["$coerce_to!"](t,f("Integer"),"to_int"))<0?0:t>=32?this<0?1:0:this>>t&1}),K(m,"$+@",function(){return+this}),K(m,"$-@",function(){return-this}),K(m,"$~",function(){return~this}),K(m,"$**",function(t){var s=this;return Q(f("Integer"),t)?B(f("Integer")["$==="](s))||N(x(t,0))?Math.pow(s,t):f("Rational").$new(s,1)["$**"](t):E(s,0)&&(Q(f("Float"),t)||Q(f("Rational"),t))?f("Complex").$new(s,0)["$**"](t.$to_f()):N(null!=t.$$is_number)?Math.pow(s,t):s.$__coerced__("**",t)}),K(m,"$==",function(t){return t.$$is_number?this.valueOf()===t.valueOf():!!t["$respond_to?"]("==")&&t["$=="](this)}),W(m,"===","=="),K(m,"$abs",function(){return Math.abs(this)}),K(m,"$abs2",function(){return Math.abs(this*this)}),K(m,"$allbits?",function(t){return(this&(t=re["$coerce_to!"](t,f("Integer"),"to_int")))==t}),K(m,"$anybits?",function(t){return!!(this&(t=re["$coerce_to!"](t,f("Integer"),"to_int")))}),K(m,"$angle",function(){var t=this;return N(t["$nan?"]())?t:0==t?1/t>0?0:Math.PI:t<0?Math.PI:0}),K(m,"$bit_length",function(){var t=this;if(Q(f("Integer"),t)||$.$raise(f("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),0===t||-1===t)return 0;for(var s=0,i=t<0?~t:t;0!=i;)s+=1,i>>>=1;return s}),K(m,"$ceil",function(t){null==t&&(t=0);var i=this.$to_f();if(i%1==0&&t>=0)return i;var c=Math.pow(10,t),o=Math.ceil(i*c)/c;return i%1==0&&(o=Math.round(o)),o},-1),K(m,"$chr",function(t){return l.enc(String.fromCharCode(this),t||"BINARY")},-1),K(m,"$denominator",function n(){var t=n.$$p||p,s=this;return n.$$p=null,N(s["$nan?"]())||N(s["$infinite?"]())?1:U(s,J(s,"denominator",n,!1,!0),"denominator",[],t)}),K(m,"$downto",function n(t){var s=n.$$p||p,i=this;if(n.$$p=null,s===p)return Y(i,"enum_for",["downto",t],function o(){var j=null==o.$$s?this:o.$$s;return Q(f("Numeric"),t)||$.$raise(f("ArgumentError"),"comparison of "+j.$class()+" with "+t.$class()+" failed"),N(x(t,j))?0:H(F(j,t),1)},{$$s:i});t.$$is_number||$.$raise(f("ArgumentError"),"comparison of "+i.$class()+" with "+t.$class()+" failed");for(var c=i;c>=t;c--)s(c);return i}),K(m,"$equal?",function(t){var i;return N(i=this["$=="](t))?i:isNaN(this)&&isNaN(t)}),K(m,"$even?",function(){return this%2==0}),K(m,"$floor",function(t){null==t&&(t=0);var i=this.$to_f();if(i%1==0&&t>=0)return i;var c=Math.pow(10,t),o=Math.floor(i*c)/c;return i%1==0&&(o=Math.round(o)),o},-1),K(m,"$gcd",function(t){Q(f("Integer"),t)||$.$raise(f("TypeError"),"not an integer");for(var i=Math.abs(this),c=Math.abs(t);i>0;){var o=i;i=c%i,c=o}return c}),K(m,"$gcdlcm",function(t){return[this.$gcd(t),this.$lcm(t)]}),K(m,"$integer?",function(){return this%1==0}),K(m,"$is_a?",function n(t){var s=n.$$p||p,i=this;return n.$$p=null,!!(y(t,f("Integer"))&&Q(f("Integer"),i)||y(t,f("Integer"))&&Q(f("Integer"),i)||y(t,f("Float"))&&Q(f("Float"),i))||U(i,J(i,"is_a?",n,!1,!0),"is_a?",[t],s)}),K(m,"$instance_of?",function n(t){var s=n.$$p||p,i=this;return n.$$p=null,!!(y(t,f("Integer"))&&Q(f("Integer"),i)||y(t,f("Integer"))&&Q(f("Integer"),i)||y(t,f("Float"))&&Q(f("Float"),i))||U(i,J(i,"instance_of?",n,!1,!0),"instance_of?",[t],s)}),K(m,"$lcm",function(t){var s=this;return Q(f("Integer"),t)||$.$raise(f("TypeError"),"not an integer"),0==s||0==t?0:Math.abs(s*t/s.$gcd(t))}),K(m,"$next",function(){return this+1}),K(m,"$nobits?",function(t){return!(this&(t=re["$coerce_to!"](t,f("Integer"),"to_int")))}),K(m,"$nonzero?",function(){return 0==this?p:this}),K(m,"$numerator",function n(){var t=n.$$p||p,s=this;return n.$$p=null,N(s["$nan?"]())||N(s["$infinite?"]())?s:U(s,J(s,"numerator",n,!1,!0),"numerator",[],t)}),K(m,"$odd?",function(){return this%2!=0}),K(m,"$ord",A),K(m,"$pow",function(t,s){var i=this;return 0==i&&$.$raise(f("ZeroDivisionError"),"divided by 0"),void 0===s?i["$**"](t):(f("Integer")["$==="](t)||$.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&$.$raise(f("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),f("Integer")["$==="](s)||$.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),0===s&&$.$raise(f("ZeroDivisionError"),"divided by 0"),i["$**"](t)["$%"](s))},-2),K(m,"$pred",function(){return this-1}),K(m,"$quo",function n(t){var s=n.$$p||p,i=this;return n.$$p=null,Q(f("Integer"),i)?U(i,J(i,"quo",n,!1,!0),"quo",[t],s):L(i,t)}),K(m,"$rationalize",function(t){var s,i,c=this,o=p,j=p;return arguments.length>1&&$.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),Q(f("Integer"),c)?f("Rational").$new(c,1):N(c["$infinite?"]())?$.$raise(f("FloatDomainError"),"Infinity"):N(c["$nan?"]())?$.$raise(f("FloatDomainError"),"NaN"):N(null==t)?(i=f("Math").$frexp(c),o=null==(s=k(i))[0]?p:s[0],j=null==s[1]?p:s[1],o=f("Math").$ldexp(o,f(f("Float"),"MANT_DIG")).$to_i(),j=F(j,f(f("Float"),"MANT_DIG")),f("Rational").$new(T(2,o),1["$<<"](F(1,j))).$rationalize(f("Rational").$new(1,1["$<<"](F(1,j))))):c.$to_r().$rationalize(t)},-1),K(m,"$remainder",function(t){return F(this,T(t,L(this,t).$truncate()))}),K(m,"$round",function(t){var s,i,j,c=this;if(Q(f("Integer"),c)){if(N(null==t)||(Q(f("Float"),t)&&N(t["$infinite?"]())&&$.$raise(f("RangeError"),"Infinity"),t=re["$coerce_to!"](t,f("Integer"),"to_int"),N(E(t,f(f("Integer"),"MIN")))&&$.$raise(f("RangeError"),"out of bounds"),N(t>=0)))return c;if(.415241*(t=t["$-@"]())-.125>c.$size())return 0;var C=Math.pow(10,t),O=Math.floor((Math.abs(c)+C/2)/C)*C;return c<0?-O:O}if(N(c["$nan?"]())&&N(null==t)&&$.$raise(f("FloatDomainError"),"NaN"),t=re["$coerce_to!"](t||0,f("Integer"),"to_int"),N(I(t,0)))N(c["$nan?"]())?$.$raise(f("RangeError"),"NaN"):N(c["$infinite?"]())&&$.$raise(f("FloatDomainError"),"Infinity");else{if(y(t,0))return Math.round(c);if(N(c["$nan?"]())||N(c["$infinite?"]()))return c}return i=f("Math").$frexp(c),j=null==(s=k(i))[1]?p:s[1],N(b(t,F(H(f(f("Float"),"DIG"),2),N(x(j,0))?L(j,4):F(L(j,3),1))))?c:N(E(t,(N(x(j,0))?H(L(j,3),1):L(j,4))["$-@"]()))?0:Math.round(c*Math.pow(10,t))/Math.pow(10,t)},-1),K(m,"$times",function n(){var t=n.$$p||p,s=this;if(n.$$p=null,!N(t))return Y(s,"enum_for",["times"],function c(){return null==c.$$s?this:c.$$s},{$$s:s});for(var i=0;i<s;i++)t(i);return s}),K(m,"$to_f",A),K(m,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),K(m,"$to_r",function(){var t,s,i=this,c=p,o=p;return Q(f("Integer"),i)?f("Rational").$new(i,1):(s=f("Math").$frexp(i),c=null==(t=k(s))[0]?p:t[0],o=null==t[1]?p:t[1],c=f("Math").$ldexp(c,f(f("Float"),"MANT_DIG")).$to_i(),o=F(o,f(f("Float"),"MANT_DIG")),T(c,f(f("Float"),"RADIX")["$**"](o)).$to_r())}),K(m,"$to_s",function(t){var s=this;return null==t&&(t=10),t=re["$coerce_to!"](t,f("Integer"),"to_int"),(N(E(t,2))||N(x(t,36)))&&$.$raise(f("ArgumentError"),"invalid radix "+t),y(s,0)&&N(1/s==-1/0)?"-0.0":s.toString(t)},-1),K(m,"$truncate",function(t){null==t&&(t=0);var i=this.$to_f();if(i%1==0&&t>=0)return i;var c=Math.pow(10,t),o=parseInt(i*c,10)/c;return i%1==0&&(o=Math.round(o)),o},-1),K(m,"$digits",function(t){var s=this;null==t&&(t=10),E(s,0)&&$.$raise(f(f("Math"),"DomainError"),"out of domain"),t=re["$coerce_to!"](t,f("Integer"),"to_int"),N(E(t,2))&&$.$raise(f("ArgumentError"),"invalid radix "+t),s!=parseInt(s)&&$.$raise(f("NoMethodError"),"undefined method `digits' for "+s.$inspect());var i=s,c=[];if(0==s)return[0];for(;0!=i;)c.push(i%t),i=parseInt(i/t,10);return c},-1),K(m,"$divmod",function n(t){var s=n.$$p||p,i=this;return n.$$p=null,N(i["$nan?"]())||N(t["$nan?"]())?$.$raise(f("FloatDomainError"),"NaN"):N(i["$infinite?"]())?$.$raise(f("FloatDomainError"),"Infinity"):U(i,J(i,"divmod",n,!1,!0),"divmod",[t],s)}),K(m,"$upto",function n(t){var s=n.$$p||p,i=this;if(n.$$p=null,s===p)return Y(i,"enum_for",["upto",t],function o(){var j=null==o.$$s?this:o.$$s;return Q(f("Numeric"),t)||$.$raise(f("ArgumentError"),"comparison of "+j.$class()+" with "+t.$class()+" failed"),N(E(t,j))?0:H(F(t,j),1)},{$$s:i});t.$$is_number||$.$raise(f("ArgumentError"),"comparison of "+i.$class()+" with "+t.$class()+" failed");for(var c=i;c<=t;c++)s(c);return i}),K(m,"$zero?",function(){return 0==this}),K(m,"$size",g(4)),K(m,"$nan?",function(){return isNaN(this)}),K(m,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),K(m,"$infinite?",function(){return this==1/0?1:this==-1/0?-1:p}),K(m,"$positive?",function(){var t=this;return 0!=t&&(t==1/0||1/t>0)}),K(m,"$negative?",function(){return this==-1/0||1/this<0}),K(m,"$next_float",function(){var t=this;return y(t,f(f("Float"),"INFINITY"))?f(f("Float"),"INFINITY"):N(t["$nan?"]())?f(f("Float"),"NAN"):b(t,0)?r(Math.abs(t)):e(t)}),K(m,"$prev_float",function(){var t=this;return y(t,f(f("Float"),"INFINITY")["$-@"]())?f(f("Float"),"INFINITY")["$-@"]():N(t["$nan?"]())?f(f("Float"),"NAN"):x(t,0)?e(t):-r(Math.abs(t))}),W(m,"arg","angle"),W(m,"eql?","=="),W(m,"fdiv","/"),W(m,"inspect","to_s"),W(m,"kind_of?","is_a?"),W(m,"magnitude","abs"),W(m,"modulo","%"),W(m,"object_id","__id__"),W(m,"phase","angle"),W(m,"succ","next"),W(m,"to_int","to_i")}(0,f("Numeric"),_),q("::","Fixnum",f("Number")),v=f("Numeric"),S=_,M=[m=ee("::",v,"Integer")].concat(S),m.$$is_number_class=!0,m.$$is_integer_class=!0,a=[h=l.get_singleton_class(m)].concat(M),r=l.$r(a),K(h,"$allocate",function(){return $.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(h,"$new"),K(h,"$sqrt",function(n){return(n=re["$coerce_to!"](n,f("Integer"),"to_int"))<0&&$.$raise(f(f("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(n),10)}),K(h,"$try_convert",function(n){return r("Opal")["$coerce_to?"](n,this,"to_int")}),q(m,"MAX",Math.pow(2,30)-1),q(m,"MIN",-Math.pow(2,30)),function(z,v,S){var m=ee("::",v,"Float");return[m].concat(S),m.$$is_number_class=!0,function(h,d){K(h,"$allocate",function(){return $.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(h,"$new"),K(h,"$===",function(r){return!!r.$$is_number})}(l.get_singleton_class(m)),q(m,"INFINITY",1/0),q(m,"MAX",Number.MAX_VALUE),q(m,"MIN",Number.MIN_VALUE),q(m,"NAN",NaN),q(m,"DIG",15),q(m,"MANT_DIG",53),q(m,"RADIX",2),q(m,"EPSILON",Number.EPSILON||2220446049250313e-31)}(0,f("Numeric"),_)},Opal.modules["corelib/range"]=function(l){var ee=l.klass,re=l.truthy,$=l.Kernel,K=l.def,Q=l.not,N=l.send2,x=l.find_super,B=l.rb_lt,E=l.rb_le,W=l.send,U=l.eqeq,J=l.eqeqeq,Y=l.return_ivar,H=l.rb_gt,F=l.rb_minus,y=l.Opal,A=l.rb_divide,L=l.rb_plus,k=l.rb_times,T=l.rb_ge,I=l.thrower,b=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),function(p,f,z){var v=ee("::",null,"Range"),S=[v].concat([]),m=l.$r(S),M=v.$$prototype;function h(d){return d.begin===R||d.end===R||d.begin===-1/0||d.end===1/0||d.begin===1/0||d.end===-1/0}return M.begin=M.end=M.excl=R,v.$include(_("Enumerable")),v.$$prototype.$$is_range=!0,v.$attr_reader("begin","end"),K(v,"$initialize",function(a,r,e){var n=this;return null==e&&(e=!1),re(n.begin)&&$.$raise(_("NameError"),"'initialize' called twice"),re(a["$<=>"](r))||re(a["$nil?"]())||re(r["$nil?"]())||$.$raise(_("ArgumentError"),"bad value for range"),n.begin=a,n.end=r,n.excl=e},-3),K(v,"$===",function(a){return this["$include?"](a)}),K(v,"$count",function d(){var a=d.$$p||R,r=this;return d.$$p=null,Q(a!==R)&&re(h(r))?_(_("Float"),"INFINITY"):N(r,x(r,"count",d,!1,!0),"count",[],a)}),K(v,"$to_a",function d(){var a=d.$$p||R,r=this;return d.$$p=null,re(h(r))&&$.$raise(_("TypeError"),"cannot convert endless range to an array"),N(r,x(r,"to_a",d,!1,!0),"to_a",[],a)}),K(v,"$cover?",function(a){var e,i,r=this,n=R,t=R,s=R;return e=re(n=re(t=re(s=r.begin["$nil?"]())?-1:s)?t:r.begin["$<=>"](a))&&n,i=re(n=re(t=re(s=r.end["$nil?"]())?-1:s)?t:a["$<=>"](r.end))&&n,re(n=re(t=re(r.excl)?re(s=i)?B(i,0):s:re(s=i)?E(i,0):s)?e:t)?E(e,0):n}),K(v,"$each",function d(){var n,s,i,a=d.$$p||R,r=this,e=R,t=R;if(d.$$p=null,a===R)return W(r,"enum_for",["each"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:r});if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!=0||r.end%1!=0)&&$.$raise(_("TypeError"),"can't iterate from Float"),s=r.begin,i=r.end+(re(r.excl)?0:1);s<i;s++)a(s);return r}if(r.begin.$$is_string&&r.end.$$is_string)return W(r.begin,"upto",[r.end,r.excl],a.$to_proc()),r;for(n=r.end,re((e=r.begin)["$respond_to?"]("succ"))||$.$raise(_("TypeError"),"can't iterate from "+e.$class());re(re(t=r.end["$nil?"]())?t:B(e["$<=>"](n),0));)l.yield1(a,e),e=e.$succ();return Q(r.excl)&&U(e,n)&&l.yield1(a,e),r}),K(v,"$eql?",function(a){var r=this,e=R,n=R;return!!J(_("Range"),a)&&(re(e=re(n=r.excl["$==="](a["$exclude_end?"]()))?r.begin["$eql?"](a.$begin()):n)?r.end["$eql?"](a.$end()):e)}),K(v,"$exclude_end?",Y("excl")),K(v,"$first",function d(a){var r=d.$$p||R,e=this;return d.$$p=null,re(e.begin["$nil?"]())&&$.$raise(_("RangeError"),"cannot get the minimum of beginless range"),re(null==a)?e.begin:N(e,x(e,"first",d,!1,!0),"first",[a],r)},-1),K(v,"$last",function(a){var r=this;return re(r.end["$nil?"]())&&$.$raise(_("RangeError"),"cannot get the maximum of endless range"),re(null==a)?r.end:r.$to_a().$last(a)},-1),K(v,"$max",function d(){var a=d.$$p||R,r=this;return d.$$p=null,re(r.end["$nil?"]())?$.$raise(_("RangeError"),"cannot get the maximum of endless range"):a!==R?N(r,x(r,"max",d,!1,!0),"max",[],a):Q(r.begin["$nil?"]())&&(re(H(r.begin,r.end))||re(r.excl)&&U(r.begin,r.end))?R:r.excl?r.end-1:r.end}),K(v,"$min",function d(){var a=d.$$p||R,r=this;return d.$$p=null,re(r.begin["$nil?"]())?$.$raise(_("RangeError"),"cannot get the minimum of beginless range"):a!==R?N(r,x(r,"min",d,!1,!0),"min",[],a):Q(r.end["$nil?"]())&&(re(H(r.begin,r.end))||re(r.excl)&&U(r.begin,r.end))?R:r.begin}),K(v,"$size",function(){var a=this,r=R,e=R,n=R;return r=_(_("Float"),"INFINITY"),U(a.begin,r)&&Q(a.end["$nil?"]())||U(a.end,r["$-@"]())&&Q(a.begin["$nil?"]())?0:re(h(a))?r:J(_("Numeric"),a.begin)&&J(_("Numeric"),a.end)?(e=a.begin,n=a.end,re(a.excl)&&(n=F(n,1)),re(B(n,e))?0:(Math.abs(n-e)+1).$to_i()):R}),K(v,"$step",function d(a){var r=d.$$p||R,e=this,n=R,t=R;function s(){null==a?a=1:a.$$is_number||(a=y["$coerce_to!"](a,_("Integer"),"to_int")),a<0?$.$raise(_("ArgumentError"),"step can't be negative"):0===a&&$.$raise(_("ArgumentError"),"step can't be 0")}return d.$$p=null,r===R?(re(e.begin["$is_a?"](m("Numeric")))||re(e.begin["$nil?"]()))&&(re(e.end["$is_a?"](m("Numeric")))||re(e.end["$nil?"]()))&&Q(re(n=e.begin["$nil?"]())?e.end["$nil?"]():n)?_(_("Enumerator"),"ArithmeticSequence").$new(e,a,"step"):W(e,"enum_for",["step",a],function(){return s(),function i(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return R;if(a%1==0)return A(e.$size(),a).$ceil();var te,c=e.begin,o=e.end,j=Math.abs,C=Math.floor,O=(j(c)+j(o)+j(o-c))/j(a)*_(_("Float"),"EPSILON");return O>.5&&(O=.5),e.excl?(te=C((o-c)/a-O))*a+c<o&&te++:te=C((o-c)/a+O)+1,te}()}):(s(),re(e.begin.$$is_number&&e.end.$$is_number)?(t=0,function(){try{var c=I("break");return W(e,"loop",[],function o(){var C,j=null==o.$$s?this:o.$$s;return null==j.begin&&(j.begin=R),null==j.excl&&(j.excl=R),null==j.end&&(j.end=R),C=L(j.begin,k(t,a)),re(j.excl)?re(T(C,j.end))&&c.$throw():re(H(C,j.end))&&c.$throw(),l.yield1(r,C),t=L(t,1)},{$$s:e})}catch(o){if(o===c)return o.$v;throw o}}()):(e.begin.$$is_string&&e.end.$$is_string&&a%1!=0&&$.$raise(_("TypeError"),"no implicit conversion to float from string"),W(e,"each_with_index",[],function(o,j){return null==o&&(o=R),null==j&&(j=R),U(j["$%"](a),0)?l.yield1(r,o):R})),e)},-1),K(v,"$%",function(a){var r=this;return re(r.begin["$is_a?"](m("Numeric")))&&re(r.end["$is_a?"](m("Numeric")))?_(_("Enumerator"),"ArithmeticSequence").$new(r,a,"%"):r.$step(a)}),K(v,"$bsearch",function d(){var a=d.$$p||R,r=this;return d.$$p=null,a===R?r.$enum_for("bsearch"):(re(h(r)&&(r.begin.$$is_number||r.end.$$is_number))&&$.$raise(_("NotImplementedError"),"Can't #bsearch an infinite range"),re(r.begin.$$is_number&&r.end.$$is_number)||$.$raise(_("TypeError"),"can't do binary search for "+r.begin.$class()),W(r.$to_a(),"bsearch",[],a.$to_proc()))}),K(v,"$to_s",function(){var a=this,r=R;return(re(r=a.begin)?r:"")+(re(a.excl)?"...":"..")+(re(r=a.end)?r:"")}),K(v,"$inspect",function(){var a=this,r=R;return(re(r=a.begin)?a.begin.$inspect():r)+(re(a.excl)?"...":"..")+(re(r=a.end)?a.end.$inspect():r)}),K(v,"$marshal_load",function(a){var r=this;return r.begin=a["$[]"]("begin"),r.end=a["$[]"]("end"),r.excl=a["$[]"]("excl")}),K(v,"$hash",function(){var a=this;return[a.begin,a.end,a.excl].$hash()}),b(v,"==","eql?"),b(v,"include?","cover?"),b(v,"member?","cover?")}()},Opal.modules["corelib/proc"]=function(l){var A,ee=l.slice,$=l.truthy,K=l.Kernel,Q=l.defs,N=l.def,x=l.send,B=l.to_a,E=l.return_self,W=l.ensure_kwargs,U=l.Opal,J=l.alias,Y=l.nil,H=l.$$$;return A=(0,l.klass)("::",Function,"Proc"),l.prop(A.$$prototype,"$$is_proc",!0),l.prop(A.$$prototype,"$$is_lambda",!1),Q(A,"$new",function L(){var k=L.$$p||Y;return L.$$p=null,$(k)||K.$raise(H("ArgumentError"),"tried to create a Proc object without a block"),k}),N(A,"$call",function L(k){var b,T=L.$$p||Y,g=this;L.$$p=null,b=ee(arguments),T!==Y&&(g.$$p=T);var q,R=g.$$brk,_=g.$$ret;if(R||_&&g.$$is_lambda)try{q=g.$$is_lambda?g.apply(null,b):l.yieldX(g,b)}catch(p){if(p===R)return p.$v;if(g.$$is_lambda&&p===_)return p.$v;throw p}else q=g.$$is_lambda?g.apply(null,b):l.yieldX(g,b);return q},-1),N(A,"$>>",function L(k){return L.$$p=null,x(K,"proc",[],function b(g){var R,f,q=b.$$p||Y,p=null==b.$$s?this:b.$$s;return b.$$p=null,R=ee(arguments),f=x(p,"call",B(R),q.$to_proc()),k.$call(f)},{$$arity:-1,$$s:this})}),N(A,"$<<",function L(k){return L.$$p=null,x(K,"proc",[],function b(g){var R,f,q=b.$$p||Y,p=null==b.$$s?this:b.$$s;return b.$$p=null,R=ee(arguments),f=x(k,"call",B(R),q.$to_proc()),p.$call(f)},{$$arity:-1,$$s:this})}),N(A,"$to_proc",E),N(A,"$lambda?",function(){return!!this.$$is_lambda}),N(A,"$arity",function(){var k=this;return k.$$is_curried?-1:null!=k.$$arity?k.$$arity:k.length}),N(A,"$source_location",function(){var T=Y;return this.$$is_curried?Y:$(T=this.$$source_location)?T:Y}),N(A,"$binding",function(){var T=this;return T.$$is_curried&&K.$raise(H("ArgumentError"),"Can't create Binding"),$(H("::","Binding","skip_raise")?"constant":Y)?H("Binding").$new(Y,[],T.$$s,T.$source_location()):Y}),N(A,"$parameters",function(k){var I=this;if(k=W(k),I.$$is_curried)return[["rest"]];if(I.$$parameters){if(k.$$smap.lambda??I.$$is_lambda)return I.$$parameters;var g,q,b=[];for(g=0,q=I.$$parameters.length;g<q;g++){var R=I.$$parameters[g];"req"===R[0]&&(R=["opt",R[1]]),b.push(R)}return b}return[]},-1),N(A,"$curry",function(k){var T=this;function I(){var q,b=ee(arguments),g=b.length;return g>k&&T.$$is_lambda&&!T.$$is_curried&&K.$raise(H("ArgumentError"),"wrong number of arguments ("+g+" for "+k+")"),g>=k?T.$call.apply(T,b):(q=function(){return I.apply(null,b.concat(ee(arguments)))},q.$$is_lambda=T.$$is_lambda,q.$$is_curried=!0,q)}return void 0===k?k=T.length:(k=U["$coerce_to!"](k,H("Integer"),"to_int"),T.$$is_lambda&&k!==T.length&&K.$raise(H("ArgumentError"),"wrong number of arguments ("+k+" for "+T.length+")")),I.$$is_lambda=T.$$is_lambda,I.$$is_curried=!0,I},-1),N(A,"$dup",function(){var k=this,T=k.$$original_proc||k,I=function(){return T.apply(this,arguments)};for(var b in k)k.hasOwnProperty(b)&&(I[b]=k[b]);return I}),J(A,"===","call"),J(A,"clone","dup"),J(A,"yield","call"),J(A,"[]","call")},Opal.modules["corelib/method"]=function(l){var Y,H,ee=l.klass,re=l.def,$=l.truthy,K=l.slice,Q=l.alias,N=l.Kernel,x=l.send,B=l.to_a,E=l.nil,W=l.$$$;return(H=(Y=ee("::",null,"Method")).$$prototype).method=H.receiver=H.owner=H.name=E,Y.$attr_reader("owner","receiver","name"),re(Y,"$initialize",function(y,A,L,k){var T=this;return T.receiver=y,T.owner=A,T.name=k,T.method=L}),re(Y,"$arity",function(){return this.method.$arity()}),re(Y,"$parameters",function(){return this.method.$$parameters}),re(Y,"$source_location",function(){var A;return $(A=this.method.$$source_location)?A:["(eval)",0]}),re(Y,"$comments",function(){var A;return $(A=this.method.$$comments)?A:[]}),re(Y,"$call",function F(y){var k,A=F.$$p||E,T=this;return F.$$p=null,k=K(arguments),T.method.$$p=A,T.method.apply(T.receiver,k)},-1),re(Y,"$curry",function(y){return this.method.$curry(y)},-1),re(Y,"$>>",function(y){return this.method["$>>"](y)}),re(Y,"$<<",function(y){return this.method["$<<"](y)}),re(Y,"$unbind",function(){var y=this;return W("UnboundMethod").$new(y.receiver.$class(),y.owner,y.method,y.name)}),re(Y,"$to_proc",function(){var y=this,A=y.$call.bind(y);return A.$$unbound=y.method,A.$$is_lambda=!0,A.$$arity=null==y.method.$$arity?y.method.length:y.method.$$arity,A.$$parameters=y.method.$$parameters,A}),re(Y,"$inspect",function(){var y=this;return"#<"+y.$class()+": "+y.receiver.$class()+"#"+y.name+" (defined in "+y.owner+" in "+y.$source_location().$join(":")+")>"}),Q(Y,"[]","call"),Q(Y,"===","call"),function(U,J){var Y=ee("::",null,"UnboundMethod"),H=Y.$$prototype;return H.method=H.owner=H.name=H.source=E,Y.$attr_reader("source","owner","name"),re(Y,"$initialize",function(y,A,L,k){var T=this;return T.source=y,T.owner=A,T.method=L,T.name=k}),re(Y,"$arity",function(){return this.method.$arity()}),re(Y,"$parameters",function(){return this.method.$$parameters}),re(Y,"$source_location",function(){var A;return $(A=this.method.$$source_location)?A:["(eval)",0]}),re(Y,"$comments",function(){var A;return $(A=this.method.$$comments)?A:[]}),re(Y,"$bind",function(y){var A=this;if(A.owner.$$is_module||l.is_a(y,A.owner))return W("Method").$new(y,A.owner,A.method,A.name);N.$raise(W("TypeError"),"can't bind singleton method to a different class (expected "+y+".kind_of?("+A.owner+" to be true)")}),re(Y,"$bind_call",function F(y,A){var T,L=F.$$p||E;return F.$$p=null,T=K(arguments,1),x(this.$bind(y),"call",B(T),L.$to_proc())},-2),re(Y,"$inspect",function(){var y=this;return"#<"+y.$class()+": "+y.source+"#"+y.name+" (defined in "+y.owner+" in "+y.$source_location().$join(":")+")>"})}()},Opal.modules["corelib/variables"]=function(l){var ee=l.gvars,re=l.const_set,$=l.Object,K=l.hash2,Q=l.nil;return ee["&"]=ee["~"]=ee["`"]=ee["'"]=Q,ee.LOADED_FEATURES=ee['"']=l.loaded_features,ee.LOAD_PATH=ee[":"]=[],ee["/"]="\n",ee[","]=Q,re("::","ARGV",[]),re("::","ARGF",$.$new()),re("::","ENV",K([],{})),ee.VERBOSE=!1,ee.DEBUG=!1,ee.SAFE=0},Opal.modules["corelib/io"]=function(l){var b,f,z,re=l.const_set,$=l.not,K=l.truthy,Q=l.def,N=l.return_ivar,x=l.return_val,B=l.slice,E=l.Kernel,W=l.gvars,U=l.send,J=l.to_a,Y=l.rb_plus,H=l.neqeq,F=l.range,y=l.hash2,A=l.eqeq,L=l.to_ary,k=l.rb_gt,T=l.assign_ivar_val,I=l.alias,g=l.nil,q=l.$$$;(z=(f=(0,l.klass)("::",null,"IO")).$$prototype).read_buffer=z.closed=g,re(f,"SEEK_SET",0),re(f,"SEEK_CUR",1),re(f,"SEEK_END",2),re(f,"SEEK_DATA",3),re(f,"SEEK_HOLE",4),re(f,"READABLE",1),re(f,"WRITABLE",4),f.$attr_reader("eof"),f.$attr_accessor("read_proc","sync","tty","write_proc"),Q(f,"$initialize",function(S,m){var M=this;return null==m&&(m="r"),M.fd=S,M.flags=m,M.eof=!1,K(m["$include?"]("r"))&&$(m["$match?"](/[wa+]/))?M.closed="write":K(m["$match?"](/[wa]/))&&$(m["$match?"](/[r+]/))?M.closed="read":g},-2),Q(f,"$fileno",N("fd")),Q(f,"$tty?",function(){return 1==this.tty}),Q(f,"$write",function(S){return this.write_proc(S),S.$size()}),Q(f,"$flush",x(g)),Q(f,"$<<",function(S){return this.$write(S),this}),Q(f,"$print",function(S){var M;null==W[","]&&(W[","]=g);for(var d=0,a=(M=B(arguments)).length;d<a;d++)M[d]=E.$String(M[d]);return this.$write(M.join(W[","])),g},-1),Q(f,"$puts",function(S){var M,d,h=this;if(0===(M=B(arguments)).length)return h.$write("\n"),g;for(var a=0,r=M.length;a<r;a++)if(M[a].$$is_array){var e=M[a].$flatten();e.length>0&&U(h,"puts",J(e))}else(d=M[a].$$is_string?M[a].valueOf():E.$String(M[a])).endsWith("\n")||(d+="\n"),h.$write(d);return g},-1),Q(f,"$getc",function(){var m,S=this,M=g,h=g;S.read_buffer=K(m=S.read_buffer)?m:"",M="";do{if(S.read_buffer=Y(S.read_buffer,M),H(S.read_buffer,""))return h=S.read_buffer["$[]"](0),S.read_buffer=S.read_buffer["$[]"](F(1,-1,!1)),h}while(K(M=S.$sysread_noraise(1)));return g}),Q(f,"$getbyte",function(){var S;return(S=this.$getc())===g||null==S?g:S.$ord()}),Q(f,"$readbyte",function(){return this.$readchar().$ord()}),Q(f,"$readchar",function(){var m;return K(m=this.$getc())?m:E.$raise(q("EOFError"),"end of file reached")}),Q(f,"$readline",function(S){var m,d;return m=B(arguments),K(d=U(this,"gets",J(m)))?d:E.$raise(q("EOFError"),"end of file reached")},-1),Q(f,"$gets",function(S,m,M){var h,d,r,n,a=this,e=g,t=g,s=g,i=g;null==W["/"]&&(W["/"]=g),null==S&&(S=!1),null==m&&(m=g),null==M&&(M=y([],{})),K(S.$$is_number)&&$(m)&&(S=(h=[!1,S,m])[0],m=h[1],M=h[2]),K(S.$$is_hash)&&$(m)&&A(M,y([],{}))?(S=(h=[!1,g,S])[0],m=h[1],M=h[2]):K(m.$$is_hash)&&A(M,y([],{}))&&(S=(h=[S,g,m])[0],m=h[1],M=h[2]),r=S,A(S,!1)&&(S=W["/"]),A(S,"")&&(S=/\r?\n\r?\n/),S=K(e=S)?e:"",A(r,"")||(S=S.$to_str()),n=A(r,"")?2:S.$length(),A(S," ")&&(S=/ /),a.read_buffer=K(e=a.read_buffer)?e:"",t="",s=g;do{if(a.read_buffer=Y(a.read_buffer,t),H(S,"")&&K(K(S.$$is_regexp)?a.read_buffer["$match?"](S):a.read_buffer["$include?"](S))){i=a.read_buffer,d=a.read_buffer.$split(S,2),s=null==(h=L(d))[0]?g:h[0],a.read_buffer=null==h[1]?g:h[1],H(s,i)&&(s=Y(s,i["$[]"](s.$length(),n)));break}}while(K(t=a.$sysread_noraise(A(S,"")?65536:1)));return K(s)||(s=(h=[K(e=a.read_buffer)?e:"",""])[0],a.read_buffer=h[1],A(s,"")&&(s=g)),K(s)&&(K(m)&&(s=s["$[]"](l.Range.$new(0,m,!0)),a.read_buffer=Y(s["$[]"](l.Range.$new(m,-1,!1)),a.read_buffer)),K(M["$[]"]("chomp"))&&(s=s.$sub(/\r?\n$/,"")),A(r,"")&&(s=s.$sub(/^[\r\n]+/,""))),A(r,!1)&&(W._=s),s},-1),Q(f,"$sysread",function(S){var M;return K(M=this.read_proc(S))?M:(this.eof=!0,E.$raise(q("EOFError"),"end of file reached"))}),Q(f,"$sysread_noraise",function(S){try{return this.$sysread(S)}catch(M){if(!l.rescue(M,[q("EOFError")]))throw M;try{return g}finally{l.pop_exception()}}}),Q(f,"$readpartial",function(S){var m,d,M=this,h=g,a=g;return M.read_buffer=K(h=M.read_buffer)?h:"",d=M.$sysread(S),a=(m=[Y(M.read_buffer,K(h=d)?h:""),""])[0],M.read_buffer=m[1],A(a,"")&&(a=g),a}),Q(f,"$read",function(S){var m,M=this,h=g,d=g,a=g;null==S&&(S=g),M.read_buffer=K(h=M.read_buffer)?h:"",d="",a=g;do{if(M.read_buffer=Y(M.read_buffer,d),K(S)&&K(k(M.read_buffer.$length(),S)))return a=(m=[M.read_buffer["$[]"](l.Range.$new(0,S,!0)),M.read_buffer["$[]"](l.Range.$new(S,-1,!1))])[0],M.read_buffer=m[1],a}while(K(d=M.$sysread_noraise(K(h=S)?h:65536)));return a=(m=[M.read_buffer,""])[0],M.read_buffer=m[1],a},-1),Q(f,"$readlines",function(S){return null==W["/"]&&(W["/"]=g),null==S&&(S=W["/"]),this.$each_line(S).$to_a()},-1),Q(f,"$each",function v(S,m){var h,d,a,M=v.$$p||g,r=this,e=g;if(null==W["/"]&&(W["/"]=g),v.$$p=null,(h=B(arguments)).length>0&&(d=h.shift()),null==d&&(d=W["/"]),a=h,M===g)return U(r,"enum_for",["each",d].concat(J(a)));for(;K(e=U(r,"gets",[d].concat(J(a))));)l.yield1(M,e);return r},-1),Q(f,"$each_byte",function v(){var S=v.$$p||g,m=this,M=g;if(v.$$p=null,S===g)return m.$enum_for("each_byte");for(;K(M=m.$getbyte());)l.yield1(S,M);return m}),Q(f,"$each_char",function v(){var S=v.$$p||g,m=this,M=g;if(v.$$p=null,S===g)return m.$enum_for("each_char");for(;K(M=m.$getc());)l.yield1(S,M);return m}),Q(f,"$close",T("closed","both")),Q(f,"$close_read",function(){return this.closed=A(this.closed,"write")?"both":"read"}),Q(f,"$close_write",function(){return this.closed=A(this.closed,"read")?"both":"write"}),Q(f,"$closed?",function(){return this.closed["$=="]("both")}),Q(f,"$closed_read?",function(){var m;return K(m=this.closed["$=="]("read"))?m:this.closed["$=="]("both")}),Q(f,"$closed_write?",function(){var m;return K(m=this.closed["$=="]("write"))?m:this.closed["$=="]("both")}),Q(f,"$check_writable",function(){return K(this["$closed_write?"]())?E.$raise(q("IOError"),"not opened for writing"):g}),Q(f,"$check_readable",function(){return K(this["$closed_read?"]())?E.$raise(q("IOError"),"not opened for reading"):g}),I(f,"each_line","each"),I(f,"eof?","eof"),re("::","STDIN",W.stdin=q("IO").$new(0,"r")),re("::","STDOUT",W.stdout=q("IO").$new(1,"w")),re("::","STDERR",W.stderr=q("IO").$new(2,"w"));var R=l.global.console;return q("STDOUT")["$write_proc="]("object"==typeof process&&"object"==typeof process.stdout?function(_){process.stdout.write(_)}:function(_){R.log(_)}),q("STDERR")["$write_proc="]("object"==typeof process&&"object"==typeof process.stderr?function(_){process.stderr.write(_)}:function(_){R.warn(_)}),b=[function(_){var p=prompt();return null!==p?p+"\n":g}],U(q("STDIN"),"read_proc=",b),b[b.length-1]},Opal.modules["opal/regexp_anchors"]=function(l){var x,B,E,W,re=l.const_set,$=[],Q=l.$$$;return x=$,E=[B=(0,l.module)($[0],"Opal")].concat(x),W=l.$r(E),re(B,"REGEXP_START","^"),re(B,"REGEXP_END","$"),re(B,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),re(B,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),re(B,"INLINE_IDENTIFIER_REGEXP",W("Regexp").$new("[^"+Q(B,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+Q(B,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),re(B,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),re(B,"CONST_NAME_REGEXP",W("Regexp").$new(Q(B,"REGEXP_START")+"(::)?[A-Z][^"+Q(B,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+Q(B,"REGEXP_END")))},Opal.modules["opal/mini"]=function(l){var ee=l.Object;return ee.$require("opal/base"),ee.$require("corelib/nil"),ee.$require("corelib/boolean"),ee.$require("corelib/string"),ee.$require("corelib/comparable"),ee.$require("corelib/enumerable"),ee.$require("corelib/enumerator"),ee.$require("corelib/array"),ee.$require("corelib/hash"),ee.$require("corelib/number"),ee.$require("corelib/range"),ee.$require("corelib/proc"),ee.$require("corelib/method"),ee.$require("corelib/regexp"),ee.$require("corelib/variables"),ee.$require("corelib/io"),ee.$require("opal/regexp_anchors")},Opal.modules["corelib/kernel/format"]=function(l){var H,ee=l.coerce_to,$=l.slice,K=l.truthy,Q=l.eqeq,N=l.Opal,x=l.Kernel,B=l.gvars,W=l.alias,U=l.nil,J=l.$$$;return(0,l.def)(H=(0,l.module)("::","Kernel"),"$format",function(y,A){var L,k,T=U;null==B.DEBUG&&(B.DEBUG=U),L=$(arguments,1),Q((k=L).$length(),1)&&K(k["$[]"](0)["$respond_to?"]("to_ary"))&&(T=N["$coerce_to?"](k["$[]"](0),J("Array"),"to_ary"),K(T["$nil?"]())||(k=T.$to_a()));var g,q,_,p,f,z,v,S,m,M,h,d,a,r,e,s,I="",b=0,R=y.length,n=1,t=0,O=16;function le(){32&s&&x.$raise(J("ArgumentError"),"flag after width"),128&s&&x.$raise(J("ArgumentError"),"flag after precision")}function oe(){32&s&&x.$raise(J("ArgumentError"),"width given twice"),128&s&&x.$raise(J("ArgumentError"),"width after precision")}function ue(u){return u>=k.length&&x.$raise(J("ArgumentError"),"too few arguments"),k[u]}function ie(){switch(t){case-1:x.$raise(J("ArgumentError"),"unnumbered("+n+") mixed with numbered");case-2:x.$raise(J("ArgumentError"),"unnumbered("+n+") mixed with named")}return ue((t=n++)-1)}function X(u){return t>0&&x.$raise(J("ArgumentError"),"numbered("+u+") after unnumbered("+t+")"),-2===t&&x.$raise(J("ArgumentError"),"numbered("+u+") after named"),u<1&&x.$raise(J("ArgumentError"),"invalid index - "+u+"$"),t=-1,ue(u-1)}function D(){return void 0===e?ie():e}function V(u){for(var w,P="";;q++){if(q===R&&x.$raise(J("ArgumentError"),"malformed format string - %*[0-9]"),y.charCodeAt(q)<48||y.charCodeAt(q)>57)return q--,(w=parseInt(P,10)||0)>2147483647&&x.$raise(J("ArgumentError"),u+" too big"),w;P+=y.charAt(q)}}function Z(u){var w,P=V(u);return"$"===y.charAt(q+1)?(q++,w=X(P)):w=ie(),w.$to_int()}for(q=y.indexOf("%");-1!==q;q=y.indexOf("%",q)){switch(p=void 0,s=0,z=-1,v=-1,e=void 0,g=q,q++,y.charAt(q)){case"%":b=q;case"":case"\n":case"\0":q++;continue}e:for(;q<R;q++)switch(y.charAt(q)){case" ":le(),s|=O;continue e;case"#":le(),s|=1;continue e;case"+":le(),s|=4;continue e;case"-":le(),s|=2;continue e;case"0":le(),s|=8;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(S=V("width"),"$"===y.charAt(q+1)){if(q+2===R){p="%",q++;break e}void 0!==e&&x.$raise(J("ArgumentError"),"value given twice - %"+S+"$"),e=X(S),q++}else oe(),s|=32,z=S;continue e;case"<":case"{":for(M="<"===y.charAt(q)?">":"}",m="",q++;;q++){if(q===R&&x.$raise(J("ArgumentError"),"malformed name - unmatched parenthesis"),y.charAt(q)===M){if(t>0&&x.$raise(J("ArgumentError"),"named "+m+" after unnumbered("+t+")"),-1===t&&x.$raise(J("ArgumentError"),"named "+m+" after numbered"),t=-2,(void 0===k[0]||!k[0].$$is_hash)&&x.$raise(J("ArgumentError"),"one hash required"),e=k[0].$fetch(m),">"===M)continue e;if(p=e.toString(),-1!==v&&(p=p.slice(0,v)),2&s)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e}m+=y.charAt(q)}case"*":q++,oe(),s|=32,(z=Z("width"))<0&&(s|=2,z=-z);continue e;case".":if(128&s&&x.$raise(J("ArgumentError"),"precision given twice"),s|=192,v=0,q++,"*"===y.charAt(q)){q++,(v=Z("precision"))<0&&(s&=-65);continue e}v=V("precision");continue e;case"d":case"i":case"u":if((_=x.$Integer(D()))>=0){for(p=_.toString();p.length<v;)p="0"+p;if(2&s)for((4&s||s&O)&&(p=(4&s?"+":" ")+p);p.length<z;)p+=" ";else if(8&s&&-1===v){for(;p.length<z-(4&s||s&O?1:0);)p="0"+p;(4&s||s&O)&&(p=(4&s?"+":" ")+p)}else for((4&s||s&O)&&(p=(4&s?"+":" ")+p);p.length<z;)p=" "+p}else{for(p=(-_).toString();p.length<v;)p="0"+p;if(2&s)for(p="-"+p;p.length<z;)p+=" ";else if(8&s&&-1===v){for(;p.length<z-1;)p="0"+p;p="-"+p}else for(p="-"+p;p.length<z;)p=" "+p}break e;case"b":case"B":case"o":case"x":case"X":switch(y.charAt(q)){case"b":case"B":h=2,d="0b",a=/^1+/,r="1";break;case"o":h=8,d="0",a=/^3?7+/,r="7";break;case"x":case"X":h=16,d="0x",a=/^f+/,r="f"}if((_=x.$Integer(D()))>=0){for(p=_.toString(h);p.length<v;)p="0"+p;if(2&s)for((4&s||s&O)&&(p=(4&s?"+":" ")+p),1&s&&0!==_&&(p=d+p);p.length<z;)p+=" ";else if(8&s&&-1===v){for(;p.length<z-(4&s||s&O?1:0)-(1&s&&0!==_?d.length:0);)p="0"+p;1&s&&0!==_&&(p=d+p),(4&s||s&O)&&(p=(4&s?"+":" ")+p)}else for(1&s&&0!==_&&(p=d+p),(4&s||s&O)&&(p=(4&s?"+":" ")+p);p.length<z;)p=" "+p}else if(4&s||s&O){for(p=(-_).toString(h);p.length<v;)p="0"+p;if(2&s)for(1&s&&(p=d+p),p="-"+p;p.length<z;)p+=" ";else if(8&s&&-1===v){for(;p.length<z-1-(1&s?2:0);)p="0"+p;1&s&&(p=d+p),p="-"+p}else for(1&s&&(p=d+p),p="-"+p;p.length<z;)p=" "+p}else{for(p=(_>>>0).toString(h).replace(a,r);p.length<v-2;)p=r+p;if(2&s)for(p=".."+p,1&s&&(p=d+p);p.length<z;)p+=" ";else if(8&s&&-1===v){for(;p.length<z-2-(1&s?d.length:0);)p=r+p;p=".."+p,1&s&&(p=d+p)}else for(p=".."+p,1&s&&(p=d+p);p.length<z;)p=" "+p}y.charAt(q)===y.charAt(q).toUpperCase()&&(p=p.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if((_=x.$Float(D()))>=0||isNaN(_)){if(_===1/0)p="Inf";else switch(y.charAt(q)){case"f":p=_.toFixed(-1===v?6:v);break;case"e":case"E":p=_.toExponential(-1===v?6:v);break;case"g":case"G":p=_.toExponential(),(f=parseInt(p.split("e")[1],10))<-4||f>=(-1===v?6:v)||(p=_.toPrecision(-1===v?1&s?6:void 0:v))}if(2&s)for((4&s||s&O)&&(p=(4&s?"+":" ")+p);p.length<z;)p+=" ";else if(8&s&&_!==1/0&&!isNaN(_)){for(;p.length<z-(4&s||s&O?1:0);)p="0"+p;(4&s||s&O)&&(p=(4&s?"+":" ")+p)}else for((4&s||s&O)&&(p=(4&s?"+":" ")+p);p.length<z;)p=" "+p}else{if(_===-1/0)p="Inf";else switch(y.charAt(q)){case"f":p=(-_).toFixed(-1===v?6:v);break;case"e":case"E":p=(-_).toExponential(-1===v?6:v);break;case"g":case"G":p=(-_).toExponential(),(f=parseInt(p.split("e")[1],10))<-4||f>=(-1===v?6:v)||(p=(-_).toPrecision(-1===v?1&s?6:void 0:v))}if(2&s)for(p="-"+p;p.length<z;)p+=" ";else if(8&s&&_!==-1/0){for(;p.length<z-1;)p="0"+p;p="-"+p}else for(p="-"+p;p.length<z;)p=" "+p}y.charAt(q)===y.charAt(q).toUpperCase()&&_!==1/0&&_!==-1/0&&!isNaN(_)&&(p=p.toUpperCase()),p=p.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":x.$raise(J("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if((_=D())["$respond_to?"]("to_ary")&&(_=_.$to_ary()[0]),1!==(p=_["$respond_to?"]("to_str")?_.$to_str():String.fromCharCode(ee(_,J("Integer"),"to_int"))).length&&x.$raise(J("ArgumentError"),"%c requires a character"),2&s)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e;case"p":if(p=D().$inspect(),-1!==v&&(p=p.slice(0,v)),2&s)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e;case"s":if(p=D().$to_s(),-1!==v&&(p=p.slice(0,v)),2&s)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e;default:x.$raise(J("ArgumentError"),"malformed format string - %"+y.charAt(q))}void 0===p&&x.$raise(J("ArgumentError"),"malformed format string - %"),I+=y.slice(b,g)+p,b=q+1}return B.DEBUG&&t>=0&&n<k.length&&x.$raise(J("ArgumentError"),"too many arguments for format string"),I+y.slice(b)},-2),W(H,"sprintf","format")},Opal.modules["corelib/string/encoding"]=function(l){var F,g,q,ee=l.klass,re=l.hash2,$=l.rb_plus,K=l.truthy,Q=l.send,N=l.defs,x=l.eqeq,B=l.def,E=l.return_ivar,W=l.return_val,U=l.slice,J=l.Kernel,Y=l.Opal,H=l.rb_lt,y=l.top,L=l.$r([]),k=l.nil,T=l.$$$;return y.$require("corelib/string"),(q=(g=ee("::",null,"Encoding")).$$prototype).name=q.dummy=k,N(g,"$register",function R(_,p){var v,m,M,f=R.$$p||k,S=k,h=k,d=k;return R.$$p=null,null==p&&(p=re([],{})),v=$([_],K(S=p["$[]"]("aliases"))?S:[]),m=K(S=p["$[]"]("ascii"))&&S,M=K(S=p["$[]"]("dummy"))&&S,K(p["$[]"]("inherits"))?(h=p["$[]"]("inherits").$clone()).$initialize(_,v,m,M):h=this.$new(_,v,m,M),f!==k&&Q(h,"instance_eval",[],f.$to_proc()),d=l.encodings,Q(v,"each",[],function a(r){return null==r&&(r=k),(null==a.$$s?this:a.$$s).$const_set(r.$tr("-","_"),h),d[r]=h},{$$s:this})},-2),N(g,"$find",function(_){return x(_,"default_external")?this.$default_external():l.find_encoding(_)}),g.$singleton_class().$attr_accessor("default_external"),g.$attr_reader("name","names"),B(g,"$initialize",function(_,p,f,z){var v=this;return v.name=_,v.names=p,v.ascii=f,v.dummy=z}),B(g,"$ascii_compatible?",E("ascii")),B(g,"$dummy?",E("dummy")),B(g,"$binary?",W(!1)),B(g,"$to_s",E("name")),B(g,"$inspect",function(){return"#<Encoding:"+this.name+(K(this.dummy)?" (dummy)":k)+">"}),B(g,"$charsize",function(_){for(var p=0,f=0,z=_.length;f<z;f++){var v=_.charCodeAt(f);v>=55296&&v<=56319||p++}return p}),B(g,"$each_char",function R(_){var p=R.$$p||k;R.$$p=null;for(var f="",z=0,v=_.length;z<v;z++){var S=_.charCodeAt(z),m=_.charAt(z);S>=56320&&S<=57343?f=m:(S>=55296&&S<=56319&&(m=f+m),"UTF-8"!=_.encoding.name&&((m=new String(m)).encoding=_.encoding),l.yield1(p,m))}}),B(g,"$each_byte",function(_){return U(arguments),J.$raise(T("NotImplementedError"))},-1),B(g,"$bytesize",function(_){return U(arguments),J.$raise(T("NotImplementedError"))},-1),ee("::",T("StandardError"),"EncodingError"),ee("::",T("EncodingError"),"CompatibilityError"),Q(T("Encoding"),"register",["UTF-8",re(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_byte",function g(q){var R=g.$$p||k;g.$$p=null;for(var p,_=1/0,f=q.length,z=null,v=0;v<f;++v){if((p=q.charCodeAt(v))>55295&&p<57344){if(!z){if(p>56319){(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189));continue}if(v+1===f){(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189));continue}z=p;continue}if(p<56320){(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189)),z=p;continue}p=65536+(z-55296<<10|p-56320)}else z&&(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189));if(z=null,p<128){if((_-=1)<0)break;l.yield1(R,p)}else if(p<2048){if((_-=2)<0)break;l.yield1(R,p>>6|192),l.yield1(R,63&p|128)}else if(p<65536){if((_-=3)<0)break;l.yield1(R,p>>12|224),l.yield1(R,p>>6&63|128),l.yield1(R,63&p|128)}else if(p<1114112){if((_-=4)<0)break;l.yield1(R,p>>18|240),l.yield1(R,p>>12&63|128),l.yield1(R,p>>6&63|128),l.yield1(R,63&p|128)}}}),B(b,"$bytesize",function(q){return q.$bytes().$length()})},{$$s:y}),Q(T("Encoding"),"register",["UTF-16LE"],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_byte",function g(q){var R=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(R,255&f),l.yield1(R,f>>8)}}),B(b,"$bytesize",function(q){return 2*q.length})},{$$s:y}),Q(T("Encoding"),"register",["UTF-16BE",re(["inherits"],{inherits:T(T("Encoding"),"UTF_16LE")})],function I(){return B(null==I.$$s?this:I.$$s,"$each_byte",function g(q){var R=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(R,f>>8),l.yield1(R,255&f)}})},{$$s:y}),Q(T("Encoding"),"register",["UTF-32LE"],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_byte",function g(q){var R=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(R,255&f),l.yield1(R,f>>8),l.yield1(R,0),l.yield1(R,0)}}),B(b,"$bytesize",function(q){return 4*q.length})},{$$s:y}),Q(T("Encoding"),"register",["UTF-32BE",re(["inherits"],{inherits:T(T("Encoding"),"UTF_32LE")})],function I(){return B(null==I.$$s?this:I.$$s,"$each_byte",function g(q){var R=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(R,0),l.yield1(R,0),l.yield1(R,f>>8),l.yield1(R,255&f)}})},{$$s:y}),Q(T("Encoding"),"register",["ASCII-8BIT",re(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_char",function g(q){var R=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=new String(q.charAt(_));f.encoding=q.encoding,l.yield1(R,f)}}),B(b,"$charsize",function(q){return q.length}),B(b,"$each_byte",function g(q){var R=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(R,255&f)}}),B(b,"$bytesize",function(q){return q.length}),B(b,"$binary?",W(!0))},{$$s:y}),T("Encoding").$register("ISO-8859-1",re(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:T(T("Encoding"),"ASCII_8BIT")})),T("Encoding").$register("US-ASCII",re(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:T(T("Encoding"),"ASCII_8BIT")})),function(I,b){var g=ee("::",null,"String"),q=g.$$prototype;q.internal_encoding=q.bytes=q.encoding=k,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),l.prop(String.prototype,"bytes",k),l.prop(String.prototype,"encoding",T(T("Encoding"),"UTF_8")),l.prop(String.prototype,"internal_encoding",T(T("Encoding"),"UTF_8")),B(g,"$b",function(){return this.$dup().$force_encoding("binary")}),B(g,"$bytesize",function(){return this.internal_encoding.$bytesize(this)}),B(g,"$each_byte",function R(){var _=R.$$p||k,p=this;return R.$$p=null,_===k?Q(p,"enum_for",["each_byte"],function f(){return(null==f.$$s?this:f.$$s).$bytesize()},{$$s:p}):(Q(p.internal_encoding,"each_byte",[p],_.$to_proc()),p)}),B(g,"$bytes",function(){var _=this,p=k;return"string"==typeof _?new String(_).$each_byte().$to_a():(_.bytes=K(p=_.bytes)?p:_.$each_byte().$to_a(),_.bytes.$dup())}),B(g,"$each_char",function R(){var _=R.$$p||k,p=this;return R.$$p=null,_===k?Q(p,"enum_for",["each_char"],function f(){return(null==f.$$s?this:f.$$s).$length()},{$$s:p}):(Q(p.encoding,"each_char",[p],_.$to_proc()),p)}),B(g,"$chars",function R(){var _=R.$$p||k;return R.$$p=null,K(_)?Q(this,"each_char",[],_.$to_proc()):this.$each_char().$to_a()}),B(g,"$each_codepoint",function R(){var _=R.$$p||k,p=this;if(R.$$p=null,_===k)return p.$enum_for("each_codepoint");for(var f=0,z=p.length;f<z;f++)l.yield1(_,p.codePointAt(f));return p}),B(g,"$codepoints",function R(){var _=R.$$p||k;return R.$$p=null,_!==k?Q(this,"each_codepoint",[],_.$to_proc()):this.$each_codepoint().$to_a()}),B(g,"$encode",function(_){return l.enc(this,_)}),B(g,"$force_encoding",function(_){var f=this;return _===f.encoding||(_=Y["$coerce_to!"](_,T("String"),"to_s"),(_=T("Encoding").$find(_))===f.encoding)||(f=l.set_encoding(f,_)),f}),B(g,"$getbyte",function(_){var f=k;return f=this.$bytes(),_=Y["$coerce_to!"](_,T("Integer"),"to_int"),K(H(f.$length(),_))?k:f["$[]"](_)}),B(g,"$initialize_copy",function(_){return"\n      self.encoding = other.encoding;\n      self.internal_encoding = other.internal_encoding;\n    "}),B(g,"$valid_encoding?",W(!0))}(),F=[T(L("Encoding"),"UTF_8")],Q(T("Encoding"),"default_external=",F),F[F.length-1]},Opal.modules["corelib/math"]=function(l){var L,k,T,I,ee=l.type_error,$=l.const_set,K=l.Class,Q=l.slice,N=l.Kernel,x=l.defs,B=l.truthy,E=l.send,W=l.def,U=l.rb_minus,J=l.eqeqeq,Y=l.rb_divide,F=l.nil,y=l.$$$;return L=[],T=[k=(0,l.module)("::","Math")].concat(L),I=l.$r(T),$(k,"E",Math.E),$(k,"PI",Math.PI),$(k,"DomainError",K.$new(y("StandardError"))),x(k,"$checked",function(g,q){var _;if(_=Q(arguments,1),isNaN(_[0])||2==_.length&&isNaN(_[1]))return NaN;var p=Math[g].apply(null,_);return isNaN(p)&&N.$raise(I("DomainError"),'Numerical argument is out of domain - "'+g+'"'),p},-2),x(k,"$float!",function(g){try{return N.$Float(g)}catch(q){if(!l.rescue(q,[y("ArgumentError")]))throw q;try{return N.$raise(ee(g,y("Float")))}finally{l.pop_exception()}}}),x(k,"$integer!",function(g){try{return N.$Integer(g)}catch(q){if(!l.rescue(q,[y("ArgumentError")]))throw q;try{return N.$raise(ee(g,y("Integer")))}finally{l.pop_exception()}}}),k.$module_function(),B(typeof Math.erf<"u")||l.prop(Math,"erf",function(b){var z=1;b<0&&(z=-1);var v=1/(1+.3275911*(b=Math.abs(b)));return z*(1-((((1.061405429*v-1.453152027)*v+1.421413741)*v-.284496736)*v+.254829592)*v*Math.exp(-b*b))}),B(typeof Math.erfc<"u")||l.prop(Math,"erfc",function(b){var g=Math.abs(b),q=1/(.5*g+1),d=q*Math.exp(-g*g-1.26551223+q*(q*(q*(q*(q*(q*(q*(q*(.17087277*q-.82215223)+1.48851587)-1.13520398)+.27886807)-.18628806)+.09678418)+.37409196)+1.00002368));return b<0?2-d:d}),E(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function b(g){return null==g&&(g=F),E(null==b.$$s?this:b.$$s,"define_method",[g],function(_){return null==_&&(_=F),y("Math").$checked(g,y("Math")["$float!"](_))})},{$$s:k}),W(k,"$atan2",function(g,q){return y("Math").$checked("atan2",y("Math")["$float!"](g),y("Math")["$float!"](q))}),W(k,"$hypot",function(g,q){return y("Math").$checked("hypot",y("Math")["$float!"](g),y("Math")["$float!"](q))}),W(k,"$frexp",function(g){if(g=I("Math")["$float!"](g),isNaN(g))return[NaN,0];var q=Math.floor(Math.log(Math.abs(g))/Math.log(2))+1;return[g/Math.pow(2,q),q]}),W(k,"$gamma",function(g){g=I("Math")["$float!"](g);var q,R,_,p,f,z,v,S,m,h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(g))return NaN;if(0===g&&1/g<0)return-1/0;if((-1===g||g===-1/0)&&N.$raise(I("DomainError"),'Numerical argument is out of domain - "gamma"'),I("Integer")["$==="](g)){if(g<=0)return isFinite(g)?1/0:NaN;if(g>171)return 1/0;for(p=g-2,f=g-1;p>1;)f*=p,p--;return 0==f&&(f=1),f}if(g<.5)return Math.PI/(Math.sin(Math.PI*g)*y("Math").$gamma(U(1,g)));if(g>=171.35)return 1/0;if(g>85)return m=(S=(v=(z=g*g)*g)*g)*g,Math.sqrt(2*Math.PI/g)*Math.pow(g/Math.E,g)*(1+1/(12*g)+1/(288*z)-139/(51840*v)-571/(2488320*S)+163879/(209018880*m)+5246819/(75246796800*m*g));for(g-=1,_=h[0],q=1;q<h.length;++q)_+=h[q]/(g+q);return R=g+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(R,g+.5)*Math.exp(-R)*_}),W(k,"$ldexp",function(g,q){return g=I("Math")["$float!"](g),q=I("Math")["$integer!"](q),isNaN(q)&&N.$raise(y("RangeError"),"float NaN out of range of integer"),g*Math.pow(2,q)}),W(k,"$lgamma",function(g){return-1==g?[1/0,1]:[Math.log(Math.abs(y("Math").$gamma(g))),y("Math").$gamma(g)<0?-1:1]}),W(k,"$log",function(g,q){return J(y("String"),g)&&N.$raise(ee(g,y("Float"))),B(null==q)?y("Math").$checked("log",y("Math")["$float!"](g)):(J(y("String"),q)&&N.$raise(ee(q,y("Float"))),Y(y("Math").$checked("log",y("Math")["$float!"](g)),y("Math").$checked("log",y("Math")["$float!"](q))))},-2),W(k,"$log10",function(g){return J(y("String"),g)&&N.$raise(ee(g,y("Float"))),y("Math").$checked("log10",y("Math")["$float!"](g))}),W(k,"$log2",function(g){return J(y("String"),g)&&N.$raise(ee(g,y("Float"))),y("Math").$checked("log2",y("Math")["$float!"](g))}),W(k,"$tan",function(g){return g=y("Math")["$float!"](g),B(g["$infinite?"]())?y(y("Float"),"NAN"):y("Math").$checked("tan",y("Math")["$float!"](g))})},Opal.modules["corelib/complex/base"]=function(l){var B,E,W,U,re=l.truthy,$=l.def,K=l.klass,Q=[],N=l.nil;return B=Q,W=[E=(0,l.module)("::","Kernel")].concat(B),U=l.$r(W),$(E,"$Complex",function(Y,H){return null==H&&(H=N),re(H)?U("Complex").$new(Y,H):U("Complex").$new(Y,0)},-2),function(x,B,E){var W=K("::",null,"String"),U=[W].concat(E),J=l.$r(U);return $(W,"$to_c",function(){return J("Complex").$from_string(this)})}(0,0,Q)},Opal.modules["corelib/complex"]=function(l){var q,R,_,p,f,ee=l.klass,re=l.truthy,$=l.eqeqeq,K=l.Kernel,Q=l.defs,N=l.rb_times,x=l.def,B=l.rb_plus,E=l.rb_minus,W=l.rb_divide,U=l.eqeq,J=l.to_ary,Y=l.rb_gt,H=l.neqeq,F=l.return_val,y=l.const_set,A=l.alias,L=l.top,T=l.nil,I=l.$$$;return L.$require("corelib/numeric"),L.$require("corelib/complex/base"),q=[],_=[R=ee("::",I("Numeric"),"Complex")].concat(q),p=l.$r(_),(f=R.$$prototype).real=f.imag=T,Q(R,"$rect",function(v,S){return null==S&&(S=0),$(I("Numeric"),v)&&re(v["$real?"]())&&$(I("Numeric"),S)&&re(S["$real?"]())||K.$raise(I("TypeError"),"not a real"),this.$new(v,S)},-2),Q(R,"$polar",function(v,S){return null==S&&(S=0),$(I("Numeric"),v)&&re(v["$real?"]())&&$(I("Numeric"),S)&&re(S["$real?"]())||K.$raise(I("TypeError"),"not a real"),this.$new(N(v,I("Math").$cos(S)),N(v,I("Math").$sin(S)))},-2),R.$attr_reader("real","imag"),x(R,"$initialize",function(v,S){var m=this;return null==S&&(S=0),m.real=v,m.imag=S,m.$freeze()},-2),x(R,"$coerce",function(v){return $(I("Complex"),v)?[v,this]:$(I("Numeric"),v)&&re(v["$real?"]())?[I("Complex").$new(v,0),this]:K.$raise(I("TypeError"),v.$class()+" can't be coerced into Complex")}),x(R,"$==",function(v){var S=this,m=T;return $(I("Complex"),v)?re(m=S.real["$=="](v.$real()))?S.imag["$=="](v.$imag()):m:$(I("Numeric"),v)&&re(v["$real?"]())?re(m=S.real["$=="](v))?S.imag["$=="](0):m:v["$=="](S)}),x(R,"$-@",function(){return K.$Complex(this.real["$-@"](),this.imag["$-@"]())}),x(R,"$+",function(v){var S=this;return $(I("Complex"),v)?K.$Complex(B(S.real,v.$real()),B(S.imag,v.$imag())):$(I("Numeric"),v)&&re(v["$real?"]())?K.$Complex(B(S.real,v),S.imag):S.$__coerced__("+",v)}),x(R,"$-",function(v){var S=this;return $(I("Complex"),v)?K.$Complex(E(S.real,v.$real()),E(S.imag,v.$imag())):$(I("Numeric"),v)&&re(v["$real?"]())?K.$Complex(E(S.real,v),S.imag):S.$__coerced__("-",v)}),x(R,"$*",function(v){var S=this;return $(I("Complex"),v)?K.$Complex(E(N(S.real,v.$real()),N(S.imag,v.$imag())),B(N(S.real,v.$imag()),N(S.imag,v.$real()))):$(I("Numeric"),v)&&re(v["$real?"]())?K.$Complex(N(S.real,v),N(S.imag,v)):S.$__coerced__("*",v)}),x(R,"$/",function(v){var S=this;return $(I("Complex"),v)?$(I("Number"),S.real)&&re(S.real["$nan?"]())||$(I("Number"),S.imag)&&re(S.imag["$nan?"]())||$(I("Number"),v.$real())&&re(v.$real()["$nan?"]())||$(I("Number"),v.$imag())&&re(v.$imag()["$nan?"]())?I("Complex").$new(I(I("Float"),"NAN"),I(I("Float"),"NAN")):W(N(S,v.$conj()),v.$abs2()):$(I("Numeric"),v)&&re(v["$real?"]())?K.$Complex(S.real.$quo(v),S.imag.$quo(v)):S.$__coerced__("/",v)}),x(R,"$**",function(v){var S,m,M=this,h=T,d=T,a=T,r=T,e=T,n=T,t=T,s=T,i=T,c=T,o=T;if(U(v,0))return I("Complex").$new(1,0);if($(I("Complex"),v))return m=M.$polar(),h=null==(S=J(m))[0]?T:S[0],d=null==S[1]?T:S[1],a=v.$real(),r=v.$imag(),e=I("Math").$exp(E(N(a,I("Math").$log(h)),N(r,d))),n=B(N(d,a),N(r,I("Math").$log(h))),I("Complex").$polar(e,n);if($(I("Integer"),v)){if(re(Y(v,0))){for(s=t=M,i=E(v,1);H(i,0);){for(m=i.$divmod(2),c=null==(S=J(m))[0]?T:S[0],o=null==S[1]?T:S[1];U(o,0);)t=K.$Complex(E(N(t.$real(),t.$real()),N(t.$imag(),t.$imag())),N(N(2,t.$real()),t.$imag())),m=(i=c).$divmod(2),c=null==(S=J(m))[0]?T:S[0],o=null==S[1]?T:S[1];s=N(s,t),i=E(i,1)}return s}return W(I("Rational").$new(1,1),M)["$**"](v["$-@"]())}return $(I("Float"),v)||$(I("Rational"),v)?(m=M.$polar(),h=null==(S=J(m))[0]?T:S[0],d=null==S[1]?T:S[1],I("Complex").$polar(h["$**"](v),N(d,v))):M.$__coerced__("**",v)}),x(R,"$abs",function(){return I("Math").$hypot(this.real,this.imag)}),x(R,"$abs2",function(){var v=this;return B(N(v.real,v.real),N(v.imag,v.imag))}),x(R,"$angle",function(){return I("Math").$atan2(this.imag,this.real)}),x(R,"$conj",function(){return K.$Complex(this.real,this.imag["$-@"]())}),x(R,"$denominator",function(){return this.real.$denominator().$lcm(this.imag.$denominator())}),x(R,"$eql?",function(v){var m,M,S=this;return re(m=re(M=p("Complex")["$==="](v))?S.real.$class()["$=="](S.imag.$class()):M)?S["$=="](v):m}),x(R,"$fdiv",function(v){return $(I("Numeric"),v)||K.$raise(I("TypeError"),v.$class()+" can't be coerced into Complex"),W(this,v)}),x(R,"$finite?",function(){var S;return re(S=this.real["$finite?"]())?this.imag["$finite?"]():S}),x(R,"$hash",function(){return"Complex:"+this.real+":"+this.imag}),x(R,"$infinite?",function(){var S;return re(S=this.real["$infinite?"]())?S:this.imag["$infinite?"]()}),x(R,"$inspect",function(){return"("+this+")"}),x(R,"$numerator",function(){var S,v=this;return S=v.$denominator(),K.$Complex(N(v.real.$numerator(),W(S,v.real.$denominator())),N(v.imag.$numerator(),W(S,v.imag.$denominator())))}),x(R,"$polar",function(){return[this.$abs(),this.$arg()]}),x(R,"$rationalize",function(v){var S=this;return arguments.length>1&&K.$raise(I("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),H(S.imag,0)&&K.$raise(I("RangeError"),"can't convert "+S+" into Rational"),S.$real().$rationalize(v)},-1),x(R,"$real?",F(!1)),x(R,"$rect",function(){return[this.real,this.imag]}),x(R,"$to_f",function(){var v=this;return U(v.imag,0)||K.$raise(I("RangeError"),"can't convert "+v+" into Float"),v.real.$to_f()}),x(R,"$to_i",function(){var v=this;return U(v.imag,0)||K.$raise(I("RangeError"),"can't convert "+v+" into Integer"),v.real.$to_i()}),x(R,"$to_r",function(){var v=this;return U(v.imag,0)||K.$raise(I("RangeError"),"can't convert "+v+" into Rational"),v.real.$to_r()}),x(R,"$to_s",function(){var v=this,S=T;return S=v.real.$inspect(),S=B(S,$(I("Number"),v.imag)&&re(v.imag["$nan?"]())||re(v.imag["$positive?"]())||re(v.imag["$zero?"]())?"+":"-"),S=B(S,v.imag.$abs().$inspect()),$(I("Number"),v.imag)&&(re(v.imag["$nan?"]())||re(v.imag["$infinite?"]()))&&(S=B(S,"*")),B(S,"i")}),y(_[0],"I",R.$new(0,1)),Q(R,"$from_string",function(v){var M,h,S=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;function a(){return S.test(v)}function r(){var t=v.match(S)[0];return v=v.slice(t.length),t.replace(/_/g,"")}function e(){if(a()){var n=parseFloat(r());if("/"===v[0]){if(v=v.slice(1),a()){var t=parseFloat(r());return K.$Rational(n,t)}return v="/"+v,n}return n}return null}return v.match(S),(M=e())?(h=e())?K.$Complex(M,h):"i"===v[0]?K.$Complex(0,M):K.$Complex(M,0):K.$Complex(0,"i"===v[0]?1:"-"===v[0]&&"i"===v[1]?-1:"+"===v[0]&&"i"===v[1]?1:0)}),A(l.get_singleton_class(R),"rectangular","rect"),A(R,"arg","angle"),A(R,"conjugate","conj"),A(R,"divide","/"),A(R,"imaginary","imag"),A(R,"magnitude","abs"),A(R,"phase","arg"),A(R,"quo","/"),A(R,"rectangular","rect"),l.udef(R,"$negative?"),l.udef(R,"$positive?"),l.udef(R,"$step"),T},Opal.modules["corelib/rational/base"]=function(l){var re=l.def,$=l.klass,Q=l.$$$;return re((0,l.module)("::","Kernel"),"$Rational",function(E,W){return null==W&&(W=1),Q("Rational").$convert(E,W)},-2),re($("::",null,"String"),"$to_r",function(){return Q("Rational").$from_string(this)})},Opal.modules["corelib/rational"]=function(l){var R,_,ee=l.klass,re=l.eqeq,$=l.Kernel,K=l.truthy,Q=l.rb_lt,N=l.rb_divide,x=l.defs,B=l.eqeqeq,E=l.not,W=l.Opal,U=l.def,J=l.return_ivar,Y=l.rb_minus,H=l.rb_times,F=l.rb_plus,y=l.rb_gt,A=l.rb_le,L=l.return_self,k=l.alias,T=l.top,I=l.nil,b=l.$$$;return T.$require("corelib/numeric"),T.$require("corelib/rational/base"),(_=(R=ee("::",b("Numeric"),"Rational")).$$prototype).num=_.den=I,x(R,"$reduce",function(f,z){var S;if(f=f.$to_i(),z=z.$to_i(),re(z,0))$.$raise(b("ZeroDivisionError"),"divided by 0");else if(K(Q(z,0)))f=f["$-@"](),z=z["$-@"]();else if(re(z,1))return this.$new(f,z);return S=f.$gcd(z),this.$new(N(f,S),N(z,S))}),x(R,"$convert",function(f,z){return(K(f["$nil?"]())||K(z["$nil?"]()))&&$.$raise(b("TypeError"),"cannot convert nil into Rational"),B(b("Integer"),f)&&B(b("Integer"),z)?this.$reduce(f,z):((B(b("Float"),f)||B(b("String"),f)||B(b("Complex"),f))&&(f=f.$to_r()),(B(b("Float"),z)||B(b("String"),z)||B(b("Complex"),z))&&(z=z.$to_r()),K(z["$equal?"](1))&&E(b("Integer")["$==="](f))?W["$coerce_to!"](f,b("Rational"),"to_r"):B(b("Numeric"),f)&&B(b("Numeric"),z)?N(f,z):this.$reduce(f,z))}),U(R,"$initialize",function(f,z){var v=this;return v.num=f,v.den=z,v.$freeze()}),U(R,"$numerator",J("num")),U(R,"$denominator",J("den")),U(R,"$coerce",function(f){var v,z=this;return B(b("Rational"),v=f)?[f,z]:B(b("Integer"),v)?[f.$to_r(),z]:B(b("Float"),v)?[f,z.$to_f()]:I}),U(R,"$==",function(f){var v,z=this,S=I;return B(b("Rational"),v=f)?K(S=z.num["$=="](f.$numerator()))?z.den["$=="](f.$denominator()):S:B(b("Integer"),v)?K(S=z.num["$=="](f))?z.den["$=="](1):S:B(b("Float"),v)?z.$to_f()["$=="](f):f["$=="](z)}),U(R,"$<=>",function(f){var v,z=this;return B(b("Rational"),v=f)?Y(H(z.num,f.$denominator()),H(z.den,f.$numerator()))["$<=>"](0):B(b("Integer"),v)?Y(z.num,H(z.den,f))["$<=>"](0):B(b("Float"),v)?z.$to_f()["$<=>"](f):z.$__coerced__("<=>",f)}),U(R,"$+",function(f){var v,z=this,S=I,m=I;return B(b("Rational"),v=f)?(S=F(H(z.num,f.$denominator()),H(z.den,f.$numerator())),m=H(z.den,f.$denominator()),$.$Rational(S,m)):B(b("Integer"),v)?$.$Rational(F(z.num,H(f,z.den)),z.den):B(b("Float"),v)?F(z.$to_f(),f):z.$__coerced__("+",f)}),U(R,"$-",function(f){var v,z=this,S=I,m=I;return B(b("Rational"),v=f)?(S=Y(H(z.num,f.$denominator()),H(z.den,f.$numerator())),m=H(z.den,f.$denominator()),$.$Rational(S,m)):B(b("Integer"),v)?$.$Rational(Y(z.num,H(f,z.den)),z.den):B(b("Float"),v)?Y(z.$to_f(),f):z.$__coerced__("-",f)}),U(R,"$*",function(f){var v,z=this,S=I,m=I;return B(b("Rational"),v=f)?(S=H(z.num,f.$numerator()),m=H(z.den,f.$denominator()),$.$Rational(S,m)):B(b("Integer"),v)?$.$Rational(H(z.num,f),z.den):B(b("Float"),v)?H(z.$to_f(),f):z.$__coerced__("*",f)}),U(R,"$/",function(f){var v,z=this,S=I,m=I;return B(b("Rational"),v=f)?(S=H(z.num,f.$denominator()),m=H(z.den,f.$numerator()),$.$Rational(S,m)):B(b("Integer"),v)?re(f,0)?N(z.$to_f(),0):$.$Rational(z.num,H(z.den,f)):B(b("Float"),v)?N(z.$to_f(),f):z.$__coerced__("/",f)}),U(R,"$**",function(f){var v,z=this;return B(b("Integer"),v=f)?re(z,0)&&K(Q(f,0))?b(b("Float"),"INFINITY"):K(y(f,0))?$.$Rational(z.num["$**"](f),z.den["$**"](f)):K(Q(f,0))?$.$Rational(z.den["$**"](f["$-@"]()),z.num["$**"](f["$-@"]())):$.$Rational(1,1):B(b("Float"),v)?z.$to_f()["$**"](f):B(b("Rational"),v)?re(f,0)?$.$Rational(1,1):re(f.$denominator(),1)?K(Q(f,0))?$.$Rational(z.den["$**"](f.$numerator().$abs()),z.num["$**"](f.$numerator().$abs())):$.$Rational(z.num["$**"](f.$numerator()),z.den["$**"](f.$numerator())):re(z,0)&&K(Q(f,0))?$.$raise(b("ZeroDivisionError"),"divided by 0"):z.$to_f()["$**"](f):z.$__coerced__("**",f)}),U(R,"$abs",function(){return $.$Rational(this.num.$abs(),this.den.$abs())}),U(R,"$ceil",function(f){var z=this;return null==f&&(f=0),re(f,0)?N(z.num["$-@"](),z.den)["$-@"]().$ceil():z.$with_precision("ceil",f)},-1),U(R,"$floor",function(f){var z=this;return null==f&&(f=0),re(f,0)?N(z.num["$-@"](),z.den)["$-@"]().$floor():z.$with_precision("floor",f)},-1),U(R,"$hash",function(){return"Rational:"+this.num+":"+this.den}),U(R,"$inspect",function(){return"("+this+")"}),U(R,"$rationalize",function(f){var z=this;if(arguments.length>1&&$.$raise(b("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==f)return z;for(var r,e,n,t,s,v=f.$abs(),S=Y(z,v),m=F(z,v),M=0,h=1,d=1,a=0;n=S.$ceil(),!A(n,m);)r=(t=n-1)*h+M,e=t*a+d,s=N(1,Y(m,t)),m=N(1,Y(S,t)),S=s,M=h,d=a,h=r,a=e;return $.$Rational(n*h+M,n*a+d)},-1),U(R,"$round",function(f){var z=this,v=I,S=I,m=I;return null==f&&(f=0),re(f,0)?re(z.num,0)?0:re(z.den,1)?z.num:(v=F(H(z.num.$abs(),2),z.den),S=H(z.den,2),m=N(v,S).$truncate(),K(Q(z.num,0))?m["$-@"]():m):z.$with_precision("round",f)},-1),U(R,"$to_f",function(){return N(this.num,this.den)}),U(R,"$to_i",function(){return this.$truncate()}),U(R,"$to_r",L),U(R,"$to_s",function(){return this.num+"/"+this.den}),U(R,"$truncate",function(f){var z=this;return null==f&&(f=0),re(f,0)?K(Q(z.num,0))?z.$ceil():z.$floor():z.$with_precision("truncate",f)},-1),U(R,"$with_precision",function(f,z){var S,m=I;return B(b("Integer"),z)||$.$raise(b("TypeError"),"not an Integer"),S=10["$**"](z),m=H(this,S),K(Q(z,1))?N(m.$send(f),S).$to_i():$.$Rational(m.$send(f),S)}),x(R,"$from_string",function(f){var m,M,z=f.trimLeft(),v=/^[+-]?[\d_]+(\.[\d_]+)?/;function h(){return v.test(z)}function d(){var r=z.match(v)[0];return z=z.slice(r.length),r.replace(/_/g,"")}return z.match(v),h()?(m=parseFloat(d()),"/"===z[0]?(z=z.slice(1),h()?(M=parseFloat(d()),$.$Rational(m,M)):$.$Rational(m,1)):$.$Rational(m,1)):$.$Rational(0,1)}),k(R,"divide","/"),k(R,"quo","/")},Opal.modules["corelib/time"]=function(l){var ee=l.slice,re=l.deny_frozen_access,$=l.klass,K=l.Kernel,Q=l.Opal,N=l.defs,x=l.eqeqeq,B=l.def,E=l.truthy,W=l.rb_gt,U=l.rb_lt,J=l.send,Y=l.rb_plus,H=l.rb_divide,F=l.rb_minus,y=l.range,A=l.neqeq,L=l.rb_le,k=l.eqeq,T=l.alias,g=l.nil,q=l.$$$;return l.top.$require("corelib/comparable"),function(R,_,p){var f=$("::",_,"Time"),z=[f].concat([]),v=l.$r(z);f.$include(q("Comparable"));var a,S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(a,r,e,n,t,s){if(a=a.$$is_string?parseInt(a,10):Q["$coerce_to!"](a,q("Integer"),"to_int"),r===g)r=1;else if(!r.$$is_number)if(r["$respond_to?"]("to_str"))switch(r=r.$to_str(),r.toLowerCase()){case"jan":r=1;break;case"feb":r=2;break;case"mar":r=3;break;case"apr":r=4;break;case"may":r=5;break;case"jun":r=6;break;case"jul":r=7;break;case"aug":r=8;break;case"sep":r=9;break;case"oct":r=10;break;case"nov":r=11;break;case"dec":r=12;break;default:r=r.$to_i()}else r=Q["$coerce_to!"](r,q("Integer"),"to_int");return(r<1||r>12)&&K.$raise(q("ArgumentError"),"month out of range: "+r),r-=1,((e=e===g?1:e.$$is_string?parseInt(e,10):Q["$coerce_to!"](e,q("Integer"),"to_int"))<1||e>31)&&K.$raise(q("ArgumentError"),"day out of range: "+e),((n=n===g?0:n.$$is_string?parseInt(n,10):Q["$coerce_to!"](n,q("Integer"),"to_int"))<0||n>24)&&K.$raise(q("ArgumentError"),"hour out of range: "+n),((t=t===g?0:t.$$is_string?parseInt(t,10):Q["$coerce_to!"](t,q("Integer"),"to_int"))<0||t>59)&&K.$raise(q("ArgumentError"),"min out of range: "+t),s===g?s=0:s.$$is_number||(s=s.$$is_string?parseInt(s,10):Q["$coerce_to!"](s,q("Integer"),"to_int")),(s<0||s>60)&&K.$raise(q("ArgumentError"),"sec out of range: "+s),[a,r,e,n,t,s]}return N(f,"$at",function(r,e){var n;return q("Time")["$==="](r)?(void 0!==e&&K.$raise(q("TypeError"),"can't convert Time into an exact number"),(n=new Date(r.getTime())).timezone=r.timezone,n):(r.$$is_number||(r=Q["$coerce_to!"](r,q("Integer"),"to_int")),void 0===e?new Date(1e3*r):(e.$$is_number||(e=Q["$coerce_to!"](e,q("Integer"),"to_int")),new Date(1e3*r+e/1e3)))},-2),N(f,"$new",function(r,e,n,t,s,i,c){var j,C,O,te;return null==e&&(e=g),null==n&&(n=g),null==t&&(t=g),null==s&&(s=g),null==i&&(i=g),null==c&&(c=g),void 0===r?new Date:(r=(j=d(r,e,n,t,s,i))[0],e=j[1],n=j[2],t=j[3],s=j[4],i=j[5],c===g?(C=new Date(r,e,n,t,s,0,1e3*i),r<100&&C.setFullYear(r),C):(O=this.$_parse_offset(c),te=new Date(Date.UTC(r,e,n,t,s,0,1e3*i)),r<100&&te.setUTCFullYear(r),(C=new Date(te.getTime()-36e5*O)).timezone=O,C))},-1),N(f,"$_parse_offset",function(r){var e;return r.$$is_string?"UTC"==r?e=0:/^[+-]\d\d:[0-5]\d$/.test(r)?e=("-"==r[0]?-1:1)*(+(r[1]+r[2])+ +(r[4]+r[5])/60):K.$raise(q("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+r):r.$$is_number?e=r/3600:K.$raise(q("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String"),e}),N(f,"$local",function(r,e,n,t,s,i,c,o,j,C){var O,te;return null==e&&(e=g),null==n&&(n=g),null==t&&(t=g),null==s&&(s=g),null==i&&(i=g),null==c&&(c=g),null==o&&(o=g),null==j&&(j=g),null==C&&(C=g),10===arguments.length&&(r=(O=ee(arguments))[5],e=O[4],n=O[3],t=O[2],s=O[1],i=O[0]),r=(O=d(r,e,n,t,s,i))[0],e=O[1],n=O[2],t=O[3],s=O[4],i=O[5],te=new Date(r,e,n,t,s,0,1e3*i),r<100&&te.setFullYear(r),te},-2),N(f,"$gm",function(r,e,n,t,s,i,c,o,j,C){var O,te;return null==e&&(e=g),null==n&&(n=g),null==t&&(t=g),null==s&&(s=g),null==i&&(i=g),null==c&&(c=g),null==o&&(o=g),null==j&&(j=g),null==C&&(C=g),10===arguments.length&&(r=(O=ee(arguments))[5],e=O[4],n=O[3],t=O[2],s=O[1],i=O[0]),r=(O=d(r,e,n,t,s,i))[0],e=O[1],n=O[2],t=O[3],s=O[4],i=O[5],te=new Date(Date.UTC(r,e,n,t,s,0,1e3*i)),r<100&&te.setUTCFullYear(r),te.timezone=0,te},-2),N(f,"$now",function(){return this.$new()}),B(f,"$+",function(r){x(q("Time"),r)&&K.$raise(q("TypeError"),"time + time?"),r.$$is_number||(r=Q["$coerce_to!"](r,q("Integer"),"to_int"));var n=new Date(this.getTime()+1e3*r);return n.timezone=this.timezone,n}),B(f,"$-",function(r){var e=this;if(x(q("Time"),r))return(e.getTime()-r.getTime())/1e3;r.$$is_number||(r=Q["$coerce_to!"](r,q("Integer"),"to_int"));var n=new Date(e.getTime()-1e3*r);return n.timezone=e.timezone,n}),B(f,"$<=>",function(r){var n=g;return x(q("Time"),r)?this.$to_f()["$<=>"](r.$to_f()):(n=r["$<=>"](this),E(n["$nil?"]())?g:E(W(n,0))?-1:E(U(n,0))?1:0)}),B(f,"$==",function(r){var n;return E(n=q("Time")["$==="](r))?this.$to_f()===r.$to_f():n}),B(f,"$asctime",function(){return this.$strftime("%a %b %e %H:%M:%S %Y")}),J([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a(r,e,n,t){var s=null==a.$$s?this:a.$$s;return null==r&&(r=g),null==e&&(e=g),null==n&&(n=g),null==t&&(t=0),J(s,"define_method",[r],function i(){var c=null==i.$$s?this:i.$$s;return t+(null!=c.timezone?new Date(c.getTime()+36e5*c.timezone)[n]():c[e]())},{$$s:s})},{$$arity:-4,$$s:f}),B(f,"$yday",function(){var e,n,r=this;return e=v("Time").$new(r.$year()).$to_i(),n=v("Time").$new(r.$year(),r.$month(),r.$day()).$to_i(),Y(H(F(n,e),86400).$round(),1)}),B(f,"$isdst",function(){var r=this,e=new Date(r.getFullYear(),0,1),n=new Date(r.getFullYear(),6,1);return r.getTimezoneOffset()<Math.max(e.getTimezoneOffset(),n.getTimezoneOffset())}),B(f,"$dup",function(){var r=this,e=g;return(e=new Date(r.getTime())).$copy_instance_variables(r),e.$initialize_dup(r),e}),B(f,"$eql?",function(r){var n;return E(n=r["$is_a?"](q("Time")))?this["$<=>"](r)["$zero?"]():n}),J([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a(r,e){var n=null==a.$$s?this:a.$$s;return null==r&&(r=g),null==e&&(e=g),J(n,"define_method",[r],function t(){return(null==t.$$s?this:t.$$s).$wday()===e},{$$s:n})},{$$s:f}),B(f,"$hash",function(){return"Time:"+this.getTime()}),B(f,"$inspect",function(){var r=this;return E(r["$utc?"]())?r.$strftime("%Y-%m-%d %H:%M:%S UTC"):r.$strftime("%Y-%m-%d %H:%M:%S %z")}),B(f,"$succ",function(){var e=new Date(this.getTime()+1e3);return e.timezone=this.timezone,e}),B(f,"$usec",function(){return 1e3*this.getMilliseconds()}),B(f,"$zone",function(){var r=this;if(0===r.timezone)return"UTC";if(null!=r.timezone)return g;var n,e=r.toString();return"GMT"==(n=-1==e.indexOf("(")?e.match(/[A-Z]{3,4}/)[0]:e.match(/\((.+)\)(?:\s|$)/)[1])&&/(GMT\W*\d{4})/.test(e)?RegExp.$1:n}),B(f,"$getgm",function(){var e=new Date(this.getTime());return e.timezone=0,e}),B(f,"$gmtime",function(){var r=this;return 0!==r.timezone&&(re(r),r.timezone=0),r}),B(f,"$gmt?",function(){return 0===this.timezone}),B(f,"$gmt_offset",function(){var r=this;return null!=r.timezone?60*r.timezone:60*-r.getTimezoneOffset()}),B(f,"$strftime",function(r){var e=this;return r.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(n,t,s,i,c){var j,C,O,o="",te=-1!==t.indexOf("0"),ne=-1===t.indexOf("-"),ae=-1!==t.indexOf("_"),le=-1!==t.indexOf("^"),oe=-1!==t.indexOf("#"),ue=(t.match(":")||[]).length;switch(s=parseInt(s,10),te&&ae&&(t.indexOf("0")<t.indexOf("_")?te=!1:ae=!1),c){case"Y":o+=e.$year();break;case"C":te=!ae,o+=Math.round(e.$year()/100);break;case"y":te=!ae,o+=e.$year()%100;break;case"m":te=!ae,o+=e.$mon();break;case"B":o+=h[e.$mon()-1];break;case"b":case"h":ae=!te,o+=M[e.$mon()-1];break;case"d":te=!ae,o+=e.$day();break;case"e":ae=!te,o+=e.$day();break;case"j":te=!ae,s=isNaN(s)?3:s,o+=e.$yday();break;case"H":te=!ae,o+=e.$hour();break;case"k":ae=!te,o+=e.$hour();break;case"I":te=!ae,o+=e.$hour()%12||12;break;case"l":ae=!te,o+=e.$hour()%12||12;break;case"P":o+=e.$hour()>=12?"pm":"am";break;case"p":o+=e.$hour()>=12?"PM":"AM";break;case"M":te=!ae,o+=e.$min();break;case"S":te=!ae,o+=e.$sec();break;case"L":te=!ae,s=isNaN(s)?3:s,o+=e.getMilliseconds();break;case"N":s=isNaN(s)?9:s,o=(o+=e.getMilliseconds().toString().$rjust(3,"0")).$ljust(s,"0");break;case"z":var ie=null==e.timezone?e.getTimezoneOffset():60*-e.timezone,X=Math.floor(Math.abs(ie)/60),D=Math.abs(ie)%60;o+=ie<0?"+":"-",o+=X<10?"0":"",o+=X,ue>0&&(o+=":"),o+=D<10?"0":"",o+=D,ue>1&&(o+=":00");break;case"Z":o+=e.$zone();break;case"A":o+=S[e.$wday()];break;case"a":o+=m[e.$wday()];break;case"u":o+=e.$wday()+1;break;case"w":o+=e.$wday();break;case"V":o+=e.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":o+=e.$cweek_cyear()["$[]"](1);break;case"g":o+=e.$cweek_cyear()["$[]"](1)["$[]"](y(-2,-1,!1));break;case"s":o+=e.$to_i();break;case"n":o+="\n";break;case"t":o+="\t";break;case"%":o+="%";break;case"c":o+=e.$strftime("%a %b %e %T %Y");break;case"D":case"x":o+=e.$strftime("%m/%d/%y");break;case"F":o+=e.$strftime("%Y-%m-%d");break;case"v":o+=e.$strftime("%e-%^b-%4Y");break;case"r":o+=e.$strftime("%I:%M:%S %p");break;case"R":o+=e.$strftime("%H:%M");break;case"T":case"X":o+=e.$strftime("%H:%M:%S");break;case"J":if((j=e.$to_date().$jd())<2405160){o+=e.$strftime("%Y-%m-%d");break}j<2419614?(C="M",O=1867):j<2424875?(C="T",O=1911):j<2447535?(C="S",O=1925):j<2458605?(C="H",O=1988):(C="R",O=2018),o+=e.$format("%c%02d",C,F(e.$year(),O)),o+=e.$strftime("-%m-%d");break;default:return n}return le&&(o=o.toUpperCase()),oe&&(o=o.replace(/[A-Z]/,function(V){V.toLowerCase()}).replace(/[a-z]/,function(V){V.toUpperCase()})),ne&&(te||ae)&&(o=o.$rjust(isNaN(s)?2:s,ae?" ":"0")),o})}),B(f,"$to_a",function(){var r=this;return[r.$sec(),r.$min(),r.$hour(),r.$day(),r.$month(),r.$year(),r.$wday(),r.$yday(),r.$isdst(),r.$zone()]}),B(f,"$to_f",function(){return this.getTime()/1e3}),B(f,"$to_i",function(){return parseInt(this.getTime()/1e3,10)}),B(f,"$cweek_cyear",function(){var n,r=this,s=g,i=g,c=g,j=g;return n=q("Time").$new(r.$year(),1,1).$wday(),s=r.$year(),E(L(n,4))&&A(n,0)?i=F(n,1):(i=F(F(n,7),1),k(i,-8)&&(i=-1)),c=H(Y(r.$yday(),i),7).$ceil(),E(L(c,0))?q("Time").$new(F(r.$year(),1),12,31).$cweek_cyear():(k(c,53)&&(j=q("Time").$new(r.$year(),12,31).$wday(),E(L(j,3))&&A(j,0)&&(c=1,s=Y(s,1))),[c,s])}),a=l.get_singleton_class(f),T(a,"mktime","local"),T(a,"utc","gm"),T(f,"ctime","asctime"),T(f,"dst?","isdst"),T(f,"getutc","getgm"),T(f,"gmtoff","gmt_offset"),T(f,"mday","day"),T(f,"month","mon"),T(f,"to_s","inspect"),T(f,"tv_sec","to_i"),T(f,"tv_usec","usec"),T(f,"utc","gmtime"),T(f,"utc?","gmt?"),T(f,"utc_offset","gmt_offset")}(0,Date)},Opal.modules["corelib/struct"]=function(l){var ee=l.klass,re=l.slice,$=l.extract_kwargs,K=l.ensure_kwargs,Q=l.truthy,N=l.neqeq,x=l.eqeq,B=l.Opal,E=l.send,W=l.Class,U=l.to_a,J=l.def,Y=l.defs,H=l.Kernel,F=l.hash2,y=l.rb_gt,A=l.rb_minus,L=l.eqeqeq,k=l.rb_lt,T=l.rb_ge,I=l.rb_plus,b=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),function(p,f,z){var v=ee("::",null,"Struct"),S=[v].concat([]),m=l.$r(S);v.$include(_("Enumerable")),Y(v,"$new",function h(d,a,r){var n,t,s,i,e=h.$$p||R,o=R;if(h.$$p=null,n=re(arguments,1),t=$(n),t=K(t),s=n,null==(i=t.$$smap.keyword_init)&&(i=!1),Q(d))if(x(d.$class(),_("String"))&&N(d["$[]"](0).$upcase(),d["$[]"](0)))s.$unshift(d),d=R;else try{d=B["$const_name!"](d)}catch(j){if(!l.rescue(j,[_("TypeError"),_("NameError")]))throw j;try{s.$unshift(d),d=R}finally{l.pop_exception()}}return E(s,"map",[],function(C){return null==C&&(C=R),B["$coerce_to!"](C,_("String"),"to_str")}),o=E(W,"new",[this],function j(){var O,C=null==j.$$s?this:j.$$s;return E(s,"each",[],function O(te){return null==te&&(te=R),(null==O.$$s?this:O.$$s).$define_struct_attribute(te)},{$$s:C}),O=l.get_singleton_class(C),J(O,"$new",function(ae){var oe,ie=R;return oe=re(arguments),(ie=this.$allocate()).$$data={},E(ie,"initialize",U(oe)),ie},-1),O.$alias_method("[]","new")},{$$s:this}),Q(e)&&E(o,"module_eval",[],e.$to_proc()),o.$$keyword_init=i,Q(d)&&_("Struct").$const_set(d,o),o},-2),Y(v,"$define_struct_attribute",function(d){var a=this;return x(a,_("Struct"))&&H.$raise(_("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](d),E(a,"define_method",[d],function r(){return(null==r.$$s?this:r.$$s).$$data[d]},{$$s:a}),E(a,"define_method",[d+"="],function r(e){return null==e&&(e=R),(null==r.$$s?this:r.$$s).$$data[d]=e},{$$s:a})}),Y(v,"$members",function(){var a,d=this;return null==d.members&&(d.members=R),x(d,_("Struct"))&&H.$raise(_("ArgumentError"),"the Struct class has no members"),d.members=Q(a=d.members)?a:[]}),Y(v,"$inherited",function(d){var r,a=this;return null==a.members&&(a.members=R),r=a.members,E(d,"instance_eval",[],function e(){return(null==e.$$s?this:e.$$s).members=r},{$$s:a})}),J(v,"$initialize",function(d){var a,r,e=this,n=R,t=R,s=R;return a=re(arguments),r=a,Q(e.$class().$$keyword_init)?(n=Q(t=r.$last())?t:F([],{}),(Q(y(r.$length(),1))||Q(1===r.length&&!n.$$is_hash))&&H.$raise(_("ArgumentError"),"wrong number of arguments (given "+r.$length()+", expected 0)"),s=A(n.$keys(),e.$class().$members()),Q(s["$any?"]())&&H.$raise(_("ArgumentError"),"unknown keywords: "+s.$join(", ")),E(e.$class().$members(),"each",[],function i(c){var o,j=null==i.$$s?this:i.$$s;return null==c&&(c=R),o=[c,n["$[]"](c)],E(j,"[]=",o),o[o.length-1]},{$$s:e})):(Q(y(r.$length(),e.$class().$members().$length()))&&H.$raise(_("ArgumentError"),"struct size differs"),E(e.$class().$members(),"each_with_index",[],function i(c,o){var j,C=null==i.$$s?this:i.$$s;return null==c&&(c=R),null==o&&(o=R),j=[c,r["$[]"](o)],E(C,"[]=",j),j[j.length-1]},{$$s:e}))},-1),J(v,"$initialize_copy",function(d){this.$$data={};var e,n,t,r=Object.keys(d.$$data);for(e=0,n=r.length;e<n;e++)this.$$data[t=r[e]]=d.$$data[t]}),Y(v,"$keyword_init?",function(){return this.$$keyword_init}),J(v,"$members",function(){return this.$class().$members()}),J(v,"$hash",function(){return m("Hash").$new(this.$$data).$hash()}),J(v,"$[]",function(d){var a=this;return L(_("Integer"),d)?(Q(k(d,a.$class().$members().$size()["$-@"]()))&&H.$raise(_("IndexError"),"offset "+d+" too small for struct(size:"+a.$class().$members().$size()+")"),Q(T(d,a.$class().$members().$size()))&&H.$raise(_("IndexError"),"offset "+d+" too large for struct(size:"+a.$class().$members().$size()+")"),d=a.$class().$members()["$[]"](d)):L(_("String"),d)?a.$$data.hasOwnProperty(d)||H.$raise(_("NameError").$new("no member '"+d+"' in struct",d)):H.$raise(_("TypeError"),"no implicit conversion of "+d.$class()+" into Integer"),d=B["$coerce_to!"](d,_("String"),"to_str"),a.$$data[d]}),J(v,"$[]=",function(d,a){var r=this;return L(_("Integer"),d)?(Q(k(d,r.$class().$members().$size()["$-@"]()))&&H.$raise(_("IndexError"),"offset "+d+" too small for struct(size:"+r.$class().$members().$size()+")"),Q(T(d,r.$class().$members().$size()))&&H.$raise(_("IndexError"),"offset "+d+" too large for struct(size:"+r.$class().$members().$size()+")"),d=r.$class().$members()["$[]"](d)):L(_("String"),d)?Q(r.$class().$members()["$include?"](d.$to_sym()))||H.$raise(_("NameError").$new("no member '"+d+"' in struct",d)):H.$raise(_("TypeError"),"no implicit conversion of "+d.$class()+" into Integer"),d=B["$coerce_to!"](d,_("String"),"to_str"),r.$$data[d]=a}),J(v,"$==",function(d){if(!Q(d["$instance_of?"](this.$class())))return!1;var r={},e={};return function n(t,s){var i,c,o;for(i in r[t.$__id__()]=!0,e[s.$__id__()]=!0,t.$$data)if(c=t.$$data[i],o=s.$$data[i],_("Struct")["$==="](c)){if(!(r.hasOwnProperty(c.$__id__())&&e.hasOwnProperty(o.$__id__())||n(c,o)))return!1}else if(!c["$=="](o))return!1;return!0}(this,d)}),J(v,"$eql?",function(d){if(!Q(d["$instance_of?"](this.$class())))return!1;var r={},e={};return function n(t,s){var i,c,o;for(i in r[t.$__id__()]=!0,e[s.$__id__()]=!0,t.$$data)if(c=t.$$data[i],o=s.$$data[i],_("Struct")["$==="](c)){if(!(r.hasOwnProperty(c.$__id__())&&e.hasOwnProperty(o.$__id__())||n(c,o)))return!1}else if(!c["$eql?"](o))return!1;return!0}(this,d)}),J(v,"$each",function h(){var d=h.$$p||R,a=this;return h.$$p=null,d===R?E(a,"enum_for",["each"],function r(){return(null==r.$$s?this:r.$$s).$size()},{$$s:a}):(E(a.$class().$members(),"each",[],function r(e){return null==e&&(e=R),l.yield1(d,(null==r.$$s?this:r.$$s)["$[]"](e))},{$$s:a}),a)}),J(v,"$each_pair",function h(){var d=h.$$p||R,a=this;return h.$$p=null,d===R?E(a,"enum_for",["each_pair"],function r(){return(null==r.$$s?this:r.$$s).$size()},{$$s:a}):(E(a.$class().$members(),"each",[],function r(e){return null==e&&(e=R),l.yield1(d,[e,(null==r.$$s?this:r.$$s)["$[]"](e)])},{$$s:a}),a)}),J(v,"$length",function(){return this.$class().$members().$length()}),J(v,"$to_a",function(){return E(this.$class().$members(),"map",[],function a(r){return null==r&&(r=R),(null==a.$$s?this:a.$$s)["$[]"](r)},{$$s:this})});var M=[];return J(v,"$inspect",function(){var d=this,a=R,r=R;return function(){try{return a="#<struct ",Q(M["$include?"](d.$__id__()))?I(a,":...>"):(M["$<<"](d.$__id__()),r=!0,L(_("Struct"),d)&&Q(d.$class().$name())&&(a=I(a,d.$class()+" ")),a=I(a,E(d.$each_pair(),"map",[],function(n,t){return null==n&&(n=R),null==t&&(t=R),n+"="+m("Opal").$inspect(t)}).$join(", ")),a=I(a,">"))}finally{Q(r)&&M.pop()}}()}),J(v,"$to_h",function h(){var d=h.$$p||R,a=this;return h.$$p=null,d!==R?E(E(a,"map",[],d.$to_proc()),"to_h",U(a.$args())):E(a.$class().$members(),"each_with_object",[F([],{})],function r(e,n){var t;return null==e&&(e=R),null==n&&(n=R),t=[e,(null==r.$$s?this:r.$$s)["$[]"](e)],E(n,"[]=",t),t[t.length-1]},{$$s:a})}),J(v,"$values_at",function(d){var a,r;a=re(arguments);for(var n=[],t=0,s=(r=E(r=a,"map",[],function(c){return null==c&&(c=R),c.$$is_range?c.$to_a():c}).$flatten()).length;t<s;t++)r[t].$$is_number||H.$raise(_("TypeError"),"no implicit conversion of "+r[t].$class()+" into Integer"),n.push(this["$[]"](r[t]));return n},-1),J(v,"$dig",function(d,a){var e,t=R;return e=re(arguments,1),(t=Q(d.$$is_string&&this.$$data.hasOwnProperty(d))&&this.$$data[d]||R)===R||0===e.length?t:(Q(t["$respond_to?"]("dig"))||H.$raise(_("TypeError"),t.$class()+" does not have #dig method"),E(t,"dig",U(e)))},-2),b(v,"size","length"),b(v,"to_s","inspect"),b(v,"values","to_a")}()},Opal.modules["corelib/set"]=function(l){var ee=l.freeze,re=l.klass,$=l.slice,K=l.defs,Q=l.hash2,N=l.truthy,x=l.eqeqeq,B=l.Kernel,E=l.send,W=l.def,U=l.eqeq,J=l.rb_lt,Y=l.rb_le,H=l.alias,y=l.nil,A=l.$$$;return function(L,k,T){var I=re("::",null,"Set"),b=[I].concat([]),g=l.$r(b);function _(p){N(p["$is_a?"](A("Set")))||B.$raise(A("ArgumentError"),"value must be a set")}return I.$$prototype.hash=y,I.$include(A("Enumerable")),K(I,"$[]",function(f){var z;return z=$(arguments),this.$new(z)},-1),W(I,"$initialize",function p(f){var z=p.$$p||y,v=this;return p.$$p=null,null==f&&(f=y),v.hash=Q([],{}),N(f["$nil?"]())?y:(x(A("Enumerable"),f)||B.$raise(A("ArgumentError"),"value must be enumerable"),N(z)?E(f,"each",[],function S(m){return null==m&&(m=y),(null==S.$$s?this:S.$$s).$add(l.yield1(z,m))},{$$s:v}):v.$merge(f))},-1),W(I,"$dup",function(){return this.$class().$new().$merge(this)}),W(I,"$-",function(f){return N(f["$respond_to?"]("each"))||B.$raise(A("ArgumentError"),"value must be enumerable"),this.$dup().$subtract(f)}),W(I,"$inspect",function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"}),W(I,"$==",function(f){var z=this;return!!N(z["$equal?"](f))||(N(f["$instance_of?"](z.$class()))?z.hash["$=="](f.$instance_variable_get("@hash")):!(!N(f["$is_a?"](A("Set")))||!U(z.$size(),f.$size()))&&E(f,"all?",[],function v(S){var m=null==v.$$s?this:v.$$s;return null==m.hash&&(m.hash=y),null==S&&(S=y),m.hash["$include?"](S)},{$$s:z}))}),W(I,"$add",function(f){return this.hash["$[]="](f,!0),this}),W(I,"$classify",function p(){var f=p.$$p||y,z=this,v=y;return p.$$p=null,f===y?z.$enum_for("classify"):(v=E(A("Hash"),"new",[],function S(m,M){var h;return null==m&&(m=y),null==M&&(M=y),h=[M,(null==S.$$s?this:S.$$s).$class().$new()],E(m,"[]=",h),h[h.length-1]},{$$s:z}),E(z,"each",[],function(m){return null==m&&(m=y),v["$[]"](l.yield1(f,m)).$add(m)}),v)}),W(I,"$collect!",function p(){var f=p.$$p||y,z=this,v=y;return p.$$p=null,f===y?z.$enum_for("collect!"):(v=z.$class().$new(),E(z,"each",[],function(m){return null==m&&(m=y),v["$<<"](l.yield1(f,m))}),z.$replace(v))}),W(I,"$compare_by_identity",function(){var f=this;return N(f.hash["$respond_to?"]("compare_by_identity"))?(f.hash.$compare_by_identity(),f):f.$raise(g("NotImplementedError"),f.$class().$name()+"#compare_by_identity is not implemented")}),W(I,"$compare_by_identity?",function(){var z;return N(z=this.hash["$respond_to?"]("compare_by_identity?"))?this.hash["$compare_by_identity?"]():z}),W(I,"$delete",function(f){return this.hash.$delete(f),this}),W(I,"$delete?",function(f){var z=this;return N(z["$include?"](f))?(z.$delete(f),z):y}),W(I,"$delete_if",function p(){var f=p.$$p||y,z=this;return p.$$p=null,f===y?z.$enum_for("delete_if"):(E(E(z,"select",[],function(S){return null==S&&(S=y),l.yield1(f,S)}),"each",[],function v(S){var m=null==v.$$s?this:v.$$s;return null==m.hash&&(m.hash=y),null==S&&(S=y),m.hash.$delete(S)},{$$s:z}),z)}),W(I,"$freeze",function(){var f=this;return N(f["$frozen?"]())?f:(f.hash.$freeze(),ee(f))}),W(I,"$keep_if",function p(){var f=p.$$p||y,z=this;return p.$$p=null,f===y?z.$enum_for("keep_if"):(E(E(z,"reject",[],function(S){return null==S&&(S=y),l.yield1(f,S)}),"each",[],function v(S){var m=null==v.$$s?this:v.$$s;return null==m.hash&&(m.hash=y),null==S&&(S=y),m.hash.$delete(S)},{$$s:z}),z)}),W(I,"$reject!",function p(){var f=p.$$p||y,z=this,v=y;return p.$$p=null,f===y?z.$enum_for("reject!"):(v=z.$size(),E(z,"delete_if",[],f.$to_proc()),U(z.$size(),v)?y:z)}),W(I,"$select!",function p(){var f=p.$$p||y,z=this,v=y;return p.$$p=null,f===y?z.$enum_for("select!"):(v=z.$size(),E(z,"keep_if",[],f.$to_proc()),U(z.$size(),v)?y:z)}),W(I,"$add?",function(f){return N(this["$include?"](f))?y:this.$add(f)}),W(I,"$each",function p(){var f=p.$$p||y,z=this;return p.$$p=null,f===y?z.$enum_for("each"):(E(z.hash,"each_key",[],f.$to_proc()),z)}),W(I,"$empty?",function(){return this.hash["$empty?"]()}),W(I,"$eql?",function(f){return this.hash["$eql?"](E(f,"instance_eval",[],function v(){var S=null==v.$$s?this:v.$$s;return null==S.hash&&(S.hash=y),S.hash},{$$s:this}))}),W(I,"$clear",function(){return this.hash.$clear(),this}),W(I,"$include?",function(f){return this.hash["$include?"](f)}),W(I,"$merge",function(f){return E(f,"each",[],function v(S){return null==S&&(S=y),(null==v.$$s?this:v.$$s).$add(S)},{$$s:this}),this}),W(I,"$replace",function(f){var z=this;return z.$clear(),z.$merge(f),z}),W(I,"$size",function(){return this.hash.$size()}),W(I,"$subtract",function(f){return E(f,"each",[],function v(S){return null==S&&(S=y),(null==v.$$s?this:v.$$s).$delete(S)},{$$s:this}),this}),W(I,"$|",function(f){return N(f["$respond_to?"]("each"))||B.$raise(A("ArgumentError"),"value must be enumerable"),this.$dup().$merge(f)}),W(I,"$superset?",function(f){return _(f),!N(J(this.$size(),f.$size()))&&E(f,"all?",[],function v(S){return null==S&&(S=y),(null==v.$$s?this:v.$$s)["$include?"](S)},{$$s:this})}),W(I,"$proper_superset?",function(f){return _(f),!N(Y(this.$size(),f.$size()))&&E(f,"all?",[],function v(S){return null==S&&(S=y),(null==v.$$s?this:v.$$s)["$include?"](S)},{$$s:this})}),W(I,"$subset?",function(f){return _(f),!N(J(f.$size(),this.$size()))&&E(this,"all?",[],function(S){return null==S&&(S=y),f["$include?"](S)})}),W(I,"$proper_subset?",function(f){return _(f),!N(Y(f.$size(),this.$size()))&&E(this,"all?",[],function(S){return null==S&&(S=y),f["$include?"](S)})}),W(I,"$intersect?",function(f){var z=this;return _(f),N(J(z.$size(),f.$size()))?E(z,"any?",[],function(S){return null==S&&(S=y),f["$include?"](S)}):E(f,"any?",[],function v(S){return null==S&&(S=y),(null==v.$$s?this:v.$$s)["$include?"](S)},{$$s:z})}),W(I,"$disjoint?",function(f){return this["$intersect?"](f)["$!"]()}),W(I,"$to_a",function(){return this.hash.$keys()}),H(I,"+","|"),H(I,"<","proper_subset?"),H(I,"<<","add"),H(I,"<=","subset?"),H(I,">","proper_superset?"),H(I,">=","superset?"),H(I,"difference","-"),H(I,"filter!","select!"),H(I,"length","size"),H(I,"map!","collect!"),H(I,"member?","include?"),H(I,"union","|")}()},Opal.modules["corelib/dir"]=function(l){var Y,U,re=l.def,$=l.truthy,K=l.alias,N=l.nil,x=l.$$$;return[U=(0,l.klass)("::",null,"Dir")].concat([]),Y=l.get_singleton_class(U),re(Y,"$chdir",function F(y){var A=F.$$p||N,L=N;return F.$$p=null,function(){try{return L=l.current_dir,l.current_dir=y,l.yieldX(A,[])}finally{l.current_dir=L}}()}),re(Y,"$pwd",function(){return l.current_dir||"."}),re(Y,"$home",function(){var y;return $(y=x("ENV")["$[]"]("HOME"))?y:"."}),K(Y,"getwd","pwd")},Opal.modules["corelib/file"]=function(l){var I,b,g,q,ee=l.truthy,$=l.const_set,K=l.Opal,Q=l.regexp,N=l.rb_plus,x=l.def,B=l.Kernel,E=l.eqeq,W=l.rb_lt,U=l.rb_minus,J=l.range,Y=l.send,H=l.slice,F=l.alias,A=l.nil,L=l.$$$;return I=[],g=[b=(0,l.klass)("::",L("IO"),"File")].concat(I),q=A,$(g[0],"Separator",$(g[0],"SEPARATOR","/")),$(g[0],"ALT_SEPARATOR",A),$(g[0],"PATH_SEPARATOR",":"),$(g[0],"FNM_SYSCASE",0),q=/^[a-zA-Z]:(?:\\|\/)/,function(R,_){var p=[R].concat(_),f=l.$r(p);function z(S){return ee(S["$respond_to?"]("to_path"))&&(S=S.$to_path()),K["$coerce_to!"](S,L("String"),"to_str")}function v(){return f("ALT_SEPARATOR")===A?l.escape_regexp(f("SEPARATOR")):l.escape_regexp(N(f("SEPARATOR"),f("ALT_SEPARATOR")))}return x(R,"$absolute_path",function(m,M){var h,d,r,e,n,a=A,t=A,s=A,i=A,c=A;null==M&&(M=A),h=f("SEPARATOR"),d=v(),a=[],m=ee(m["$respond_to?"]("to_path"))?m.$to_path():m,m=K["$coerce_to!"](m,L("String"),"to_str"),M=ee(r=M)?r:L("Dir").$pwd(),e=m.substr(0,h.length)===h||q.test(m),n=M.substr(0,h.length)===h||q.test(M),ee(e)?(t=m.$split(Q(["[",d,"]"])),s=q.test(m)?"":m.$sub(Q(["^([",d,"]+).*$"]),"\\1"),i=!0):(t=N(M.$split(Q(["[",d,"]"])),m.$split(Q(["[",d,"]"]))),s=q.test(M)?"":M.$sub(Q(["^([",d,"]+).*$"]),"\\1"),i=n);for(var o,j=0,C=t.length;j<C;j++)(o=t[j])!==A&&(""!==o||0!==a.length&&!i)&&("."!==o||0!==a.length&&!i)&&(".."===o?a.pop():a.push(o));return!i&&"."!==t[0]&&a.$unshift("."),c=a.$join(h),ee(i)&&(c=N(s,c)),c},-2),x(R,"$expand_path",function(m,M){var d,a,r=A,e=A,n=A;return null==M&&(M=A),d=f("SEPARATOR"),a=v(),ee("~"===m[0]||M&&"~"===M[0])&&(r=f("Dir").$home(),ee(r)||B.$raise(L("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),e=q.test(r)?"":r.$sub(Q(["^([",a,"]+).*$"]),"\\1"),ee(r["$start_with?"](e))||B.$raise(L("ArgumentError"),"non-absolute home"),r=N(r,d),n=Q(["^\\~(?:",d,"|$)"]),m=m.$sub(n,r),ee(M)&&(M=M.$sub(n,r))),this.$absolute_path(m,M)},-2),x(R,"$dirname",function(m,M){var d;if(null==M&&(M=1),E(M,0))return m;ee(W(M,0))&&B.$raise(L("ArgumentError"),"level can't be negative"),d=v();var r,a=(m=z(m)).match(new RegExp("^["+d+"]"));return r=""===(m=(m=(m=m.replace(new RegExp("["+d+"]+$"),"")).replace(new RegExp("[^"+d+"]+$"),"")).replace(new RegExp("["+d+"]+$"),""))?a?"/":".":m,1==M?r:this.$dirname(r,U(M,1))},-2),x(R,"$basename",function(m,M){var h;return null==M&&(M=A),h=v(),0==(m=z(m)).length||(M=M!==A?K["$coerce_to!"](M,L("String"),"to_str"):null,m=(m=m.replace(new RegExp("(.)["+h+"]*$"),"$1")).replace(new RegExp("^(?:.*["+h+"])?([^"+h+"]+)$"),"$1"),".*"===M?m=m.replace(/\.[^\.]+$/,""):null!==M&&(M=l.escape_regexp(M),m=m.replace(new RegExp(M+"$"),""))),m},-2),x(R,"$extname",function(m){var h=A,d=A;return m=z(m),h=this.$basename(m),ee(h["$empty?"]())||(d=h["$[]"](J(1,-1,!1)).$rindex("."),ee(d["$nil?"]())||E(N(d,1),U(h.$length(),1)))?"":h["$[]"](l.Range.$new(N(d,1),-1,!1))}),x(R,"$exist?",function(m){return null!=l.modules[m]}),x(R,"$directory?",function(m){var M=A;for(var h in M=[],l.modules)M.push(h);return m=m.$gsub(Q(["(^.",f("SEPARATOR"),"+|",f("SEPARATOR"),"+$)"])),Y(M,"find",[],function(a){return null==a&&(a=A),a["$=~"](Q(["^",m]))})}),x(R,"$join",function(m){var M,h,d=A;return M=H(arguments),ee((h=M)["$empty?"]())?"":(d="",h=Y(h.$flatten().$each_with_index(),"map",[],function(r,e){return null==r&&(r=A),null==e&&(e=A),E(e,0)&&ee(r["$empty?"]())||E(h.$length(),N(e,1))&&ee(r["$empty?"]())?f("SEPARATOR"):r}),h=Y(h,"reject",[],"empty?".$to_proc()),Y(h,"each_with_index",[],function(r,e){var n=A;return null==r&&(r=A),null==e&&(e=A),n=h["$[]"](N(e,1)),ee(n["$nil?"]())?d=""+d+r:(ee(r["$end_with?"](f("SEPARATOR")))&&ee(n["$start_with?"](f("SEPARATOR")))&&(r=r.$sub(Q([f("SEPARATOR"),"+$"]),"")),d=ee(r["$end_with?"](f("SEPARATOR")))||ee(n["$start_with?"](f("SEPARATOR")))?""+d+r:""+d+r+f("SEPARATOR"))}),d)},-1),x(R,"$split",function(m){return m.$split(f("SEPARATOR"))}),F(R,"realpath","expand_path"),F(R,"exists?","exist?")}(l.get_singleton_class(b),g)},Opal.modules["corelib/process/base"]=function(l){var B,ee=l.klass,re=l.slice,$=l.defs,K=l.return_val,Q=l.nil;return B=ee("::",null,"Signal"),$(B,"$trap",function(W){return re(arguments),Q},-1),function(N,x){var B=ee("::",null,"GC");return $(B,"$start",K(Q))}()},Opal.modules["corelib/process"]=function(l){var ee=l.module,re=l.defs,$=l.truthy,K=l.return_val,Q=l.Kernel,N=l.nil,x=l.$$$;return function(B){var E=ee("::","Process"),W=N;if(E.__clocks__=[],re(E,"$__register_clock__",function(Y,H){var F=this;return null==F.__clocks__&&(F.__clocks__=N),F.$const_set(Y,F.__clocks__.$size()),F.__clocks__["$<<"](H)}),E.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),W=!1,l.global.performance)W=function(){return performance.now()};else if(l.global.process&&process.hrtime){var U=process.hrtime();W=function(){var J=process.hrtime(U);return 1e3*J[0]+(J[1]/1e3|0)/1e3}}return $(W)&&E.$__register_clock__("CLOCK_MONOTONIC",W),re(E,"$pid",K(0)),re(E,"$times",function(){var Y;return Y=x("Time").$now().$to_f(),x(x("Benchmark"),"Tms").$new(Y,Y,Y,Y,Y)}),re(E,"$clock_gettime",function(Y,H){var F=this,A=N;null==F.__clocks__&&(F.__clocks__=N),null==H&&(H="float_second"),$(A=F.__clocks__["$[]"](Y))||Q.$raise(x(x("Errno"),"EINVAL"),"clock_gettime("+Y+") "+F.__clocks__["$[]"](Y));var L=A();switch(H){case"float_second":return L/1e3;case"float_millisecond":return L/1;case"float_microsecond":return 1e3*L;case"second":return L/1e3|0;case"millisecond":return L/1|0;case"microsecond":return 1e3*L|0;case"nanosecond":return 1e6*L|0;default:Q.$raise(x("ArgumentError"),"unexpected unit: "+H)}},-2)}()},Opal.modules["corelib/random/formatter"]=function(l){var H,L,k,T,I,F,re=l.module,$=l.def,K=l.range,Q=l.send,N=l.rb_divide,x=l.Kernel,B=l.Opal,W=l.nil,U=l.$$$;return H=[],L=[F=(0,l.klass)("::",null,"Random")].concat(H),T=[k=re(F,"Formatter")].concat(L),I=l.$r(T),$(k,"$hex",function(g){null==g&&(g=W),g=U("Random").$_verify_count(g);for(var R=this.$bytes(g),_="",p=0;p<g;p++)_+=R.charCodeAt(p).toString(16).padStart(2,"0");return _.$encode("US-ASCII")},-1),$(k,"$random_bytes",function(g){return null==g&&(g=W),this.$bytes(g)},-1),$(k,"$base64",function(g){return null==g&&(g=W),U("Base64").$strict_encode64(this.$random_bytes(g)).$encode("US-ASCII")},-1),$(k,"$urlsafe_base64",function(g,q){return null==g&&(g=W),null==q&&(q=!1),U("Base64").$urlsafe_encode64(this.$random_bytes(g),q).$encode("US-ASCII")},-1),$(k,"$uuid",function(){var q=W;return(q=this.$hex(16).$split(""))["$[]="](12,"4"),q["$[]="](16,(3&parseInt(q["$[]"](16),16)|8).toString(16)),q=[q["$[]"](K(0,8,!0)),q["$[]"](K(8,12,!0)),q["$[]"](K(12,16,!0)),q["$[]"](K(16,20,!0)),q["$[]"](K(20,32,!0))],(q=Q(q,"map",[],"join".$to_proc())).$join("-")}),$(k,"$random_float",function(){var q=W,R=W;return q=this.$bytes(4),R=0,Q(4,"times",[],function(p){return null==p&&(p=W),R=(R=R["$<<"](8))["$|"](q["$[]"](p).$ord())}),N(R.$abs(),2147483647)}),$(k,"$random_number",function(g){var q=this;function R(){return q.$random_float()}function _(f){return Math.floor(R()*f)}return null==g?R():g.$$is_range?function p(){var f=g.begin,z=g.end;if(f===W||z===W)return W;var v=z-f;return v<0?W:0===v?f:(z%1==0&&f%1==0&&!g.excl&&v++,_(v)+f)}():g.$$is_number?(g<=0&&x.$raise(U("ArgumentError"),"invalid argument - "+g),g%1==0?_(g):R()*g):((g=B["$coerce_to!"](g,U("Integer"),"to_int"))<=0&&x.$raise(U("ArgumentError"),"invalid argument - "+g),_(g))},-1),$(k,"$alphanumeric",function(g){var R=W;return null==g&&(g=W),g=I("Random").$_verify_count(g),R=Q([K("0","9",!1),K("a","z",!1),K("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),Q(U("Array"),"new",[g],function _(p){return null==p&&(p=W),R["$[]"]((null==_.$$s?this:_.$$s).$random_number(R.$length()))},{$$s:this}).$join()},-1),F.$include(U(U("Random"),"Formatter")),F.$extend(U(U("Random"),"Formatter"))},Opal.modules["corelib/random/mersenne_twister"]=function(l){var W,E,U,ee=l.klass,re=l.const_set,$=l.send,Q=l.$$$,N=l.nil;return N=function(){var x=624,B=397,Y=function(T,I){return function(T,I){return 2147483648&T|2147483647&I}(T,I)>>>1^(1&I?2567483615:0)};function A(T){var I;return--T.left<=0&&function y(T){var g,I=0,b=T.state;for(T.left=x,T.next=0,g=228;--g;I++)b[I]=b[I+B]^Y(b[I+0],b[I+1]);for(g=B;--g;I++)b[I]=b[I+(B-x)]^Y(b[I+0],b[I+1]);b[I]=b[I+(B-x)]^Y(b[I+0],b[0])}(T),I=T.state[T.next++],I^=I>>>11,I^=I<<7&2636928640,I^=I<<15&4022730752,(I^=I>>>18)>>>0}return{genrand_real:function k(T){return function L(T,I){return(67108864*(T>>>=5)+(I>>>=6))*(1/9007199254740992)}(A(T),A(T))},init:function H(T){var I={left:0,next:x,state:new Array(x)};return function F(T,I){var b;for(T.state[0]=I>>>0,b=1;b<x;b++)T.state[b]=1812433253*(T.state[b-1]^T.state[b-1]>>30>>>0)+b,T.state[b]&=4294967295;T.left=1,T.next=x}(I,T),I}}}(),E=ee("::",null,"Random"),U=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,re(E,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*U)},reseed:function(J){return N.init(J)},rand:function(J){return N.genrand_real(J)}}),$(E,"generator=",W=[Q(E,"MERSENNE_TWISTER_GENERATOR")]),W[W.length-1]},Opal.modules["corelib/random"]=function(l){var H,ee=l.truthy,re=l.klass,$=l.Kernel,K=l.defs,Q=l.Opal,N=l.def,x=l.eqeqeq,B=l.send,E=l.top,W=l.nil,U=l.$$$;return E.$require("corelib/random/formatter"),(H=re("::",null,"Random")).$attr_reader("seed","state"),K(H,"$_verify_count",function(y){return ee(y)||(y=16),"number"!=typeof y&&(y=y.$to_int()),y<0&&$.$raise(U("ArgumentError"),"negative string size (or size too big)"),Math.floor(y)}),N(H,"$initialize",function(y){return null==y&&(y=U("Random").$new_seed()),y=Q["$coerce_to!"](y,U("Integer"),"to_int"),this.state=y,this.$reseed(y)},-1),N(H,"$reseed",function(y){return this.seed=y,this.$rng=l.$$rand.reseed(y)}),K(H,"$new_seed",function(){return l.$$rand.new_seed()}),K(H,"$rand",function(y){return U(this,"DEFAULT").$rand(y)},-1),K(H,"$srand",function(y){var L;return null==y&&(y=U("Random").$new_seed()),y=Q["$coerce_to!"](y,U("Integer"),"to_int"),L=U(this,"DEFAULT").$seed(),U(this,"DEFAULT").$reseed(y),L},-1),K(H,"$urandom",function(y){return U("SecureRandom").$bytes(y)}),N(H,"$==",function(y){var L=W;return!!x(U("Random"),y)&&(ee(L=this.$seed()["$=="](y.$seed()))?this.$state()["$=="](y.$state()):L)}),N(H,"$bytes",function(y){return y=U("Random").$_verify_count(y),B(U("Array"),"new",[y],function L(){return(null==L.$$s?this:L.$$s).$rand(255).$chr()},{$$s:this}).$join().$encode("ASCII-8BIT")}),K(H,"$bytes",function(y){return U(this,"DEFAULT").$bytes(y)}),N(H,"$rand",function(y){return this.$random_number(y)},-1),N(H,"$random_float",function(){return this.state++,l.$$rand.rand(this.$rng)}),K(H,"$random_float",function(){return U(this,"DEFAULT").$random_float()}),K(H,"$generator=",function(y){var A=this;return l.$$rand=y,ee(A["$const_defined?"]("DEFAULT"))?U(A,"DEFAULT").$reseed():A.$const_set("DEFAULT",A.$new(A.$new_seed()))}),E.$require("corelib/random/mersenne_twister")},Opal.modules["corelib/unsupported"]=function(l){var L,k,ee=l.Kernel,re=l.klass,$=l.send,K=l.slice,Q=l.module,N=l.def,x=l.return_val,B=l.alias,E=l.defs,W=l.top,J=l.nil,Y=l.$$$,H={};function F(A){switch(l.config.unsupported_features_severity){case"error":ee.$raise(Y("NotImplementedError"),A);break;case"warning":!function y(A){H[A]||(H[A]=!0,W.$warn(A))}(A)}}return k=re("::",null,"String"),$(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function I(b){return null==b&&(b=J),$(null==I.$$s?this:I.$$s,"define_method",[b],function(R){return K(arguments),ee.$raise(Y("NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"](b))},-1)},{$$s:k}),function(A){var L=Q("::","Kernel"),k="Object tainting is not supported by Opal";N(L,"$taint",function(){return F(k),this}),N(L,"$untaint",function(){return F(k),this}),N(L,"$tainted?",function(){return F(k),!1})}(),function(A,L){var k=re("::",null,"Module");N(k,"$public",function(I){var g;return 0===(g=K(arguments)).length?(this.$$module_function=!1,J):1===g.length?g[0]:g},-1),N(k,"$private_class_method",function(I){var g;return 1===(g=K(arguments)).length?g[0]:g},-1),N(k,"$private_method_defined?",x(!1)),N(k,"$private_constant",function(I){return K(arguments),J},-1),B(k,"nesting","public"),B(k,"private","public"),B(k,"protected","public"),B(k,"protected_method_defined?","private_method_defined?"),B(k,"public_class_method","private_class_method"),B(k,"public_instance_method","instance_method"),B(k,"public_instance_methods","instance_methods"),B(k,"public_method_defined?","method_defined?")}(),L=Q("::","Kernel"),N(L,"$private_methods",function(T){return K(arguments),[]},-1),B(L,"protected_methods","private_methods"),B(L,"private_instance_methods","private_methods"),B(L,"protected_instance_methods","private_methods"),function(A,L){var k=Q("::","Kernel"),T=[k].concat([]),I=l.$r(T);N(k,"$eval",function(g){return K(arguments),ee.$raise(Y("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. See https://github.com/opal/opal/blob/"+I("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details.")},-1)}(),E(W,"$public",function(L){var T;return 1===(T=K(arguments)).length?T[0]:T},-1),E(W,"$private",function(L){var T;return 1===(T=K(arguments)).length?T[0]:T},-1)},Opal.modules["corelib/binding"]=function(l){var k,T,re=l.truthy,$=l.def,K=l.slice,Q=l.send,N=l.to_a,x=l.Kernel,B=l.return_ivar,E=l.eqeq,W=l.thrower,U=l.module,J=l.const_set,Y=l.top,F=l.nil,y=l.$$$;return(T=(k=(0,l.klass)("::",null,"Binding")).$$prototype).jseval=T.scope_variables=F,$(k,"$initialize",function(b,g,q,R){var _,p=this;return null==g&&(g=[]),null==R&&(R=F),p.jseval=(_=[b,g,q,R])[0],p.scope_variables=_[1],p.receiver=_[2],p.source_location=_[3],re(void 0!==typeof q)?F:q=p.$js_eval("self")},-2),$(k,"$js_eval",function(b){var q;return q=K(arguments),re(this.jseval)?Q(this.jseval,"call",N(q)):x.$raise("Evaluation on a Proc#binding is not supported")},-1),$(k,"$local_variable_get",function(b){try{return this.$js_eval(b)}catch(q){if(!l.rescue(q,[y("Exception")]))throw q;try{return x.$raise(y("NameError"),"local variable `"+b+"' is not defined for "+this.$inspect())}finally{l.pop_exception()}}}),$(k,"$local_variable_set",function(b,g){return l.Binding.tmp_value=g,this.$js_eval(b+" = Opal.Binding.tmp_value"),delete l.Binding.tmp_value,g}),$(k,"$local_variables",B("scope_variables")),$(k,"$local_variable_defined?",function(b){return this.scope_variables["$include?"](b)}),$(k,"$eval",function(b,g,q){try{return W("eval_return"),null==g&&(g=F),null==q&&(q=F),E(b,"self")?this.$receiver():x.$eval(b,this,g,q)}catch(p){if(p===l.t_eval_return)return p.$v;throw p}},-2),k.$attr_reader("receiver","source_location"),$(U("::","Kernel"),"$binding",function(){return x.$raise("Opal doesn't support dynamic calls to binding")}),J([][0],"TOPLEVEL_BINDING",y("Binding").$new(function(A){return new Function("self","return "+A)(Y)},[],Y,["<main>",0]))},Opal.modules["corelib/irb"]=function(l){var I,R,S,m,_,p,f,g,ee=l.module,re=l.truthy,$=l.Kernel,K=l.defs,Q=l.hash,N=l.gvars,x=l.lambda,B=l.send,E=l.rb_plus,W=l.const_set,U=l.klass,J=l.def,Y=l.Opal,H=l.range,F=l.eqeq,y=l.thrower,A=[],L=l.nil,k=l.$$$;I=A,R=g=[ee(A[0],"Opal")].concat(I),p=[_=ee(g[0],"IRB")].concat(R),f=l.$r(p),K(_,"$ensure_loaded",function(v){var m,M;if(re(l.loaded_features["$include?"](v)))return L;if(m="https://cdn.opalrb.com/opal/"+(re(f("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":f("RUBY_ENGINE_VERSION"))+"/"+v+".js",typeof XMLHttpRequest<"u"){var h=new XMLHttpRequest;h.open("GET",m,!1),h.send(""),M=h.responseText}else $.$raise("You need to provision "+v+" yourself in this environment");return new Function("Opal",M)(l),l.require(v),re(l.loaded_features["$include?"](v))?L:$.$raise("Could not load "+v+" for some reason")}),_.$singleton_class().$attr_accessor("output"),K(_,"$prepare_console",function z(){var v=z.$$p||L,m=this,M=L,h=L;return null==N.stdout&&(N.stdout=L),null==N.stderr&&(N.stderr=L),null==N.stdin&&(N.stdin=L),z.$$p=null,function(){try{return m["$output="](""),M=Q(N.stdout,x(function(a){return null==a&&(a=L),N.stdout=a}),N.stderr,x(function(a){return null==a&&(a=L),N.stderr=a})),re(m["$browser?"]())&&(B(M,"each",[],function d(a,r){var e=null==d.$$s?this:d.$$s,n=L;return null==a&&(a=L),null==r&&(r=L),(n=a.$dup())["$write_proc="](B(e,"proc",[],function t(s){var i=null==t.$$s?this:t.$$s;return null==s&&(s=L),i["$output="](E(i.$output(),s)),i["$output="](i.$output().$split("\n").$last(30).$join("\n")),re(s["$end_with?"]("\n"))&&i["$output="](E(i.$output(),"\n")),a.$write_proc().$call(s)},{$$s:e})),n["$tty="](!1),r.$call(n)},{$$s:m}),h=N.stdin.$read_proc(),N.stdin["$read_proc="](function(d){var a=prompt(m.$output());return null!==a?a+"\n":L})),l.yieldX(v,[])}finally{B(M,"each",[],function(a,r){return null==a&&(a=L),null==r&&(r=L),r.$call(a)}),B(N.stdin,"read_proc=",[h]),B(m,"output=",[""])}}()}),K(_,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),W(p[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),(m=(S=U(p[0],null,"Silencer")).$$prototype).collector=m.stderr=L,J(S,"$initialize",function(){return null==N.stderr&&(N.stderr=L),this.stderr=N.stderr}),J(S,"$silence",function M(){var h=M.$$p||L,d=this;return M.$$p=null,function(){try{return d.collector=k("StringIO").$new(),N.stderr=d.collector,l.yieldX(h,[])}finally{N.stderr=d.stderr}}()}),J(S,"$warnings",function(){return this.collector.$string()}),function(T,I,b){var g=U("::",null,"Binding"),q=[g].concat(b),R=l.$r(q);J(g,"$irb",function(){try{var p=y("return"),z=L;return k(Y,"IRB").$ensure_loaded("opal-replutils"),z=k(k(Y,"IRB"),"Silencer").$new(),B(k(Y,"IRB"),"prepare_console",[],function v(){var S=null==v.$$s?this:v.$$s;return function(){try{var m=y("break");return B(S,"loop",[],function M(){var h=null==M.$$s?this:M.$$s,d=L,a=L,r=L,e=L,n=L;for(h.$print(">> "),d=h.$gets(),re(d)||m.$throw(),a="",re(k(Y,"IRB")["$browser?"]())&&h.$puts(d),re(d["$start_with?"]("ls "))?(a=d["$[]"](H(3,-1,!1)),r="ls"):F(d,"ls\n")?(a="self",r="ls"):re(d["$start_with?"]("show "))?(a=d["$[]"](H(5,-1,!1)),r="show"):(a=d,r="inspect"),e=L;;){try{B(z,"silence",[],function(){return e=l.compile(a,{irb:!0})})}catch(t){if(!l.rescue(t,[R("SyntaxError")]))throw t;n=t;try{if(re(k(k(Y,"IRB"),"LINEBREAKS")["$include?"](n.$message()))){h.$print(".. "),d=h.$gets(),re(d)||p.$throw(),re(k(Y,"IRB")["$browser?"]())&&h.$puts(d),a=E(a,d);continue}re(z.$warnings()["$empty?"]())?h.$warn(n.$full_message()):h.$warn(z.$warnings())}finally{l.pop_exception()}}break}return F(r,"show")&&(h.$puts(e),p.$throw()),h.$puts(k("REPLUtils").$eval_and_print(e,r,!1,h))},{$$s:S,$$ret:p})}catch(M){if(M===m)return M.$v;throw M}}()},{$$s:this})}catch(v){if(v===p)return v.$v;throw v}})}(0,0,A),l.irb=function(T){k("Binding").$new(T).$irb()},l.load_parser=function(){l.Opal.IRB.$ensure_loaded("opal-parser")},typeof l.eval>"u"&&(l.eval=function(T){return l.load_parser(),l.eval(T)}),typeof l.compile>"u"&&(l.compile=function(T,I){return l.load_parser(),l.compile(T,I)})},Opal.queue(function(l){var ee=l.Object;return ee.$require("opal/base"),ee.$require("opal/mini"),ee.$require("corelib/kernel/format"),ee.$require("corelib/string/encoding"),ee.$autoload("Math","corelib/math"),ee.$require("corelib/complex/base"),ee.$autoload("Complex","corelib/complex"),ee.$require("corelib/rational/base"),ee.$autoload("Rational","corelib/rational"),ee.$require("corelib/time"),ee.$autoload("Struct","corelib/struct"),ee.$autoload("Set","corelib/set"),ee.$autoload("Dir","corelib/dir"),ee.$autoload("File","corelib/file"),ee.$require("corelib/process/base"),ee.$autoload("Process","corelib/process"),ee.$autoload("Random","corelib/random"),ee.$require("corelib/unsupported"),ee.$require("corelib/binding"),ee.$require("corelib/irb")}),Opal.queue(function(l){var v,d,a,r,e,S,m,M,ee=l.module,re=l.defs,$=l.slice,K=l.truthy,Q=l.send,N=l.Kernel,x=l.extract_kwargs,B=l.ensure_kwargs,E=l.range,W=l.to_a,U=l.def,J=l.return_ivar,Y=l.alias,H=l.klass,F=l.rb_minus,y=l.return_val,A=l.hash2,L=l.send2,k=l.find_super,T=l.eqeqeq,I=l.rb_ge,b=l.return_self,g=l.gvars,q=l.top,R=[],_=l.$r(R),p=l.nil,f=l.$$$;return v=R,m=[S=ee(R[0],"Native")].concat(v),M=l.$r(m),re(S,"$is_a?",function(d,a){try{return d instanceof this.$try_convert(a)}catch{return!1}}),re(S,"$try_convert",function(d,a){return null==a&&(a=p),this["$native?"](d)?d:d["$respond_to?"]("to_n")?d.$to_n():a},-2),re(S,"$convert",function(d){return this["$native?"](d)?d:d["$respond_to?"]("to_n")?d.$to_n():void this.$raise(M("ArgumentError"),d.$inspect()+" isn't native")}),re(S,"$call",function h(d,a,r){var t,e=h.$$p||p,s=this;h.$$p=null,t=$(arguments,2);var i=d[a];if(i instanceof Function){for(var c=new Array(t.length),o=0,j=t.length;o<j;o++){var C=t[o],O=s.$try_convert(C);c[o]=O===p?C:O}return e!==p&&c.push(e),s.$Native(i.apply(d,c))}return s.$Native(i)},-3),re(S,"$proc",function h(){var d=h.$$p||p;return h.$$p=null,K(d)||this.$raise(M("LocalJumpError"),"no block given"),Q(N,"proc",[],function r(e){var n,t,i,s=null==r.$$s?this:r.$$s;if(n=$(arguments),Q(t=n,"map!",[],function o(j){return null==j&&(j=p),(null==o.$$s?this:o.$$s).$Native(j)},{$$s:s}),i=s.$Native(this),this===l.global)return d.apply(s,t);var c=d.$$s;d.$$s=null;try{return d.apply(i,t)}finally{d.$$s=c}},{$$arity:-1,$$s:this})}),d=m,r=[a=ee(m[0],"Helpers")].concat(d),e=l.$r(r),U(a,"$alias_native",function n(t,s,i){var c,o,j,C,te=this;return n.$$p=null,c=$(arguments,1),o=x(c),o=B(o),c.length>0&&(j=c.shift()),null==j&&(j=t),null==(C=o.$$smap.as)&&(C=p),K(j["$end_with?"]("="))?Q(te,"define_method",[t],function ne(ae){var le=null==ne.$$s?this:ne.$$s;return null==le.native&&(le.native=p),null==ae&&(ae=p),le.native[j["$[]"](E(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:te}):K(C)?Q(te,"define_method",[t],function ne(ae){var ue,le=ne.$$p||p,ie=null==ne.$$s?this:ne.$$s,X=p;return null==ie.native&&(ie.native=p),ne.$$p=null,ue=$(arguments),X=Q(e("Native"),"call",[ie.native,j].concat(W(ue)),le.$to_proc()),K(X)?C.$new(X.$to_n()):p},{$$arity:-1,$$s:te}):Q(te,"define_method",[t],function ne(ae){var ue,le=ne.$$p||p,ie=null==ne.$$s?this:ne.$$s;return null==ie.native&&(ie.native=p),ne.$$p=null,ue=$(arguments),Q(e("Native"),"call",[ie.native,j].concat(W(ue)),le.$to_proc())},{$$arity:-1,$$s:te})},-2),U(a,"$native_reader",function(t){var s;return s=$(arguments),Q(s,"each",[],function o(j){var C=null==o.$$s?this:o.$$s;return null==j&&(j=p),Q(C,"define_method",[j],function O(){var te=null==O.$$s?this:O.$$s;return null==te.native&&(te.native=p),te.$Native(te.native[j])},{$$s:C})},{$$s:this})},-1),U(a,"$native_writer",function(t){var s;return s=$(arguments),Q(s,"each",[],function o(j){var C=null==o.$$s?this:o.$$s;return null==j&&(j=p),Q(C,"define_method",[j+"="],function O(te){var ne=null==O.$$s?this:O.$$s;return null==ne.native&&(ne.native=p),null==te&&(te=p),ne.$Native(ne.native[j]=te)},{$$s:C})},{$$s:this})},-1),U(a,"$native_accessor",function(t){var s,i;return s=$(arguments),Q(this,"native_reader",W(i=s)),Q(this,"native_writer",W(i))},-1),function(h,d){var a=ee(h,"Wrapper"),r=[a].concat(d),e=l.$r(r);U(a,"$initialize",function(t){return K(N["$native?"](t))||N.$raise(e("ArgumentError"),t.$inspect()+" isn't native"),this.native=t}),U(a,"$to_n",J("native")),re(a,"$included",function(t){return t.$extend(e("Helpers"))})}(m[0],m),re(S,"$included",function(d){return this.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),d.$include(M("Wrapper"))}),function(z,v){var S=ee(z,"Kernel"),m=[S].concat(v),M=l.$r(m);U(S,"$native?",function(d){return null==d||!d.$$class}),U(S,"$Native",function h(d){var r=this;return h.$$p=null,K(null==d)?p:K(r["$native?"](d))?f(M("Native"),"Object").$new(d):K(d["$is_a?"](M("Array")))?Q(d,"map",[],function e(n){return null==n&&(n=p),(null==e.$$s?this:e.$$s).$Native(n)},{$$s:r}):K(d["$is_a?"](M("Proc")))?Q(r,"proc",[],function e(n){var s,t=e.$$p||p,c=null==e.$$s?this:e.$$s;return e.$$p=null,s=$(arguments),c.$Native(Q(d,"call",W(s),t.$to_proc()))},{$$arity:-1,$$s:r}):d}),Y(S,"_Array","Array"),U(S,"$Array",function h(d,a){var n,r=h.$$p||p;return h.$$p=null,n=$(arguments,1),K(this["$native?"](d))?Q(f(M("Native"),"Array"),"new",[d].concat(W(n)),r.$to_proc()).$to_a():this.$_Array(d)},-2)}(R[0],R),function(z,v){var S=H(z,v,"Object");S.$$prototype.native=p,S.$include(f(f("Native"),"Wrapper")),U(S,"$==",function(h){return this.native===f("Native").$try_convert(h)}),U(S,"$has_key?",function(h){return l.hasOwnProperty.call(this.native,h)}),U(S,"$each",function M(h){var a,r=M.$$p||p,e=this;if(M.$$p=null,a=$(arguments),r!==p){for(var n in e.native)l.yieldX(r,[n,e.native[n]]);return e}return Q(e,"method_missing",["each"].concat(W(a)))},-1),U(S,"$[]",function(h){var a=this.native[h];return a instanceof Function?a:f("Native").$call(this.native,h)}),U(S,"$[]=",function(h,d){var r;return r=f("Native").$try_convert(d),this.native[h]=K(r===p)?d:r}),U(S,"$merge!",function(h){for(var a in h=f("Native").$convert(h))this.native[a]=h[a];return this}),U(S,"$respond_to?",function(h,d){return null==d&&(d=!1),N.$instance_method("respond_to?").$bind(this).$call(h,d)},-2),U(S,"$respond_to_missing?",function(h,d){return null==d&&(d=!1),l.hasOwnProperty.call(this.native,h)},-2),U(S,"$method_missing",function M(h,d){var e,n,a=M.$$p||p;return M.$$p=null,e=$(arguments,1),"="===h.charAt(h.length-1)?(n=[h.$slice(0,F(h.$length(),1)),e["$[]"](0)],Q(this,"[]=",n),n[n.length-1]):Q(f("Native"),"call",[this.native,h].concat(W(e)),a.$to_proc())},-2),U(S,"$nil?",y(!1)),U(S,"$is_a?",function(h){return l.is_a(this,h)}),U(S,"$instance_of?",function(h){return this.$$class===h}),U(S,"$class",function(){return this.$$class}),U(S,"$to_a",function M(h){var d=M.$$p||p;return M.$$p=null,null==h&&(h=A([],{})),Q(f(f("Native"),"Array"),"new",[this.native,h],d.$to_proc()).$to_a()},-1),U(S,"$inspect",function(){return"#<Native:"+String(this.native)+">"}),Y(S,"include?","has_key?"),Y(S,"key?","has_key?"),Y(S,"kind_of?","is_a?"),Y(S,"member?","has_key?")}(_("Native"),_("BasicObject")),function(z,v,S){var m=H(z,null,"Array"),M=[m].concat(S),h=l.$r(M),d=m.$$prototype;d.named=d.native=d.get=d.block=d.set=d.length=p,m.$include(f(h("Native"),"Wrapper")),m.$include(h("Enumerable")),U(m,"$initialize",function a(r,e){var n=a.$$p||p,t=this,s=p;return a.$$p=null,null==e&&(e=A([],{})),L(t,k(t,"initialize",a,!1,!0),"initialize",[r],null),t.get=K(s=e["$[]"]("get"))?s:e["$[]"]("access"),t.named=e["$[]"]("named"),t.set=K(s=e["$[]"]("set"))?s:e["$[]"]("access"),t.length=K(s=e["$[]"]("length"))?s:"length",t.block=n,K(null==t.$length())?t.$raise(h("ArgumentError"),"no length found on the array-like object"):p},-2),U(m,"$each",function a(){var r=a.$$p||p,e=this;if(a.$$p=null,!K(r))return e.$enum_for("each");for(var n=0,t=e.$length();n<t;n++)l.yield1(r,e["$[]"](n));return e}),U(m,"$[]",function(r){var n,t,e=this;return n=T(h("String"),t=r)||T(h("Symbol"),t)?K(e.named)?e.native[e.named](r):e.native[r]:T(h("Integer"),t)?K(e.get)?e.native[e.get](r):e.native[r]:p,K(n)?K(e.block)?e.block.$call(n):e.$Native(n):p}),U(m,"$[]=",function(r,e){var n=this;return K(n.set)?n.native[n.set](r,h("Native").$convert(e)):n.native[r]=h("Native").$convert(e)}),U(m,"$last",function(r){var e=this,n=p,t=p;if(null==r&&(r=p),K(r)){for(n=F(e.$length(),1),t=[];K(I(n,0));)t["$<<"](e["$[]"](n)),n=F(n,1);return t}return e["$[]"](F(e.$length(),1))},-1),U(m,"$length",function(){return this.native[this.length]}),U(m,"$inspect",function(){return this.$to_a().$inspect()}),Y(m,"to_ary","to_a")}(_("Native"),0,R),function(z,v){var S=H(z,null,"Numeric");U(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(z,v){var S=H(z,null,"Proc");U(S,"$to_n",b)}(R[0]),function(z,v){var S=H(z,null,"String");U(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(z,v){var S=H(z,null,"Regexp");U(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(z,v){var S=H(z,null,"MatchData");U(S,"$to_n",J("matches"))}(R[0]),function(z,v,S){var m=H(z,null,"Struct"),M=[m].concat(S),h=l.$r(M);U(m,"$to_n",function(){var r=p;return r={},Q(this,"each_pair",[],function(n,t){return null==n&&(n=p),null==t&&(t=p),r[n]=h("Native").$try_convert(t,t)}),r})}(R[0],0,R),function(z,v,S){var m=H(z,null,"Array"),M=[m].concat(S),h=l.$r(M);U(m,"$to_n",function(){for(var r=[],e=0,n=this.length;e<n;e++){var t=this[e];r.push(h("Native").$try_convert(t,t))}return r})}(R[0],0,R),function(z,v){var S=H(z,null,"Boolean");U(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(z,v){var S=H(z,null,"Time");U(S,"$to_n",b)}(R[0]),function(z,v){var S=H(z,null,"NilClass");U(S,"$to_n",function(){return null})}(R[0]),K(_("Hash")["$method_defined?"]("_initialize"))||function(z,v,S){var m=H(z,null,"Hash"),M=[m].concat(S),h=l.$r(M);Y(m,"_initialize","initialize"),U(m,"$initialize",function d(a){var r=d.$$p||p,e=this;if(d.$$p=null,null!=a&&(void 0===a.constructor||a.constructor===Object)){var s,i,n=e.$$smap,t=e.$$keys;for(s in a)!(i=a[s])||void 0!==i.constructor&&i.constructor!==Object?i&&i.$$is_array?(i=i.map(function(c){return!c||void 0!==c.constructor&&c.constructor!==Object?e.$Native(c):h("Hash").$new(c)}),n[s]=i):n[s]=e.$Native(i):n[s]=h("Hash").$new(i),t.push(s);return e}return Q(e,"_initialize",[a],r.$to_proc())},-1),U(m,"$to_n",function(){for(var t,s,r={},e=this.$$keys,n=this.$$smap,i=0,c=e.length;i<c;i++)s=(t=e[i]).$$is_string?n[t]:(t=t.key).value,r[t]=h("Native").$try_convert(s,s);return r})}(R[0],0,R),function(z,v){var S=H(z,null,"Module");U(S,"$native_module",function(){return l.global[this.$name()]=this})}(R[0]),function(z,v,S){var m=H(z,null,"Class"),M=[m].concat(S),h=l.$r(M);U(m,"$native_alias",function(a,r){var e=this,n=e.prototype[l.jsid(r)];n||e.$raise(h("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[a]=n}),U(m,"$native_class",function(){var a=this;return a.$native_module(),a.new=a.$new})}(R[0],0,R),g.$=g.global=q.$Native(l.global)}),Opal.modules.strscan=function(l){var Y,H,F,y,A,re=l.def,$=l.truthy,K=l.eqeqeq,Q=l.Opal,N=l.return_ivar,x=l.send,B=l.alias,E=[],W=l.nil;return Y=E,F=[H=(0,l.klass)(E[0],null,"StringScanner")].concat(Y),y=l.$r(F),(A=H.$$prototype).pos=A.string=A.working=A.matched=A.prev_pos=A.match=W,H.$attr_reader("pos","matched"),re(H,"$initialize",function(k){var T=this;return T.string=k,T.pos=0,T.matched=W,T.working=k,T.match=[]}),H.$attr_reader("string"),re(H,"$beginning_of_line?",function(){var k=this;return 0===k.pos||"\n"===k.string.charAt(k.pos-1)}),re(H,"$scan",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);return null==I?T.matched=W:(T.prev_pos=T.pos,T.pos+=I[0].length,T.working=T.working.substring(I[0].length),T.matched=I[0],T.match=I,I[0])}),re(H,"$scan_until",function(k){var T=this;k=T.$anchor(k);for(var I=T.working,b=0;I.length!=b;++b){var g=k.exec(I.substr(b));if(null!==g){var q=b+g[0].length,R=I.substr(0,q);return T.matched=g[0],T.match=g,T.prev_pos=T.pos+b,T.pos+=q,T.working=I.substr(q),R}}return T.matched=W}),re(H,"$[]",function(k){var I;if($(this.match["$empty?"]()))return W;K(y("Symbol"),I=k)?k=k.$to_s():K(y("String"),I)||(k=Q["$coerce_to!"](k,y("Integer"),"to_int"));var b=this.match;return k<0&&(k+=b.length),k<0||k>=b.length||null==b[k]?W:b[k]}),re(H,"$check",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);return T.matched=null==I?W:I[0]}),re(H,"$check_until",function(k){var T=this,I=T.prev_pos,b=T.pos,g=T.working,q=T.$scan_until(k);return T.prev_pos=I,T.pos=b,T.working=g,q}),re(H,"$peek",function(k){return this.working.substring(0,k)}),re(H,"$eos?",function(){return 0===this.working.length}),re(H,"$exist?",function(k){var I=k.exec(this.working);return null==I?W:0==I.index?0:I.index+1}),re(H,"$skip",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);if(null==I)return T.match=[],T.matched=W;var b=I[0],g=b.length;return T.matched=b,T.match=I,T.prev_pos=T.pos,T.pos+=g,T.working=T.working.substring(g),g}),re(H,"$skip_until",function(k){var I=this.$scan_until(k);return I===W?W:(this.matched=I.substr(-1),I.length)}),re(H,"$get_byte",function(){var k=this,T=W;return k.pos<k.string.length?(k.prev_pos=k.pos,k.pos+=1,T=k.matched=k.working.substring(0,1),k.working=k.working.substring(1)):k.matched=W,T}),re(H,"$match?",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);return null==I?W:(T.prev_pos=T.pos,I[0].length)}),re(H,"$pos=",function(k){var T=this;return k<0&&(k+=T.string.$length()),T.pos=k,T.working=T.string.slice(k)}),re(H,"$matched_size",function(){return this.matched===W?W:this.matched.length}),re(H,"$post_match",function(){var k=this;return k.matched===W?W:k.string.substr(k.pos)}),re(H,"$pre_match",function(){var k=this;return k.matched===W?W:k.string.substr(0,k.prev_pos)}),re(H,"$reset",function(){var k=this;return k.working=k.string,k.matched=W,k.pos=0}),re(H,"$rest",N("working")),re(H,"$rest?",function(){return 0!==this.working.length}),re(H,"$rest_size",function(){return this.$rest().$size()}),re(H,"$terminate",function(){var k,T=this;return T.match=W,k=[T.string.$length()],x(T,"pos=",k),k[k.length-1]}),re(H,"$unscan",function(){var k=this;return k.pos=k.prev_pos,k.prev_pos=W,k.match=W,k}),B(H,"bol?","beginning_of_line?"),B(H,"getch","get_byte"),H.$private(),re(H,"$anchor",function(k){var T=k.toString().match(/\/([^\/]+)$/);return T=T?T[1]:void 0,new RegExp("^(?:"+k.source+")",T)})},Opal.queue(function(l){var E,W,Y,U,ee=l.klass,re=l.def,$=l.module,K=l.top,Q=[],N=l.$r(Q),x=l.nil;return K.$require("strscan"),W=Q,[U=ee(Q[0],null,"Dir")].concat(W),Y=l.get_singleton_class(U),re(Y,"$[]",function(){return[]}),E=$(Q[0],"StringScannerPatch"),re(E,"$scan_until",function(U){var J=this;U=(J=this).$anchor(U);for(var F,Y=J.pos,H=J.working;;){var y=0===H.length;if(F=U.exec(H),Y+=1,H=H.substr(1),null!=F)return J.matched=J.string.substr(J.pos,Y-J.pos-1+F[0].length),J.prev_pos=Y-1,J.pos=Y,J.working=H.substr(F[0].length-1),J.matched;if(y)return J.matched=x}}),N("StringScanner").$prepend(N("StringScannerPatch")),l.top.$__dir__=()=>"/",x})},1054:(l,ee,re)=>{re(5151),Opal.modules["bcdice/arithmetic/node"]=function($){var b,_,v,a,r,m,M,f,q,K=$.module,Q=$.klass,N=$.def,x=$.thrower,B=$.return_ivar,E=$.send2,W=$.find_super,U=$.eqeq,J=$.const_set,Y=$.eqeqeq,H=$.rb_divide,F=$.truthy,y=$.assign_ivar,A=$.alias,L=[],k=$.nil,T=$.$$$;return b=L,_=q=[K(L[0],"BCDice")].concat(b),v=f=[K(q[0],"Arithmetic")].concat(_),m=[K(f[0],"Node")].concat(v),M=$.$r(m),(r=(a=Q(m[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=k,N(a,"$initialize",function(n,t,s){var i=this;return i.lhs=n,i.op=t,i.rhs=s}),N(a,"$eval",function(n){try{x("eval_return");var c,s=this,i=k;return i=s.lhs.$eval(n),c=s.rhs.$eval(n),i.$send(s.op,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),N(a,"$output",function(){var n=this;return""+n.lhs.$output()+n.op+n.rhs.$output()}),N(a,"$s_exp",function(){var n=this;return"("+n.$op_for_s_exp()+" "+n.lhs.$s_exp()+" "+n.rhs.$s_exp()+")"}),N(a,"$op_for_s_exp",B("op")),function(h,d,a){var r=Q(h,d,"DivideBase"),e=[r].concat(a),n=$.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=k,N(r,"$initialize",function s(i,c){return s.$$p=null,E(this,W(this,"initialize",s,!1,!0),"initialize",[i,"/",c],null)}),N(r,"$eval",function(i){try{x("eval_return");var j,C,o=this;return j=o.lhs.$eval(i),C=o.rhs.$eval(i),U(C,0)&&o.$raise(n("ZeroDivisionError")),o.$divide_and_round(j,C,i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),N(r,"$output",function s(){var i=s.$$p||k,c=this;return s.$$p=null,""+E(c,W(c,"output",s,!1,!0),"output",[],i)+c.$rounding_method()}),r.$private(),N(r,"$rounding_method",function(){return T(this.$class(),"ROUNDING_METHOD")}),N(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),N(r,"$divide_and_round",function(i,c,o){return this.$raise(n("NotImplementedError"))})}(m[0],M("BinaryOp"),m),function(h,d,a){var r=Q(h,d,"DivideWithGameSystemDefault"),e=[r].concat(a),n=$.$r(e);J(e[0],"ROUNDING_METHOD",""),r.$private(),N(r,"$divide_and_round",function(s,i,c){var o,j=k;return Y(T(n("RoundType"),"CEIL"),o=c)?H(s.$to_f(),i).$ceil():Y(T(n("RoundType"),"ROUND"),o)?(j=H(s.$to_f(),i),F(j["$negative?"]())?j.$abs().$round()["$-@"]():j.$round()):H(s,i).$floor()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithCeil"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","C"),r.$private(),N(r,"$divide_and_round",function(t,s,i){return H(t.$to_f(),s).$ceil()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithRound"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","R"),r.$private(),N(r,"$divide_and_round",function(t,s,i){var c=k;return c=H(t.$to_f(),s),F(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(m[0],M("DivideBase"),m),function(h,d,a){var r=Q(h,d,"DivideWithFloor"),e=[r].concat(a);J(e[0],"ROUNDING_METHOD","F"),r.$private(),N(r,"$divide_and_round",function(t,s,i){return H(t,s).$floor()})}(m[0],M("DivideBase"),m),function(h,d){var a=Q(h,null,"Negative");a.$$prototype.body=k,N(a,"$initialize",y("body")),N(a,"$eval",function(n){try{return x("eval_return"),this.body.$eval(n)["$-@"]()}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),N(a,"$output",function(){return"-"+this.body.$output()}),N(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(m[0]),function(h,d){var a=Q(h,null,"Parenthesis");a.$$prototype.expr=k,N(a,"$initialize",y("expr")),N(a,"$eval",function(n){try{return x("eval_return"),this.expr.$eval(n)}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),N(a,"$output",function(){return"("+this.expr.$output()+")"}),N(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(m[0]),function(h,d){var a=Q(h,null,"Number");return a.$$prototype.value=k,N(a,"$initialize",y("value")),N(a,"$eval",B("value")),N(a,"$output",function(){return this.value.$to_s()}),A(a,"s_exp","output")}(m[0])},Opal.modules["racc/parser"]=function($){var z,S,m,K=$.module,Q=$.klass,N=$.truthy,x=$.const_set,B=$.defs,E=$.gvars,W=$.rb_lt,U=$.def,J=$.to_ary,Y=$.send,H=$.neqeq,F=$.rb_plus,y=$.eqeq,A=$.rb_ge,L=$.rb_gt,k=$.rb_minus,T=$.rb_le,I=$.rb_times,b=$.assign_ivar_val,q=[],R=$.$r(q),_=$.nil,p=$.$$$;return z=q,S=[K(q[0],"Racc")].concat(z),m=$.$r(S),Q(S[0],m("StandardError"),"ParseError"),N(p("::","ParseError","skip_raise")?"constant":_)||x(q[0],"ParseError",p(R("Racc"),"ParseError")),function(f,z){var a,r,e,n,t,m=[K(f,"Racc")].concat(z),M=$.$r(m);return N(M("Racc_No_Extensions","skip_raise")?"constant":_)||x(m[0],"Racc_No_Extensions",!1),a=m,e=[r=Q(m[0],null,"Parser")].concat(a),n=$.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,x(e[0],"Racc_Runtime_Version","1.4.6"),x(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),x(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),x(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),x(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),x(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),x(e[0],"Racc_Runtime_Core_Version",n("Racc_Runtime_Core_Version_R")),x(e[0],"Racc_Runtime_Core_Revision",n("Racc_Runtime_Core_Revision_R")),x(e[0],"Racc_Runtime_Type","ruby"),B(n("Parser"),"$racc_runtime_type",function(){return n("Racc_Runtime_Type")}),U(r,"$_racc_setup",function(){var i,c,o=this,j=_,C=_;return null==E.stderr&&(E.stderr=_),N(p(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),N(null!=(i=o.yydebug)&&i!==_?"instance-variable":_)||(o.yydebug=!1),N(o.yydebug)&&(N(null!=(c=o.racc_debug_out)&&c!==_?"instance-variable":_)||(o.racc_debug_out=E.stderr),o.racc_debug_out=N(j=o.racc_debug_out)?j:E.stderr),C=p(o.$class(),"Racc_arg"),N(W(C.$size(),14))&&C["$[]="](13,!0),C}),U(r,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=_,i.racc_val=_,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),U(r,"$do_parse",function(){return this.$__send__(n("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),U(r,"$next_token",function(){return this.$raise(n("NotImplementedError"),this.$class()+"#next_token is not defined")}),U(r,"$_racc_do_parse_rb",function(i,c){var o,C=this,O=_,te=_,ne=_,ae=_,oe=_,ue=_,ie=_,X=_;return o=J(i),O=null==o[0]?_:o[0],te=null==o[1]?_:o[1],ne=null==o[2]?_:o[2],ae=null==o[3]?_:o[3],oe=null==o[10]?_:o[10],C.$_racc_init_sysvars(),ue=ie=X=_,Y(C,"catch",["racc_end_parse"],function D(){var V,Z,u=null==D.$$s?this:D.$$s,w=_;for(null==u.racc_state&&(u.racc_state=_),null==u.racc_read_next&&(u.racc_read_next=_),null==u.racc_t&&(u.racc_t=_),null==u.yydebug&&(u.yydebug=_),null==u.racc_val&&(u.racc_val=_);N(!0);)for(N(X=ae["$[]"](u.racc_state["$[]"](-1)))?(N(u.racc_read_next)&&H(u.racc_t,0)&&(Z=u.$next_token(),V=J(Z),ue=null==V[0]?_:V[0],u.racc_val=null==V[1]?_:V[1],u.racc_t=N(ue)?N(w=oe["$[]"](ue))?w:1:0,N(u.yydebug)&&u.$racc_read_token(u.racc_t,ue,u.racc_val),u.racc_read_next=!1),X=F(X,u.racc_t),N(A(X,0))&&N(ie=O["$[]"](X))&&y(te["$[]"](X),u.racc_state["$[]"](-1))||(ie=ne["$[]"](u.racc_state["$[]"](-1)))):ie=ne["$[]"](u.racc_state["$[]"](-1));N(ie=u.$_racc_evalact(ie,i)););},{$$s:C})}),U(r,"$yyparse",function(i,c){return this.$__send__(n("Racc_YY_Parse_Method"),i,c,this.$_racc_setup(),!0)}),U(r,"$_racc_yyparse_rb",function(i,c,o,j){var C,ne=_,ae=_,le=_,oe=_,ie=_,X=_,D=_;return C=J(o),ne=null==C[0]?_:C[0],ae=null==C[1]?_:C[1],le=null==C[2]?_:C[2],oe=null==C[3]?_:C[3],ie=null==C[10]?_:C[10],this.$_racc_init_sysvars(),X=_,D=_,Y(this,"catch",["racc_end_parse"],function V(){var Z=null==V.$$s?this:V.$$s;for(null==Z.racc_state&&(Z.racc_state=_);!N(D=oe["$[]"](Z.racc_state["$[]"](-1)));)for(;N(X=Z.$_racc_evalact(le["$[]"](Z.racc_state["$[]"](-1)),o)););return Y(i,"__send__",[c],function u(w,P){var G=null==u.$$s?this:u.$$s,se=_,$e=_;for(null==G.racc_t&&(G.racc_t=_),null==G.racc_state&&(G.racc_state=_),null==G.racc_read_next&&(G.racc_read_next=_),null==w&&(w=_),null==P&&(P=_),G.racc_t=N(w)?N(se=ie["$[]"](w))?se:1:0,G.racc_val=P,G.racc_read_next=!1,D=F(D,G.racc_t),N(A(D,0))&&N(X=ne["$[]"](D))&&y(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));N(X=G.$_racc_evalact(X,o)););for(;N(N(se=N($e=(D=oe["$[]"](G.racc_state["$[]"](-1)))["$!"]())?$e:G.racc_read_next["$!"]())?se:G.racc_t["$=="](0));)for(N(D)&&N(D=F(D,G.racc_t))&&N(A(D,0))&&N(X=ne["$[]"](D))&&y(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));N(X=G.$_racc_evalact(X,o)););},{$$s:Z})},{$$s:this})}),U(r,"$_racc_evalact",function(i,c){var o,le,C=this,O=_,te=_,ae=_,oe=_,ue=_,ie=_;if(O=null==(o=J(c))[0]?_:o[0],te=null==o[1]?_:o[1],ae=null==o[3]?_:o[3],le=null==o[11]?_:o[11],oe=null==o[12]?_:o[12],N(L(i,0))&&N(W(i,le)))N(L(C.racc_error_status,0))&&(y(C.racc_t,1)||(C.racc_error_status=k(C.racc_error_status,1))),C.racc_vstack.$push(C.racc_val),C.racc_state.$push(i),C.racc_read_next=!0,N(C.yydebug)&&(C.racc_tstack.$push(C.racc_t),C.$racc_shift(C.racc_t,C.racc_tstack,C.racc_vstack));else if(N(W(i,0))&&N(L(i,oe["$-@"]()))){if(ue=Y(C,"catch",["racc_jump"],function X(){var D=null==X.$$s?this:X.$$s;return null==D.racc_state&&(D.racc_state=_),D.racc_state.$push(D.$_racc_do_reduce(c,i)),!1},{$$s:C}),N(ue))switch(ue.valueOf()){case 1:return C.racc_user_yyerror=!0,oe["$-@"]();case 2:return le;default:C.$raise("[Racc Bug] unknown jump code")}}else if(y(i,le))N(C.yydebug)&&C.$racc_accept(),C.$throw("racc_end_parse",C.racc_vstack["$[]"](0));else{if(y(i,oe["$-@"]())){switch(C.racc_error_status.valueOf()){case 0:N(c["$[]"](21))||C.$on_error(C.racc_t,C.racc_val,C.racc_vstack);break;case 3:y(C.racc_t,0)&&C.$throw("racc_end_parse",_),C.racc_read_next=!0}for(C.racc_user_yyerror=!1,C.racc_error_status=3;N(!0)&&!(N(ie=ae["$[]"](C.racc_state["$[]"](-1)))&&(ie=F(ie,1),N(A(ie,0))&&N(i=O["$[]"](ie))&&y(te["$[]"](ie),C.racc_state["$[]"](-1))));)N(T(C.racc_state.$size(),1))&&C.$throw("racc_end_parse",_),C.racc_state.$pop(),C.racc_vstack.$pop(),N(C.yydebug)&&(C.racc_tstack.$pop(),C.$racc_e_pop(C.racc_state,C.racc_tstack,C.racc_vstack));return i}C.$raise("[Racc Bug] unknown action "+i.$inspect())}return N(C.yydebug)&&C.$racc_next_state(C.racc_state["$[]"](-1),C.racc_state),_}),U(r,"$_racc_do_reduce",function(i,c){var o,oe,ie,w,P,G,ce,C=this,te=_,ne=_,ae=_,le=_,ue=_,X=_,D=_,V=_,Z=_,u=_,se=_,$e=_,fe=_;return te=null==(o=J(i))[4]?_:o[4],ne=null==o[5]?_:o[5],ae=null==o[6]?_:o[6],le=null==o[7]?_:o[7],oe=null==o[8]?_:o[8],ue=null==o[9]?_:o[9],ie=null==o[13]?_:o[13],X=C.racc_state,D=C.racc_vstack,V=C.racc_tstack,Z=I(c,-3),u=ue["$[]"](Z),w=ue["$[]"](F(Z,1)),P=ue["$[]"](F(Z,2)),G=[],N(C.yydebug)&&(se=V["$[]"](u["$-@"](),u)),$e=D["$[]"](u["$-@"](),u),N(C.yydebug)&&V["$[]="](u["$-@"](),u,G),D["$[]="](u["$-@"](),u,G),X["$[]="](u["$-@"](),u,G),N(ie)?D.$push(C.$__send__(P,$e,D,$e["$[]"](0))):D.$push(C.$__send__(P,$e,D)),V.$push(w),N(C.yydebug)&&C.$racc_reduce(se,w,V,D),ce=k(w,oe),N(Z=le["$[]"](ce))&&(Z=F(Z,X["$[]"](-1)),N(A(Z,0))&&N(fe=te["$[]"](Z))&&y(ne["$[]"](Z),ce))?fe:ae["$[]"](ce)}),U(r,"$on_error",function(i,c,o){var C,j=this;return j.$raise(n("ParseError"),j.$sprintf("\nparse error on value %s (%s)",c.$inspect(),N(C=j.$token_to_str(i))?C:"?"))}),U(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),U(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),U(r,"$yyerrok",b("racc_error_status",0)),U(r,"$racc_read_token",function(i,c,o){var j=this;return j.racc_debug_out.$print("read    "),j.racc_debug_out.$print(c.$inspect(),"(",j.$racc_token2str(i),") "),j.racc_debug_out.$puts(o.$inspect()),j.racc_debug_out.$puts()}),U(r,"$racc_shift",function(i,c,o){var j=this;return j.racc_debug_out.$puts("shift   "+j.$racc_token2str(i)),j.$racc_print_stacks(c,o),j.racc_debug_out.$puts()}),U(r,"$racc_reduce",function(i,c,o,j){var C=this,O=_;return(O=C.racc_debug_out).$print("reduce "),N(i["$empty?"]())?O.$print(" <none>"):Y(i,"each",[],function te(ne){return null==ne&&(ne=_),O.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(ne))},{$$s:C}),O.$puts(" --\x3e "+C.$racc_token2str(c)),C.$racc_print_stacks(o,j),C.racc_debug_out.$puts()}),U(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),U(r,"$racc_e_pop",function(i,c,o){var j=this;return j.racc_debug_out.$puts("error recovering mode: pop token"),j.$racc_print_states(i),j.$racc_print_stacks(c,o),j.racc_debug_out.$puts()}),U(r,"$racc_next_state",function(i,c){var o=this;return o.racc_debug_out.$puts("goto    "+i),o.$racc_print_states(c),o.racc_debug_out.$puts()}),U(r,"$racc_print_stacks",function(i,c){var j=_;return(j=this.racc_debug_out).$print("        ["),Y(i,"each_index",[],function C(O){return null==O&&(O=_),j.$print(" (",(null==C.$$s?this:C.$$s).$racc_token2str(i["$[]"](O))," ",c["$[]"](O).$inspect(),")")},{$$s:this}),j.$puts(" ]")}),U(r,"$racc_print_states",function(i){var o=_;return(o=this.racc_debug_out).$print("        ["),Y(i,"each",[],function(C){return null==C&&(C=_),o.$print(" ",C)}),o.$puts(" ]")}),U(r,"$racc_token2str",function(i){var o;return N(o=p(this.$class(),"Racc_token_to_s_table")["$[]"](i))?o:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),U(r,"$token_to_str",function(i){return p(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(q[0],q)},Opal.modules.strscan=function($){var y,A,L,k,T,Q=$.def,N=$.truthy,x=$.eqeqeq,B=$.Opal,E=$.return_ivar,W=$.send,U=$.alias,J=[],Y=$.nil;return y=J,L=[A=(0,$.klass)(J[0],null,"StringScanner")].concat(y),k=$.$r(L),(T=A.$$prototype).pos=T.string=T.working=T.matched=T.prev_pos=T.match=Y,A.$attr_reader("pos","matched"),Q(A,"$initialize",function(b){var g=this;return g.string=b,g.pos=0,g.matched=Y,g.working=b,g.match=[]}),A.$attr_reader("string"),Q(A,"$beginning_of_line?",function(){var b=this;return 0===b.pos||"\n"===b.string.charAt(b.pos-1)}),Q(A,"$scan",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?g.matched=Y:(g.prev_pos=g.pos,g.pos+=q[0].length,g.working=g.working.substring(q[0].length),g.matched=q[0],g.match=q,q[0])}),Q(A,"$scan_until",function(b){var g=this;b=g.$anchor(b);for(var q=g.working,R=0;q.length!=R;++R){var _=b.exec(q.substr(R));if(null!==_){var p=R+_[0].length,f=q.substr(0,p);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+R,g.pos+=p,g.working=q.substr(p),f}}return g.matched=Y}),Q(A,"$[]",function(b){var q;if(N(this.match["$empty?"]()))return Y;x(k("Symbol"),q=b)?b=b.$to_s():x(k("String"),q)||(b=B["$coerce_to!"](b,k("Integer"),"to_int"));var R=this.match;return b<0&&(b+=R.length),b<0||b>=R.length||null==R[b]?Y:R[b]}),Q(A,"$check",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return g.matched=null==q?Y:q[0]}),Q(A,"$check_until",function(b){var g=this,q=g.prev_pos,R=g.pos,_=g.working,p=g.$scan_until(b);return g.prev_pos=q,g.pos=R,g.working=_,p}),Q(A,"$peek",function(b){return this.working.substring(0,b)}),Q(A,"$eos?",function(){return 0===this.working.length}),Q(A,"$exist?",function(b){var q=b.exec(this.working);return null==q?Y:0==q.index?0:q.index+1}),Q(A,"$skip",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);if(null==q)return g.match=[],g.matched=Y;var R=q[0],_=R.length;return g.matched=R,g.match=q,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),Q(A,"$skip_until",function(b){var q=this.$scan_until(b);return q===Y?Y:(this.matched=q.substr(-1),q.length)}),Q(A,"$get_byte",function(){var b=this,g=Y;return b.pos<b.string.length?(b.prev_pos=b.pos,b.pos+=1,g=b.matched=b.working.substring(0,1),b.working=b.working.substring(1)):b.matched=Y,g}),Q(A,"$match?",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?Y:(g.prev_pos=g.pos,q[0].length)}),Q(A,"$pos=",function(b){var g=this;return b<0&&(b+=g.string.$length()),g.pos=b,g.working=g.string.slice(b)}),Q(A,"$matched_size",function(){return this.matched===Y?Y:this.matched.length}),Q(A,"$post_match",function(){var b=this;return b.matched===Y?Y:b.string.substr(b.pos)}),Q(A,"$pre_match",function(){var b=this;return b.matched===Y?Y:b.string.substr(0,b.prev_pos)}),Q(A,"$reset",function(){var b=this;return b.working=b.string,b.matched=Y,b.pos=0}),Q(A,"$rest",E("working")),Q(A,"$rest?",function(){return 0!==this.working.length}),Q(A,"$rest_size",function(){return this.$rest().$size()}),Q(A,"$terminate",function(){var b,g=this;return g.match=Y,b=[g.string.$length()],W(g,"pos=",b),b[b.length-1]}),Q(A,"$unscan",function(){var b=this;return b.pos=b.prev_pos,b.prev_pos=Y,b.match=Y,b}),U(A,"bol?","beginning_of_line?"),U(A,"getch","get_byte"),A.$private(),Q(A,"$anchor",function(b){var g=b.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+b.source+")",g)})},Opal.modules["bcdice/normalize"]=function($){var U,F,Y,K=$.module,Q=$.eqeqeq,N=$.def,x=$.eqeq,B=[],E=$.nil;return U=B,Y=[K(B[0],"BCDice")].concat(U),(F=K(Y[0],"Normalize")).$module_function(),N(F,"$comparison_operator",function(A){var L;return Q(/<=|=</,L=A)?"<=":Q(/>=|=>/,L)?">=":Q(/<>|!=|=!/,L)?"!=":Q(/</,L)?"<":Q(/>/,L)?">":Q(/=/,L)?"==":E}),N(F,"$target_number",function(A){return x(A,"?")?A:A.$to_i()})},Opal.modules["bcdice/common_command/lexer"]=function($){var H,L,g,q,R,_,T,y,K=$.module,Q=$.klass,N=$.const_set,x=$.hash2,B=$.truthy,E=$.def,W=$.top,U=[],J=$.nil;return W.$require("strscan"),W.$require("bcdice/normalize"),H=U,L=y=[K(U[0],"BCDice")].concat(H),g=T=[K(y[0],"CommonCommand")].concat(L),R=[q=Q(T[0],null,"Lexer")].concat(g),_=$.$r(R),q.$$prototype.scanner=J,N(R[0],"SYMBOLS",x(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),E(q,"$initialize",function(z){var S;return z=B(S=z.$split(" ",2).$first())?S:"",this.scanner=_("StringScanner").$new(z)}),E(q,"$next_token",function(){var z=this,v=J,S=J,m=J,h=J;return B(z.scanner["$eos?"]())?[!1,"$"]:B(v=z.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:B(S=z.scanner.$scan(/[<>!=]+/))?["CMP_OP",_("Normalize").$comparison_operator(S)]:(m=z.scanner.$getch().$upcase(),[B(h=_("SYMBOLS")["$[]"](m))?h:m.$to_sym(),m])}),E(q,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/arithmetic/parser"]=function($){var y,T,_,m,M,h,d,a,r,e,n,t,c,p,v,S,b,g,L,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.hash,E=$.const_set,W=$.truthy,U=$.top,J=[],Y=$.nil,H=$.$$$;return U.$require("racc/parser.rb"),U.$require("bcdice/common_command/lexer"),U.$require("bcdice/arithmetic/node"),y=J,T=L=[K(J[0],"BCDice")].concat(y),b=[K(L[0],"Arithmetic")].concat(T),g=$.$r(b),_=b,v=[p=Q(b[0],H(g("Racc"),"Parser"),"Parser")].concat(_),S=$.$r(v),p.$$prototype.lexer=Y,N(p,"$parse",function(te){return this.$new().$parse(te)}),x(p,"$parse",function(te){try{return this.lexer=H(H(S("BCDice"),"CommonCommand"),"Lexer").$new(te),this.$do_parse()}catch(ae){if(!$.rescue(ae,[S("ParseError")]))throw ae;try{return Y}finally{$.pop_exception()}}}),p.$private(),x(p,"$next_token",function(){return this.lexer.$next_token()}),m=$.large_array_unpack("8,17,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,,,4,5,4,5,7,9,7,,,10,11,,10,11,22,26,24,25,27"),M=$.large_array_unpack("0,9,4,2,2,0,0,4,4,0,5,4,7,18,18,5,5,7,7,5,10,7,11,19,19,10,10,11,11,10,12,11,13,,,12,12,13,13,12,1,13,,,16,16,,1,1,16,21,21,21,21"),h=[-2,40,-6,Y,0,8,Y,10,Y,1,18,20,28,30,Y,Y,37,Y,4,14,Y,47,Y,Y,Y,Y,Y,Y],d=[-17,-17,-3,-6,-17,-17,-14,-17,-16,-17,-17,-17,-17,-17,-12,-13,-17,28,-1,-2,-4,-7,-15,-5,-8,-9,-10,-11],a=[14,15,23,1,18,19,Y,Y,20,21,16],r=[3,3,4,1,2,2,Y,Y,3,3,1],e=[Y,3,-6,-4,-19,Y],n=[Y,Y,2,3,Y,6],t=$.large_array_unpack("0,0,racc_error,3,14,_reduce_1,3,14,_reduce_2,1,14,_reduce_none,3,15,_reduce_4,4,15,_reduce_5,1,15,_reduce_none,0,17,_reduce_7,1,17,_reduce_8,1,17,_reduce_9,1,17,_reduce_10,1,17,_reduce_11,2,16,_reduce_12,2,16,_reduce_13,1,16,_reduce_none,3,18,_reduce_15,1,18,_reduce_16"),c=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12),E(v[0],"Racc_arg",[m,M,d,h,a,r,n,e,13,t,c,28,17,!0]),W(S("Ractor","skip_raise")?"constant":Y)&&S("Ractor").$make_shareable(S("Racc_arg")),E(v[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","add","mul","unary","round_type","term"]),W(S("Ractor","skip_raise")?"constant":Y)&&S("Ractor").$make_shareable(S("Racc_token_to_s_table")),E(v[0],"Racc_debug_parser",!1),x(p,"$_reduce_1",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"BinaryOp").$new(te["$[]"](0),"+",te["$[]"](2))}),x(p,"$_reduce_2",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"BinaryOp").$new(te["$[]"](0),"-",te["$[]"](2))}),x(p,"$_reduce_4",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"BinaryOp").$new(te["$[]"](0),"*",te["$[]"](2))}),x(p,"$_reduce_5",function(te,ne,ae){return te["$[]"](3).$new(te["$[]"](0),te["$[]"](2))}),x(p,"$_reduce_7",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),x(p,"$_reduce_8",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"DivideWithCeil")}),x(p,"$_reduce_9",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"DivideWithCeil")}),x(p,"$_reduce_10",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"DivideWithRound")}),x(p,"$_reduce_11",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"DivideWithFloor")}),x(p,"$_reduce_12",function(te,ne,ae){return te["$[]"](1)}),x(p,"$_reduce_13",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"Negative").$new(te["$[]"](1))}),x(p,"$_reduce_15",function(te,ne,ae){return te["$[]"](1)}),x(p,"$_reduce_16",function(te,ne,ae){return H(H(S("Arithmetic"),"Node"),"Number").$new(te["$[]"](0))}),x(p,"$_reduce_none",function(te,ne,ae){return te["$[]"](0)})},Opal.modules["bcdice/arithmetic"]=function($){var U,F,L,T,I,y,A,Y,K=$.module,Q=$.thrower,N=$.def,x=$.top,B=[],E=$.nil;return x.$require("bcdice/arithmetic/node"),x.$require("bcdice/arithmetic/parser"),U=B,F=Y=[K(B[0],"BCDice")].concat(U),A=[y=K(Y[0],"Arithmetic")].concat(F),T=[L=$.get_singleton_class(y)].concat(A),I=$.$r(T),N(L,"$eval",function(g,q){try{var _;Q("eval_return");try{return(_=I("Parser").$parse(g))===E||null==_?E:_.$eval(q)}catch(f){if(!$.rescue(f,[I("ZeroDivisionError")]))throw f;try{return E}finally{$.pop_exception()}}}catch(f){if(f===$.t_eval_return)return f.$v;throw f}})},Opal.queue(function($){var y,I,b,g,q,R,L,K=$.module,Q=$.klass,N=$.defs,x=$.def,B=$.send,E=$.truthy,W=$.eqeq,U=$.thrower,Y=[],H=$.nil;return $.top.$require("bcdice/arithmetic"),y=Y,I=L=[K(Y[0],"BCDice")].concat(y),g=[b=Q(L[0],null,"Preprocessor")].concat(I),q=$.$r(g),(R=b.$$prototype).game_system=R.text=H,N(b,"$process",function(p,f){return q("Preprocessor").$new(p,f).$process()}),x(b,"$initialize",function(p,f){return this.text=p,this.game_system=f}),x(b,"$process",function(){var p=this;return p.$trim_after_whitespace(),p.$replace_parentheses(),p.text=p.game_system.$change_text(p.text),p.$replace_implicit_d(),p.text}),b.$private(),x(b,"$trim_after_whitespace",function(){return this.text=this.text.$strip().$split(/\s/,2).$first()}),x(b,"$replace_parentheses",function(){try{U("eval_return");var f=this;return function(){try{var z=U("break");return B(f,"loop",[],function v(){var m,S=null==v.$$s?this:v.$$s;if(null==S.text&&(S.text=H),m=S.text,S.text=B(S.text,"gsub",[/\([\d\/+*\-CURF]+\)/],function M(h){var a,d=null==M.$$s?this:M.$$s;return null==d.game_system&&(d.game_system=H),null==h&&(h=H),E(a=q("Arithmetic").$eval(h,d.game_system.$round_type()))?a:h},{$$s:S}),!W(m,S.text))return H;z.$throw()},{$$s:f})}catch(v){if(v===z)return v.$v;throw v}}()}catch(z){if(z===$.t_eval_return)return z.$v;throw z}}),x(b,"$replace_implicit_d",function(){var p=this;return p.text=B(p.text,"gsub",[/(\d+)D([^\w]|$)/i],function f(){var z=null==f.$$s?this:f.$$s;return null==z.game_system&&(z.game_system=H),q("Regexp").$last_match(1)+"D"+z.game_system.$sides_implicit_d()+q("Regexp").$last_match(2)},{$$s:p})})})},129:(l,ee,re)=>{re(5151),Opal.queue(function($){var E,N=[];return E=N,(0,$.const_set)([(0,$.module)(N[0],"BCDice")].concat(E)[0],"VERSION","3.14.0")})},1856:function(l,ee,re){"use strict";var $=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.Opal=ee.I18n=ee.BCDice=void 0,re(129);var K=$(re(644));ee.BCDice=K.default.module(null,"BCDice"),ee.I18n=K.default.module(null,"I18n");var Q=re(644);Object.defineProperty(ee,"Opal",{enumerable:!0,get:function(){return $(Q).default}})},644:(l,ee,re)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.nilToNull=void 0,re(5151),Opal.config.unsupported_features_severity="ignore",ee.default=Opal,ee.nilToNull=function $(K){return K===Opal.nil?null:K}},1275:function(l,ee,re){"use strict";var $=this&&this.__extends||function(){var H=function(F,y){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,L){A.__proto__=L}||function(A,L){for(var k in L)Object.prototype.hasOwnProperty.call(L,k)&&(A[k]=L[k])})(F,y)};return function(F,y){function A(){this.constructor=F}H(F,y),F.prototype=null===y?Object.create(y):(A.prototype=y.prototype,new A)}}(),K=this&&this.__awaiter||function(H,F,y,A){return new(y||(y=Promise))(function(k,T){function I(q){try{g(A.next(q))}catch(R){T(R)}}function b(q){try{g(A.throw(q))}catch(R){T(R)}}function g(q){q.done?k(q.value):function L(k){return k instanceof y?k:new y(function(T){T(k)})}(q.value).then(I,b)}g((A=A.apply(H,F||[])).next())})},Q=this&&this.__generator||function(H,F){var A,L,k,T,y={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return T={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function I(g){return function(q){return function b(g){if(A)throw new TypeError("Generator is already executing.");for(;y;)try{if(A=1,L&&(k=2&g[0]?L.return:g[0]?L.throw||((k=L.return)&&k.call(L),0):L.next)&&!(k=k.call(L,g[1])).done)return k;switch(L=0,k&&(g=[2&g[0],k.value]),g[0]){case 0:case 1:k=g;break;case 4:return y.label++,{value:g[1],done:!1};case 5:y.label++,L=g[1],g=[0];continue;case 7:g=y.ops.pop(),y.trys.pop();continue;default:if(!(k=(k=y.trys).length>0&&k[k.length-1])&&(6===g[0]||2===g[0])){y=0;continue}if(3===g[0]&&(!k||g[1]>k[0]&&g[1]<k[3])){y.label=g[1];break}if(6===g[0]&&y.label<k[1]){y.label=k[1],k=g;break}if(k&&y.label<k[2]){y.label=k[2],y.ops.push(g);break}k[2]&&y.ops.pop(),y.trys.pop();continue}g=F.call(H,y)}catch(q){g=[6,q],L=0}finally{A=k=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,q])}}},N=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.getGameSystemClass=void 0;var x=N(re(3135)),B=re(1856),E=re(1931),W=N(re(9376)),U=N(re(3120));function J(H){var F;return(F=function(y){function A(L,k){return y.call(this,L,k??H.$new(L))||this}return $(A,y),A.eval=function(L){return E.parseResult(H.$eval(L))},A}(x.default)).ID=H.$const_get("ID"),F.NAME=H.$const_get("NAME"),F.SORT_KEY=H.$const_get("SORT_KEY"),F.HELP_MESSAGE=H.$const_get("HELP_MESSAGE"),F.COMMAND_PATTERN=H.$command_pattern(),F}ee.getGameSystemClass=J;var Y=function(){function H(){}return H.prototype.getGameSystemIdByName=function(F){var y,A=null===(y=this.listAvailableGameSystems().find(function(L){return L.name===F}))||void 0===y?void 0:y.id;if(!A)throw new Error("GameSystem named "+F+" does not exists");return A},H.prototype.getGameSystemInfo=function(F){var y=this.listAvailableGameSystems().find(function(A){return A.id===F});if(!y)throw new Error("GameSystem is not found");return y},H.prototype.getGameSystemClass=function(F){var y=this.listLoadedGameSystems().find(function(A){return A.ID===F});if(!y)throw new Error("GameSystem "+F+" is not loaded");return y},H.prototype.getI18nInfos=function(F){var y=F.replace(/_[^0-9].*$/g,""),A=this.listAvailabletI18nInfoList().find(function(T){return T.baseClassName===y||T.baseClassName===F}),L=A?[A]:[],k=this.listAvailableGameSystems().find(function(T){return T.className===F});return k?Array.from(new Set(this.getI18nInfos(k.superClassName).concat(L))):L},H.prototype.listLoadedGameSystems=function(){var F,y,A;return null!==(A=null===(y=null===(F=B.BCDice.GameSystem)||void 0===F?void 0:F.$constants())||void 0===y?void 0:y.map(function(L){return J(B.BCDice.GameSystem[L])}))&&void 0!==A?A:[]},H.prototype.listAvailableGameSystems=function(){return W.default.gameSystems},H.prototype.listAvailabletI18nInfoList=function(){return U.default.i18nList},H.prototype.dynamicLoad=function(F){var y;return K(this,void 0,void 0,function(){var A,L,k,T,I,b,g,q,R,p,f,z,v;return Q(this,function(S){switch(S.label){case 0:if(A=this.getGameSystemInfo(F),!(L=null!==(y=A?.className)&&void 0!==y?y:F).match(/^[A-Z]\w*$/))throw new Error("Invalid id");k=this.getI18nInfos(L),T=0,I=k,S.label=1;case 1:if(!(T<I.length))return[3,6];g=(b=I[T]).locales.filter(function(m){return m===A.locale||m===B.I18n.$default_locale()}),q=0,R=g,S.label=2;case 2:return q<R.length?(z=(f=JSON).stringify,[4,this.dynamicImportI18n(b.baseClassName,R[q])]):[3,5];case 3:p=z.apply(f,[S.sent()]),B.I18n.$load_translation(p),S.label=4;case 4:return q++,[3,2];case 5:return T++,[3,1];case 6:return[4,this.dynamicImport(L)];case 7:if(S.sent(),!(v=B.BCDice.GameSystem.$const_get(L)))throw new Error("Failed to load game system");return[2,J(v)]}})})},H.prototype.dynamicImportI18n=function(F,y){throw new Error("Not implemented")},H.prototype.dynamicImport=function(F){throw new Error("Not implemented")},H}();ee.default=Y},1931:function(l,ee,re){"use strict";var $=this&&this.__assign||function(){return $=Object.assign||function(x){for(var B,E=1,W=arguments.length;E<W;E++)for(var U in B=arguments[E])Object.prototype.hasOwnProperty.call(B,U)&&(x[U]=B[U]);return x},$.apply(this,arguments)},K=this&&this.__rest||function(x,B){var E={};for(var W in x)Object.prototype.hasOwnProperty.call(x,W)&&B.indexOf(W)<0&&(E[W]=x[W]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(W=Object.getOwnPropertySymbols(x);U<W.length;U++)B.indexOf(W[U])<0&&Object.prototype.propertyIsEnumerable.call(x,W[U])&&(E[W[U]]=x[W[U]])}return E};Object.defineProperty(ee,"__esModule",{value:!0}),ee.parseResult=void 0;var Q=re(1856);ee.parseResult=function N(x){if(x===Q.Opal.nil)return null;var B=x.detailed_rands,E=K(x,["detailed_rands"]);return $($({},E),{detailedRands:B.map(function(W){return W.$to_n()})})}},8412:(l,ee,re)=>{var $={"./AFF2e":[2590,6147],"./AFF2e.js":[2590,6147],"./AceKillerGene":[897,3326],"./AceKillerGene.js":[897,3326],"./Agnostos":[8740,2161],"./Agnostos.js":[8740,2161],"./Ainecadette":[9759,8012],"./Ainecadette.js":[9759,8012],"./Airgetlamh":[8464,845],"./Airgetlamh.js":[8464,845],"./AlchemiaStruggle":[1871,252],"./AlchemiaStruggle.js":[1871,252],"./Alsetto":[6582,9755],"./Alsetto.js":[6582,9755],"./Alshard":[2267,1032],"./Alshard.js":[2267,1032],"./AlterRaise":[8090,6783],"./AlterRaise.js":[8090,6783],"./Amadeus":[6794,543],"./Amadeus.js":[6794,543],"./Amadeus_Korean":[2489,5062],"./Amadeus_Korean.js":[2489,5062],"./AngelGear":[8506,4367],"./AngelGear.js":[8506,4367],"./AniMalus":[1918,4259],"./AniMalus.js":[1918,4259],"./AnimaAnimus":[9537,1118],"./AnimaAnimus.js":[9537,1118],"./Aoharubaan":[5414,2683],"./Aoharubaan.js":[5414,2683],"./Arianrhod":[8844,4217],"./Arianrhod.js":[8844,4217],"./Arianrhod_Korean":[6531,5520],"./Arianrhod_Korean.js":[6531,5520],"./ArknightsFan":[5826,855],"./ArknightsFan.js":[5826,855],"./ArsMagica":[1586,8599],"./ArsMagica.js":[1586,8599],"./AssaultEngine":[8277,962],"./AssaultEngine.js":[8277,962],"./Avandner":[9291,4744],"./Avandner.js":[9291,4744],"./Ayabito":[2301,602],"./Ayabito.js":[2301,602],"./BBN":[462,8179],"./BBN.js":[462,8179],"./BadLife":[7025,8974],"./BadLife.js":[7025,8974],"./Bakenokawa":[9756,2089],"./Bakenokawa.js":[9756,2089],"./BarnaKronika":[4473,3062],"./BarnaKronika.js":[4473,3062],"./BattleTech":[5560,6821],"./BattleTech.js":[5560,6821],"./BeastBindTrinity":[4829,8746],"./BeastBindTrinity.js":[4829,8746],"./BeginningIdol":[1269,1730],"./BeginningIdol.js":[1269,1730],"./BeginningIdol2022":[6131,3776],"./BeginningIdol2022.js":[6131,3776],"./BeginningIdol_Korean":[1120,5645],"./BeginningIdol_Korean.js":[1120,5645],"./BlackJacket":[4133,3394],"./BlackJacket.js":[4133,3394],"./BladeOfArcana":[5037,4890],"./BladeOfArcana.js":[5037,4890],"./BlindMythos":[2159,5884],"./BlindMythos.js":[2159,5884],"./BloodCrusade":[9405,842],"./BloodCrusade.js":[9405,842],"./BloodMoon":[4013,5338],"./BloodMoon.js":[4013,5338],"./Bloodorium":[8392,9765],"./Bloodorium.js":[8392,9765],"./CardRanker":[3341,8378],"./CardRanker.js":[3341,8378],"./CastleInGray":[1318,4075],"./CastleInGray.js":[1318,4075],"./ChaosFlare":[5970,5351],"./ChaosFlare.js":[5970,5351],"./Chill":[3530,6927],"./Chill.js":[3530,6927],"./Chill3":[4870,2038],"./Chill3.js":[4870,2038],"./CodeLayerd":[4288,6397],"./CodeLayerd.js":[4288,6397],"./ColossalHunter":[3420,4345],"./ColossalHunter.js":[3420,4345],"./Comes":[6949,4466],"./Comes.js":[6949,4466],"./ConvictorDrive":[1967,3116],"./ConvictorDrive.js":[1967,3116],"./CrashWorld":[8631,3732],"./CrashWorld.js":[8631,3732],"./Cthulhu":[7723,4936],"./Cthulhu.js":[7723,4936],"./Cthulhu7th":[5574,3211],"./Cthulhu7th.js":[5574,3211],"./Cthulhu7th_ChineseTraditional":[585,2470],"./Cthulhu7th_ChineseTraditional.js":[585,2470],"./Cthulhu7th_Korean":[8877,9722],"./Cthulhu7th_Korean.js":[8877,9722],"./CthulhuTech":[9259,9912],"./CthulhuTech.js":[9259,9912],"./Cthulhu_ChineseTraditional":[6374,7307],"./Cthulhu_ChineseTraditional.js":[6374,7307],"./Cthulhu_English":[7396,4385],"./Cthulhu_English.js":[7396,4385],"./Cthulhu_Korean":[1758,6371],"./Cthulhu_Korean.js":[1758,6371],"./Cthulhu_SimplifiedChinese":[2629,6610],"./Cthulhu_SimplifiedChinese.js":[2629,6610],"./CyberpunkRed":[1846,1435],"./CyberpunkRed.js":[1846,1435],"./DarkBlaze":[7668,2849],"./DarkBlaze.js":[7668,2849],"./DarkDaysDrive":[5965,538],"./DarkDaysDrive.js":[5965,538],"./DarkSouls":[2008,1157],"./DarkSouls.js":[2008,1157],"./DeadlineHeroes":[394,1887],"./DeadlineHeroes.js":[394,1887],"./DemonParasite":[4290,7863],"./DemonParasite.js":[4290,7863],"./DemonSpike":[7949,9994],"./DemonSpike.js":[7949,9994],"./DesperateRun":[7408,2205],"./DesperateRun.js":[7408,2205],"./DetatokoSaga":[8197,5634],"./DetatokoSaga.js":[8197,5634],"./DetatokoSaga_Korean":[5312,3869],"./DetatokoSaga_Korean.js":[5312,3869],"./DiceBot":[3176,5541],"./DiceBot.js":[3176,5541],"./DiceOfTheDead":[3579,3128],"./DiceOfTheDead.js":[3579,3128],"./DivineCharger":[9015,4516],"./DivineCharger.js":[9015,4516],"./DoubleCross":[4627,288],"./DoubleCross.js":[4627,288],"./DoubleCross_Korean":[6294,7963],"./DoubleCross_Korean.js":[6294,7963],"./Dracurouge":[6567,6004],"./Dracurouge.js":[6567,6004],"./Dracurouge_Korean":[9714,4791],"./Dracurouge_Korean.js":[9714,4791],"./DungeonsAndDragons":[9770,1983],"./DungeonsAndDragons.js":[9770,1983],"./DungeonsAndDragons5":[2179,544],"./DungeonsAndDragons5.js":[2179,544],"./EarthDawn":[5126,555],"./EarthDawn.js":[5126,555],"./EarthDawn3":[6285,1050],"./EarthDawn3.js":[6285,1050],"./EarthDawn4":[9080,7253],"./EarthDawn4.js":[9080,7253],"./EclipsePhase":[9946,6991],"./EclipsePhase.js":[9946,6991],"./Elric":[2757,2930],"./Elric.js":[2757,2930],"./Elysion":[3249,9054],"./Elysion.js":[3249,9054],"./EmbryoMachine":[1975,2916],"./EmbryoMachine.js":[1975,2916],"./Emoklore":[2838,8411],"./Emoklore.js":[2838,8411],"./EndBreaker":[6785,8718],"./EndBreaker.js":[6785,8718],"./EtrianOdysseySRS":[797,394],"./EtrianOdysseySRS.js":[797,394],"./FateCoreSystem":[9094,955],"./FateCoreSystem.js":[9094,955],"./Fiasco":[2521,5638],"./Fiasco.js":[2521,5638],"./Fiasco_Korean":[6188,713],"./Fiasco_Korean.js":[6188,713],"./FilledWith":[5794,5815],"./FilledWith.js":[5794,5815],"./FinalFantasyXIV":[1453,5322],"./FinalFantasyXIV.js":[1453,5322],"./FinalFantasyXIV_English":[2526,1763],"./FinalFantasyXIV_English.js":[2526,1763],"./FullFace":[9938,4999],"./FullFace.js":[9938,4999],"./FullMetalPanic":[7481,9222],"./FullMetalPanic.js":[7481,9222],"./FutariSousa":[3016,1909],"./FutariSousa.js":[3016,1909],"./FutariSousa_Korean":[8327,5316],"./FutariSousa_Korean.js":[8327,5316],"./GURPS":[7795,5856],"./GURPS.js":[7795,5856],"./Garako":[2861,1114],"./Garako.js":[2861,1114],"./GardenOrder":[5575,3924],"./GardenOrder.js":[5575,3924],"./GehennaAn":[3149,3402],"./GehennaAn.js":[3149,3402],"./GeishaGirlwithKatana":[5581,8474],"./GeishaGirlwithKatana.js":[5581,8474],"./GhostLive":[681,4358],"./GhostLive.js":[681,4358],"./GoblinSlayer":[8587,7368],"./GoblinSlayer.js":[8587,7368],"./GoldenSkyStories":[213,6498],"./GoldenSkyStories.js":[213,6498],"./Gorilla":[8890,4975],"./Gorilla.js":[8890,4975],"./GranCrest":[3797,1202],"./GranCrest.js":[3797,1202],"./GundamSentinel":[5846,6539],"./GundamSentinel.js":[5846,6539],"./Gundog":[9414,8907],"./Gundog.js":[9414,8907],"./GundogRevised":[636,1625],"./GundogRevised.js":[636,1625],"./GundogZero":[8792,9125],"./GundogZero.js":[8792,9125],"./GurpsFW":[128,7069],"./GurpsFW.js":[128,7069],"./HarnMaster":[7035,2008],"./HarnMaster.js":[7035,2008],"./HatsuneMiku":[9542,8043],"./HatsuneMiku.js":[9542,8043],"./HeroScale":[3074,3719],"./HeroScale.js":[3074,3719],"./Hieizan":[5434,95],"./Hieizan.js":[5434,95],"./HouraiGakuen":[2805,146],"./HouraiGakuen.js":[2805,146],"./HunterTheReckoning5th":[4216,8421],"./HunterTheReckoning5th.js":[4216,8421],"./HuntersMoon":[8862,4851],"./HuntersMoon.js":[8862,4851],"./IfIfIf":[2849,8958],"./IfIfIf.js":[2849,8958],"./Illusio":[3279,9996],"./Illusio.js":[3279,9996],"./InfiniteBabeL":[6932,1585],"./InfiniteBabeL.js":[6932,1585],"./InfiniteFantasia":[4252,3388],"./InfiniteFantasia.js":[4252,3388],"./Insane":[6012,9657],"./Insane.js":[6012,9657],"./Insane_Korean":[4707,6960],"./Insane_Korean.js":[4707,6960],"./InvisibleLiar":[3683,9872],"./InvisibleLiar.js":[3683,9872],"./Irisbane":[97,7518],"./Irisbane.js":[97,7518],"./IthaWenUa":[2026,8351],"./IthaWenUa.js":[2026,8351],"./JamesBond":[5138,5714],"./JamesBond.js":[5138,5714],"./JekyllAndHyde":[9190,7563],"./JekyllAndHyde.js":[9190,7563],"./JuinKansen":[236,3094],"./JuinKansen.js":[236,3094],"./Kamigakari":[2341,9106],"./Kamigakari.js":[2341,9106],"./Kamigakari_Korean":[7888,3357],"./Kamigakari_Korean.js":[7888,3357],"./KamitsubakiCityUnderConstructionNarrative":[9755,5384],"./KamitsubakiCityUnderConstructionNarrative.js":[9755,5384],"./KanColle":[5194,554],"./KanColle.js":[5194,554],"./Karukami":[1685,6466],"./Karukami.js":[1685,6466],"./KemonoNoMori":[6755,9120],"./KemonoNoMori.js":[6755,9120],"./KillDeathBusiness":[6240,9661],"./KillDeathBusiness.js":[6240,9661],"./KillDeathBusiness_Korean":[4767,6076],"./KillDeathBusiness_Korean.js":[4767,6076],"./KizunaBullet":[3006,3475],"./KizunaBullet.js":[3006,3475],"./KurayamiCrying":[1399,2884],"./KurayamiCrying.js":[1399,2884],"./Kutulu":[2954,6703],"./Kutulu.js":[2954,6703],"./KyokoShinshoku":[4079,3356],"./KyokoShinshoku.js":[4079,3356],"./Liminal":[3488,6669],"./Liminal.js":[3488,6669],"./LiveraDoll":[840,6037],"./LiveraDoll.js":[840,6037],"./LogHorizon":[1903,5564],"./LogHorizon.js":[1903,5564],"./LogHorizon_Korean":[6426,4191],"./LogHorizon_Korean.js":[6426,4191],"./LostRecord":[542,1454],"./LostRecord.js":[542,1454],"./LostRoyal":[3289,6230],"./LostRoyal.js":[3289,6230],"./MagicaLogia":[5054,1923],"./MagicaLogia.js":[5054,1923],"./MagicaLogia_Korean":[117,3154],"./MagicaLogia_Korean.js":[117,3154],"./MagicaLogia_SimplifiedChinese":[9424,5485],"./MagicaLogia_SimplifiedChinese.js":[9424,5485],"./MamonoScramble":[588,8521],"./MamonoScramble.js":[588,8521],"./MeikyuDays":[1485,8218],"./MeikyuDays.js":[1485,8218],"./MeikyuKingdom":[2205,1882],"./MeikyuKingdom.js":[2205,1882],"./MeikyuKingdomBasic":[7639,8404],"./MeikyuKingdomBasic.js":[7639,8404],"./MetalHead":[3709,9610],"./MetalHead.js":[3709,9610],"./MetalHeadExtream":[8249,7414],"./MetalHeadExtream.js":[8249,7414],"./MetallicGuardian":[1924,7361],"./MetallicGuardian.js":[1924,7361],"./MonotoneMuseum":[6425,2902],"./MonotoneMuseum.js":[6425,2902],"./MonotoneMuseum_Korean":[7164,4505],"./MonotoneMuseum_Korean.js":[7164,4505],"./NRR":[2942,7747],"./NRR.js":[2942,7747],"./NSSQ":[7729,3678],"./NSSQ.js":[7729,3678],"./Nechronica":[1978,5727],"./Nechronica.js":[1978,5727],"./Nechronica_Korean":[9033,6694],"./Nechronica_Korean.js":[9033,6694],"./NeverCloud":[4449,766],"./NeverCloud.js":[4449,766],"./NightWizard":[7941,2],"./NightWizard.js":[7941,2],"./NightWizard3rd":[1542,2971],"./NightWizard3rd.js":[1542,2971],"./NightmareHunterDeep":[9862,1462],"./NightmareHunterDeep.js":[9862,1462],"./NinjaSlayer":[6130,9991],"./NinjaSlayer.js":[6130,9991],"./NinjaSlayer2":[5170,1959],"./NinjaSlayer2.js":[5170,1959],"./NjslyrBattle":[8728,1093],"./NjslyrBattle.js":[8728,1093],"./NobunagasBlackCastle":[7969,7566],"./NobunagasBlackCastle.js":[7969,7566],"./Nuekagami":[1850,255],"./Nuekagami.js":[1850,255],"./OneWayHeroics":[3844,6609],"./OneWayHeroics.js":[3844,6609],"./OracleEngine":[4934,443],"./OracleEngine.js":[4934,443],"./OrgaRain":[7301,1506],"./OrgaRain.js":[7301,1506],"./Oukahoushin3rd":[4749,2906],"./Oukahoushin3rd.js":[4749,2906],"./Paradiso":[7893,8194],"./Paradiso.js":[7893,8194],"./Paranoia":[9853,8458],"./Paranoia.js":[9853,8458],"./ParanoiaRebooted":[6013,6602],"./ParanoiaRebooted.js":[6013,6602],"./ParasiteBlood":[6227,1312],"./ParasiteBlood.js":[6227,1312],"./PastFutureParadox":[7748,1841],"./PastFutureParadox.js":[7748,1841],"./Pathfinder":[238,7886],"./Pathfinder.js":[238,7886],"./Peekaboo":[1796,4497],"./Peekaboo.js":[1796,4497],"./Pendragon":[5412,7761],"./Pendragon.js":[5412,7761],"./PersonaO":[1023,4684],"./PersonaO.js":[1023,4684],"./PhantasmAdventure":[7532,2553],"./PhantasmAdventure.js":[7532,2553],"./Postman":[4470,1659],"./Postman.js":[4470,1659],"./PulpCthulhu":[4794,9487],"./PulpCthulhu.js":[4794,9487],"./Raisondetre":[4072,1893],"./Raisondetre.js":[4072,1893],"./RecordOfLodossWar":[2424,9557],"./RecordOfLodossWar.js":[2424,9557],"./RecordOfSteam":[1396,3969],"./RecordOfSteam.js":[1396,3969],"./Revulture":[206,5491],"./Revulture.js":[206,5491],"./RokumonSekai2":[4100,4081],"./RokumonSekai2.js":[4100,4081],"./RoleMaster":[6992,365],"./RoleMaster.js":[6992,365],"./RuinBreakers":[6137,6102],"./RuinBreakers.js":[6137,6102],"./RuneQuest":[1546,79],"./RuneQuest.js":[1546,79],"./RuneQuestRoleplayingInGlorantha":[2765,698],"./RuneQuestRoleplayingInGlorantha.js":[2765,698],"./RyuTuber":[6414,9235],"./RyuTuber.js":[6414,9235],"./Ryutama":[9682,6306],"./Ryutama.js":[9682,6306],"./SRS":[4678,8843],"./SRS.js":[4678,8843],"./SajinsenkiAGuS":[9623,1604],"./SajinsenkiAGuS.js":[9623,1604],"./SajinsenkiAGuS2E":[5522,4119],"./SajinsenkiAGuS2E.js":[5522,4119],"./SamsaraBallad":[4946,1751],"./SamsaraBallad.js":[4946,1751],"./Satasupe":[9606,2619],"./Satasupe.js":[9606,2619],"./ScreamHighSchool":[55,1828],"./ScreamHighSchool.js":[55,1828],"./Sengensyou":[3286,4411],"./Sengensyou.js":[3286,4411],"./SevenFortressMobius":[7510,6203],"./SevenFortressMobius.js":[7510,6203],"./ShadowRun":[3357,2058],"./ShadowRun.js":[3357,2058],"./ShadowRun4":[2461,6058],"./ShadowRun4.js":[2461,6058],"./ShadowRun5":[9246,6643],"./ShadowRun5.js":[9246,6643],"./SharedFantasia":[9290,1919],"./SharedFantasia.js":[9290,1919],"./ShinMegamiTenseiKakuseihen":[646,2699],"./ShinMegamiTenseiKakuseihen.js":[646,2699],"./ShinkuuGakuen":[9280,8541],"./ShinkuuGakuen.js":[9280,8541],"./ShinobiGami":[5130,7967],"./ShinobiGami.js":[5130,7967],"./Shiranui":[2345,784],"./Shiranui.js":[2345,784],"./ShoujoTenrankai":[1115,3432],"./ShoujoTenrankai.js":[1115,3432],"./ShuumatsuBargainWars":[2084,5185],"./ShuumatsuBargainWars.js":[2084,5185],"./ShuumatsuKikou":[3652,6897],"./ShuumatsuKikou.js":[3652,6897],"./Siren":[3741,9050],"./Siren.js":[3741,9050],"./Skynauts":[9271,9825],"./Skynauts.js":[9271,9825],"./SkynautsBouken":[8780,6841],"./SkynautsBouken.js":[8780,6841],"./StarryDolls":[6221,5866],"./StarryDolls.js":[6221,5866],"./SteamPunkers":[8218,767],"./SteamPunkers.js":[8218,767],"./StellarKnights":[3419,9512],"./StellarKnights.js":[3419,9512],"./StellarKnights_Korean":[6558,291],"./StellarKnights_Korean.js":[6558,291],"./StellarLife":[6435,3920],"./StellarLife.js":[6435,3920],"./StrangerOfSwordCity":[8395,7736],"./StrangerOfSwordCity.js":[8395,7736],"./StratoShout":[1704,3109],"./StratoShout.js":[1704,3109],"./StratoShout_Korean":[8103,6916],"./StratoShout_Korean.js":[8103,6916],"./Strave":[5469,5066],"./Strave.js":[5469,5066],"./SwordWorld":[6849,494],"./SwordWorld.js":[6849,494],"./SwordWorld2_0":[8960,8941],"./SwordWorld2_0.js":[8960,8941],"./SwordWorld2_0_SimplifiedChinese":[3890,6103],"./SwordWorld2_0_SimplifiedChinese.js":[3890,6103],"./SwordWorld2_5":[6899,4579],"./SwordWorld2_5.js":[6899,4579],"./SwordWorld2_5_SimplifiedChinese":[2653,714],"./SwordWorld2_5_SimplifiedChinese.js":[2653,714],"./SwordWorld_SimplifiedChinese":[8907,3208],"./SwordWorld_SimplifiedChinese.js":[8907,3208],"./TalesFromTheLoop":[8576,6349],"./TalesFromTheLoop.js":[8576,6349],"./TenkaRyouran":[7133,8669],"./TenkaRyouran.js":[7133,8669],"./TensaiGunshiNiNaro":[1323,24],"./TensaiGunshiNiNaro.js":[1323,24],"./TheOneRing2nd":[7305,3721],"./TheOneRing2nd.js":[7305,3721],"./TheUnofficialHollowKnightRPG":[9696,9245],"./TheUnofficialHollowKnightRPG.js":[9696,9245],"./TherapieSein":[817,238],"./TherapieSein.js":[817,238],"./TokumeiTenkousei":[5771,9800],"./TokumeiTenkousei.js":[5771,9800],"./TokyoGhostResearch":[2310,9659],"./TokyoGhostResearch.js":[2310,9659],"./TokyoNova":[1908,4433],"./TokyoNova.js":[1908,4433],"./Torg":[2512,6589],"./Torg.js":[2512,6589],"./Torg1_5":[6061,5098],"./Torg1_5.js":[6061,5098],"./TorgEternity":[7572,49],"./TorgEternity.js":[7572,49],"./ToshiakiHolyGrailWar":[1713,110],"./ToshiakiHolyGrailWar.js":[1713,110],"./TrailOfCthulhu":[8238,563],"./TrailOfCthulhu.js":[8238,563],"./TrinitySeven":[6038,2219],"./TrinitySeven.js":[6038,2219],"./TunnelsAndTrolls":[1514,319],"./TunnelsAndTrolls.js":[1514,319],"./TwilightGunsmoke":[593,8830],"./TwilightGunsmoke.js":[593,8830],"./UnsungDuet":[1952,8317],"./UnsungDuet.js":[1952,8317],"./UnsungDuet_Korean":[7599,1276],"./UnsungDuet_Korean.js":[7599,1276],"./Utakaze":[733,7738],"./Utakaze.js":[733,7738],"./VampireTheMasquerade5th":[5934,3411],"./VampireTheMasquerade5th.js":[5934,3411],"./Ventangle":[6509,1567],"./Ventangle.js":[6509,1567],"./Villaciel":[5889,9534],"./Villaciel.js":[5889,9534],"./VisionConnect":[5506,6679],"./VisionConnect.js":[5506,6679],"./WARPS":[2559,1548],"./WARPS.js":[2559,1548],"./WaresBlade":[7322,4239],"./WaresBlade.js":[7322,4239],"./Warhammer":[3288,1845],"./Warhammer.js":[3288,1845],"./Warhammer4":[8646,8059],"./Warhammer4.js":[8646,8059],"./WerewolfTheApocalypse5th":[6356,321],"./WerewolfTheApocalypse5th.js":[6356,321],"./WitchQuest":[2793,6118],"./WitchQuest.js":[2793,6118],"./WorldOfDarkness":[414,5203],"./WorldOfDarkness.js":[414,5203],"./WorldsEndFrontline":[73,7398],"./WorldsEndFrontline.js":[73,7398],"./YankeeYogSothoth":[8205,4074],"./YankeeYogSothoth.js":[8205,4074],"./YearZeroEngine":[8151,7044],"./YearZeroEngine.js":[8151,7044],"./Yggdrasill":[9180,505],"./Yggdrasill.js":[9180,505],"./Yotabana":[7617,2846],"./Yotabana.js":[7617,2846],"./ZettaiReido":[4508,4969],"./ZettaiReido.js":[4508,4969],"./ZombiLine":[5073,8542],"./ZombiLine.js":[5073,8542]};function K(Q){if(!re.o($,Q))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+Q+"'");throw B.code="MODULE_NOT_FOUND",B});var N=$[Q],x=N[0];return re.e(N[1]).then(()=>re.t(x,23))}K.keys=()=>Object.keys($),K.id=8412,l.exports=K},1774:(l,ee,re)=>{var $={"./Amadeus.ja_jp.json":[7468,1789],"./Amadeus.ko_kr.json":[7854,5939],"./Arianrhod.ja_jp.json":[1802,7571],"./Arianrhod.ko_kr.json":[2180,425],"./BeginningIdol.ja_jp.json":[4243,6410],"./BeginningIdol.ko_kr.json":[2789,144],"./Cthulhu.en_us.json":[4973,5076],"./Cthulhu.ja_jp.json":[9289,2608],"./Cthulhu.ko_kr.json":[2739,9638],"./Cthulhu.zh_hans.json":[830,9479],"./Cthulhu.zh_hant.json":[4115,9302],"./CyberpunkRed.ja_jp.json":[2566,4737],"./DetatokoSaga.ja_jp.json":[2113,1158],"./DetatokoSaga.ko_kr.json":[555,6084],"./DoubleCross.ja_jp.json":[8417,2952],"./DoubleCross.ko_kr.json":[6443,7438],"./Dracurouge.ja_jp.json":[7107,3832],"./Dracurouge.ko_kr.json":[6805,7902],"./Emoklore.ja_jp.json":[1070,1217],"./Fiasco.ja_jp.json":[1737,6342],"./Fiasco.ko_kr.json":[7667,4612],"./FinalFantasyXIV.en_us.json":[3703,9250],"./FinalFantasyXIV.ja_jp.json":[7763,3462],"./FutariSousa.ja_jp.json":[3102,7283],"./FutariSousa.ko_kr.json":[6080,6121],"./Insane.ja_jp.json":[9488,5883],"./Insane.ko_kr.json":[4506,2929],"./Kamigakari.ja_jp.json":[3493,2410],"./Kamigakari.ko_kr.json":[2407,3024],"./KillDeathBusiness.ja_jp.json":[226,5327],"./KillDeathBusiness.ko_kr.json":[8876,941],"./KizunaBullet.ja_jp.json":[9062,3769],"./LogHorizon.ja_jp.json":[2943,3184],"./LogHorizon.ko_kr.json":[2857,134],"./MagicaLogia.ja_jp.json":[7456,5853],"./MagicaLogia.ko_kr.json":[6122,1203],"./MagicaLogia.zh_hans.json":[1243,9238],"./MonotoneMuseum.ja_jp.json":[6997,5582],"./MonotoneMuseum.ko_kr.json":[2839,4204],"./Nechronica.ja_jp.json":[2710,813],"./Nechronica.ko_kr.json":[3880,4963],"./NinjaSlayer2.ja_jp.json":[9878,4773],"./SkynautsBouken.ja_jp.json":[1016,6271],"./StellarKnights.ja_jp.json":[7935,7656],"./StellarKnights.ko_kr.json":[3417,1726],"./StratoShout.ja_jp.json":[274,7371],"./StratoShout.ko_kr.json":[2060,2241],"./SwordWorld.ja_jp.json":[2261,8618],"./SwordWorld.zh_hans.json":[2194,925],"./SwordWorld2_0.ja_jp.json":[5458,123],"./SwordWorld2_0.zh_hans.json":[721,3600],"./SwordWorld2_5.ja_jp.json":[9589,4256],"./SwordWorld2_5.zh_hans.json":[3826,7815],"./TensaiGunshiNiNaro.ja_jp.json":[231,9132],"./UnsungDuet.ja_jp.json":[8124,9099],"./UnsungDuet.ko_kr.json":[2318,6145]};function K(Q){if(!re.o($,Q))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+Q+"'");throw B.code="MODULE_NOT_FOUND",B});var N=$[Q],x=N[0];return re.e(N[1]).then(()=>re.t(x,19))}K.keys=()=>Object.keys($),K.id=1774,l.exports=K},9376:l=>{"use strict";l.exports=JSON.parse('{"gameSystems":[{"id":"MetalHeadExtream","name":"\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9\u30a8\u30af\u30b9\u30c8\u30ea\u30fc\u30e0","className":"MetalHeadExtream","superClassName":"Base","sortKey":"\u3081\u305f\u308b\u3078\u3064\u3068\u3048\u304f\u3059\u3068\u308a\u3044\u3080","locale":"ja_jp"},{"id":"DoubleCross:Korean","name":"\ub354\ube14\ud06c\ub85c\uc2a42nd,3rd","className":"DoubleCross_Korean","superClassName":"DoubleCross","sortKey":"\u56fd\u969b\u5316:Korean:\ub354\ube14\ud06c\ub85c\uc2a4","locale":"ko_kr"},{"id":"Dracurouge","name":"\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5","className":"Dracurouge","superClassName":"Base","sortKey":"\u3068\u3089\u304f\u308b\u3046\u3057\u3086","locale":"ja_jp"},{"id":"Ventangle","name":"Ventangle","className":"Ventangle","superClassName":"Base","sortKey":"\u3046\u3048\u3093\u305f\u3093\u304f\u308b","locale":"ja_jp"},{"id":"Villaciel","name":"\u84bc\u5929\u306e\u30f4\u30a3\u30e9\u30b7\u30a8\u30eb","className":"Villaciel","superClassName":"Base","sortKey":"\u305d\u3046\u3066\u3093\u306e\u3046\u3044\u3089\u3057\u3048\u308b","locale":"ja_jp"},{"id":"HuntersMoon","name":"\u30cf\u30f3\u30bf\u30fc\u30ba\u30fb\u30e0\u30fc\u30f3","className":"HuntersMoon","superClassName":"Base","sortKey":"\u306f\u3093\u305f\u3042\u3059\u3080\u3046\u3093","locale":"ja_jp"},{"id":"ShinobiGami","name":"\u30b7\u30ce\u30d3\u30ac\u30df","className":"ShinobiGami","superClassName":"Base","sortKey":"\u3057\u306e\u3072\u304b\u307f","locale":"ja_jp"},{"id":"HunterTheReckoning5th","name":"Hunter: The Reckoning 5th Edition","className":"HunterTheReckoning5th","superClassName":"Base","sortKey":"\u306f\u3093\u3042\u305f\u3055\u308c\u3053\u306b\u3093\u304f5","locale":"ja_jp"},{"id":"Shiranui","name":"\u4e0d\u77e5\u706b","className":"Shiranui","superClassName":"Base","sortKey":"\u3057\u3089\u306c\u3044","locale":"ja_jp"},{"id":"ShuumatsuBargainWars","name":"\u7d42\u672b\u8cb7\u3044\u7269\u6226\u4e89","className":"ShuumatsuBargainWars","superClassName":"Base","sortKey":"\u3057\u3086\u3046\u307e\u3064\u306f\u3042\u3051\u3093\u3046\u304a\u304a\u3059","locale":"ja_jp"},{"id":"MetallicGuardian","name":"\u30e1\u30bf\u30ea\u30c3\u30af\u30ac\u30fc\u30c7\u30a3\u30a2\u30f3RPG","className":"MetallicGuardian","superClassName":"SRS","sortKey":"\u3081\u305f\u308a\u3064\u304f\u304b\u3042\u3066\u3044\u3042\u3093RPG","locale":"ja_jp"},{"id":"Dracurouge:Korean","name":"\ub4dc\ub77c\ud06c\ub8e8\uc8fc","className":"Dracurouge_Korean","superClassName":"Dracurouge","sortKey":"\u56fd\u969b\u5316:Korean:\ub4dc\ub77c\ud06c\ub8e8\uc8fc","locale":"ko_kr"},{"id":"DungeonsAndDragons","name":"\u30c0\u30f3\u30b8\u30e7\u30f3\u30ba\uff06\u30c9\u30e9\u30b4\u30f3\u30ba","className":"DungeonsAndDragons","superClassName":"Base","sortKey":"\u305f\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u3059","locale":"ja_jp"},{"id":"DungeonsAndDragons5","name":"\u30c0\u30f3\u30b8\u30e7\u30f3\u30ba\uff06\u30c9\u30e9\u30b4\u30f3\u30ba\u7b2c5\u7248","className":"DungeonsAndDragons5","superClassName":"Base","sortKey":"\u305f\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u30595","locale":"ja_jp"},{"id":"MonotoneMuseum","name":"\u30e2\u30ce\u30c8\u30fc\u30f3\u30df\u30e5\u30fc\u30b8\u30a2\u30e0RPG","className":"MonotoneMuseum","superClassName":"Base","sortKey":"\u3082\u306e\u3068\u304a\u3093\u307f\u3086\u3046\u3057\u3042\u3080RPG","locale":"ja_jp"},{"id":"Nechronica","name":"\u30cd\u30af\u30ed\u30cb\u30ab","className":"Nechronica","superClassName":"Base","sortKey":"\u306d\u304f\u308d\u306b\u304b","locale":"ja_jp"},{"id":"IfIfIf","name":"\u30a4\u30d5\u30fb\u30a4\u30d5\u30fb\u30a4\u30d5","className":"IfIfIf","superClassName":"Base","sortKey":"\u3044\u3075\u3044\u3075\u3044\u3075","locale":"ja_jp"},{"id":"MonotoneMuseum:Korean","name":"\ubaa8\ub178\ud1a4 \ubba4\uc9c0\uc5c4","className":"MonotoneMuseum_Korean","superClassName":"MonotoneMuseum","sortKey":"\u56fd\u969b\u5316:Korean:\ubaa8\ub178\ud1a4 \ubba4\uc9c0\uc5c4","locale":"ko_kr"},{"id":"ShuumatsuKikou","name":"\u7d42\u672b\u7d00\u884c\uff32\uff30\uff27","className":"ShuumatsuKikou","superClassName":"Base","sortKey":"\u3057\u3086\u3046\u307e\u3064\u304d\u3053\u3046","locale":"ja_jp"},{"id":"Nechronica:Korean","name":"\ub124\ud06c\ub85c\ub2c8\uce74","className":"Nechronica_Korean","superClassName":"Nechronica","sortKey":"\u56fd\u969b\u5316:Korean:\ub124\ud06c\ub85c\ub2c8\uce74","locale":"ko_kr"},{"id":"NeverCloud","name":"\u30cd\u30d0\u30fc\u30af\u30e9\u30a6\u30c9TRPG","className":"NeverCloud","superClassName":"Base","sortKey":"\u306d\u306f\u3042\u304f\u3089\u3046\u3068TRPG","locale":"ja_jp"},{"id":"BeginningIdol:Korean","name":"\ube44\uae30\ub2dd \uc544\uc774\ub3cc","className":"BeginningIdol_Korean","superClassName":"BeginningIdol","sortKey":"\u56fd\u969b\u5316:Korean:\ube44\uae30\ub2dd \uc544\uc774\ub3cc","locale":"ko_kr"},{"id":"BeginningIdol2022","name":"\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb\uff082022\u5e74\u6539\u8a02\u7248\uff09","className":"BeginningIdol2022","superClassName":"Base","sortKey":"\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b2022","locale":"ja_jp"},{"id":"Skynauts","name":"\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u516d\u7573\u9593\u5e7b\u60f3\u7a7a\u9593\uff09","className":"Skynauts","superClassName":"Base","sortKey":"\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u3064","locale":"ja_jp"},{"id":"EarthDawn","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f3","className":"EarthDawn","superClassName":"Base","sortKey":"\u3042\u3042\u3059\u3068\u304a\u3093","locale":"ja_jp"},{"id":"NightWizard","name":"\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 2nd Edition","className":"NightWizard","superClassName":"Base","sortKey":"\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30682","locale":"ja_jp"},{"id":"Siren","name":"\u7d42\u672b\u30a2\u30a4\u30c9\u30eb\u80b2\u6210TRPG \u30bb\u30a4\u30ec\u30fc\u30f3","className":"Siren","superClassName":"Base","sortKey":"\u305b\u3044\u308c\u3048\u3093","locale":"ja_jp"},{"id":"BlackJacket","name":"\u30d6\u30e9\u30c3\u30af\u30b8\u30e3\u30b1\u30c3\u30c8RPG","className":"BlackJacket","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u304f\u3057\u3042\u3051\u3064\u3068RPG","locale":"ja_jp"},{"id":"VisionConnect","name":"\u30f4\u30a3\u30b8\u30e7\u30f3\u30b3\u30cd\u30af\u30c8","className":"VisionConnect","superClassName":"Base","sortKey":"\u3046\u3044\u3057\u3088\u3093\u3053\u306d\u304f\u3068","locale":"ja_jp"},{"id":"Illusio","name":"\u6643\u5929\u306e\u30a4\u30eb\u30fc\u30b8\u30aa","className":"Illusio","superClassName":"Base","sortKey":"\u3053\u3046\u3066\u3093\u306e\u3044\u308b\u3046\u3057\u304a","locale":"ja_jp"},{"id":"AFF2e","name":"ADVANCED FIGHTING FANTASY 2nd Edition","className":"AFF2e","superClassName":"Base","sortKey":"\u3042\u3068\u306f\u3093\u3059\u3068\u3075\u3042\u3044\u3066\u3044\u3093\u304f\u3075\u3042\u3093\u305f\u3057\u30442","locale":"ja_jp"},{"id":"WARPS","name":"\u30ef\u30fc\u30d7\u30b9","className":"WARPS","superClassName":"Base","sortKey":"\u308f\u3042\u3075\u3059","locale":"ja_jp"},{"id":"WaresBlade","name":"\u30ef\u30fc\u30b9\u30d6\u30ec\u30a4\u30c9","className":"WaresBlade","superClassName":"Base","sortKey":"\u308f\u3042\u3059\u3075\u308c\u3044\u3068","locale":"ja_jp"},{"id":"Warhammer","name":"\u30a6\u30a9\u30fc\u30cf\u30f3\u30de\u30fc","className":"Warhammer","superClassName":"Base","sortKey":"\u3046\u304a\u304a\u306f\u3093\u307e\u3042","locale":"ja_jp"},{"id":"InfiniteBabeL","name":"\u5c11\u5e74\u306e\u305f\u3081\u306e\u5c11\u5973\u5c55\u721b\u4f1a\u7570\u805e Infinite BabeL","className":"InfiniteBabeL","superClassName":"ShoujoTenrankai","sortKey":"\u3057\u3088\u3046\u306d\u3093\u306e\u305f\u3081\u306e\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304b\u3044\u3044\u3075\u3093\u3044\u3093\u3075\u3044\u306b\u3064\u3068\u306f\u3078\u308b","locale":"ja_jp"},{"id":"ShoujoTenrankai","name":"\u5c11\u5973\u5c55\u721b\u4f1aTRPG","className":"ShoujoTenrankai","superClassName":"Base","sortKey":"\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304b\u3044TRPG","locale":"ja_jp"},{"id":"SkynautsBouken","name":"\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u5192\u967a\u4f01\u753b\u5c40\uff09","className":"SkynautsBouken","superClassName":"Base","sortKey":"\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u30642","locale":"ja_jp"},{"id":"NightWizard3rd","name":"\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 3rd Edition","className":"NightWizard3rd","superClassName":"NightWizard","sortKey":"\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30683","locale":"ja_jp"},{"id":"NightmareHunterDeep","name":"\u30ca\u30a4\u30c8\u30e1\u30a2\u30cf\u30f3\u30bf\u30fc=\u30c7\u30a3\u30fc\u30d7","className":"NightmareHunterDeep","superClassName":"Base","sortKey":"\u306a\u3044\u3068\u3081\u3042\u306f\u3093\u305f\u3042\u3066\u3044\u3044\u3075","locale":"ja_jp"},{"id":"BladeOfArcana","name":"\u30d6\u30ec\u30a4\u30c9\u30fb\u30aa\u30d6\u30fb\u30a2\u30eb\u30ab\u30ca\uff08\u30d1\u30c3\u30c1\u7248\uff09","className":"BladeOfArcana","superClassName":"Base","sortKey":"\u3075\u308c\u3044\u3068\u304a\u3075\u3042\u308b\u304b\u306a","locale":"ja_jp"},{"id":"AceKillerGene","name":"\u30a8\u30fc\u30b9\u30ad\u30e9\u30fc\u30b8\u30fc\u30f3","className":"AceKillerGene","superClassName":"GardenOrder","sortKey":"\u3048\u3048\u3059\u304d\u3089\u3042\u3057\u3044\u3093","locale":"ja_jp"},{"id":"GardenOrder","name":"\u30ac\u30fc\u30c7\u30f3\u30aa\u30fc\u30c0\u30fc","className":"GardenOrder","superClassName":"Base","sortKey":"\u304b\u3042\u3066\u3093\u304a\u304a\u305f\u3042","locale":"ja_jp"},{"id":"EarthDawn3","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f33\u7248","className":"EarthDawn3","superClassName":"EarthDawn","sortKey":"\u3042\u3042\u3059\u3068\u304a\u30933","locale":"ja_jp"},{"id":"InfiniteFantasia","name":"\u7121\u9650\u306e\u30d5\u30a1\u30f3\u30bf\u30b8\u30a2","className":"InfiniteFantasia","superClassName":"Base","sortKey":"\u3080\u3051\u3093\u306e\u3075\u3042\u3093\u305f\u3057\u3042","locale":"ja_jp"},{"id":"BlindMythos","name":"\u30d6\u30e9\u30a4\u30f3\u30c9\u30fb\u30df\u30c8\u30b9RPG","className":"BlindMythos","superClassName":"Base","sortKey":"\u3075\u3089\u3044\u3093\u3068\u307f\u3068\u3059RPG","locale":"ja_jp"},{"id":"Insane:Korean","name":"\uc778\uc138\uc778","className":"Insane_Korean","superClassName":"Insane","sortKey":"\u56fd\u969b\u5316:Korean:\uc778\uc138\uc778","locale":"ko_kr"},{"id":"InvisibleLiar","name":"\u30a4\u30f3\u30d3\u30b8\u30d6\u30eb\u30e9\u30a4\u30a2\u30fc","className":"InvisibleLiar","superClassName":"Base","sortKey":"\u3044\u3093\u3072\u3057\u3075\u308b\u3089\u3044\u3042\u3042","locale":"ja_jp"},{"id":"Irisbane","name":"\u77b3\u9038\u3089\u3055\u306c\u30a4\u30ea\u30b9\u30d9\u30a4\u30f3","className":"Irisbane","superClassName":"Base","sortKey":"\u3072\u3068\u307f\u305d\u3089\u3055\u306c\u3044\u308a\u3059\u3078\u3044\u3093","locale":"ja_jp"},{"id":"NinjaSlayer","name":"\u30cb\u30f3\u30b8\u30e3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG","className":"NinjaSlayer","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042TRPG","locale":"ja_jp"},{"id":"Insane","name":"\u30a4\u30f3\u30bb\u30a4\u30f3","className":"Insane","superClassName":"Base","sortKey":"\u3044\u3093\u305b\u3044\u3093","locale":"ja_jp"},{"id":"StarryDolls","name":"\u30b9\u30bf\u30ea\u30a3\u30c9\u30fc\u30eb","className":"StarryDolls","superClassName":"Base","sortKey":"\u3059\u305f\u308a\u3044\u3068\u304a\u308b","locale":"ja_jp"},{"id":"SteamPunkers","name":"\u30b9\u30c1\u30fc\u30e0\u30d1\u30f3\u30ab\u30fc\u30ba","className":"SteamPunkers","superClassName":"Base","sortKey":"\u3059\u3061\u3044\u3080\u306f\u3093\u304b\u3042\u3059","locale":"ja_jp"},{"id":"Agnostos","name":"\u30a2\u30b0\u30ce\u30b9\u30c8\u30b9","className":"Agnostos","superClassName":"Base","sortKey":"\u3042\u304f\u306e\u3059\u3068\u3059","locale":"ja_jp"},{"id":"IthaWenUa","name":"\u30a4\u30b5\u30fc\u30fb\u30a6\u30a7\u30f3\uff1d\u30a2\u30fc","className":"IthaWenUa","superClassName":"Base","sortKey":"\u3044\u3055\u3042\u3046\u3048\u3093\u3042\u3042","locale":"ja_jp"},{"id":"JamesBond","name":"\u30b8\u30a7\u30fc\u30e0\u30ba\u30fb\u30dc\u30f3\u30c9007","className":"JamesBond","superClassName":"Base","sortKey":"\u3057\u3048\u3048\u3080\u3059\u307b\u3093\u3068007","locale":"ja_jp"},{"id":"JuinKansen","name":"\u546a\u5370\u611f\u67d3","className":"JuinKansen","superClassName":"Base","sortKey":"\u3057\u3086\u3044\u3093\u304b\u3093\u305b\u3093","locale":"ja_jp"},{"id":"Kamigakari","name":"\u795e\u6211\u72e9","className":"Kamigakari","superClassName":"Base","sortKey":"\u304b\u307f\u304b\u304b\u308a","locale":"ja_jp"},{"id":"JekyllAndHyde","name":"\u30b8\u30ad\u30eb\u3068\u30cf\u30a4\u30c9\u3068\u30b0\u30ea\u30c8\u30b0\u30e9","className":"JekyllAndHyde","superClassName":"DesperateRun","sortKey":"\u3057\u304d\u308b\u3068\u306f\u3044\u3068\u3068\u304f\u308a\u3068\u304f\u3089","locale":"ja_jp"},{"id":"StellarKnights","name":"\u9280\u5263\u306e\u30b9\u30c6\u30e9\u30ca\u30a4\u30c4","className":"StellarKnights","superClassName":"Base","sortKey":"\u304d\u3093\u3051\u3093\u306e\u3059\u3066\u3089\u306a\u3044\u3064","locale":"ja_jp"},{"id":"EarthDawn4","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f34\u7248","className":"EarthDawn4","superClassName":"EarthDawn","sortKey":"\u3042\u3042\u3059\u3068\u304a\u30934","locale":"ja_jp"},{"id":"NinjaSlayer2","name":"\u30cb\u30f3\u30b8\u30e3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG 2\u7248","className":"NinjaSlayer2","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042TRPG2","locale":"ja_jp"},{"id":"StellarKnights:Korean","name":"\uc740\uac80\uc758 \uc2a4\ud154\ub77c\ub098\uc774\uce20","className":"StellarKnights_Korean","superClassName":"StellarKnights","sortKey":"\u56fd\u969b\u5316:Korean:\uc740\uac80\uc758 \uc2a4\ud154\ub77c\ub098\uc774\uce20","locale":"ko_kr"},{"id":"StellarLife","name":"\u30b9\u30c6\u30e9\u30fc\u30e9\u30a4\u30d5TRPG","className":"StellarLife","superClassName":"Base","sortKey":"\u3059\u3066\u3089\u3042\u3089\u3044\u3075TRPG","locale":"ja_jp"},{"id":"Ainecadette","name":"\u30a8\u30cd\u30ab\u30c7\u30c3\u30c8","className":"Ainecadette","superClassName":"Base","sortKey":"\u3048\u306d\u304b\u3066\u3064\u3068","locale":"ja_jp"},{"id":"Kamigakari:Korean","name":"\uce74\ubbf8\uac00\uce74\ub9ac","className":"Kamigakari_Korean","superClassName":"Kamigakari","sortKey":"\u56fd\u969b\u5316:Korean:\uce74\ubbf8\uac00\uce74\ub9ac","locale":"ko_kr"},{"id":"KamitsubakiCityUnderConstructionNarrative","name":"\u795e\u693f\u5e02\u5efa\u8a2d\u4e2d\u3002NARRATIVE","className":"KamitsubakiCityUnderConstructionNarrative","superClassName":"Base","sortKey":"\u304b\u307f\u3064\u306f\u304d\u3057\u3051\u3093\u305b\u3064\u3061\u3086\u3046\u306a\u3089\u3066\u3044\u3075","locale":"ja_jp"},{"id":"WerewolfTheApocalypse5th","name":"Werewolf: The Apocalypse 5th Edition","className":"WerewolfTheApocalypse5th","superClassName":"Base","sortKey":"\u308f\u3042\u3046\u3075\u308b\u3057\u3042\u307b\u304b\u308a\u3075\u30595","locale":"ja_jp"},{"id":"EclipsePhase","name":"\u30a8\u30af\u30ea\u30d7\u30b9\u30fb\u30d5\u30a7\u30a4\u30ba","className":"EclipsePhase","superClassName":"Base","sortKey":"\u3048\u304f\u308a\u3075\u3059\u3075\u3048\u3044\u3059","locale":"ja_jp"},{"id":"Airgetlamh","name":"\u6731\u306e\u5b64\u5854\u306e\u30a8\u30a2\u30b2\u30c8\u30e9\u30e0","className":"Airgetlamh","superClassName":"Base","sortKey":"\u3042\u3051\u306e\u3053\u3068\u3046\u306e\u3048\u3042\u3051\u3068\u3089\u3080","locale":"ja_jp"},{"id":"BloodCrusade","name":"\u30d6\u30e9\u30c3\u30c9\u30fb\u30af\u30eb\u30bb\u30a4\u30c9","className":"BloodCrusade","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u3068\u304f\u308b\u305b\u3044\u3068","locale":"ja_jp"},{"id":"Warhammer4","name":"\u30a6\u30a9\u30fc\u30cf\u30f3\u30de\u30fcRPG\u7b2c4\u7248","className":"Warhammer4","superClassName":"Base","sortKey":"\u3046\u304a\u304a\u306f\u3093\u307e\u30424","locale":"ja_jp"},{"id":"Elric","name":"\u30a8\u30eb\u30ea\u30c3\u30af\uff01","className":"Elric","superClassName":"Base","sortKey":"\u3048\u308b\u308a\u3064\u304f","locale":"ja_jp"},{"id":"BloodMoon","name":"\u30d6\u30e9\u30c3\u30c9\u30e0\u30fc\u30f3","className":"BloodMoon","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u3068\u3080\u3046\u3093","locale":"ja_jp"},{"id":"Bloodorium","name":"\u30d6\u30e9\u30c9\u30ea\u30a6\u30e0","className":"Bloodorium","superClassName":"Base","sortKey":"\u3075\u3089\u3068\u308a\u3046\u3080","locale":"ja_jp"},{"id":"KanColle","name":"\u8266\u3053\u308cRPG","className":"KanColle","superClassName":"Base","sortKey":"\u304b\u3093\u3053\u308cRPG","locale":"ja_jp"},{"id":"Elysion","name":"\u30a8\u30ea\u30e5\u30b7\u30aa\u30f3","className":"Elysion","superClassName":"Base","sortKey":"\u3048\u308a\u3086\u3057\u304a\u3093","locale":"ja_jp"},{"id":"StratoShout","name":"\u30b9\u30c8\u30e9\u30c8\u30b7\u30e3\u30a6\u30c8","className":"StratoShout","superClassName":"Base","sortKey":"\u3059\u3068\u3089\u3068\u3057\u3084\u3046\u3068","locale":"ja_jp"},{"id":"StratoShout:Korean","name":"\uc2a4\ud2b8\ub77c\ud1a0 \uc0e4\uc6b0\ud2b8","className":"StratoShout_Korean","superClassName":"StratoShout","sortKey":"\u56fd\u969b\u5316:Korean:\uc2a4\ud2b8\ub77c\ud1a0 \uc0e4\uc6b0\ud2b8","locale":"ko_kr"},{"id":"CardRanker","name":"\u30ab\u30fc\u30c9\u30e9\u30f3\u30ab\u30fc","className":"CardRanker","superClassName":"Base","sortKey":"\u304b\u3042\u3068\u3089\u3093\u304b\u3042","locale":"ja_jp"},{"id":"WitchQuest","name":"\u30a6\u30a3\u30c3\u30c1\u30af\u30a8\u30b9\u30c8","className":"WitchQuest","superClassName":"Base","sortKey":"\u3046\u3044\u3064\u3061\u304f\u3048\u3059\u3068","locale":"ja_jp"},{"id":"Strave","name":"\u78a7\u7a7a\u306e\u30b9\u30c8\u30ec\u30a4\u30f4","className":"Strave","superClassName":"Base","sortKey":"\u3078\u304d\u304f\u3046\u306e\u3059\u3068\u308c\u3044\u3075","locale":"ja_jp"},{"id":"CastleInGray","name":"\u7070\u8272\u57ce\u7dba\u8b5a","className":"CastleInGray","superClassName":"Base","sortKey":"\u306f\u3044\u3044\u308d\u3057\u3088\u3046\u304d\u305f\u3093","locale":"ja_jp"},{"id":"AlchemiaStruggle","name":"\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb","className":"AlchemiaStruggle","superClassName":"Base","sortKey":"\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b","locale":"ja_jp"},{"id":"Karukami","name":"\u30ab\u30eb\u30ab\u30df","className":"Karukami","superClassName":"Base","sortKey":"\u304b\u308b\u304b\u307f","locale":"ja_jp"},{"id":"SwordWorld","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG","className":"SwordWorld","superClassName":"Base","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u3068","locale":"ja_jp"},{"id":"KemonoNoMori","name":"\u7378\u30ce\u68ee","className":"KemonoNoMori","superClassName":"Base","sortKey":"\u3051\u3082\u306e\u306e\u3082\u308a","locale":"ja_jp"},{"id":"StrangerOfSwordCity","name":"\u5263\u306e\u8857\u306e\u7570\u90a6\u4ebaTRPG","className":"StrangerOfSwordCity","superClassName":"Base","sortKey":"\u3064\u308b\u304d\u306e\u307e\u3061\u306e\u3044\u307b\u3046\u3057\u3093TRPG","locale":"ja_jp"},{"id":"ChaosFlare","name":"\u30ab\u30aa\u30b9\u30d5\u30ec\u30a2","className":"ChaosFlare","superClassName":"Base","sortKey":"\u304b\u304a\u3059\u3075\u308c\u3042","locale":"ja_jp"},{"id":"NjslyrBattle","name":"NJSLYRBATTLE","className":"NjslyrBattle","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042\u306f\u3068\u308b","locale":"ja_jp"},{"id":"NobunagasBlackCastle","name":"\u4fe1\u9577\u306e\u9ed2\u3044\u57ce","className":"NobunagasBlackCastle","superClassName":"Base","sortKey":"\u306e\u3075\u306a\u304b\u306e\u304f\u308d\u3044\u3057\u308d","locale":"ja_jp"},{"id":"Chill","name":"Chill","className":"Chill","superClassName":"Base","sortKey":"\u3061\u308b","locale":"ja_jp"},{"id":"WorldOfDarkness","name":"\u30ef\u30fc\u30eb\u30c9\u30fb\u30aa\u30d6\u30fb\u30c0\u30fc\u30af\u30cd\u30b9","className":"WorldOfDarkness","superClassName":"Base","sortKey":"\u308f\u3042\u308b\u3068\u304a\u3075\u305f\u3042\u304f\u306d\u3059","locale":"ja_jp"},{"id":"KillDeathBusiness","name":"\u30ad\u30eb\u30c7\u30b9\u30d3\u30b8\u30cd\u30b9","className":"KillDeathBusiness","superClassName":"Base","sortKey":"\u304d\u308b\u3066\u3059\u3072\u3057\u306d\u3059","locale":"ja_jp"},{"id":"WorldsEndFrontline","name":"\u30ef\u30fc\u30eb\u30c9\u30a8\u30f3\u30c9\u30d5\u30ed\u30f3\u30c8\u30e9\u30a4\u30f3","className":"WorldsEndFrontline","superClassName":"Bloodorium","sortKey":"\u308f\u3042\u308b\u3068\u3048\u3093\u3068\u3075\u308d\u3093\u3068\u3089\u3044\u3093","locale":"ja_jp"},{"id":"NRR","name":"nRR","className":"NRR","superClassName":"Base","sortKey":"\u3048\u306c\u3042\u3042\u308b\u3042\u3042\u308b","locale":"ja_jp"},{"id":"YankeeYogSothoth","name":"\u30e4\u30f3\u30ad\u30fc\uff06\u30e8\u30b0\uff1d\u30bd\u30c8\u30fc\u30b9","className":"YankeeYogSothoth","superClassName":"Base","sortKey":"\u3084\u3093\u304d\u3044\u3042\u3093\u3068\u3088\u304f\u305d\u3068\u304a\u3059","locale":"ja_jp"},{"id":"Chill3","name":"Chill 3rd Edition","className":"Chill3","superClassName":"Base","sortKey":"\u3061\u308b3","locale":"ja_jp"},{"id":"CodeLayerd","name":"\u30b3\u30fc\u30c9\uff1a\u30ec\u30a4\u30e4\u30fc\u30c9","className":"CodeLayerd","superClassName":"Base","sortKey":"\u3053\u304a\u3068\u308c\u3044\u3084\u3042\u3068","locale":"ja_jp"},{"id":"YearZeroEngine","name":"YearZeroEngine","className":"YearZeroEngine","superClassName":"Base","sortKey":"\u3044\u3084\u3042\u305b\u308d\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"Alsetto","name":"\u8a69\u7247\u306e\u30a2\u30eb\u30bb\u30c3\u30c8","className":"Alsetto","superClassName":"Base","sortKey":"\u3046\u305f\u304b\u305f\u306e\u3042\u308b\u305b\u3064\u3068","locale":"ja_jp"},{"id":"Alshard","name":"\u30a2\u30eb\u30b7\u30e3\u30fc\u30c9","className":"Alshard","superClassName":"SRS","sortKey":"\u3042\u308b\u3057\u3084\u3042\u3068","locale":"ja_jp"},{"id":"SRS","name":"\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9RPG\u30b7\u30b9\u30c6\u30e0","className":"SRS","superClassName":"Base","sortKey":"\u3059\u305f\u3093\u305f\u3042\u3068RPG\u3057\u3059\u3066\u3080","locale":"ja_jp"},{"id":"ColossalHunter","name":"\u30b3\u30ed\u30c3\u30b5\u30eb\u30cf\u30f3\u30bf\u30fc","className":"ColossalHunter","superClassName":"Base","sortKey":"\u3053\u308d\u3064\u3055\u308b\u306f\u3093\u305f\u3042","locale":"ja_jp"},{"id":"NSSQ","name":"SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG","className":"NSSQ","superClassName":"Base","sortKey":"\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG","locale":"ja_jp"},{"id":"EmbryoMachine","name":"\u30a8\u30e0\u30d6\u30ea\u30aa\u30de\u30b7\u30f3RPG","className":"EmbryoMachine","superClassName":"Base","sortKey":"\u3048\u3080\u3075\u308a\u304a\u307e\u3057\u3093RPG","locale":"ja_jp"},{"id":"KillDeathBusiness:Korean","name":"Kill Death Business (\ud55c\uad6d\uc5b4)","className":"KillDeathBusiness_Korean","superClassName":"KillDeathBusiness","sortKey":"\u56fd\u969b\u5316:Korean:Kill Death Business","locale":"ko_kr"},{"id":"KizunaBullet","name":"\u30ad\u30ba\u30ca\u30d0\u30ec\u30c3\u30c8","className":"KizunaBullet","superClassName":"Base","sortKey":"\u304d\u3059\u306a\u306f\u308c\u3064\u3068","locale":"ja_jp"},{"id":"Emoklore","name":"\u30a8\u30e2\u30af\u30ed\u30a2TRPG","className":"Emoklore","superClassName":"Base","sortKey":"\u3048\u3082\u304f\u308d\u3042TRPG","locale":"ja_jp"},{"id":"Comes","name":"\u30ab\u30e0\u30ba","className":"Comes","superClassName":"Base","sortKey":"\u304b\u3080\u3059","locale":"ja_jp"},{"id":"ConvictorDrive","name":"\u30b3\u30f3\u30f4\u30a3\u30af\u30bf\u30fc\u30fb\u30c9\u30e9\u30a4\u30d6","className":"ConvictorDrive","superClassName":"Base","sortKey":"\u3053\u3093\u3046\u3044\u304f\u305f\u3042\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"Nuekagami","name":"\u9d7a\u93e1","className":"Nuekagami","superClassName":"Base","sortKey":"\u306c\u3048\u304b\u304b\u307f","locale":"ja_jp"},{"id":"OneWayHeroics","name":"\u7247\u9053\u52c7\u8005TRPG","className":"OneWayHeroics","superClassName":"Base","sortKey":"\u304b\u305f\u307f\u3061\u3086\u3046\u3057\u3084TRPG","locale":"ja_jp"},{"id":"CrashWorld","name":"\u589c\u843d\u4e16\u754c","className":"CrashWorld","superClassName":"Base","sortKey":"\u3064\u3044\u3089\u304f\u305b\u304b\u3044","locale":"ja_jp"},{"id":"Yggdrasill","name":"\u92fc\u9244\u306e\u30e6\u30b0\u30c9\u30e9\u30b7\u30eb","className":"Yggdrasill","superClassName":"Base","sortKey":"\u3053\u3046\u3066\u3064\u306e\u3086\u304f\u3068\u3089\u3057\u308b","locale":"ja_jp"},{"id":"EndBreaker","name":"\u30a8\u30f3\u30c9\u30d6\u30ec\u30a4\u30ab\u30fc\uff01","className":"EndBreaker","superClassName":"Base","sortKey":"\u3048\u3093\u3068\u3075\u308c\u3044\u304b\u3042","locale":"ja_jp"},{"id":"Cthulhu","name":"\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG","className":"Cthulhu","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG","locale":"ja_jp"},{"id":"EtrianOdysseySRS","name":"\u4e16\u754c\u6a39\u306e\u8ff7\u5baeSRS","className":"EtrianOdysseySRS","superClassName":"SRS","sortKey":"\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046SRS","locale":"ja_jp"},{"id":"FateCoreSystem","name":"Fate Core System","className":"FateCoreSystem","superClassName":"Base","sortKey":"\u3075\u3048\u3044\u3068\u3053\u3042\u3057\u3059\u3066\u3080","locale":"ja_jp"},{"id":"AlterRaise","name":"\u30a2\u30eb\u30c8\u30ec\u30a4\u30ba","className":"AlterRaise","superClassName":"Base","sortKey":"\u3042\u308b\u3068\u308c\u3044\u3059","locale":"ja_jp"},{"id":"Fiasco","name":"\u30d5\u30a3\u30a2\u30b9\u30b3","className":"Fiasco","superClassName":"Base","sortKey":"\u3075\u3044\u3042\u3059\u3053","locale":"ja_jp"},{"id":"KurayamiCrying","name":"\u30af\u30e9\u30e4\u30df\u30af\u30e9\u30a4\u30f3","className":"KurayamiCrying","superClassName":"Base","sortKey":"\u304f\u3089\u3084\u307f\u304f\u3089\u3044\u3093","locale":"ja_jp"},{"id":"Kutulu","name":"Kutulu","className":"Kutulu","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3046","locale":"ja_jp"},{"id":"Amadeus","name":"\u30a2\u30de\u30c7\u30a6\u30b9","className":"Amadeus","superClassName":"Base","sortKey":"\u3042\u307e\u3066\u3046\u3059","locale":"ja_jp"},{"id":"OracleEngine","name":"\u30aa\u30e9\u30af\u30eb\u30a8\u30f3\u30b8\u30f3","className":"OracleEngine","superClassName":"Base","sortKey":"\u304a\u3089\u304f\u308b\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"Fiasco:Korean","name":"\ud53c\uc544\uc2a4\ucf54","className":"Fiasco_Korean","superClassName":"Fiasco","sortKey":"\u56fd\u969b\u5316:Korean:\ud53c\uc544\uc2a4\ucf54","locale":"ko_kr"},{"id":"FilledWith","name":"\u30d5\u30a3\u30eb\u30c8\u30a6\u30a3\u30ba","className":"FilledWith","superClassName":"Base","sortKey":"\u3075\u3044\u308b\u3068\u3046\u3044\u3059","locale":"ja_jp"},{"id":"Cthulhu7th","name":"\u65b0\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG","className":"Cthulhu7th","superClassName":"Base","sortKey":"\u3057\u3093\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG","locale":"ja_jp"},{"id":"KyokoShinshoku","name":"\u865a\u69cb\u4fb5\u8755TRPG","className":"KyokoShinshoku","superClassName":"Base","sortKey":"\u304d\u3088\u3053\u3046\u3057\u3093\u3057\u3088\u304fTRPG","locale":"ja_jp"},{"id":"SwordWorld2.0","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0","className":"SwordWorld2_0","superClassName":"SwordWorld","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0","locale":"ja_jp"},{"id":"Amadeus:Korean","name":"\uc544\ub9c8\ub370\uc6b0\uc2a4","className":"Amadeus_Korean","superClassName":"Amadeus","sortKey":"\u56fd\u969b\u5316:Korean:\uc544\ub9c8\ub370\uc6b0\uc2a4","locale":"ko_kr"},{"id":"AngelGear","name":"\u30a8\u30f3\u30bc\u30eb\u30ae\u30a2 \u5929\u4f7f\u5927\u6226TRPG The 2nd Editon","className":"AngelGear","superClassName":"Base","sortKey":"\u3048\u3093\u305b\u308b\u304d\u30422","locale":"ja_jp"},{"id":"Liminal","name":"\u30ea\u30df\u30ca\u30eb","className":"Liminal","superClassName":"Base","sortKey":"\u308a\u307f\u306a\u308b","locale":"ja_jp"},{"id":"Yotabana","name":"\u30e8\u30bf\u30d0\u30ca","className":"Yotabana","superClassName":"Base","sortKey":"\u3088\u305f\u306f\u306a","locale":"ja_jp"},{"id":"ZettaiReido","name":"\u7d76\u5bfe\u96b7\u5974","className":"ZettaiReido","superClassName":"Base","sortKey":"\u305b\u3064\u305f\u3044\u308c\u3044\u3068","locale":"ja_jp"},{"id":"LiveraDoll","name":"\u7d2b\u7e1e\u306e\u30ea\u30f4\u30e9\u30c9\u30fc\u30eb","className":"LiveraDoll","superClassName":"Base","sortKey":"\u3057\u3057\u307e\u306e\u308a\u3046\u3089\u3068\u304a\u308b","locale":"ja_jp"},{"id":"AnimaAnimus","name":"\u30a2\u30cb\u30de\u30a2\u30cb\u30e0\u30b9","className":"AnimaAnimus","superClassName":"Base","sortKey":"\u3042\u306b\u307e\u3042\u306b\u3080\u3059","locale":"ja_jp"},{"id":"OrgaRain","name":"\u5728\u308a\u3066\u904d\u304f\u30aa\u30eb\u30ac\u30ec\u30a4\u30f3","className":"OrgaRain","superClassName":"Base","sortKey":"\u3042\u308a\u3066\u3042\u307e\u306d\u304f\u304a\u308b\u304b\u308c\u3044\u3093","locale":"ja_jp"},{"id":"Oukahoushin3rd","name":"\u592e\u83ef\u5c01\u795eRPG \u7b2c\u4e09\u7248","className":"Oukahoushin3rd","superClassName":"Base","sortKey":"\u304a\u3046\u304b\u307b\u3046\u3057\u3093RPG3","locale":"ja_jp"},{"id":"LogHorizon","name":"\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG","className":"LogHorizon","superClassName":"Base","sortKey":"\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG","locale":"ja_jp"},{"id":"Paradiso","name":"\u30c1\u30a7\u30ec\u30b9\u30c6\u8272\u306e\u30d1\u30e9\u30c7\u30a3\u30fc\u30be","className":"Paradiso","superClassName":"Base","sortKey":"\u3061\u3048\u308c\u3059\u3066\u3044\u308d\u306e\u306f\u3089\u3066\u3044\u3044\u305d","locale":"ja_jp"},{"id":"AniMalus","name":"\u30a2\u30cb\u30de\u30e9\u30b9","className":"AniMalus","superClassName":"Base","sortKey":"\u3042\u306b\u307e\u3089\u3059","locale":"ja_jp"},{"id":"SwordWorld2.0:SimplifiedChinese","name":"\u5251\u4e16\u754c2.0","className":"SwordWorld2_0_SimplifiedChinese","superClassName":"SwordWorld2_0","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.0","locale":"zh_hans"},{"id":"SwordWorld2.5","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.5","className":"SwordWorld2_5","superClassName":"SwordWorld2_0","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u30682.5","locale":"ja_jp"},{"id":"TalesFromTheLoop","name":"\u30b6\u30fb\u30eb\u30fc\u30d7TRPG","className":"TalesFromTheLoop","superClassName":"Base","sortKey":"\u3055\u308b\u3046\u3075TRPG","locale":"ja_jp"},{"id":"SwordWorld2.5:SimplifiedChinese","name":"\u5251\u4e16\u754c2.5","className":"SwordWorld2_5_SimplifiedChinese","superClassName":"SwordWorld2_5","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.5","locale":"zh_hans"},{"id":"SwordWorld:SimplifiedChinese","name":"\u5251\u4e16\u754c","className":"SwordWorld_SimplifiedChinese","superClassName":"SwordWorld","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c","locale":"zh_hans"},{"id":"TenkaRyouran","name":"\u5929\u4e0b\u7e5a\u4e71","className":"TenkaRyouran","superClassName":"SRS","sortKey":"\u3066\u3093\u304b\u308a\u3088\u3046\u3089\u3093","locale":"ja_jp"},{"id":"TensaiGunshiNiNaro","name":"\u5929\u624d\u8ecd\u5e2b\u306b\u306a\u308d\u3046","className":"TensaiGunshiNiNaro","superClassName":"Base","sortKey":"\u3066\u3093\u3055\u3044\u304f\u3093\u3057\u306b\u306a\u308d\u3046","locale":"ja_jp"},{"id":"ZombiLine","name":"\u30be\u30f3\u30d3\u30e9\u30a4\u30f3","className":"ZombiLine","superClassName":"Base","sortKey":"\u305d\u3093\u3072\u3089\u3044\u3093","locale":"ja_jp"},{"id":"Aoharubaan","name":"\u3042\u304a\u306f\u308b\u3070\u30fc\u3093\u3063","className":"Aoharubaan","superClassName":"Base","sortKey":"\u3042\u304a\u306f\u308b\u306f\u3042\u3093\u3064","locale":"ja_jp"},{"id":"Paranoia","name":"\u30d1\u30e9\u30ce\u30a4\u30a2","className":"Paranoia","superClassName":"Base","sortKey":"\u306f\u3089\u306e\u3044\u3042","locale":"ja_jp"},{"id":"FullMetalPanic","name":"\u30d5\u30eb\u30e1\u30bf\u30eb\u30fb\u30d1\u30cb\u30c3\u30af\uff01RPG","className":"FullMetalPanic","superClassName":"SRS","sortKey":"\u3075\u308b\u3081\u305f\u308b\u306f\u306b\u3064\u304fRPG","locale":"ja_jp"},{"id":"FullFace","name":"\u30d5\u30eb\u30d5\u30a7\u30a4\u30b9","className":"FullFace","superClassName":"Base","sortKey":"\u3075\u308b\u3075\u3048\u3044\u3059","locale":"ja_jp"},{"id":"ParanoiaRebooted","name":"\u30d1\u30e9\u30ce\u30a4\u30a2 \u30ea\u30d6\u30fc\u30c6\u30c3\u30c9","className":"ParanoiaRebooted","superClassName":"Base","sortKey":"\u306f\u3089\u306e\u3044\u3042\u308a\u3075\u3046\u3066\u3064\u3068","locale":"ja_jp"},{"id":"TheOneRing2nd","name":"\u4e00\u3064\u306e\u6307\u8f2a\uff1a\u6307\u8f2a\u7269\u8a9eTRPG2\u7248","className":"TheOneRing2nd","superClassName":"Base","sortKey":"\u3072\u3068\u3064\u306e\u3086\u3072\u308f\u3086\u3072\u308f\u3082\u306e\u304b\u305f\u308aTRPG2","locale":"ja_jp"},{"id":"FinalFantasyXIV:English","name":"FINAL FANTSY XIV TTRPG(English)","className":"FinalFantasyXIV_English","superClassName":"FinalFantasyXIV","sortKey":"\u56fd\u969b\u5316:English:FINAL FANTASY XIV TTRPG","locale":"en_us"},{"id":"ParasiteBlood","name":"\u30d1\u30e9\u30b5\u30a4\u30c8\u30d6\u30e9\u30c3\u30c9RPG","className":"ParasiteBlood","superClassName":"DemonParasite","sortKey":"\u306f\u3089\u3055\u3044\u3068\u3075\u3089\u3064\u3068RPG","locale":"ja_jp"},{"id":"FinalFantasyXIV","name":"FINAL FANTSY XIV TTRPG","className":"FinalFantasyXIV","superClassName":"Base","sortKey":"\u3075\u3042\u3044\u306a\u308b\u3075\u3042\u3093\u305f\u3057\u304414TTRPG","locale":"ja_jp"},{"id":"FutariSousa","name":"\u30d5\u30bf\u30ea\u30bd\u30a6\u30b5","className":"FutariSousa","superClassName":"Base","sortKey":"\u3075\u305f\u308a\u305d\u3046\u3055","locale":"ja_jp"},{"id":"Arianrhod","name":"\u30a2\u30ea\u30a2\u30f3\u30ed\u30c3\u30c9RPG","className":"Arianrhod","superClassName":"Base","sortKey":"\u3042\u308a\u3042\u3093\u308d\u3064\u3068RPG","locale":"ja_jp"},{"id":"LogHorizon:Korean","name":"\ub85c\uadf8 \ud638\ub77c\uc774\uc98c","className":"LogHorizon_Korean","superClassName":"LogHorizon","sortKey":"\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c","locale":"ko_kr"},{"id":"FutariSousa:Korean","name":"\ub458\uc774\uc11c \uc218\uc0ac","className":"FutariSousa_Korean","superClassName":"FutariSousa","sortKey":"\u56fd\u969b\u5316:Korean:\ub458\uc774\uc11c \uc218\uc0ac","locale":"ko_kr"},{"id":"Arianrhod:Korean","name":"\uc544\ub9ac\uc548\ub85c\ub4dcRPG","className":"Arianrhod_Korean","superClassName":"Arianrhod","sortKey":"\u56fd\u969b\u5316:Korean:\uc544\ub9ac\uc548\ub85c\ub4dcRPG","locale":"ko_kr"},{"id":"ArknightsFan","name":"\u30a2\u30fc\u30af\u30ca\u30a4\u30c4TRPG by Dapto","className":"ArknightsFan","superClassName":"Base","sortKey":"\u3042\u3042\u304f\u306a\u3044\u3064TRPG\u306f\u3044\u305f\u3075\u3068","locale":"ja_jp"},{"id":"LostRecord","name":"\u30ed\u30b9\u30c8\u30ec\u30b3\u30fc\u30c9","className":"LostRecord","superClassName":"Base","sortKey":"\u308d\u3059\u3068\u308c\u3053\u304a\u3068","locale":"ja_jp"},{"id":"Garako","name":"\u30ac\u30e9\u30b3\u3068\u7834\u754c\u306e\u5854","className":"Garako","superClassName":"Base","sortKey":"\u304b\u3089\u3053\u3068\u306f\u304b\u3044\u306e\u3068\u3046","locale":"ja_jp"},{"id":"LostRoyal","name":"\u30ed\u30b9\u30c8\u30ed\u30a4\u30e4\u30eb","className":"LostRoyal","superClassName":"Base","sortKey":"\u308d\u3059\u3068\u308d\u3044\u3084\u308b","locale":"ja_jp"},{"id":"PastFutureParadox","name":"\u30d1\u30b9\u30c8\u30d5\u30e5\u30fc\u30c1\u30e3\u30fc\u30d1\u30e9\u30c9\u30c3\u30af\u30b9","className":"PastFutureParadox","superClassName":"Base","sortKey":"\u306f\u3059\u3068\u3075\u3086\u3046\u3061\u3084\u3042\u306f\u3089\u3068\u3064\u304f\u3059","locale":"ja_jp"},{"id":"Pathfinder","name":"Pathfinder","className":"Pathfinder","superClassName":"DungeonsAndDragons","sortKey":"\u306f\u3059\u3075\u3042\u3044\u3093\u305f\u3042","locale":"ja_jp"},{"id":"Peekaboo","name":"\u30d4\u30fc\u30ab\u30fc\u30d6\u30fc","className":"Peekaboo","superClassName":"Base","sortKey":"\u3072\u3044\u304b\u3042\u3075\u3046","locale":"ja_jp"},{"id":"Pendragon","name":"\u30da\u30f3\u30c9\u30e9\u30b4\u30f3","className":"Pendragon","superClassName":"Base","sortKey":"\u3078\u3093\u3068\u3089\u3053\u3093","locale":"ja_jp"},{"id":"GehennaAn","name":"\u30b2\u30d8\u30ca\u30fb\u30a2\u30ca\u30b9\u30bf\u30b7\u30b9","className":"GehennaAn","superClassName":"Base","sortKey":"\u3051\u3078\u306a\u3042\u306a\u3059\u305f\u3057\u3059","locale":"ja_jp"},{"id":"PersonaO","name":"\u30da\u30eb\u30bd\u30caTRPG-O","className":"PersonaO","superClassName":"Base","sortKey":"\u3078\u308b\u305d\u306aTRPGO","locale":"ja_jp"},{"id":"PhantasmAdventure","name":"\u30d5\u30a1\u30f3\u30bf\u30ba\u30e0\u30fb\u30a2\u30c9\u30d9\u30f3\u30c1\u30e3\u30fc","className":"PhantasmAdventure","superClassName":"Base","sortKey":"\u3075\u3042\u3093\u305f\u3059\u3080\u3042\u3068\u3078\u3093\u3061\u3084\u3042","locale":"ja_jp"},{"id":"ArsMagica","name":"\u30a2\u30eb\u30b9\u30de\u30ae\u30ab","className":"ArsMagica","superClassName":"Base","sortKey":"\u3042\u308b\u3059\u307e\u304d\u304b","locale":"ja_jp"},{"id":"MagicaLogia","name":"\u30de\u30ae\u30ab\u30ed\u30ae\u30a2","className":"MagicaLogia","superClassName":"Base","sortKey":"\u307e\u304d\u304b\u308d\u304d\u3042","locale":"ja_jp"},{"id":"Cthulhu7th:ChineseTraditional","name":"\u514b\u8607\u9b6f\u795e\u8a71\u7b2c7\u7248","className":"Cthulhu7th_ChineseTraditional","superClassName":"Base","sortKey":"\u56fd\u969b\u5316:Chinese Traditional:\u514b\u8607\u9b6f\u795e\u8a71\u7b2c7\u7248","locale":"ja_jp"},{"id":"GeishaGirlwithKatana","name":"\u30b2\u30a4\u30b7\u30e3\u30fb\u30ac\u30fc\u30eb\u30fb\u30a6\u30a3\u30ba\u30fb\u30ab\u30bf\u30ca","className":"GeishaGirlwithKatana","superClassName":"Base","sortKey":"\u3051\u3044\u3057\u3084\u304b\u3042\u308b\u3046\u3044\u3059\u304b\u305f\u306a","locale":"ja_jp"},{"id":"Postman","name":"\u58ca\u308c\u305f\u4e16\u754c\u306e\u30dd\u30b9\u30c8\u30de\u30f3","className":"Postman","superClassName":"Base","sortKey":"\u3053\u308f\u308c\u305f\u305b\u304b\u3044\u306e\u307b\u3059\u3068\u307e\u3093","locale":"ja_jp"},{"id":"PulpCthulhu","name":"\u30d1\u30eb\u30d7\u30fb\u30af\u30c8\u30a5\u30eb\u30d5","className":"PulpCthulhu","superClassName":"Cthulhu7th","sortKey":"\u306f\u308b\u3075\u304f\u3068\u3046\u308b\u3075","locale":"ja_jp"},{"id":"AssaultEngine","name":"\u30a2\u30b5\u30eb\u30c8\u30a8\u30f3\u30b8\u30f3","className":"AssaultEngine","superClassName":"Base","sortKey":"\u3042\u3055\u308b\u3068\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"Cthulhu7th:Korean","name":"\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310","className":"Cthulhu7th_Korean","superClassName":"Base","sortKey":"\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310","locale":"ja_jp"},{"id":"CthulhuTech","name":"\u30af\u30c8\u30a5\u30eb\u30d5\u30c6\u30c3\u30af","className":"CthulhuTech","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3075\u3066\u3064\u304f","locale":"ja_jp"},{"id":"GoblinSlayer","name":"\u30b4\u30d6\u30ea\u30f3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG","className":"GoblinSlayer","superClassName":"Base","sortKey":"\u3053\u3075\u308a\u3093\u3059\u308c\u3044\u3084\u3042TRPG","locale":"ja_jp"},{"id":"GhostLive","name":"\u5b9f\u6cc1\u30b4\u30fc\u30b9\u30c8\u30e9\u30a4\u30f4","className":"GhostLive","superClassName":"Base","sortKey":"\u3057\u3064\u304d\u3088\u3046\u3053\u304a\u3059\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"Raisondetre","name":"\u53db\u9006\u30ec\u30be\u30f3\u30c7\u30fc\u30c8\u30eb","className":"Raisondetre","superClassName":"Base","sortKey":"\u306f\u3093\u304d\u3084\u304f\u308c\u305d\u3093\u3066\u3068\u304a\u308b","locale":"ja_jp"},{"id":"Avandner","name":"\u9ed2\u7d62\u306e\u30a2\u30f4\u30a1\u30f3\u30c9\u30ca\u30fc","className":"Avandner","superClassName":"Base","sortKey":"\u3053\u3064\u3051\u3093\u306e\u3042\u3046\u3042\u3093\u3068\u306a\u3042","locale":"ja_jp"},{"id":"Ayabito","name":"\u3042\u3084\u3073\u3068","className":"Ayabito","superClassName":"Base","sortKey":"\u3042\u3084\u3072\u3068","locale":"ja_jp"},{"id":"MagicaLogia:SimplifiedChinese","name":"\u9b54\u5bfc\u4e66\u5927\u6218","className":"MagicaLogia_SimplifiedChinese","superClassName":"MagicaLogia","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u9b54\u5bfc\u4e66\u5927\u6218","locale":"zh_hans"},{"id":"MagicaLogia:Korean","name":"\ub9c8\uae30\uce74\ub85c\uae30\uc544","className":"MagicaLogia_Korean","superClassName":"MagicaLogia","sortKey":"\u56fd\u969b\u5316:Korean:\ub9c8\uae30\uce74\ub85c\uae30\uc544","locale":"ko_kr"},{"id":"RecordOfSteam","name":"Record of Steam","className":"RecordOfSteam","superClassName":"Base","sortKey":"\u308c\u3053\u304a\u3068\u304a\u3075\u3059\u3061\u3044\u3080","locale":"ja_jp"},{"id":"MamonoScramble","name":"\u30de\u30e2\u30ce\u30b9\u30af\u30e9\u30f3\u30d6\u30eb","className":"MamonoScramble","superClassName":"Base","sortKey":"\u307e\u3082\u306e\u3059\u304f\u3089\u3093\u3075\u308b","locale":"ja_jp"},{"id":"MeikyuDays","name":"\u8ff7\u5bae\u30c7\u30a4\u30ba","className":"MeikyuDays","superClassName":"Base","sortKey":"\u3081\u3044\u304d\u3086\u3046\u3066\u3044\u3059","locale":"ja_jp"},{"id":"Bakenokawa","name":"\u30d0\u30b1\u30ce\u30ab\u30ef","className":"Bakenokawa","superClassName":"Base","sortKey":"\u306f\u3051\u306e\u304b\u308f","locale":"ja_jp"},{"id":"MeikyuKingdom","name":"\u8ff7\u5bae\u30ad\u30f3\u30b0\u30c0\u30e0","className":"MeikyuKingdom","superClassName":"Base","sortKey":"\u3081\u3044\u304d\u3086\u3046\u304d\u3093\u304f\u305f\u3080","locale":"ja_jp"},{"id":"BBN","name":"BBNTRPG","className":"BBN","superClassName":"Base","sortKey":"\u3072\u3044\u3072\u3044\u3048\u306cTRPG","locale":"ja_jp"},{"id":"GoldenSkyStories","name":"\u3086\u3046\u3084\u3051\u3053\u3084\u3051","className":"GoldenSkyStories","superClassName":"Base","sortKey":"\u3086\u3046\u3084\u3051\u3053\u3084\u3051","locale":"ja_jp"},{"id":"Cthulhu:ChineseTraditional","name":"\u514b\u8607\u9b6f\u795e\u8a71","className":"Cthulhu_ChineseTraditional","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Chinese Traditional:\u514b\u8607\u9b6f\u795e\u8a71","locale":"zh_hant"},{"id":"Gorilla","name":"\u30b4\u30ea\u30e9TRPG","className":"Gorilla","superClassName":"Base","sortKey":"\u3053\u308a\u3089TRPG","locale":"ja_jp"},{"id":"Cthulhu:English","name":"Call of Cthulhu","className":"Cthulhu_English","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:English:Call of Cthulhu","locale":"en_us"},{"id":"GranCrest","name":"\u30b0\u30e9\u30f3\u30af\u30ec\u30b9\u30c8RPG","className":"GranCrest","superClassName":"Base","sortKey":"\u304f\u3089\u3093\u304f\u308c\u3059\u3068RPG","locale":"ja_jp"},{"id":"Cthulhu:Korean","name":"\ud06c\ud234\ub8e8","className":"Cthulhu_Korean","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8","locale":"ko_kr"},{"id":"BadLife","name":"\u30d0\u30c3\u30c9\u30e9\u30a4\u30d5","className":"BadLife","superClassName":"Base","sortKey":"\u306f\u3064\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"Cthulhu:SimplifiedChinese","name":"\u514b\u82cf\u9c81\u7684\u547c\u5524 \u7b2c\u516d\u7248","className":"Cthulhu_SimplifiedChinese","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u514b\u82cf\u9c81\u7684\u547c\u5524 \u7b2c\u516d\u7248","locale":"zh_hans"},{"id":"CyberpunkRed","name":"\u30b5\u30a4\u30d0\u30fc\u30d1\u30f3\u30afRED","className":"CyberpunkRed","superClassName":"Base","sortKey":"\u3055\u3044\u306f\u3042\u306f\u3093\u304f\u308c\u3064\u3068","locale":"ja_jp"},{"id":"GundamSentinel","name":"\u30ac\u30f3\u30c0\u30e0\u30fb\u30bb\u30f3\u30c1\u30cd\u30ebRPG","className":"GundamSentinel","superClassName":"Base","sortKey":"\u304b\u3093\u305f\u3080\u305b\u3093\u3061\u306d\u308b","locale":"ja_jp"},{"id":"TherapieSein","name":"\u30bb\u30e9\u30d5\u30a3\u30b6\u30a4\u30f3","className":"TherapieSein","superClassName":"Base","sortKey":"\u305b\u3089\u3075\u3044\u3055\u3044\u3093","locale":"ja_jp"},{"id":"Revulture","name":"\u5149\u7815\u306e\u30ea\u30f4\u30a1\u30eb\u30c1\u30e3\u30fc","className":"Revulture","superClassName":"Base","sortKey":"\u3053\u3046\u3055\u3044\u306e\u308a\u3046\u3042\u308b\u3061\u3084\u3042","locale":"ja_jp"},{"id":"RecordOfLodossWar","name":"\u30ed\u30fc\u30c9\u30b9\u5cf6\u6226\u8a18RPG","className":"RecordOfLodossWar","superClassName":"Base","sortKey":"\u308d\u304a\u3068\u3059\u3068\u3046\u305b\u3093\u304dRPG","locale":"ja_jp"},{"id":"RokumonSekai2","name":"\u516d\u9580\u4e16\u754cRPG \u30bb\u30ab\u30f3\u30c9\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3","className":"RokumonSekai2","superClassName":"Base","sortKey":"\u308d\u304f\u3082\u3093\u305b\u304b\u3044RPG2","locale":"ja_jp"},{"id":"BarnaKronika","name":"\u30d0\u30eb\u30ca\u30fb\u30af\u30ed\u30cb\u30ab","className":"BarnaKronika","superClassName":"Base","sortKey":"\u306f\u308b\u306a\u304f\u308d\u306b\u304b","locale":"ja_jp"},{"id":"TheUnofficialHollowKnightRPG","name":"The Unofficial Hollow Knight RPG","className":"TheUnofficialHollowKnightRPG","superClassName":"Base","sortKey":"\u3057\u3042\u3093\u304a\u3075\u3044\u3057\u3084\u308b\u307b\u308d\u3046\u306a\u3044\u3068RPG","locale":"ja_jp"},{"id":"TokumeiTenkousei","name":"\u7279\u547d\u8ee2\u653b\u751f","className":"TokumeiTenkousei","superClassName":"Base","sortKey":"\u3068\u304f\u3081\u3044\u3066\u3093\u3053\u3046\u305b\u3044","locale":"ja_jp"},{"id":"RoleMaster","name":"\u30ed\u30fc\u30eb\u30de\u30b9\u30bf\u30fc","className":"RoleMaster","superClassName":"Base","sortKey":"\u308d\u304a\u308b\u307e\u3059\u305f\u3042","locale":"ja_jp"},{"id":"RuinBreakers","name":"\u30eb\u30fc\u30a4\u30f3\u30d6\u30ec\u30a4\u30ab\u30fc\u30ba","className":"RuinBreakers","superClassName":"Base","sortKey":"\u308b\u3046\u3044\u3093\u3075\u308c\u3044\u304b\u3042\u3059","locale":"ja_jp"},{"id":"Gundog","name":"\u30ac\u30f3\u30c9\u30c3\u30b0","className":"Gundog","superClassName":"Base","sortKey":"\u304b\u3093\u3068\u3064\u304f","locale":"ja_jp"},{"id":"TokyoGhostResearch","name":"\u6771\u4eac\u30b4\u30fc\u30b9\u30c8\u30ea\u30b5\u30fc\u30c1","className":"TokyoGhostResearch","superClassName":"Base","sortKey":"\u3068\u3046\u304d\u3088\u3046\u3053\u304a\u3059\u3068\u308a\u3055\u3042\u3061","locale":"ja_jp"},{"id":"GundogRevised","name":"\u30ac\u30f3\u30c9\u30c3\u30b0\u30fb\u30ea\u30f4\u30a1\u30a4\u30ba\u30c9","className":"GundogRevised","superClassName":"Base","sortKey":"\u304b\u3093\u3068\u3064\u304f\u308a\u3046\u3042\u3044\u3059\u3068","locale":"ja_jp"},{"id":"TokyoNova","name":"\u30c8\u30fc\u30ad\u30e7\u30fcN\u25ceVA","className":"TokyoNova","superClassName":"Base","sortKey":"\u3068\u304a\u304d\u3088\u304a\u306e\u306f","locale":"ja_jp"},{"id":"RuneQuest","name":"\u30eb\u30fc\u30f3\u30af\u30a8\u30b9\u30c8","className":"RuneQuest","superClassName":"Base","sortKey":"\u308b\u3046\u3093\u304f\u3048\u3059\u3068","locale":"ja_jp"},{"id":"RuneQuestRoleplayingInGlorantha","name":"\u30eb\u30fc\u30f3\u30af\u30a8\u30b9\u30c8\uff1a\u30ed\u30fc\u30eb\u30d7\u30ec\u30a4\u30f3\u30b0\u30fb\u30a4\u30f3\u30fb\u30b0\u30ed\u30fc\u30e9\u30f3\u30b5","className":"RuneQuestRoleplayingInGlorantha","superClassName":"Base","sortKey":"\u308b\u3046\u3093\u304f\u3048\u3059\u30684","locale":"ja_jp"},{"id":"Torg","name":"\u30c8\u30fc\u30b0","className":"Torg","superClassName":"Base","sortKey":"\u3068\u304a\u304f","locale":"ja_jp"},{"id":"GundogZero","name":"\u30ac\u30f3\u30c9\u30c3\u30b0\u30bc\u30ed","className":"GundogZero","superClassName":"Gundog","sortKey":"\u304b\u3093\u3068\u3064\u304f\u305b\u308d","locale":"ja_jp"},{"id":"GURPS","name":"\u30ac\u30fc\u30d7\u30b9","className":"GURPS","superClassName":"Base","sortKey":"\u304b\u3042\u3075\u3059","locale":"ja_jp"},{"id":"BattleTech","name":"\u30d0\u30c8\u30eb\u30c6\u30c3\u30af","className":"BattleTech","superClassName":"Base","sortKey":"\u306f\u3068\u308b\u3066\u3064\u304f","locale":"ja_jp"},{"id":"GurpsFW","name":"\u30ac\u30fc\u30d7\u30b9\u30d5\u30a3\u30eb\u30c8\u30a6\u30a3\u30ba","className":"GurpsFW","superClassName":"Base","sortKey":"\u304b\u3042\u3075\u3059\u3075\u3044\u308b\u3068\u3046\u3044\u3059","locale":"ja_jp"},{"id":"RyuTuber","name":"\u30ea\u30e5\u30fc\u30c1\u30e5\u30fc\u30d0\u30fc\u3068\u3061\u3044\u3055\u306a\u5947\u8de1","className":"RyuTuber","superClassName":"Base","sortKey":"\u308a\u3086\u3046\u3061\u3086\u3046\u306f\u3042\u3068\u3061\u3044\u3055\u306a\u304d\u305b\u304d","locale":"ja_jp"},{"id":"Ryutama","name":"\u308a\u3085\u3046\u305f\u307e","className":"Ryutama","superClassName":"Base","sortKey":"\u308a\u3086\u3046\u305f\u307e","locale":"ja_jp"},{"id":"DarkBlaze","name":"\u30c0\u30fc\u30af\u30d6\u30ec\u30a4\u30ba","className":"DarkBlaze","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u3075\u308c\u3044\u3059","locale":"ja_jp"},{"id":"SajinsenkiAGuS","name":"\u7802\u5875\u6226\u6a5f\u30a2\u30fc\u30ac\u30b9","className":"SajinsenkiAGuS","superClassName":"Base","sortKey":"\u3055\u3057\u3093\u305b\u3093\u304d\u3042\u3042\u304b\u3059","locale":"ja_jp"},{"id":"Torg1.5","name":"\u30c8\u30fc\u30b01.5\u7248","className":"Torg1_5","superClassName":"Torg","sortKey":"\u3068\u304a\u304f1.5","locale":"ja_jp"},{"id":"HarnMaster","name":"\u30cf\u30fc\u30f3\u30de\u30b9\u30bf\u30fc","className":"HarnMaster","superClassName":"Base","sortKey":"\u306f\u3042\u3093\u307e\u3059\u305f\u3042","locale":"ja_jp"},{"id":"TorgEternity","name":"\u30c8\u30fc\u30b0 \u30a8\u30bf\u30cb\u30c6\u30a3","className":"TorgEternity","superClassName":"Base","sortKey":"\u3068\u304a\u304f\u3048\u305f\u306b\u3066\u3044","locale":"ja_jp"},{"id":"SajinsenkiAGuS2E","name":"\u7802\u5875\u6226\u6a5f\u30a2\u30fc\u30ac\u30b92ndEdition","className":"SajinsenkiAGuS2E","superClassName":"SajinsenkiAGuS","sortKey":"\u3055\u3057\u3093\u305b\u3093\u304d\u3042\u3042\u304b\u30592","locale":"ja_jp"},{"id":"DarkDaysDrive","name":"\u30c0\u30fc\u30af\u30c7\u30a4\u30ba\u30c9\u30e9\u30a4\u30d6","className":"DarkDaysDrive","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u3066\u3044\u3059\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"DarkSouls","name":"\u30c0\u30fc\u30af\u30bd\u30a6\u30ebTRPG","className":"DarkSouls","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u305d\u3046\u308bTRPG","locale":"ja_jp"},{"id":"HatsuneMiku","name":"\u521d\u97f3\u30df\u30afTRPG \u30b3\u30b3\u30ed\u30c0\u30f3\u30b8\u30e7\u30f3","className":"HatsuneMiku","superClassName":"Base","sortKey":"\u306f\u3064\u306d\u307f\u304fTRPG\u3053\u3053\u308d\u305f\u3093\u3057\u3088\u3093","locale":"ja_jp"},{"id":"SamsaraBallad","name":"\u30b5\u30f3\u30b5\u30fc\u30e9\u30fb\u30d0\u30e9\u30c3\u30c9","className":"SamsaraBallad","superClassName":"Base","sortKey":"\u3055\u3093\u3055\u3042\u3089\u306f\u3089\u3064\u3068","locale":"ja_jp"},{"id":"Satasupe","name":"\u30b5\u30bf\u30b9\u30da","className":"Satasupe","superClassName":"Base","sortKey":"\u3055\u305f\u3059\u3078","locale":"ja_jp"},{"id":"DeadlineHeroes","name":"\u30c7\u30c3\u30c9\u30e9\u30a4\u30f3\u30d2\u30fc\u30ed\u30fc\u30baRPG","className":"DeadlineHeroes","superClassName":"Base","sortKey":"\u3066\u3064\u3068\u3089\u3044\u3093\u3072\u3044\u308d\u304a\u3059RPG","locale":"ja_jp"},{"id":"HeroScale","name":"\u82f1\u96c4\u306e\u5c3a\u5ea6","className":"HeroScale","superClassName":"Base","sortKey":"\u3048\u3044\u3086\u3046\u306e\u3057\u3084\u304f\u3068","locale":"ja_jp"},{"id":"MeikyuKingdomBasic","name":"\u8ff7\u5bae\u30ad\u30f3\u30b0\u30c0\u30e0 \u57fa\u672c\u30eb\u30fc\u30eb\u30d6\u30c3\u30af","className":"MeikyuKingdomBasic","superClassName":"MeikyuKingdom","sortKey":"\u3081\u3044\u304d\u3086\u3046\u304d\u3093\u304f\u305f\u3080\u304d\u307b\u3093\u308b\u3046\u308b\u3075\u3064\u304f","locale":"ja_jp"},{"id":"DemonParasite","name":"\u30c7\u30e2\u30f3\u30d1\u30e9\u30b5\u30a4\u30c8","className":"DemonParasite","superClassName":"Base","sortKey":"\u3066\u3082\u3093\u306f\u3089\u3055\u3044\u3068","locale":"ja_jp"},{"id":"BeastBindTrinity","name":"\u30d3\u30fc\u30b9\u30c8\u30d0\u30a4\u30f3\u30c9 \u30c8\u30ea\u30cb\u30c6\u30a3","className":"BeastBindTrinity","superClassName":"Base","sortKey":"\u3072\u3044\u3059\u3068\u306f\u3044\u3093\u3068\u3068\u308a\u306b\u3066\u3044","locale":"ja_jp"},{"id":"ToshiakiHolyGrailWar","name":"\u3068\u3057\u3042\u304d\u306e\u8056\u676f\u6226\u4e89TRPG","className":"ToshiakiHolyGrailWar","superClassName":"Base","sortKey":"\u3068\u3057\u3042\u304d\u306e\u305b\u3044\u306f\u3044\u305b\u3093\u305d\u3046TRPG","locale":"ja_jp"},{"id":"DiceBot","name":"DiceBot","className":"DiceBot","superClassName":"Base","sortKey":"*\u305f\u3044\u3059\u307b\u3064\u3068","locale":"ja_jp"},{"id":"TrailOfCthulhu","name":"\u30c8\u30ec\u30a4\u30eb\u30fb\u30aa\u30d6\u30fb\u30af\u30c8\u30a5\u30eb\u30fc","className":"TrailOfCthulhu","superClassName":"Base","sortKey":"\u3068\u308c\u3044\u308b\u304a\u3075\u304f\u3068\u3046\u308b\u3046","locale":"ja_jp"},{"id":"DemonSpike","name":"\u30c7\u30e2\u30f3\u30b9\u30d1\u30a4\u30af","className":"DemonSpike","superClassName":"Base","sortKey":"\u3066\u3082\u3093\u3059\u306f\u3044\u304f","locale":"ja_jp"},{"id":"TrinitySeven","name":"\u30c8\u30ea\u30cb\u30c6\u30a3\u30bb\u30d6\u30f3RPG","className":"TrinitySeven","superClassName":"Base","sortKey":"\u3068\u308a\u306b\u3066\u3044\u305b\u3075\u3093RPG","locale":"ja_jp"},{"id":"DesperateRun","name":"Desperate Run TRPG","className":"DesperateRun","superClassName":"Base","sortKey":"\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG","locale":"ja_jp"},{"id":"DetatokoSaga","name":"\u3067\u305f\u3068\u3053\u30b5\u30fc\u30ac","className":"DetatokoSaga","superClassName":"Base","sortKey":"\u3066\u305f\u3068\u3053\u3055\u3042\u304b","locale":"ja_jp"},{"id":"ScreamHighSchool","name":"\u30b9\u30af\u30ea\u30fc\u30e0\u30cf\u30a4\u30b9\u30af\u30fc\u30eb","className":"ScreamHighSchool","superClassName":"GardenOrder","sortKey":"\u3059\u304f\u308a\u3044\u3080\u306f\u3044\u3059\u304f\u3046\u308b","locale":"ja_jp"},{"id":"TunnelsAndTrolls","name":"\u30c8\u30f3\u30cd\u30eb\u30ba\uff06\u30c8\u30ed\u30fc\u30eb\u30ba","className":"TunnelsAndTrolls","superClassName":"Base","sortKey":"\u3068\u3093\u306d\u308b\u3059\u3042\u3093\u3068\u3068\u308d\u304a\u308b\u3059","locale":"ja_jp"},{"id":"BeginningIdol","name":"\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb","className":"BeginningIdol","superClassName":"Base","sortKey":"\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b","locale":"ja_jp"},{"id":"Sengensyou","name":"\u5343\u5e7b\u6284","className":"Sengensyou","superClassName":"Base","sortKey":"\u305b\u3093\u3051\u3093\u3057\u3088\u3046","locale":"ja_jp"},{"id":"SevenFortressMobius","name":"\u30bb\u30d6\u30f3\uff1d\u30d5\u30a9\u30fc\u30c8\u30ec\u30b9 \u30e1\u30d3\u30a6\u30b9","className":"SevenFortressMobius","superClassName":"NightWizard","sortKey":"\u305b\u3075\u3093\u3075\u304a\u304a\u3068\u308c\u3059\u3081\u3072\u3046\u3059","locale":"ja_jp"},{"id":"ShadowRun","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3","className":"ShadowRun","superClassName":"Base","sortKey":"\u3057\u3084\u3068\u3046\u3089\u3093","locale":"ja_jp"},{"id":"ShadowRun4","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3 4th Edition","className":"ShadowRun4","superClassName":"Base","sortKey":"\u3057\u3084\u3068\u3046\u3089\u30934","locale":"ja_jp"},{"id":"DetatokoSaga:Korean","name":"\ub370\ud0c0\ud1a0\ucf54 \uc0ac\uac00","className":"DetatokoSaga_Korean","superClassName":"DetatokoSaga","sortKey":"\u56fd\u969b\u5316:Korean:\ub370\ud0c0\ud1a0\ucf54 \uc0ac\uac00","locale":"ko_kr"},{"id":"DiceOfTheDead","name":"\u30c0\u30a4\u30b9\u30fb\u30aa\u30d6\u30fb\u30b6\u30fb\u30c7\u30c3\u30c9","className":"DiceOfTheDead","superClassName":"Base","sortKey":"\u305f\u3044\u3059\u304a\u3075\u3055\u3066\u3064\u3068","locale":"ja_jp"},{"id":"ShadowRun5","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3 5th Edition","className":"ShadowRun5","superClassName":"ShadowRun4","sortKey":"\u3057\u3084\u3068\u3046\u3089\u30935","locale":"ja_jp"},{"id":"DivineCharger","name":"\u795e\u8056\u8ab2\u91d1RPG\u30c7\u30a3\u30f4\u30a1\u30a4\u30f3\u30c1\u30e3\u30fc\u30b8\u30e3\u30fc","className":"DivineCharger","superClassName":"Base","sortKey":"\u3057\u3093\u305b\u3044\u304b\u304d\u3093RPG\u3066\u3044\u3046\u3042\u3044\u3093\u3061\u3084\u3042\u3057\u3084\u3042","locale":"ja_jp"},{"id":"TwilightGunsmoke","name":"\u30c8\u30ef\u30a4\u30e9\u30a4\u30c8\u30ac\u30f3\u30b9\u30e2\u30fc\u30af","className":"TwilightGunsmoke","superClassName":"Base","sortKey":"\u3068\u308f\u3044\u3089\u3044\u3068\u304b\u3093\u3059\u3082\u304a\u304f","locale":"ja_jp"},{"id":"SharedFantasia","name":"Shared\u2020Fantasia","className":"SharedFantasia","superClassName":"Base","sortKey":"\u3057\u3048\u3042\u3042\u3068\u3075\u3042\u3093\u305f\u3057\u3042","locale":"ja_jp"},{"id":"UnsungDuet","name":"\u30a2\u30f3\u30b5\u30f3\u30b0\u30fb\u30c7\u30e5\u30a8\u30c3\u30c8","className":"UnsungDuet","superClassName":"Base","sortKey":"\u3042\u3093\u3055\u3093\u304f\u3066\u3086\u3048\u3064\u3068","locale":"ja_jp"},{"id":"ShinMegamiTenseiKakuseihen","name":"\u771f\u30fb\u5973\u795e\u8ee2\u751fTRPG \u899a\u9192\u7bc7","className":"ShinMegamiTenseiKakuseihen","superClassName":"Base","sortKey":"\u3057\u3093\u3081\u304b\u307f\u3066\u3093\u305b\u3044TRPG\u304b\u304f\u305b\u3044\u3078\u3093","locale":"ja_jp"},{"id":"UnsungDuet:Korean","name":"\uc5b8\uc131 \ub4c0\uc5e3","className":"UnsungDuet_Korean","superClassName":"UnsungDuet","sortKey":"\u56fd\u969b\u5316:Korean:\uc5b8\uc131 \ub4c0\uc5e3","locale":"ko_kr"},{"id":"DoubleCross","name":"\u30c0\u30d6\u30eb\u30af\u30ed\u30b92nd,3rd","className":"DoubleCross","superClassName":"Base","sortKey":"\u305f\u3075\u308b\u304f\u308d\u30592","locale":"ja_jp"},{"id":"ShinkuuGakuen","name":"\u771f\u7a7a\u5b66\u5712","className":"ShinkuuGakuen","superClassName":"Base","sortKey":"\u3057\u3093\u304f\u3046\u304b\u304f\u3048\u3093","locale":"ja_jp"},{"id":"Utakaze","name":"\u30a6\u30bf\u30ab\u30bc","className":"Utakaze","superClassName":"Base","sortKey":"\u3046\u305f\u304b\u305b","locale":"ja_jp"},{"id":"Hieizan","name":"\u6bd4\u53e1\u5c71\u708e\u4e0a","className":"Hieizan","superClassName":"Base","sortKey":"\u3072\u3048\u3044\u3055\u3093\u3048\u3093\u3057\u3088\u3046","locale":"ja_jp"},{"id":"HouraiGakuen","name":"\u84ec\u83b1\u5b66\u5712\u306e\u5192\u967a!!","className":"HouraiGakuen","superClassName":"Base","sortKey":"\u307b\u3046\u3089\u3044\u304b\u304f\u3048\u3093\u306e\u307b\u3046\u3051\u3093","locale":"ja_jp"},{"id":"MetalHead","name":"\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9","className":"MetalHead","superClassName":"Base","sortKey":"\u3081\u305f\u308b\u3078\u3064\u3068","locale":"ja_jp"},{"id":"VampireTheMasquerade5th","name":"Vampire: The Masquerade 5th Edition","className":"VampireTheMasquerade5th","superClassName":"Base","sortKey":"\u3046\u3042\u3093\u306f\u3044\u3042\u3055\u307e\u3059\u304b\u308c\u3048\u30685","locale":"ja_jp"}]}')},5516:l=>{"use strict";l.exports=JSON.parse('{"ko_kr":{"success":"\uc131\uacf5","failure":"\uc2e4\ud328","fumble":"\ud38c\ube14","RTT":{"rtt_format":"\ub79c\ub364 \ud2b9\uae30 \uacb0\uc815\ud45c(%<category_dice>d,%<row_dice>d) \uff1e %<text>s","rttn_format":"\uc9c0\uc815\ud2b9\uae30(%<category_name>s)\ud45c(%<row_dice>d) \uff1e %<text>s"}},"zh_hant":{"success":"\u6210\u529f","failure":"\u5931\u6557"},"ja_jp":{"success":"\u6210\u529f","failure":"\u5931\u6557","critical":"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb","fumble":"\u30d5\u30a1\u30f3\u30d6\u30eb"},"zh_hans":{"success":"\u6210\u529f","failure":"\u5931\u8d25","fumble":"\u5927\u5931\u8d25","RTT":{"rtt_format":"\u968f\u673a\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s","rttn_format":"%<category_name>s\u9886\u57df\u968f\u673a\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"}},"en_us":{"success":"Success","failure":"Failure","critical":"Critical","fumble":"Fumble"}}')},3120:l=>{"use strict";l.exports=JSON.parse('{"i18nList":[{"baseClassName":"FinalFantasyXIV","locales":["ja_jp","en_us"]},{"baseClassName":"BeginningIdol","locales":["ko_kr","ja_jp"]},{"baseClassName":"UnsungDuet","locales":["ko_kr","ja_jp"]},{"baseClassName":"Emoklore","locales":["ja_jp"]},{"baseClassName":"Arianrhod","locales":["ko_kr","ja_jp"]},{"baseClassName":"StellarKnights","locales":["ko_kr","ja_jp"]},{"baseClassName":"NinjaSlayer2","locales":["ja_jp"]},{"baseClassName":"Nechronica","locales":["ko_kr","ja_jp"]},{"baseClassName":"FutariSousa","locales":["ko_kr","ja_jp"]},{"baseClassName":"MonotoneMuseum","locales":["ko_kr","ja_jp"]},{"baseClassName":"LogHorizon","locales":["ko_kr","ja_jp"]},{"baseClassName":"TensaiGunshiNiNaro","locales":["ja_jp"]},{"baseClassName":"SwordWorld2_0","locales":["ja_jp","zh_hans"]},{"baseClassName":"Amadeus","locales":["ko_kr","ja_jp"]},{"baseClassName":"KillDeathBusiness","locales":["ko_kr","ja_jp"]},{"baseClassName":"Insane","locales":["ko_kr","ja_jp"]},{"baseClassName":"Kamigakari","locales":["ko_kr","ja_jp"]},{"baseClassName":"SkynautsBouken","locales":["ja_jp"]},{"baseClassName":"KizunaBullet","locales":["ja_jp"]},{"baseClassName":"Dracurouge","locales":["ko_kr","ja_jp"]},{"baseClassName":"StratoShout","locales":["ko_kr","ja_jp"]},{"baseClassName":"DoubleCross","locales":["ko_kr","ja_jp"]},{"baseClassName":"DetatokoSaga","locales":["ko_kr","ja_jp"]},{"baseClassName":"SwordWorld","locales":["ja_jp","zh_hans"]},{"baseClassName":"CyberpunkRed","locales":["ja_jp"]},{"baseClassName":"Fiasco","locales":["ko_kr","ja_jp"]},{"baseClassName":"SwordWorld2_5","locales":["ja_jp","zh_hans"]},{"baseClassName":"Cthulhu","locales":["ko_kr","zh_hant","ja_jp","zh_hans","en_us"]},{"baseClassName":"MagicaLogia","locales":["ko_kr","ja_jp","zh_hans"]}]}')}}]);