(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5384],{9755:(J,Z,G)=>{G(5151),Opal.queue(function(u){var W,U,q,P,V,M,i,a,c,d,f,n,y,F,H,S=u.module,b=u.klass,h=u.const_set,t=u.truthy,v=u.def,R=u.rb_minus,p=u.not,w=u.send,L=u.assign_ivar,x=u.rb_le,T=u.hash2,k=[],e=u.nil;return W=k,U=H=[S(k[0],"BCDice")].concat(W),y=[S(H[0],"GameSystem")].concat(U),F=u.$r(y),q=y[0],P=F("Base"),V=y,f=[d=b(q,P,"KamitsubakiCityUnderConstructionNarrative")].concat(V),n=u.$r(f),d.$$prototype.randomizer=e,h(f[0],"ID","KamitsubakiCityUnderConstructionNarrative"),h(f[0],"NAME","\u795e\u693f\u5e02\u5efa\u8a2d\u4e2d\u3002NARRATIVE"),h(f[0],"SORT_KEY","\u304b\u307f\u3064\u306f\u304d\u3057\u3051\u3093\u305b\u3064\u3061\u3086\u3046\u306a\u3089\u3066\u3044\u3075"),h(f[0],"HELP_MESSAGE","\u30fb\u53ef\u7d44\uff08KA\uff09\n\u3000KA6 \u884c\u52d5\u5224\u5b9a\n\u3000KA8 \u6280\u80fd\u30ed\u30fc\u30eb\n\u3000KA10 \u7279\u6280\u30ed\u30fc\u30eb\n\u3000KA12 A\u30ed\u30fc\u30eb\n\n\u30fb\u88cf\u7d44\uff08RI\uff09\n\u3000RI6 \u884c\u52d5\u5224\u5b9a\n\u3000RI8 \u6280\u80fd\u30ed\u30fc\u30eb\n\u3000RI10 \u7279\u6280\u30ed\u30fc\u30eb\n\u3000RI12 A\u30ed\u30fc\u30eb\n\n\u30fb\u7fbd\u7d44\uff08HA\uff09\n\u3000HA6 \u884c\u52d5\u5224\u5b9a\n\u3000HA8 \u6280\u80fd\u30ed\u30fc\u30eb\n\u3000HA10 \u7279\u6280\u30ed\u30fc\u30eb\n\u3000HA12 A\u30ed\u30fc\u30eb\n\n\u30fb\u661f\u7d44\uff08SE\uff09\n\u3000SE6 \u884c\u52d5\u5224\u5b9a\n\u3000SE8 \u6280\u80fd\u30ed\u30fc\u30eb\n\u3000SE10 \u7279\u6280\u30ed\u30fc\u30eb\n\u3000SE12 A\u30ed\u30fc\u30eb\n\n\u30fb\u72d0\u7d44\uff08CO\uff09\n\u3000CO6 \u884c\u52d5\u5224\u5b9a\n\u3000CO8 \u6280\u80fd\u30ed\u30fc\u30eb\n\u3000CO10 \u7279\u6280\u30ed\u30fc\u30eb\n\u3000CO12 A\u30ed\u30fc\u30eb\n\n\u30fbGM\u7528\n\u3000GM6 \uff08\u6210\u5426\u5224\u5b9a\u306a\u3057\uff09\n\u3000GM8 \u6280\u80fd\u30ed\u30fc\u30eb\n\u3000GM10 \u7279\u6280\u30ed\u30fc\u30eb\n\u3000Q12 Q\u30ed\u30fc\u30eb\n\n\u30fb\u5b58\u5728\u8a3c\u660e EXI<=x\n\u3000\u5b58\u5728\u8a3c\u660e\u306e\u5224\u5b9a\u3092\u884c\u3046\n\u3000x: \u5b58\u5728\u5024\n"),v(d,"$eval_game_system_specific_command",function(_){var i;return t(i=this.$roll_kumi(_))?i:this.$roll_existence(_)}),d.$private(),v(d,"$roll_kumi",function(_){var i=e;return i=n("TABLES")["$[]"](_),t(i)?i.$roll(this.randomizer):e}),M=f,a=[i=b(f[0],null,"KumiDice")].concat(M),c=u.$r(a),i.$$prototype.items=e,v(i,"$initialize",function(m){return this.items=m.$freeze()}),h(a[0],"CRITICAL","M"),h(a[0],"FUMBLE","Q"),v(i,"$roll",function(m){var r,K,s=this,o=e,$=e,D=e;return o=m.$roll_once(s.items.$length()),$=s.items["$[]"](R(o,1)),r=$["$=="](c("FUMBLE")),K=$["$=="](c("CRITICAL")),D=t(r)?"\u30d5\u30a1\u30f3\u30d6\u30eb":t(K)?"\u30de\u30b8\u30c3\u30af":p($["$empty?"]())?"\u6210\u529f":"\u5931\u6557",w(c("Result").$new(),"tap",[],function Q(A){var C,z,g=null==Q.$$s?this:Q.$$s;return null==g.items&&(g.items=e),null==A&&(A=e),A["$critical="](K),A["$fumble="](r),A["$condition="](t(z=$["$empty?"]()["$!"]())?A["$fumble?"]()["$!"]():z),C=[["(D"+g.items.$length()+")",o,t($["$empty?"]())?e:$,D].$compact().$join(" \uff1e ")],w(A,"text=",C),C[C.length-1]},{$$s:s})}),function(E,_,M){var i=b(E,null,"KumiD6"),a=[i].concat(M),c=u.$r(a);v(i,"$initialize",L("success_symbol")),h(a[0],"TABLE",["\u88cf","\u7fbd","\u661f","\u72d0","\u53ef","Q"].$freeze()),v(i,"$roll",function(l){var s=e,o=e;return s=l.$roll_once(6),o=c("TABLE")["$[]"](R(s,1)),w(c("Result").$new(),"tap",[],function $(r){var K,D=null==$.$$s?this:$.$$s,Q=e;return null==D.success_symbol&&(D.success_symbol=e),null==r&&(r=e),t(D.success_symbol["$nil?"]())||(r["$fumble="](o["$=="]("Q")),r["$condition="](o["$=="](D.success_symbol))),Q=t(r["$fumble?"]())?"\u30d5\u30a1\u30f3\u30d6\u30eb":t(r["$success?"]())?"\u6210\u529f":t(r["$failure?"]())?"\u5931\u6557":e,K=[["(D6)",s,o,Q].$compact().$join(" \uff1e ")],w(r,"text=",K),K[K.length-1]},{$$s:this})})}(f[0],0,f),function(E,_,M){var i=b(E,null,"QDice"),a=[i].concat(M),c=u.$r(a);i.$$prototype.items=e,v(i,"$initialize",function(m){return this.items=m.$freeze()}),h(a[0],"CRITICAL","M"),v(i,"$roll",function(m){var r,s=this,o=e,$=e,K=e;return o=m.$roll_once(s.items.$length()),$=s.items["$[]"](R(o,1)),r=$["$=="](c("CRITICAL")),K=t(r)?"\u30de\u30b8\u30c3\u30af":p($["$empty?"]())?"\u6210\u529f":"\u5931\u6557",w(c("Result").$new(),"tap",[],function D(Q){var A,C=null==D.$$s?this:D.$$s;return null==C.items&&(C.items=e),null==Q&&(Q=e),Q["$critical="](r),Q["$condition="]($["$empty?"]()["$!"]()),A=[["(D"+C.items.$length()+")",o.$to_s(),t($["$empty?"]())?e:$,K].$compact().$join(" \uff1e ")],w(Q,"text=",A),A[A.length-1]},{$$s:s})})}(f[0],0,f),v(d,"$roll_existence",function(_){var i=e,a=e,c=e;return i=/^EXI<=(\d+)$/.$match(_),t(i)?(a=i["$[]"](1).$to_i(),c=this.randomizer.$roll_once(20),w(n("Result").$new(),"tap",[],function(l){var m,s,o,$=e;return null==l&&(l=e),l["$critical="](c["$=="](1)),l["$fumble="](c["$=="](20)),l["$condition="](t(s=t(o=x(c,a))?l["$fumble?"]()["$!"]():o)?s:l["$critical?"]()),$=t(l["$critical?"]())?"M \uff1e \u30de\u30b8\u30c3\u30af":t(l["$fumble?"]())?"Q \uff1e \u30d5\u30a1\u30f3\u30d6\u30eb":t(l["$success?"]())?"\u6210\u529f":"\u5931\u6557",m=[["(D20<="+a+")",c,$].$join(" \uff1e ")],w(l,"text=",m),m[m.length-1]})):e}),h(f[0],"TABLES",T(["KA6","KA8","KA10","KA12","RI6","RI8","RI10","RI12","HA6","HA8","HA10","HA12","SE6","SE8","SE10","SE12","CO6","CO8","CO10","CO12","GM6","GM8","GM10","Q12"],{KA6:n("KumiD6").$new("\u53ef"),KA8:n("KumiDice").$new(["Q","","","","\u53ef","\u53ef","\u53ef","M"]),KA10:n("KumiDice").$new(["Q","","","\u53ef","\u53ef","\u53ef","\u53ef","\u53ef","M","M"]),KA12:n("KumiDice").$new(["Q","","","\u53ef","\u53ef","\u53ef","\u53ef","\u53ef","\u53ef","\u53ef","M","M"]),RI6:n("KumiD6").$new("\u88cf"),RI8:n("KumiDice").$new(["Q","","","","\u88cf","\u88cf","\u88cf","M"]),RI10:n("KumiDice").$new(["Q","","","\u88cf","\u88cf","\u88cf","\u88cf","\u88cf","M","M"]),RI12:n("KumiDice").$new(["M","M","\u88cf","\u88cf","\u88cf","\u88cf","\u88cf","\u88cf","\u88cf","","","Q"]),HA6:n("KumiD6").$new("\u7fbd"),HA8:n("KumiDice").$new(["Q","","","","\u7fbd","\u7fbd","\u7fbd","M"]),HA10:n("KumiDice").$new(["Q","","","\u7fbd","\u7fbd","\u7fbd","\u7fbd","\u7fbd","M","M"]),HA12:n("KumiDice").$new(["Q","Q","\u7fbd","\u7fbd","\u7fbd","","","","M","M","M","M"]),SE6:n("KumiD6").$new("\u661f"),SE8:n("KumiDice").$new(["Q","","","","\u661f","\u661f","\u661f","M"]),SE10:n("KumiDice").$new(["Q","","","\u661f","\u661f","\u661f","\u661f","\u661f","M","M"]),SE12:n("KumiDice").$new(["\u661f","","\u661f","\u661f","M","Q","M","\u661f","\u661f","\u661f","","\u661f"]),CO6:n("KumiD6").$new("\u72d0"),CO8:n("KumiDice").$new(["Q","","","","\u72d0","\u72d0","\u72d0","M"]),CO10:n("KumiDice").$new(["Q","","","\u72d0","\u72d0","\u72d0","\u72d0","\u72d0","M","M"]),CO12:n("KumiDice").$new(["Q","","","\u72d0\u72d0\u72d0","\u72d0\u72d0","\u72d0","\u72d0\u72d0\u72d0","\u72d0\u72d0","\u72d0","\u72d0","M","M"]),GM6:n("KumiD6").$new(e),GM8:n("KumiDice").$new(["Q","","","","W","W","W","M"]),GM10:n("KumiDice").$new(["Q","","","W","W","W","W","W","M","M"]),Q12:n("QDice").$new(["","","","Q","Q","Q","Q","Q","Q","Q","M","M"])}).$freeze()),d.$register_prefix("EXI",n("TABLES").$keys())})}}]);