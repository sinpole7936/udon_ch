(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[3411],{5934:(Z,x,p)=>{p(5151),Opal.queue(function(u){var w,Y,J,D,s,l,b,z,X,L=u.module,y=u.klass,o=u.const_set,_=u.truthy,m=u.to_ary,U=u.rb_lt,I=u.rb_gt,d=u.rb_ge,F=u.rb_plus,N=u.def,V=u.eqeq,h=u.rb_minus,S=u.rb_times,q=u.rb_divide,B=u.send,v=[],n=u.nil;return w=v,Y=X=[L(v[0],"BCDice")].concat(w),b=[L(X[0],"GameSystem")].concat(Y),z=u.$r(b),J=b,s=[D=y(b[0],z("Base"),"VampireTheMasquerade5th")].concat(J),l=u.$r(s),D.$$prototype.randomizer=n,o(s[0],"ID","VampireTheMasquerade5th"),o(s[0],"NAME","Vampire: The Masquerade 5th Edition"),o(s[0],"SORT_KEY","\u3046\u3042\u3093\u306f\u3044\u3042\u3055\u307e\u3059\u304b\u308c\u3048\u30685"),o(s[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nVMFx+x \u307e\u305f\u306f nVMIxHx)\n  VMF\u30b3\u30de\u30f3\u30c9\u306fHunger\u30c0\u30a4\u30b9\u3068\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u3092\u500b\u5225\u306b\u6307\u5b9a\u3059\u308b\u3002\n  VMI\u30b3\u30de\u30f3\u30c9\u306fHunger\u30c0\u30a4\u30b9\u3092\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u306e\u5185\u6570\u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u3002\n\n    \u4f8b\uff1a\u96e3\u6613\u5ea62\u30019\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u3067Hunger\u30c0\u30a4\u30b93\u500b\u306e\u5834\u5408\u3001\u305d\u308c\u305e\u308c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3068\u306a\u308b\u3002\n    2VMF6+3\n    2VMI9H3\n\n  \u96e3\u6613\u5ea6\u6307\u5b9a\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u6210\u529f\u3068\u5931\u6557\u3001Critical\u51e6\u7406\u3001Critical Win\u3001Total Failure\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n             \uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Messy Critical\u3068Bestial Failure\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n  \u4f8b) (\u96e3\u6613\u5ea6)VMF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)VMF(\u901a\u5e38\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)VMI(\u901a\u5e38\u30c0\u30a4\u30b9)H(Hunger\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)VMI(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea6\u7701\u7565\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u5931\u6557\u3001Critical\u51e6\u7406\u3001Total Failure\u3001\uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Bestial Failure\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n              \u5224\u5b9a\u6210\u529f\u3001Messy Critical\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n              Critical Win\u3001\uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Bestial Failure\u3001Messy Critical\u306e\u30d2\u30f3\u30c8\u3092\u51fa\u529b\n  \u4f8b) VMF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      VMF(\u901a\u5e38\u30c0\u30a4\u30b9)\n      VMI(\u901a\u5e38\u30c0\u30a4\u30b9)H(Hunger\u30c0\u30a4\u30b9)\n      VMI(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea60\u6307\u5b9a\uff1aCritical\u51e6\u7406\u3068\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3092\u884c\u3044\u3001\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n  \u4f8b) 0VMF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      0VMF(\u901a\u5e38\u30c0\u30a4\u30b9)\n      0VMI(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      0VMI(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n"),o(s[0],"DIFFICULTY_INDEX",1),o(s[0],"DICE_POOL_HUNGER_DICE_NO_INCLUDED_INDEX",5),o(s[0],"HUNGER_DICE_NO_INCLUDED_INDEX",7),o(s[0],"COMMAND_HUNGER_DICE_INCLUDED_INDEX",9),o(s[0],"DICE_POOL_HUNGER_DICE_INCLUDED_INDEX",10),o(s[0],"HUNGER_DICE_INCLUDED_INDEX",12),o(s[0],"NOT_CHECK_SUCCESS",-1),D.$register_prefix("\\d*(VMF|(VMI\\d*(H\\d?)?))"),N(D,"$eval_game_system_specific_command",function(e){var i,r,$=this,c=n,t=n,a=n,M=n,E=n,f=n,C=n,G=n,T=n,H=n,R=n,k=n;return c=/^(\d+)?(((VMF)(\d+)(\+(\d+))?)|((VMI)(\d+)(H(\d+))?))$/.$match(e),_(c)?(r=$.$get_dice_pools(c),a=null==(i=m(r))[1]?n:i[1],_(U(t=null==i[0]?n:i[0],0))?"\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb0\u306e\u3068\u304d\u306bHunger\u30c0\u30a4\u30b9\u306f\u6307\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002":_(I(a,5))?"Hunger\u30c0\u30a4\u30b9\u6307\u5b9a\u306f5\u30c0\u30a4\u30b9\u304c\u6700\u5927\u3067\u3059\u3002":(r=$.$make_dice_roll(t),M=null==(i=m(r))[0]?n:i[0],E=null==i[1]?n:i[1],f=null==i[2]?n:i[2],C="("+t+"D10",_(d(a,0))?(r=$.$make_dice_roll(a),G=null==(i=m(r))[0]?n:i[0],T=null==i[1]?n:i[1],R=null==i[3]?n:i[3],f=F(f,H=null==i[2]?n:i[2]),E=F(E,T),C=C+"+"+a+"D10) \uff1e ["+M+"]+["+G+"] "):(H=0,R=0,C=C+") \uff1e ["+M+"] "),E=F(E,$.$get_critical_success(f)),k=_(c["$[]"](l("DIFFICULTY_INDEX")))?c["$[]"](l("DIFFICULTY_INDEX")).$to_i():l("NOT_CHECK_SUCCESS"),$.$get_roll_result(C,E,f,H,R,k))):""}),D.$private(),N(D,"$get_dice_pools",function(e){var i,r=n,$=n,c=n;return i=e["$[]"](l("COMMAND_HUNGER_DICE_INCLUDED_INDEX")),_(i)&&V(i,"VMI")?(r=_(e["$[]"](l("HUNGER_DICE_INCLUDED_INDEX"))["$nil?"]())?-1:e["$[]"](l("HUNGER_DICE_INCLUDED_INDEX")).$to_i(),$=e["$[]"](l("DICE_POOL_HUNGER_DICE_INCLUDED_INDEX")).$to_i(),c=h($,_(U(r,0))?0:r),_(I($,0))&&_(d(r,$))&&(c=0,r=$)):(r=_(e["$[]"](l("HUNGER_DICE_NO_INCLUDED_INDEX"))["$nil?"]())?-1:e["$[]"](l("HUNGER_DICE_NO_INCLUDED_INDEX")).$to_i(),c=e["$[]"](l("DICE_POOL_HUNGER_DICE_NO_INCLUDED_INDEX")).$to_i()),[c,r]}),N(D,"$get_roll_result",function(e,i,r,$,c,t){var a;return e=e+" \u6210\u529f\u6570="+i,a=d(r,2),_(I(t,0))?(e=e+" \u96e3\u6613\u5ea6="+t,_(d(i,t))?(e=e+" \u5dee\u5206="+h(i,t),_(I($,0))&&_(a)?l("Result").$critical(e+"\uff1a\u5224\u5b9a\u6210\u529f! [Messy Critical]"):_(a)?l("Result").$critical(e+"\uff1a\u5224\u5b9a\u6210\u529f! [Critical Win]"):l("Result").$success(e+"\uff1a\u5224\u5b9a\u6210\u529f!")):_(I(c,0))?l("Result").$fumble(e+"\uff1a\u5224\u5b9a\u5931\u6557! [Bestial Failure]"):V(i,0)?l("Result").$fumble(e+"\uff1a\u5224\u5b9a\u5931\u6557! [Total Failure]"):l("Result").$failure(e+"\uff1a\u5224\u5b9a\u5931\u6557!")):_(U(t,0))?V(i,0)?_(I(c,0))?l("Result").$fumble(e+"\uff1a\u5224\u5b9a\u5931\u6557! [Bestial Failure]"):l("Result").$fumble(e+"\uff1a\u5224\u5b9a\u5931\u6557! [Total Failure]"):(_(I(c,0))&&(e+="\n\u3000\u5224\u5b9a\u5931\u6557\u306a\u3089 [Bestial Failure]"),_(I($,0))&&_(a)?e+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089 [Messy Critical]":_(a)&&(e+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089 [Critical Win]"),e.$to_s()):e.$to_s()}),N(D,"$get_critical_success",function(e){return S(q(e,2).$to_i(),2)}),N(D,"$make_dice_roll",function(e){var r=n;return[(r=this.randomizer.$roll_barabara(e,10)).$join(","),B(r,"count",[],function(E){return null==E&&(E=n),d(E,6)}),r.$count(10),r.$count(1)]})})}}]);