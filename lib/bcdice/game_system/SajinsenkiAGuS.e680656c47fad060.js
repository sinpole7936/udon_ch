(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1604],{9623:(X,Z,q)=>{q(5151),Opal.queue(function(u){var I,F,W,d,R,v,E,G,Q,j,S=u.module,x=u.klass,k=u.const_set,s=u.truthy,y=u.def,p=u.rb_le,M=u.rb_plus,f=u.send,A=u.eqeq,N=u.thrower,z=u.hash2,D=u.rb_ge,g=u.rb_minus,T=u.rb_times,L=[],n=u.nil,C=u.$$$;return I=L,F=j=[S(L[0],"BCDice")].concat(I),G=[S(j[0],"GameSystem")].concat(F),Q=u.$r(G),W=G,R=[d=x(G[0],Q("Base"),"SajinsenkiAGuS")].concat(W),v=u.$r(R),(E=d.$$prototype).round_type=E.randomizer=n,k(R[0],"ID","SajinsenkiAGuS"),k(R[0],"NAME","\u7802\u5875\u6226\u6a5f\u30a2\u30fc\u30ac\u30b9"),k(R[0],"SORT_KEY","\u3055\u3057\u3093\u305b\u3093\u304d\u3042\u3042\u304b\u3059"),k(R[0],"HELP_MESSAGE","\u30fb\u4e00\u822c\u5224\u5b9aLv\uff08\u30c1\u30e3\u30f3\u30b9\u51fa\u76ee0\u2192\u5224\u5b9a0\uff09 nAG+x\n\u3000\u3000\u3000n\u306f\u7fd2\u5f97\u30ec\u30d9\u30eb\u3001Lv0\u306e\u5834\u5408n\u306e\u7701\u7565\u53ef\u80fd\u3002x\u306f\u5224\u5b9a\u5024\u4fee\u6b63\uff08\u6570\u5f0f\u306b\u3088\u308b\u4fee\u6b63\u53ef\uff09\u3001\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u30ec\u30d9\u30eb\u4fee\u6b630\n\u3000\u3000\u3000\u4f8b\uff09AG:\u7fd2\u5f97\u30ec\u30d9\u30eb0\u306e\u4e00\u822c\u6280\u80fd\u30011AG+1:\u7fd2\u5f97\u30ec\u30d9\u30eb1\u30fb\u5224\u5b9a\u5024\u4fee\u6b63+1\u306e\u6280\u80fd\u3001AG+2-1\uff1a\u7fd2\u5f97\u30ec\u30d9\u30eb0\u30fb\u5224\u5b9a\u5024\u4fee\u6b632-1\u306e\u6280\u80fd\u3001(1-1)AG\uff1a\u7fd2\u5f97\u30ec\u30d9\u30eb1\u30fb\u30ec\u30d9\u30eb\u4fee\u6b63-1\u306e\u6280\u80fd\n\n\u30fb\u9069\u6b63\u8ddd\u96e2\u3067\u306e\u547d\u4e2d\u5224\u5b9a\uff08\u30c1\u30e3\u30f3\u30b9\u51fa\u76ee0\u2192\u5224\u5b9a0\u3001HR\u7b97\u51fa\uff09OM+y@z\n\u3000\u3000\u3000y\u306f\u547d\u4e2d\u88dc\u6b63\u5024\uff08\u6570\u5f0f\u53ef\uff09\u3001z\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u7701\u7565\u6642\u306f0\n\u3000\u3000\u3000HR\u306e\u7b97\u51fa\u6642\u306b\u306f\u3001HR\u304c\u5927\u304d\u304f\u306a\u308b\u5834\u5408\u306b\u51fa\u76ee0\u309210\u306b\u8aad\u307f\u66ff\u3048\u307e\u3059\u3002\n\u3000\u3000\u3000\u4f8b\uff09OM+18-6@2:\u547d\u4e2d\u88dc\u6b63\u5024+18-6\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u50242\u3001\u9069\u6b63\u8ddd\u96e2\u306e\u5224\u5b9a\n\n\u30fb\u975e\u9069\u6b63\u8ddd\u96e2\u3067\u306e\u547d\u4e2d\u5224\u5b9a\uff08\u30c1\u30e3\u30f3\u30b9\u51fa\u76ee0\u2192\u5224\u5b9a0\u3001HR\u7b97\u51fa\uff09NM+y@z\n\u3000\u3000\u3000y\u306f\u547d\u4e2d\u88dc\u6b63\u5024\uff08\u6570\u5f0f\u53ef\uff09\u3001z\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u7701\u7565\u6642\u306f0\n\u3000\u3000\u3000HR\u306e\u7b97\u51fa\u6642\u306b\u306f\u3001HR\u304c\u5927\u304d\u304f\u306a\u308b\u5834\u5408\u306b\u51fa\u76ee0\u309210\u306b\u8aad\u307f\u66ff\u3048\u307e\u3059\u3002\n\u3000\u3000\u3000\u4f8b\uff09NM+4-3:\u547d\u4e2d\u88dc\u6b63\u5024+4-3\u3067\u975e\u9069\u6b63\u8ddd\u96e2\u306e\u5224\u5b9a\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u8868 CR\n\n\u203b\u901a\u5e38\u306e1D10\u306a\u3069\u306e10\u9762\u30c0\u30a4\u30b9\u306b\u304a\u3044\u3066\u51fa\u76ee10\u306e\u8aad\u307f\u66ff\u3048\u306f\u3057\u307e\u305b\u3093\u3002\u30b3\u30de\u30f3\u30c9\u306e\u307f\u3067\u3059\u3002\n\n"),d.$register_prefix("-?\\d*AG","OM","NM","CR"),y(d,"$eval_game_system_specific_command",function(a){var $,e,c=this;return s($=s(e=c.$roll_ippan(a))?e:c.$roll_hit_check(a))?$:c.$roll_tables(a,v("TABLES"))}),d.$private(),y(d,"$roll_ippan",function(a){try{N("eval_return");var e=n,l=n,o=n,m=n,h=n,_=n,b=n,t=n;return e=/^(-?\d+)?AG((?:[-+]\d+)*)$/.$match(a),s(e)?(l=e["$[]"](1).$to_i(),o=s(m=v("Arithmetic").$eval(e["$[]"](2),this.round_type))?m:0,h=s(p(l,0))?M(7,o):M(M(10,l),o),_=f(this.randomizer.$roll_barabara(2,10),"map",[],function(i){return null==i&&(i=n),A(i,10)?0:i}),b=_.$sum(),t=M(1,f(_,"count",[],function(i){return null==i&&(i=n),p(i,l)})),f(v("Result").$new(),"tap",[],function(i){var w;return null==i&&(i=n),i["$condition="](p(b,h)),i["$rands="](_),w=[["(2D10<="+h+")",b+"["+_.$join(",")+"]",s(_["$include?"](0))?"\u30c1\u30e3\u30f3\u30b9":n,s(i["$success?"]())?"\u6210\u529f(+"+t+")":"\u5931\u6557"].$compact().$join(" \uff1e ")],f(i,"text=",w),w[w.length-1]})):n}catch(r){if(r===u.t_eval_return)return r.$v;throw r}}),y(d,"$roll_hit_check",function(a){var c=this,e=n;return e=C(v("Command"),"Parser").$new("OM","NM",z(["round_type"],{round_type:c.round_type})).$enable_critical().$parse(a),s(e)?A(e.$command(),"OM")?c.$roll_om(e):A(e.$command(),"NM")?c.$roll_nm(e):n:n}),y(d,"$roll_om",function(a){var $,e,l,m,h,_,o=n;return $=a.$modify_number(),e=s(l=a.$critical())?l:0,o=f(this.randomizer.$roll_barabara(2,10),"map",[],function(t){return null==t&&(t=n),A(t,10)?0:t}).$sort().$reverse(),m=o.$sum(),h=f(o,"count",[],function(t){return null==t&&(t=n),p(t,e)}),_=this.$calc_hr($,o),f(v("Result").$new(),"tap",[],function(t){var r;return null==t&&(t=n),t["$condition="](p(m,$)),t["$rands="](o),t["$critical="](D(h,1)),r=[["(2D10<="+$+")",m+"["+o.$join(",")+"]",s(o["$include?"](0))?"\u30c1\u30e3\u30f3\u30b9":n,s(t["$success?"]())?"\u6210\u529f\uff08HR="+_+"\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"+h+"\uff09":"\u5931\u6557"].$compact().$join(" \uff1e ")],f(t,"text=",r),r[r.length-1]})}),y(d,"$roll_nm",function(a){var $,e,l,h,_,b,o=n,m=n;return $=a.$modify_number(),e=s(l=a.$critical())?l:0,o=f(this.randomizer.$roll_barabara(3,10),"map",[],function(r){return null==r&&(r=n),A(r,10)?0:r}).$sort().$reverse(),m=o.$take(2),h=m.$sum(),_=f(m,"count",[],function(r){return null==r&&(r=n),p(r,e)}),b=this.$calc_hr($,m),f(v("Result").$new(),"tap",[],function(r){var i;return null==r&&(r=n),r["$condition="](p(h,$)),r["$rands="](o),r["$critical="](D(_,1)),i=[["(3D10<="+$+")",h+"["+o["$[]"](0)+","+o["$[]"](1)+"&"+o["$[]"](2)+"]",s(m["$include?"](0))?"\u30c1\u30e3\u30f3\u30b9":n,s(r["$success?"]())?"\u6210\u529f\uff08HR="+b+"\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"+_+"\uff09":"\u5931\u6557"].$compact().$join(" \uff1e ")],f(r,"text=",i),i[i.length-1]})}),y(d,"$calc_hr",function(a,c){var $;return $=c.$sum(),[g(a,$).$abs(),g(g(a,$),T(c.$count(0),10)).$abs()].$max()}),k(R[0],"TABLES",z(["CR"],{CR:C(v("DiceTable"),"Table").$new("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u8868","1D10",["1\uff1a\u300c\u5c0f\u7834\u300d\u30c0\u30e1\u30fc\u30b8+\uff3b5\uff3d\u3002\u8010\u4e45\u5024-\uff3b1\uff3d","2\uff1a\u300c\u5c0f\u7834\u300d\u30c0\u30e1\u30fc\u30b8+\uff3b5\uff3d\u3002\u8010\u4e45\u5024-\uff3b1\uff3d","3\uff1a\u300c\u5c0f\u7834\u300d\u30c0\u30e1\u30fc\u30b8+\uff3b5\uff3d\u3002\u8010\u4e45\u5024-\uff3b1\uff3d","4\uff1a\u300c\u5c0f\u7834\u300d\u30c0\u30e1\u30fc\u30b8+\uff3b5\uff3d\u3002\u8010\u4e45\u5024-\uff3b1\uff3d","5\uff1a\u300c\u5175\u88c5\u300d\u640d\u58ca\u3092\u53d7\u3051\u308b\u3054\u3068\u306b\uff3b1D10\uff3d\u3092\u632f\u308a\u3001\u51fa\u76ee\u306b\u5fdc\u3058\u305f\u90e8\u4f4d\u306e\u5175\u88c5\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u300a\u8131\u843d\u300b","6\uff1a\u300c\u4e0a\u4f53\u300d\u653b\u6483\u7cfb\u80fd\u529b\uff3b\u767d\u5175/ \u706b\u5668/ \u7d22\u6575\uff3d\u306f\u5404\uff3b- \u640d\u58caLv\uff3d","7\uff1a\u300c\u811a\u90e8\u300d\u884c\u52d5\u7cfb\u30fb\u9632\u5fa1\u7cfb\u80fd\u529b\uff3bIv \u5024\uff08\u30a4\u30cb\u30b7\u30a2\u5024\uff09/ \u6700\u5927MP/ \u56de\u907f\uff3d\u306f\u5404\uff3b- \u640d\u58caLv\uff3d","8\uff1a\u300c\u642d\u4e57\u8005\u300d\u642d\u4e57\u8005\u306e\u3008\u6700\u5927HP\u3009\u304a\u3088\u3073\u3008HP\u3009\u306f\uff3b-\uff084 \xd7\u640d\u58caLv\uff09\uff3d","9\uff1a\u300c\u642d\u4e57\u8005\u300d\u642d\u4e57\u8005\u306e\u3008\u6700\u5927HP\u3009\u304a\u3088\u3073\u3008HP\u3009\u306f\uff3b-\uff084 \xd7\u640d\u58caLv\uff09\uff3d","0\uff1a\u300c\u5c0f\u7834\u300d\u30c0\u30e1\u30fc\u30b8+\uff3b5\uff3d\u3002\u8010\u4e45\u5024-\uff3b1\uff3d"])}).$freeze())})}}]);