(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9994],{7949:(X,Z,B)=>{B(5151),Opal.queue(function(r){var N,F,W,$,o,w,D,v,Q,S,g=r.module,G=r.klass,m=r.const_set,b=r.def,y=r.hash2,u=r.truthy,M=r.rb_lt,P=r.eqeq,x=r.rb_plus,a=r.send,R=r.rb_divide,H=r.rb_ge,I=r.rb_gt,k=[],e=r.nil,K=r.$$$;return N=k,F=S=[g(k[0],"BCDice")].concat(N),v=[g(S[0],"GameSystem")].concat(F),Q=r.$r(v),W=v,o=[$=G(v[0],Q("Base"),"DemonSpike")].concat(W),w=r.$r(o),(D=$.$$prototype).round_type=D.randomizer=e,m(o[0],"ID","DemonSpike"),m(o[0],"NAME","\u30c7\u30e2\u30f3\u30b9\u30d1\u30a4\u30af"),m(o[0],"SORT_KEY","\u3066\u3082\u3093\u3059\u306f\u3044\u304f"),m(o[0],"HELP_MESSAGE","\u30fb\u884c\u70ba\u5224\u5b9a xDS+y\n\u3000\u884c\u70ba\u5224\u5b9a\u3092\u884c\u3044\u3001\u9054\u6210\u5024\u3001\u6210\u5426\u3001\u6210\u529f\u5ea6\u3092\u51fa\u529b\u3059\u308b\u3002\n\u3000x: \u30c0\u30a4\u30b9\u6570\uff08\u7701\u7565\uff1a2\uff09\n\u3000y: \u80fd\u529b\u5024\u3084\u30b9\u30d1\u30a4\u30af\u80fd\u529b\u306b\u3088\u308b\u9054\u6210\u5024\u306e\u4fee\u6b63\uff08\u7701\u7565\u53ef\uff09\n"),$.$register_prefix("\\d*DS"),b($,"$eval_game_system_specific_command",function(c){return this.$roll_action(c)}),$.$private(),b($,"$roll_action",function(c){var f,C,h,i=this,t=e,l=e,_=e,d=e,j=e,z=e;if(t=K(w("Command"),"Parser").$new("DS",y(["round_type"],{round_type:i.round_type})).$enable_prefix_number().$restrict_cmp_op_to(e).$parse(c),!u(t)||(u(t.$prefix_number())||t["$prefix_number="](2),u(M(t.$prefix_number(),2))))return e;for(l=i.$roll_step(t.$prefix_number()),_=[l];P(l["$[]"]("dice_sum"),10);)l=i.$roll_step(t.$prefix_number()),_.$push(l);return f=_["$[]"](0)["$[]"]("dice_sum")["$=="](2),d=u(f)?0:x(a(_,"sum",[],function(n){return null==n&&(n=e),n["$[]"]("dice_sum")}),t.$modify_number()),C=R(d,10).$floor(),h=H(d,10),j=u(h)?"\u6210\u529f, \u6210\u529f\u5ea6"+C:u(f)?"\u81ea\u52d5\u7684\u5931\u6557":"\u5931\u6557",z=["("+t+")",a(_,"map",[],function(n){return null==n&&(n=e),n["$[]"]("dice_sum")+"["+n["$[]"]("dice_list").$join(",")+"]"}),d,j].$flatten(),a(w("Result").$new(),"tap",[],function(n){var p;return null==n&&(n=e),n["$condition="](h),n["$critical="](I(_.$length(),1)),n["$fumble="](f),p=[z.$join(" \uff1e ")],a(n,"text=",p),p[p.length-1]})}),b($,"$roll_step",function(c){var t,s=e;return s=this.randomizer.$roll_barabara(c,6).$sort().$reverse(),t=x(s["$[]"](0),s["$[]"](1)).$clamp(2,10),y(["dice_list","dice_sum"],{dice_list:s,dice_sum:t})})})}}]);