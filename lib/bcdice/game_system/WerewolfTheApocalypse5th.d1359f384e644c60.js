(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[321],{6356:(ee,_e,w)=>{w(5151),Opal.queue(function(i){var H,j,Z,s,c,o,L,J,T,U=i.module,y=i.klass,E=i.const_set,$=i.truthy,m=i.to_ary,b=i.rb_lt,C=i.rb_gt,A=i.rb_ge,X=i.rb_divide,g=i.rb_plus,f=i.def,F=i.eqeq,h=i.rb_minus,M=i.neqeq,B=i.rb_times,P=i.send,G=[],_=i.nil;return H=G,j=T=[U(G[0],"BCDice")].concat(H),L=[U(T[0],"GameSystem")].concat(j),J=i.$r(L),Z=L,c=[s=y(L[0],J("Base"),"WerewolfTheApocalypse5th")].concat(Z),o=i.$r(c),s.$$prototype.randomizer=_,E(c[0],"ID","WerewolfTheApocalypse5th"),E(c[0],"NAME","Werewolf: The Apocalypse 5th Edition"),E(c[0],"SORT_KEY","\u308f\u3042\u3046\u3075\u308b\u3057\u3042\u307b\u304b\u308a\u3075\u30595"),E(c[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nWAFx+x \u307e\u305f\u306f nWAIxRx)\n  WAF\u30b3\u30de\u30f3\u30c9\u306fRage\u30c0\u30a4\u30b9\u3068\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u3092\u500b\u5225\u306b\u6307\u5b9a\u3059\u308b\u3002\n  WAI\u30b3\u30de\u30f3\u30c9\u306fRage\u30c0\u30a4\u30b9\u3092\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u306e\u5185\u6570\u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u3002\n\n    \u4f8b\uff1a\u96e3\u6613\u5ea62\u30019\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u3067Rage\u30c0\u30a4\u30b93\u500b\u306e\u5834\u5408\u3001\u305d\u308c\u305e\u308c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3068\u306a\u308b\u3002\n    2WAF6+3\n    2WAI9R3\n\n  \u96e3\u6613\u5ea6\u6307\u5b9a\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u6210\u529f\u3068\u5931\u6557\u3001\uff08Rage\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Brutal outcome\u3001Critical\u51e6\u7406\u3001Total Failure\u3001Critical Win\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n  \u4f8b) (\u96e3\u6613\u5ea6)WAF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Rage\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)WAF(\u901a\u5e38\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)WAI(\u901a\u5e38\u30c0\u30a4\u30b9)R(Rage\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)WAI(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea6\u7701\u7565\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u5931\u6557\u3001\uff08Rage\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Brutal outcome\u3001Critical\u51e6\u7406\u3001Total Failure\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n              \u5224\u5b9a\u6210\u529f\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n              Critical Win\u306e\u30d2\u30f3\u30c8\u3092\u51fa\u529b\n  \u4f8b) WAF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Rage\u30c0\u30a4\u30b9)\n      WAF(\u901a\u5e38\u30c0\u30a4\u30b9)\n      WAI(\u901a\u5e38\u30c0\u30a4\u30b9)R(Rage\u30c0\u30a4\u30b9)\n      WAI(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea60\u6307\u5b9a\uff1aCritical\u51e6\u7406\u3068\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3092\u884c\u3044\u3001\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n  \u4f8b) 0WAF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Rage\u30c0\u30a4\u30b9)\n      0WAF(\u901a\u5e38\u30c0\u30a4\u30b9)\n      0WAI(\u901a\u5e38\u30c0\u30a4\u30b9)+(Rage\u30c0\u30a4\u30b9)\n      0WAI(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n"),E(c[0],"DIFFICULTY_INDEX",1),E(c[0],"DICE_POOL_RAGE_DICE_NO_INCLUDED_INDEX",5),E(c[0],"RAGE_DICE_NO_INCLUDED_INDEX",7),E(c[0],"COMMAND_RAGE_DICE_INCLUDED_INDEX",9),E(c[0],"DICE_POOL_RAGE_DICE_INCLUDED_INDEX",10),E(c[0],"RAGE_DICE_INCLUDED_INDEX",12),E(c[0],"NOT_CHECK_SUCCESS",-1),s.$register_prefix("\\d*(WAF|(WAI\\d*(R\\d?)?))"),f(s,"$eval_game_system_specific_command",function(n){var e,r,l=this,t=_,a=_,u=_,D=_,I=_,N=_,d=_,k=_,p=_,W=_,v=_,q=_;return t=/^(\d+)?(((WAF)(\d+)(\+(\d+))?)|((WAI)(\d+)(R(\d+))?))$/.$match(n),$(t)?(r=l.$get_dice_pools(t),u=null==(e=m(r))[1]?_:e[1],$(b(a=null==e[0]?_:e[0],0))?"\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb0\u306e\u3068\u304d\u306bRage\u30c0\u30a4\u30b9\u306f\u6307\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002":$(C(u,5))?"5\u3092\u8d85\u3048\u308bRage\u30c0\u30a4\u30b9\u6307\u5b9a\u306f\u3067\u304d\u307e\u305b\u3093\u3002":(r=l.$make_dice_roll(a),D=null==(e=m(r))[0]?_:e[0],I=null==e[1]?_:e[1],N=null==e[2]?_:e[2],d="("+a+"D10",$(A(u,0))?(r=l.$make_dice_roll(u),k=null==(e=m(r))[0]?_:e[0],p=null==e[1]?_:e[1],W=null==e[2]?_:e[2],v=X(null==e[3]?_:e[3],2).$floor(),N=g(N,W),I=g(I,p),d=d+"+"+u+"D10) \uff1e ["+D+"]+["+k+"] "):(W=0,v=0,d=d+") \uff1e ["+D+"] "),I=g(I,l.$get_critical_success(N)),q=$(t["$[]"](o("DIFFICULTY_INDEX")))?t["$[]"](o("DIFFICULTY_INDEX")).$to_i():o("NOT_CHECK_SUCCESS"),l.$get_roll_result(d,I,N,W,v,q))):""}),s.$private(),f(s,"$get_dice_pools",function(n){var e,r=_,l=_,t=_;return e=n["$[]"](o("COMMAND_RAGE_DICE_INCLUDED_INDEX")),$(e)&&F(e,"WAI")?(r=$(n["$[]"](o("RAGE_DICE_INCLUDED_INDEX"))["$nil?"]())?-1:n["$[]"](o("RAGE_DICE_INCLUDED_INDEX")).$to_i(),l=n["$[]"](o("DICE_POOL_RAGE_DICE_INCLUDED_INDEX")).$to_i(),t=h(l,$(b(r,0))?0:r),$(C(l,0))&&$(A(r,l))&&(t=0,r=l)):(r=$(n["$[]"](o("RAGE_DICE_NO_INCLUDED_INDEX"))["$nil?"]())?-1:n["$[]"](o("RAGE_DICE_NO_INCLUDED_INDEX")).$to_i(),t=n["$[]"](o("DICE_POOL_RAGE_DICE_NO_INCLUDED_INDEX")).$to_i()),[t,r]}),f(s,"$get_roll_result",function(n,e,r,l,t,a){var u,D=_;return u=A(r,2),n=$(C(t,0))&&M(a,0)?n+" [Brutal outcome] \u81ea\u52d5\u5931\u6557\u3001\u307e\u305f\u306f \u6210\u529f\u6570="+(e=g(e,4)):n+" \u6210\u529f\u6570="+e,$(C(a,0))?(n=n+" \u96e3\u6613\u5ea6="+a,$(A(e,a))?(n=n+" \u5dee\u5206="+h(e,a),$(u)?(D=o("Result").$critical(n+"\uff1a\u5224\u5b9a\u6210\u529f! [Critical Win]"),$(C(t,0))?D.$text():D):(D=o("Result").$success(n+"\uff1a\u5224\u5b9a\u6210\u529f!"),$(C(t,0))?D.$text():D)):F(e,0)?o("Result").$fumble(n+"\uff1a\u5224\u5b9a\u5931\u6557! [Total Failure]"):o("Result").$failure(n+"\uff1a\u5224\u5b9a\u5931\u6557!")):$(b(a,0))?F(e,0)?o("Result").$fumble(n+"\uff1a\u5224\u5b9a\u5931\u6557! [Total Failure]"):($(u)&&(n+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089 [Critical Win]"),n.$to_s()):n.$to_s()}),f(s,"$get_critical_success",function(n){return B(X(n,2).$floor(),2)}),f(s,"$make_dice_roll",function(n){var r=_;return[(r=this.randomizer.$roll_barabara(n,10)).$join(","),P(r,"count",[],function(I){return null==I&&(I=_),A(I,6)}),r.$count(10),g(r.$count(1),r.$count(2))]})})}}]);