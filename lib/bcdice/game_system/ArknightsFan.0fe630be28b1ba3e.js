(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[855],{5826:(V,X,x)=>{x(5151),Opal.queue(function(_){var W,M,Q,f,N,q,p,K,R,B=_.module,G=_.klass,g=_.const_set,c=_.truthy,d=_.def,h=_.not,y=_.rb_le,T=_.rb_ge,b=_.eqeq,S=_.to_ary,D=_.rb_minus,E=_.rb_plus,z=_.rb_gt,L=_.send,k=_.neqeq,w=[],r=_.nil;return W=w,M=R=[B(w[0],"BCDice")].concat(W),p=[B(R[0],"GameSystem")].concat(M),K=_.$r(p),Q=p,N=[f=G(p[0],K("Base"),"ArknightsFan")].concat(Q),q=_.$r(N),f.$$prototype.randomizer=r,g(N[0],"ID","ArknightsFan"),g(N[0],"NAME","\u30a2\u30fc\u30af\u30ca\u30a4\u30c4TRPG by Dapto"),g(N[0],"SORT_KEY","\u3042\u3042\u304f\u306a\u3044\u3064TRPG\u306f\u3044\u305f\u3075\u3068"),g(N[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (nADm>=x)\n  nDm\u306e\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u3057\u3066\u3001x \u4ee5\u4e0b\u3067\u3042\u308c\u3070\u6210\u529f\u3002\n  \u51fa\u76ee\u304c91\u4ee5\u4e0a\u3067\u30a8\u30e9\u30fc\u3002\n  \u51fa\u76ee\u304c10\u4ee5\u4e0b\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3002\n\n\u25a0 \u5224\u5b9a (nABm>=x)\n  nBm\u306e\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u3057\u3066\u3001\n    x \u4ee5\u4e0b\u3067\u3042\u308c\u3070\u6210\u529f\u6570+1\u3002\n    \u51fa\u76ee\u304c91\u4ee5\u4e0a\u3067\u30a8\u30e9\u30fc\u3002\u6210\u529f\u6570+1\u3002\n    \u51fa\u76ee\u304c10\u4ee5\u4e0b\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3002\u6210\u529f\u6570-1\u3002\n  \u4e0a\u8a18\u306b\u3088\u308b\u6210\u529f\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3002\n\n\u25a0 \u5224\u5b9a (nABm>=x--\u5f79\u8077)\n  nBm\u306e\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u3057\u3066\u3001\n    \u51fa\u76ee\u304c x \u4ee5\u4e0b\u3067\u3042\u308c\u3070\u6210\u529f\u6570+1\u3002\n    \u51fa\u76ee\u304c91\u4ee5\u4e0a\u3067\u30a8\u30e9\u30fc\u3002\u6210\u529f\u6570+1\u3002\n    \u51fa\u76ee\u304c10\u4ee5\u4e0b\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3002\u6210\u529f\u6570-1\u3002\n  \u4e0a\u8a18\u306b\u3088\u308b\u6210\u529f\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u305f\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u5f79\u8077\u306b\u3088\u308b\u6210\u529f\u6570\u5897\u52a0\u52b9\u679c\u3092\u9069\u5fdc\u3002\n    \u72d9\u6483\uff08SNIPER\uff09 \u6210\u529f\u65701\u4ee5\u4e0a\u306e\u3068\u304d\u3001\u6210\u529f\u6570+1\u3002\n"),f.$register_prefix("\\d*AD\\d*","\\d*AB\\d*","--ADDICTION","--WORSENING"),d(f,"$eval_game_system_specific_command",function(o){var n,$,e,i=this;return c(n=c($=c(e=i.$roll_ad(o))?e:i.$roll_ab(o))?$:i.$roll_addiction(o))?n:i.$roll_worsening(o)}),f.$private(),d(f,"$roll_ad",function(o){var n=r,$=r,e=r,t=r;return n=/^(\d*)AD(\d*)<=(\d+)$/.$match(o),c(n)?($=n["$[]"](1),e=n["$[]"](2),t=n["$[]"](3).$to_i(),$=h($["$empty?"]())?$.$to_i():1,e=h(e["$empty?"]())?e.$to_i():100,this.$roll_d(o,$,e,t)):r}),d(f,"$roll_ab",function(o){var n=r,$=r,e=r,t=r,s=r,l=r;return n=/^(\d*)AB(\d*)<=(\d+)(?:--([^\d\s]+)(0)?)?$/.$match(o),c(n)?($=n["$[]"](1),e=n["$[]"](2),t=n["$[]"](3).$to_i(),s=n["$[]"](4),l=n["$[]"](5),$=h($["$empty?"]())?$.$to_i():1,e=h(e["$empty?"]())?e.$to_i():100,c(l)||c(s["$nil?"]())?this.$roll_b(o,$,e,t):this.$roll_b_withtype(o,$,e,t,s)):r}),d(f,"$roll_d",function(o,i,n,$){var s,l,a,u,t=r;return s=(t=this.randomizer.$roll_barabara(i,n).$sort()).$sum(),l=y(s,$),a=c(y(s,10))?"Critical":c(T(s,91))?"Error":"Neutral",u=c(l)&&b(a,"Critical")?"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01":c(l)&&b(a,"Neutral")||c(l)&&b(a,"Error")?"\u6210\u529f":h(l)&&b(a,"Critical")||h(l)&&b(a,"Neutral")?"\u5931\u6557":h(l)&&b(a,"Error")?"\u30a8\u30e9\u30fc":r,b(i,1)?"("+o+") \uff1e "+t.$join(",")+" \uff1e "+u:"("+o+") \uff1e "+s+"["+t.$join(",")+"] \uff1e "+u}),d(f,"$roll_b",function(o,i,n,$){var e,t,a,u,A,I,l=r;return t=this.$process_b(i,n,$),l=null==(e=S(t))[0]?r:e[0],A=null==e[3]?r:e[3],I=D(E(a=null==e[1]?r:e[1],u=null==e[2]?r:e[2]),A),"("+o+") \uff1e ["+l.$join(",")+"] \uff1e "+a+"+"+u+"C-"+A+"E \uff1e \u6210\u529f\u6570"+I}),d(f,"$roll_b_withtype",function(o,i,n,$,e){var t,s,u,A,I,C,a=r,v=r;return s=this.$process_b(i,n,$),a=null==(t=S(s))[0]?r:t[0],I=null==t[3]?r:t[3],v=D(E(u=null==t[1]?r:t[1],A=null==t[2]?r:t[2]),I),C=b(e,"SNIPER")&&c(z(v,0))?1:0,v=E(v,C),"("+o+") \uff1e ["+a.$join(",")+"] \uff1e "+u+"+"+A+"C-"+I+"E+"+C+"("+e+") \uff1e \u6210\u529f\u6570"+v}),d(f,"$process_b",function(o,i,n){var e,t=r,s=r,l=r;return e=this.randomizer.$roll_barabara(o,i).$sort(),t=0,s=0,l=0,L(e,"each",[],function(u){return null==u&&(u=r),c(y(u,n))&&(t=E(t,1)),c(y(u,10))&&(s=E(s,1)),c(T(u,91))?l=E(l,1):r}),[e,t,s,l]}),g(N[0],"ADDICTION_TABLE",["\u4e2d\u67a2\u795e\u7d4c\u969c\u5bb3","\u591a\u81d3\u5668\u4e0d\u5168","\u6025\u6027\u30b9\u30c8\u30ec\u30b9\u53cd\u5fdc"].$freeze()),d(f,"$roll_addiction",function(o){var n=r;return k(o,"--ADDICTION")?r:(n=this.randomizer.$roll_once(3),"--ADDICTION \uff1e "+q("ADDICTION_TABLE")["$[]"](D(n,1)))}),g(N[0],"WORSENING_TABLE",["\u672b\u68a2\u795e\u7d4c\u969c\u5bb3","\u5185\u81d3\u6a5f\u80fd\u4e0d\u5168","\u7cbe\u795e\u75c7\u72b6"].$freeze()),d(f,"$roll_worsening",function(o){var n=r;return k(o,"--WORSENING")?r:(n=this.randomizer.$roll_once(3),"--WORSENING \uff1e "+q("WORSENING_TABLE")["$[]"](D(n,1))+": "+E(this.randomizer.$roll_once(6),1)+" rounds")})})}}]);