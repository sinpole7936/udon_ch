(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2161],{8740:(F,J,x)=>{x(5151),Opal.queue(function(s){var R,I,Y,i,g,p,B,E,L,y,w=s.module,k=s.klass,b=s.const_set,_=s.truthy,a=s.def,S=s.hash2,A=s.send,C=s.rb_ge,v=s.rb_le,P=s.rb_minus,H=s.neqeq,D=s.eqeq,q=[],t=s.nil,j=s.$$$;return R=q,I=y=[w(q[0],"BCDice")].concat(R),E=[w(y[0],"GameSystem")].concat(I),L=s.$r(E),Y=E,g=[i=k(E[0],L("Base"),"Agnostos")].concat(Y),p=s.$r(g),(B=i.$$prototype).round_type=B.randomizer=t,b(g[0],"ID","Agnostos"),b(g[0],"NAME","\u30a2\u30b0\u30ce\u30b9\u30c8\u30b9"),b(g[0],"SORT_KEY","\u3042\u304f\u306e\u3059\u3068\u3059"),b(g[0],"HELP_MESSAGE","\u25a0 \u884c\u70ba\u5224\u5b9a\n  CDx>=t\n  x: \u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\uff08A~E \u3082\u3057\u304f\u306f 5~1)\n  t: \u76ee\u6a19\u5024\n  \u306e\u6210\u5426\u3068\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u306e\u5909\u52d5\u91cf\u3092\u5224\u5b9a\u3057\u307e\u3059\u3002\n\n\u25a0 \u5fc3\u62cd\u306e\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\n  HCDx\n  x: \u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\uff08C+, B+, A, B-, C-, \u3082\u3057\u304f\u306f 5~1\uff09\n  \u9178\u7d20\u306e\u6d88\u8cbb\u91cf\u3001\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u306e\u5909\u52d5\u91cf\u3001\u6c17\u7d76\u3057\u305f\u304b\u3092\u5224\u5b9a\u3057\u307e\u3059\u3002\n\n\u25a0 \u5fc5\u6bba\u6280\n  xSPy\n  x: \u30e1\u30a4\u30f3\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff08A~E \u3082\u3057\u304f\u306f 5~1)\n  y: \u30b5\u30d6\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff08A~E \u3082\u3057\u304f\u306f 5~1)\n  \u5fc5\u6bba\u6280\u306e\u30c0\u30e1\u30fc\u30b8\u91cf\u3092\u5224\u5b9a\u3057\u307e\u3059\u3002\n"),i.$register_prefix("CD","HCD","[A-E1-5]SP[A-E1-5]"),a(i,"$eval_game_system_specific_command",function(e){var r,u,n=this;return _(r=_(u=n.$condition_roll(e))?u:n.$heart_condition_roll(e))?r:n.$special_roll(e)}),i.$private(),a(i,"$condition_roll",function(e){var n=this,r=t,u=t,f=t,$=t,c=t;return r=j(p("Command"),"Parser").$new(/CD[A-E1-5]/,S(["round_type"],{round_type:n.round_type})).$disable_modifier().$restrict_cmp_op_to(">="),u=r.$parse(e),_(u)?(f=n.$to_condition_level(u.$command()["$[]"](-1)),$=n.$to_sides(f),c=n.randomizer.$roll_once($),A(p("Result").$new(),"tap",[],function d(o){var h,m=null==d.$$s?this:d.$$s;return null==o&&(o=t),o["$critical="](m["$critical?"]($,c)),o["$fumble="](m["$fumble?"]($,c)),o["$condition="](C(c,u.$target_number())),h=[["(CD"+f+">="+u.$target_number()+")","(1D"+$+">="+u.$target_number()+")",c.$to_s(),_(o["$success?"]())?"\u6210\u529f":"\u5931\u6557",m.$condition_change($,c)].$join(" \uff1e ")],A(o,"text=",h),h[h.length-1]},{$$s:n})):t}),a(i,"$to_condition_level",function(e){switch(e.valueOf()){case"5":return"A";case"4":return"B";case"3":return"C";case"2":return"D";case"1":return"E";default:return e}}),a(i,"$to_sides",function(e){switch(e.valueOf()){case"A":return 12;case"B":return 10;case"C":return 8;case"D":return 6;default:return 4}}),a(i,"$condition_change",function(e,n){return _(this["$critical?"](e,n))?"\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff1a2\u6bb5\u968e\u4e0a\u6607\uff08\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff09":_(this["$fumble?"](e,n))?"\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff1a2\u6bb5\u968e\u4e0b\u964d\uff08\u30d5\u30a1\u30f3\u30d6\u30eb\uff09":H(e,12)&&_(v(P(e,n),1))?"\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff1a1\u6bb5\u968e\u4e0a\u6607":D(e,12)&&_(v(n,6))||D(e,10)&&_(v(n,3))||D(e,8)&&_(v(n,2))?"\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff1a1\u6bb5\u968e\u4e0b\u964d":"\u30b3\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\uff1a\u5909\u52d5\u306a\u3057"}),a(i,"$critical?",function(e,n){var r;return _(r=e["$!="](12))?e["$=="](n):r}),a(i,"$fumble?",function(e,n){var r;return _(r=e["$!="](4))?n["$=="](1):r}),a(i,"$heart_condition_roll",function(e){var n=this,r=t,u=t,f=t,$=t,c=t;return r=/^HCD([A1-5]|[BC][+-])$/.$match(e),_(r)?(u=r["$[]"](1),f=n.$to_heart_condition_level(u),$=n.$to_heart_sides(f),c=n.randomizer.$roll_once($),A(p("Result").$new(),"tap",[],function d(o){var h,m=null==d.$$s?this:d.$$s;return null==o&&(o=t),o["$critical="](m["$critical?"]($,c)),o["$fumble="](m["$fumble?"]($,c)),h=[["(HCD"+f+")","(1D"+$+")",c.$to_s(),m.$heart_condition_change($,c)].$join(" \uff1e ")],A(o,"text=",h),h[h.length-1]},{$$s:n})):t}),a(i,"$to_heart_condition_level",function(e){switch(e.valueOf()){case"5":return"C+";case"4":return"B+";case"3":return"A";case"2":return"B-";case"1":return"C-";default:return e}}),a(i,"$to_heart_sides",function(e){switch(e.valueOf()){case"C+":return 12;case"B+":return 10;case"A":return 8;case"B-":return 6;default:return 4}}),a(i,"$fainted?",function(e,n){switch(e.valueOf()){case 12:return C(n,7);case 10:return C(n,10);case 8:return!1;case 6:return v(n,1);default:return v(n,2)}}),a(i,"$heart_condition_change",function(e,n){return _(this["$fainted?"](e,n))?"\u6c17\u7d76":this.$condition_change(e,n)}),a(i,"$special_roll",function(e){var n=this,r=t,u=t,f=t,$=t,c=t,d=t,o=t;return r=/^([A-E1-5])SP([A-E1-5])$/.$match(e),_(r)?["("+(u=n.$to_condition_level(r["$[]"](1)))+"SP"+(f=n.$to_condition_level(r["$[]"](2)))+")","("+($=n.$to_times(u))+"D"+(c=n.$to_sides(f))+")",(o=(d=n.randomizer.$roll_barabara($,c)).$sum())+"["+d.$join(",")+"]",o.$to_s()].$join(" \uff1e "):t}),a(i,"$to_times",function(e){switch(e.valueOf()){case"A":return 5;case"B":return 4;case"C":return 3;case"D":return 2;default:return 1}})})}}]);