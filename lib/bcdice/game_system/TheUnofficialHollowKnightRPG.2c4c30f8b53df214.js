(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9245],{9696:(O,rr,H)=>{H(5151),Opal.queue(function(o){var M,F,X,m,k,G,Q,P,R=o.module,K=o.klass,D=o.const_set,S=o.send2,C=o.find_super,I=o.def,s=o.truthy,y=o.eqeq,N=o.rb_gt,q=o.rb_lt,i=o.rb_plus,z=o.send,x=o.rb_ge,U=o.rb_minus,j=o.thrower,E=[],r=o.nil;return M=E,F=P=[R(E[0],"BCDice")].concat(M),G=[R(P[0],"GameSystem")].concat(F),Q=o.$r(G),X=G,k=[m=K(G[0],Q("Base"),"TheUnofficialHollowKnightRPG")].concat(X),m.$$prototype.randomizer=r,D(k[0],"ID","TheUnofficialHollowKnightRPG"),D(k[0],"NAME","The Unofficial Hollow Knight RPG"),D(k[0],"SORT_KEY","\u3057\u3042\u3093\u304a\u3075\u3044\u3057\u3084\u308b\u307b\u308d\u3046\u306a\u3044\u3068RPG"),D(k[0],"HELP_MESSAGE","\u30fb\u80fd\u529b\u5024\u5224\u5b9a\u3000[n]AD[+b][#r][>=t]\n\u3000n: \u80fd\u529b\u5024\u3002\u5c0f\u6570\u53ef\u3002\u7701\u7565\u4e0d\u53ef\u3002\n\u3000b: \u30dc\u30fc\u30ca\u30b9\u3001\u30da\u30ca\u30eb\u30c6\u30a3\u30c0\u30a4\u30b9\u3002\u7701\u7565\u53ef\u3002\n\u3000r: \u8ffd\u52a0\u30ea\u30ed\u30fc\u30eb\u30c0\u30a4\u30b9\u6570\u3002\u7701\u7565\u53ef\u3002\n\u3000t: \u76ee\u6a19\u5024\u3002>=\u542b\u3081\u3066\u7701\u7565\u53ef\u3002\n\u3000\u6210\u529f\u6570\u3092\u5224\u5b9a\u3002\n\u3000\u4f8b\uff091AD, 2.5AD, 1.5AD+1, 2AD#1, 2.5AD+2#2>=4\n\n\u30fb\u30a4\u30cb\u30b7\u30a2\u30c1\u30d6\u3000[n]INTI[+b][#r]\n\u3000n: \u30a4\u30cb\u30b7\u30a2\u30c1\u30d6\u306b\u4f7f\u3046\u80fd\u529b\u5024\u3002\u7701\u7565\u4e0d\u53ef\u3002\n  b: \u30dc\u30fc\u30ca\u30b9\u3001\u30da\u30ca\u30eb\u30c6\u30a3\u30c0\u30a4\u30b9\u3002\u7701\u7565\u53ef\u3002\n  r: \u8ffd\u52a0\u30ea\u30ed\u30fc\u30eb\u30c0\u30a4\u30b9\u6570\u3002\u7701\u7565\u53ef\u3002\n\u3000\u632f\u308a\u76f4\u3057\u3092\u884c\u3063\u305f\u3046\u3048\u3067\u30a4\u30cb\u30b7\u30a2\u30c1\u30d6\u5024\u3092\u8a08\u7b97\u3002\n\u3000\u4f8b\uff091INTI, 2.5INTI, 1.5INTI+1, 2INTI#1, 2.5INTI+2#2\n"),m.$register_prefix("(\\d+\\.?\\d*)?AD([+-](\\d+))?(#(\\d+))?(>=(\\d+))?","(\\d+\\.?\\d*)?(INTI|inti)([+-](\\d+))?(#(\\d+))?"),I(m,"$initialize",function h(e){var n=this;return h.$$p=null,S(n,C(n,"initialize",h,!1,!0),"initialize",[e],null),n.sort_barabara_dice=!1}),I(m,"$eval_game_system_specific_command",function(e){var n;return s(n=this.$ability_roll(e))?n:this.$initiative_roll(e)}),I(m,"$number_with_sign_from_int",function(e){return y(e,0)?"":s(N(e,0))?"+"+e.$abs():s(q(e,0))?"-"+e.$abs():e.$to_s()}),I(m,"$number_with_reroll_from_int",function(e){return y(e,0)?"":s(N(e,0))?"#"+e:e.$to_s()}),I(m,"$ability_roll",function(e){var t=this,n=r,u=r,b=r,$=r,c=r,w=r,a=r,f=r,_=r,T=r,l=r,g=r;return n=/^(\d+\.?\d*)?AD([+-](\d+))?(#(\d*))?(>=(\d+))?/.$match(e),s(n)?(u=n["$[]"](1).$to_f(),b=n["$[]"](3).$to_i(),$=n["$[]"](5).$to_i(),c=n["$[]"](7).$to_i(),s(/\.[1-9]+/["$=~"](u.$to_s()))?(w=u+"AD"+t.$number_with_sign_from_int(b)+t.$number_with_reroll_from_int($),$=i($,1)):w=u.$to_i()+"AD"+t.$number_with_sign_from_int(b)+t.$number_with_reroll_from_int($),y(c,0)?c=5:w=i(w,">="+c),a=t.randomizer.$roll_barabara(i(u.$to_i(),b),6),f=z(a,"count",[],function(d){return null==d&&(d=r),x(d,c)}),_=U(u.$to_i(),f),T=i(i("[",a.$join(",")),"]"),l=[],y($,1)?l.$push(t.randomizer.$roll_once(6)):s(N($,1))&&(l=i(l,t.randomizer.$roll_barabara($,6))),g=z(l,"count",[],function(d){return null==d&&(d=r),x(d,c)}),s(q(_,g))&&(g=_),f=i(f,g),s(l["$empty?"]())||(T=i(T,i(i(" Reroll [",l.$join(",")),"]"))),"("+w+") > "+T+" > "+f+"\u6210\u529f"):r}),I(m,"$initiative_roll",function(e){var t=this,n=r,u=r,b=r,$=r,c=r,w=r,a=r,f=r,_=r;return n=/^(\d+\.?\d*)?(INTI|inti)([+-](\d+))?(#(\d+))?/.$match(e),s(n)?(u=n["$[]"](1).$to_f(),b=n["$[]"](3).$to_i(),$=n["$[]"](6).$to_i(),s(/\.[1-9]+/["$=~"](u.$to_s()))?(c="("+u+"INTI"+t.$number_with_sign_from_int(b)+t.$number_with_reroll_from_int($)+")",$=i($,1)):c="("+u.$to_i()+"INTI"+t.$number_with_sign_from_int(b)+t.$number_with_reroll_from_int($)+")",w=t.randomizer.$roll_barabara(i(u,b),6),a=[],y($,0)||(a=t.randomizer.$roll_barabara($,6)),a=a.$sort(),f=0,_="[",z(w,"each",[],function(l){var g=r,v=r;return null==l&&(l=r),s(a["$empty?"]())?(_=i(_,l.$to_s()),f=i(f,l)):(g=!1,v=-1,function(){try{var d=j("break");return z(a,"each",[],function(A){if(null==A&&(A=r),v=i(v,1),!s(N(A,l)))return r;_=i(_,l+"<<"+A),f=i(f,A),a.$delete_at(v),g=!0,d.$throw()})}catch(p){if(p===d)return p.$v;throw p}}(),s(g)||(_=i(_,l.$to_s()),f=i(f,l))),_=i(_,",")}),_=_.$chop(),c+" > "+(_=i(_,"]"))+" > "+f):r})})}}]);