(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9610],{3709:(ie,se,re)=>{re(5151),Opal.modules["bcdice/arithmetic_evaluator"]=function(n){var z,P,p,j,I,V,y,D,q=n.module,G=n.ensure_kwargs,E=n.truthy,g=n.thrower,k=n.def,e=[],w=n.nil,R=n.$$$;return z=e,P=D=[q(e[0],"BCDice")].concat(z),y=[V=q(D[0],"ArithmeticEvaluator")].concat(P),j=[p=n.get_singleton_class(V)].concat(y),I=n.$r(j),k(p,"$eval",function(K,B){try{g("eval_return");var c,A=w;return null==(c=(B=G(B)).$$smap.round_type)&&(c=R(I("RoundType"),"FLOOR")),E(K)&&E(A=I("Arithmetic").$eval(K,c))?A:0}catch(m){if(m===n.t_eval_return)return m.$v;throw m}},-2)},Opal.modules["bcdice/dice_table/range_table"]=function(n){var V,j,Y,v,t,_,c,A,m,F,i,p,q=n.module,G=n.klass,E=n.const_set,g=n.send,k=n.hash2,e=n.def,w=n.eqeqeq,R=n.truthy,H=n.to_a,z=n.rb_times,x=n.rb_plus,D=[],r=n.nil;return V=D,j=p=[q(D[0],"BCDice")].concat(V),Y=i=[q(p[0],"DiceTable")].concat(j),A=[c=G(i[0],null,"RangeTable")].concat(Y),m=n.$r(A),(F=c.$$prototype).name=F.items=F.num_of_dice=F.num_of_sides=F.formatter=r,E(A[0],"RollResult",g(m("Struct"),"new",["sum","values","content","formatted"],function v(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")},{$$s:c})),E(A[0],"Item",m("Struct").$new("range","content")),E(A[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),E(A[0],"DEFAULT_FORMATTER",g(c,"lambda",[],function(a,t){return null==a&&(a=r),null==t&&(t=r),a.$name()+"("+t.$sum()+") \uff1e "+t.$content()})),c.$attr_reader("name"),c.$attr_reader("num_of_dice"),c.$attr_reader("num_of_sides"),t=[v=n.get_singleton_class(c)].concat(A),_=n.$r(t),e(v,"$from_i18n",function(s,$){var T,l=r;return l=_("I18n").$t(s,k(["locale"],{locale:$})),T=g(l["$[]"]("items"),"map",[],function M(u){return null==u&&(u=r),[(null==M.$$s?this:M.$$s).$conv_string_range(u["$[]"](0)),u["$[]"](1)]},{$$s:this}),this.$new(l["$[]"]("name"),l["$[]"]("type"),T)}),e(v,"$conv_string_range",function(s){var o,$=this;return null==$.name&&($.name=r),w(_("Integer"),o=s)?s:w(_("String"),o)?R(s["$include?"](".."))?g(_("Range"),"new",H(g(s.$split("..",2),"map",[],function l(T){return null==T&&(T=r),(null==l.$$s?this:l.$$s).$Integer(T)},{$$s:$}))):$.$Integer(s):$.$raise(_("TypeError"),$.name+": "+s+" ("+s.$class()+") must be a String or an Integer")}),e(c,"$initialize",function v(a,t,_){var $,f=v.$$p||r,s=this,o=r;return v.$$p=null,s.name=a.$freeze(),s.formatter=R($=f)?$:m("DEFAULT_FORMATTER"),o=m("DICE_ROLL_METHOD_RE").$match(t),R(o)||s.$raise(m("ArgumentError"),s.name+": invalid dice roll method: "+t),s.num_of_dice=o["$[]"](1).$to_i(),s.num_of_sides=o["$[]"](2).$to_i(),s.$store(_)}),e(c,"$fetch",function(a){var _,t=this;return _=g(t.items,"find",[],function(s){return null==s&&(s=r),s.$range()["$include?"](a)}),R(_)||t.$raise(m("RangeError"),t.name+": value is out of range: "+a),_}),e(c,"$roll",function(a){var f,t=this,_=r,s=r;return f=(_=a.$roll_barabara(t.num_of_dice,t.num_of_sides)).$sum(),(s=m("RollResult").$new(f,_,t.$fetch(f).$content()))["$formatted="](t.formatter["$[]"](t,s)),s}),c.$private(),e(c,"$store",function(a){var _,f,t=this;return _=g(a,"map",[],function s($,o){return null==$&&($=r),null==o&&(o=r),[(null==s.$$s?this:s.$$s).$coerce_to_int_range($),o]},{$$s:t}),f=g(_,"sort_by",[],function($,o){return null==$&&($=r),null==o&&(o=r),$.$min()}),t.$assert_min_sum_is_covered(f),t.$assert_max_sum_is_covered(f),t.$assert_no_gap_or_overlap_in_ranges(f),t.items=g(f,"map",[],function($,o){return null==$&&($=r),null==o&&(o=r),m("Item").$new($,o.$freeze()).$freeze()}).$freeze(),t}),e(c,"$coerce_to_int_range",function(a){var _;return w(m("Integer"),_=a)?m("Range").$new(a,a):w(m("Range"),_)&&R(a.$begin()["$is_a?"](m("Integer")))&&R(a.$end()["$is_a?"](m("Integer")))?a:this.$raise(m("TypeError"),this.name+": "+a+" ("+a.$class()+") must be an Integer or a Range with Integers ")}),e(c,"$assert_min_sum_is_covered",function(a){var _,t=this,f=r;return _=t.num_of_dice,f=a.$first()["$[]"](0),R(f["$include?"](_))||t.$raise(m("RangeError"),t.name+": min value ("+_+") is not covered: "+f),t}),e(c,"$assert_max_sum_is_covered",function(a){var _,t=this,f=r;return _=z(t.num_of_dice,t.num_of_sides),f=a.$last()["$[]"](0),R(f["$include?"](_))||t.$raise(m("RangeError"),t.name+": max value ("+_+") is not covered: "+f),t}),e(c,"$assert_no_gap_or_overlap_in_ranges",function(a){return g(a,"each_cons",[2],function _(f,s){var T,M,$=null==_.$$s?this:_.$$s,o=r,l=r;return null==$.name&&($.name=r),null==f&&(f=r),null==s&&(s=r),o=f["$[]"](0),l=s["$[]"](0),T=o.$max(),M=x(T,1),R(l["$include?"](T))&&$.$raise(m("RangeError"),$.name+": Range overlap: "+o+" and "+l),R(l["$include?"](M))?r:$.$raise(m("RangeError"),$.name+": Range gap: "+o+" and "+l)},{$$s:this}),this})},Opal.queue(function(n){var Y,F,s,$,o,l,T,a,t,A,q=n.module,G=n.klass,E=n.const_set,g=n.truthy,k=n.eqeqeq,e=n.hash2,w=n.thrower,R=n.def,H=n.send,z=n.neqeq,x=n.rb_ge,D=n.rb_le,r=n.eqeq,P=n.rb_gt,V=n.rb_lt,y=n.rb_plus,p=n.rb_minus,C=n.range,j=n.top,I=[],i=n.nil,K=n.$$$;return j.$require("bcdice/arithmetic_evaluator"),j.$require("bcdice/dice_table/range_table"),Y=I,F=A=[q(I[0],"BCDice")].concat(Y),a=[q(A[0],"GameSystem")].concat(F),t=n.$r(a),s=a,o=[$=G(a[0],t("Base"),"MetalHead")].concat(s),l=n.$r(o),(T=$.$$prototype).round_type=T.randomizer=i,E(o[0],"ID","MetalHead"),E(o[0],"NAME","\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9"),E(o[0],"SORT_KEY","\u3081\u305f\u308b\u3078\u3064\u3068"),E(o[0],"HELP_MESSAGE","\u30fb\u30a2\u30d3\u30ea\u30c6\u30a3\u30ed\u30fc\u30eb  AR>=\u76ee\u6a19\u5024\n\u30fb\u30b9\u30ad\u30eb\u30ed\u30fc\u30eb      SR<=\u76ee\u6a19\u5024(%)\n\u30fb\u547d\u4e2d\u5224\u5b9a\u30ed\u30fc\u30eb    HR<=\u76ee\u6a19\u5024(%)\n\n  \u4f8b\uff09AR>=5\n  \u4f8b\uff09SR<=(40+25)\n  \u4f8b\uff09HR<=(50-10)\n\n  \u3053\u308c\u3089\u306e\u30ed\u30fc\u30eb\u3067\u6210\u5426\u3001\u7d76\u5bfe\u6210\u529f/\u7d76\u5bfe\u5931\u6557\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb/\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u3092\u81ea\u52d5\u5224\u5b9a\u3057\u307e\u3059\u3002\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30c1\u30e3\u30fc\u30c8  CC\n\u30fb\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8  \u5c04\u6483\u30fb\u6295\u64f2\u7528:ACL  \u683c\u95d8\u7528:ACS\n\u30fb\u6226\u95d8\u7d50\u679c\u30c1\u30e3\u30fc\u30c8      CRCsn   s=\u8010\u4e45\u30ec\u30d9\u30eb(SUV) n=\u6570\u5024\n\n  \u4f8b\uff09CRCA61 SUV=A\u3092\u5bfe\u8c61\u3068\u3057\u305f\u6570\u502461(62\u306b\u5909\u63db\u3055\u308c\u308b)\u306e\u6226\u95d8\u7d50\u679c\u3092\u53c2\u7167\u3059\u308b\u3002\n  \u4f8b\uff09CRCM98 \u5bfe\u7269\u3067\u6570\u502498\u306e\u6226\u95d8\u7d50\u679c\u3092\u53c2\u7167\u3059\u308b\u3002\n"),$.$register_prefix("AR","SR","HR<=","CC","ACT","ACL","ACS","CRC[A-Z]"),R($,"$eval_game_system_specific_command",function(u){try{w("eval_return");var W,h=this,L=i,b=i,S=i,N=i;return W=h.$roll_tables(u,l("TABLES")),g(W)?W:k(/^CRC(\w)(\d+)$/,L=u)?(b=l("Regexp").$last_match(1),S=l("Regexp").$last_match(2),h.$mh_crc_table(b,S)):k(/^HR<=(.+)/,L)?(N=l("ArithmeticEvaluator").$eval(l("Regexp").$last_match(1),e(["round_type"],{round_type:h.round_type})),h.$rollHit(N)):i}catch(U){if(U===n.t_eval_return)return U.$v;throw U}}),R($,"$change_text",function(u){return u=H(u,"gsub",[/^(S)?AR/i],function(){return l("Regexp").$last_match(1)+"2D6"}),H(u,"gsub",[/^(S)?SR/i],function(){return l("Regexp").$last_match(1)+"1D100"})}),R($,"$result_2d6",function(u,d,h,W,L){return z(W,">=")?i:g(x(d,12))?l("Result").$critical("\u7d76\u5bfe\u6210\u529f"):g(D(d,2))?l("Result").$fumble("\u7d76\u5bfe\u5931\u6557"):i}),R($,"$rollHit",function(u){var h;return"(1D100<="+u+") \uff1e "+(h=this.randomizer.$roll_once(100))+this.$getHitResult(h,h,u)}),R($,"$result_1d100",function(u,d,h,W){return r(h,"<=")?g(D(d,5))?l("Result").$critical("\u7d76\u5bfe\u6210\u529f"):g(x(d,96))?l("Result").$fumble("\u7d76\u5bfe\u5931\u6557"):i:i}),R($,"$getHitResult",function(u,d,h){var b;return b=u["$%"](100)["$%"](10),this.$debug("total_n",u),g(P(u,h))?" \uff1e \u5931\u6557":r(b,1)?" \uff1e \u6210\u529f\uff08\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff09":r(b,0)?" \uff1e \u5931\u6557\uff08\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\uff09":" \uff1e \u6210\u529f"}),R($,"$mh_crc_table",function(u,d){var W,L,h=this,b=i,S=i,N=i,U=i,Z=i,X=i;return W=["\u6226\u95d8\u7d50\u679c\u30c1\u30e3\u30fc\u30c8",d],L=" \uff1e ",u=u.$to_s().$upcase(),b=d.$to_i(),g(V(b,1))?y(W,["\u6570\u5024\u304c\u4e0d\u6b63\u3067\u3059"]).$join(L):(S=b["$%"](10),h.$debug("num_d1["+S+"]"),r(S,1)&&(b=y(b,1)),r(S,0)&&(b=p(b,1)),S=b["$%"](10),h.$debug("num_d1["+S+"]"),N=[i,i,"\u8155\u90e8","\u8155\u90e8","\u811a\u90e8","\u811a\u90e8","\u80f4\u90e8","\u80f4\u90e8","\u80f4\u90e8","\u982d\u90e8"],U=e(["S","A","B","C","D","E","F","G","M"],{S:[e(["N"],{N:2}),e(["LW"],{LW:16}),e(["MD"],{MD:46}),e(["MW"],{MW:56}),e(["HD"],{HD:76}),e(["HW"],{HW:96}),e(["MO"],{MO:106}),e(["K"],{K:116})],A:[e(["LW"],{LW:2}),e(["MW"],{MW:46}),e(["HW"],{HW:76}),e(["MO"],{MO:96}),e(["K"],{K:116})],B:[e(["LW"],{LW:2}),e(["MW"],{MW:36}),e(["HW"],{HW:66}),e(["MO"],{MO:96}),e(["K"],{K:106})],C:[e(["LW"],{LW:2}),e(["MW"],{MW:26}),e(["HW"],{HW:66}),e(["MO"],{MO:86}),e(["K"],{K:106})],D:[e(["LW"],{LW:2}),e(["MW"],{MW:26}),e(["HW"],{HW:46}),e(["MO"],{MO:76}),e(["K"],{K:96})],E:[e(["LW"],{LW:2}),e(["MW"],{MW:26}),e(["HW"],{HW:39}),e(["MO"],{MO:54}),e(["K"],{K:76})],F:[e(["LW"],{LW:2}),e(["MW"],{MW:16}),e(["HW"],{HW:39}),e(["MO"],{MO:54}),e(["K"],{K:66})],G:[e(["LW"],{LW:2}),e(["MW"],{MW:6}),e(["HW"],{HW:16}),e(["MO"],{MO:26}),e(["K"],{K:39})],M:[e(["0"],{0:2}),e(["1"],{1:22}),e(["2"],{2:42}),e(["3"],{3:62}),e(["4"],{4:82}),e(["5"],{5:92}),e(["6"],{6:102}),e(["8"],{8:112})]}),g(U["$[]"](u)["$nil?"]())?y(W,["\u8010\u4e45\u30ec\u30d9\u30eb(SUV)["+u+"]","\u8010\u4e45\u30ec\u30d9\u30eb(SUV)\u306e\u5024\u304c\u4e0d\u6b63\u3067\u3059"]).$join(L):(Z="",H(U["$[]"](u),"each",[],function ee(J){return null==J&&(J=i),H(J,"each",[],function ne(Q,O){return null==Q&&(Q=i),null==O&&(O=i),(null==ne.$$s?this:ne.$$s).$debug("suv["+u+"] "+J+" "+Q+" "+O),g(D(O,b))?Z=Q:i},{$$s:null==ee.$$s?this:ee.$$s})},{$$s:h}),X=[],z(b,d.$to_i())&&X.$push(b.$to_s()),r(u,"M")?X.$push("\u8010\u7269","HP["+Z+"]"):X.$push("\u8010\u4e45\u30ec\u30d9\u30eb(SUV)["+u+"]","\u90e8\u4f4d["+N["$[]"](S)+"] \uff1a \u640d\u50b7\u7a2e\u5225["+Z+"]"),y(W,X).$join(L)))}),E(o[0],"TABLE_ROLL_RESULT_FORMATTER",H($,"lambda",[],function(u,d){return null==u&&(u=i),null==d&&(d=i),[u.$name(),d.$sum(),d.$content()].$join(" \uff1e ")})),E(o[0],"TABLES",e(["CC","ACL","ACS"],{CC:H(K(l("DiceTable"),"RangeTable"),"new",["\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30c1\u30e3\u30fc\u30c8","1D10",[[1,"\u76f8\u624b\u306f\u77e5\u899a\u7cfb\u306b\u591a\u5927\u306a\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u3002PER\u30921\u306b\u3057\u3066\u982d\u90e8\u306bHW\u306e\u30c0\u30e1\u30fc\u30b8\u3001\u304a\u3088\u3073\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002"],[2,"\u76f8\u624b\u306e\u904b\u52d5\u795e\u7d4c\u3092\u65ad\u3061\u5207\u3063\u305f\u3002DEX\u30921\u306b\u3057\u3066\u8155\u90e8\u306bHW\u306e\u30c0\u30e1\u30fc\u30b8\u3001\u304a\u3088\u3073\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002\u3055\u3089\u306b\u8155\u306b\u6301\u3063\u3066\u3044\u305f\u6b66\u5668\u306a\u3069\u306f\u843d\u3068\u3057\u3066\u3057\u307e\u3046\u3002"],[3,"\u76f8\u624b\u306e\u79fb\u52d5\u624b\u6bb5\u306f\u5b8c\u5168\u306b\u596a\u308f\u308c\u305f\u3002REF\u30921\u306b\u3057\u3066\u811a\u90e8\u306bHW\u30c0\u30e1\u30fc\u30b8\u3068\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002\u307e\u305f\u3001\u6b21\u56de\u304b\u3089\u306e\u3053\u3061\u3089\u306e\u653b\u6483\u306f\u5fc5\u305a\u547d\u4e2d\u3059\u308b\u3002"],[C(4,5,!1),"\u76f8\u624b\u306e\u6025\u6240\u306b\u547d\u4e2d\u3002\u6fc0\u75db\u306e\u305f\u3081\u6c17\u7d76\u3057\u305f\u4e0a\u3001\u80f4\u306bHW\u30c0\u30e1\u30fc\u30b8\u3002"],[6,"\u52b9\u679c\u7684\u306a\u4e00\u6483\u3002\u80f4\u306bHW\u30c0\u30e1\u30fc\u30b8\u3002\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002"],[7,"\u52b9\u679c\u7684\u306a\u4e00\u6483\u3002\u80f4\u306bMO\u30c0\u30e1\u30fc\u30b8\u3002\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002"],[C(8,10,!1),"\u541b\u306e\u4e00\u6483\u306f\u76f8\u624b\u306e\u4e2d\u67a2\u3092\u5b8c\u5168\u306b\u7834\u58ca\u3057\u305f\u3002\u5373\u6b7b\u3067\u3042\u308b\u3002"]]],l("TABLE_ROLL_RESULT_FORMATTER").$to_proc()),ACL:H(K(l("DiceTable"),"RangeTable"),"new",["\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8\uff08\u5c04\u6483\u30fb\u6295\u64f2\uff09","1D10",[[C(1,7,!1),"\u3055\u3055\u3044\u306a\u30df\u30b9\u3002\u7279\u306b\u30da\u30ca\u30eb\u30c6\u30a3\u30fc\u306f\u306a\u3044\u3002"],[8,"\u4e0d\u767a\u3001\u307e\u305f\u306f\u30b8\u30e3\u30e0\u3002\u5f3e\u3092\u53d6\u308a\u51fa\u3055\u306d\u3070\u306a\u3089\u306a\u3044\u7269\u306f\u6b21\u306e\u30bf\u30fc\u30f3\u306f\u5c04\u6483\u3067\u304d\u306a\u3044\u3002"],[9,"\u3055\u3055\u3044\u306a\u6545\u969c\u3002\u53ef\u80fd\u306a\u3089\u6b21\u306e\u30bf\u30fc\u30f3\u304b\u3089\u500b\u5225\u6b66\u5668\u306e\u30b9\u30ad\u30eb\u30ed\u30fc\u30eb\u3067\u4fee\u7406\u3092\u884c\u3048\u308b\u3002"],[10,"\u6b66\u5668\u306e\u66b4\u767a\u3001\u307e\u305f\u306f\u7206\u767a\u3002\u982d\u90e8HW\u306e\u5fc3\u7406\u52b9\u679c\u30ed\u30fc\u30eb\u3002\u3055\u3089\u306b\u3001\u305d\u306e\u6b66\u5668\u306f\u7834\u58ca\u3055\u308cPER\u3068DEX\u306e\u3069\u3061\u3089\u304b\u3001\u307e\u305f\u306f\u4e21\u65b9\u306b\u8a082\u30dd\u30a4\u30f3\u30c8\u306e\u30de\u30a4\u30ca\u30b9\u3092\u4e0e\u3048\u308b\u3002\uff08\u9060\u9694\u64cd\u4f5c\u306e\u5834\u5408\u3001\u5c04\u624b\u3078\u306e\u88ab\u5bb3\u306f\u7121\u3057\uff09"]]],l("TABLE_ROLL_RESULT_FORMATTER").$to_proc()),ACS:H(K(l("DiceTable"),"RangeTable"),"new",["\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8\uff08\u683c\u95d8\uff09","1D10",[[C(1,3,!1),"\u8db3\u3092\u6ed1\u3089\u305b\u3066\u8ee2\u5012\u3057\u3001\u8d77\u304d\u4e0a\u304c\u308b\u307e\u3067\u76f8\u624b\u306b+20\u306e\u547d\u4e2d\u4fee\u6b63\u3092\u4e0e\u3048\u308b\u3002"],[C(4,6,!1),"\u624b\u3092\u6ed1\u3089\u305b\u3066\u3001\u6b66\u5668\u3092\u843d\u3068\u3059\u3002\u7d20\u624b\u306e\u6642\u306f\u95a2\u4fc2\u306a\u3044\u3002"],[C(7,9,!1),"\u4f7f\u7528\u6b66\u5668\u306e\u7834\u58ca\u3002\u7d20\u624b\u6226\u95d8\u306e\u3068\u304d\u306fMW\u306e\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u308b\u3002"],[10,"\u624b\u3092\u6ed1\u3089\u305b\u3001\u4e0d\u5e78\u306b\u3082\u6b66\u5668\u306f\u98db\u3093\u3067\u3044\u304d\u30015m\u4ee5\u5185\u306b\u4eba\u304c\u3044\u308c\u3070\u8ab0\u304b\u306b\u523a\u3055\u308b\u304b\u3001\u307e\u305f\u306f\u6253\u6483\u3092\u4e0e\u3048\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u5b9a\u3057\u3001\u666e\u901a\u3069\u304a\u308a\u5224\u5b9a\u3092\u7d9a\u3051\u308b\u3002\u7d20\u624b\u306e\u3068\u304d\u306f\u95a2\u4fc2\u306a\u3044\u3002"]]],l("TABLE_ROLL_RESULT_FORMATTER").$to_proc())}).$freeze())})}}]);