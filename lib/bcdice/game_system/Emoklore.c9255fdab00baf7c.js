(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8411],{2838:(H,K,L)=>{L(5151),Opal.queue(function(n){var I,z,F,o,d,i,k,S,x,M=n.module,B=n.klass,m=n.const_set,R=n.eqeqeq,b=n.def,g=n.send,v=n.rb_le,y=n.rb_minus,D=n.rb_plus,C=n.hash2,f=n.truthy,p=n.rb_lt,h=n.eqeq,q=[],e=n.nil;return I=q,z=x=[M(q[0],"BCDice")].concat(I),k=[M(x[0],"GameSystem")].concat(z),S=n.$r(k),F=k,d=[o=B(k[0],S("Base"),"Emoklore")].concat(F),i=n.$r(d),o.$$prototype.randomizer=e,m(d[0],"ID","Emoklore"),m(d[0],"NAME","\u30a8\u30e2\u30af\u30ed\u30a2TRPG"),m(d[0],"SORT_KEY","\u3048\u3082\u304f\u308d\u3042TRPG"),m(d[0],"HELP_MESSAGE",'\u30fb\u6280\u80fd\u5024\u5224\u5b9a\uff08xDM<=y\uff09\n  "(\u500b\u6570)DM<=(\u5224\u5b9a\u5024)"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3057\u305f\u5834\u54081\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  \u4f8b\uff092DM<=5 DM<=8\n\u30fb\u6280\u80fd\u5024\u5224\u5b9a\uff08sDAa+z)\n  "(\u6280\u80fd\u30ec\u30d9\u30eb)DA(\u80fd\u529b\u5024)+(\u30c0\u30a4\u30b9\u30dc\u30fc\u30ca\u30b9)"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u30dc\u30fc\u30ca\u30b9\u306e\u500b\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3057\u305f\u5834\u54080\u306b\u306a\u308a\u307e\u3059\u3002\n  \u6280\u80fd\u30ec\u30d9\u30eb\u306f1\uff5e3\u306e\u6570\u5024\u3001\u307e\u305f\u306f\u30d9\u30fc\u30b9\u6280\u80fd\u306e\u5834\u5408"b"\u304c\u5165\u308a\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u6280\u80fd\u30ec\u30d9\u30eb\u3068\u30c0\u30a4\u30b9\u30dc\u30fc\u30ca\u30b9\u306e\u500b\u6570\u306b\u3088\u308a\u6c7a\u5b9a\u3057\u3001s+z\u500b\u306e\u30c0\u30a4\u30b9\u3092\u632f\u308a\u307e\u3059\u3002\uff08s="b"\u306e\u5834\u5408\u306fs=1\uff09\n  \u5224\u5b9a\u5024\u306fs+a\u3068\u306a\u308a\u307e\u3059\u3002\uff08s="b"\u306e\u5834\u5408\u306fs=0\uff09\n'),o.$register_prefix("\\d*DM<=","(B|\\d*)DA"),m(d[0],"CRITICAL_VALUE",1),m(d[0],"FUMBLE_VALUE",10),b(o,"$eval_game_system_specific_command",function($){var l;return R(/^\d*DM<=\d/,l=$)?this.$roll_dm($):R(/^(B|\d*)DA\d+(\+)?\d*/,l)?this.$roll_da($):e}),o.$private(),b(o,"$dice_roll",function($,r){var u,_,a,s,l=this,t=e,c=e;return u=(t=l.randomizer.$roll_barabara($,10)).$count(i("CRITICAL_VALUE")),_=g(t,"count",[],function(A){return null==A&&(A=e),v(A,r)}),a=t.$count(i("FUMBLE_VALUE")),s=y(D(u,_),a),(c=l.$compare_result(s))["$text="]("["+t.$join(", ")+"] \uff1e "+s+" \uff1e "+l.$translate("Emoklore.success_count",C(["count"],{count:s}))+" "+c.$text()),c}),b(o,"$compare_result",function($){var r=this;return f(p($,0))?i("Result").$fumble(r.$translate("fumble")):h($,0)?i("Result").$failure(r.$translate("failure")):h($,1)?i("Result").$success(r.$translate("success")):h($,2)?i("Result").$critical(r.$translate("Emoklore.double")):h($,3)?i("Result").$critical(r.$translate("Emoklore.triple")):f(v($,9))?i("Result").$critical(r.$translate("Emoklore.miracle")):i("Result").$critical(r.$translate("Emoklore.catastrophe"))}),b(o,"$roll_dm",function($){var r,t=e,u=e,_=e,a=e,s=e;return t=/^(\d+)?DM<=(\d+)$/.$match($),!f(t)||(u=f(_=(r=t["$[]"](1))===e||null==r?e:r.$to_i())?_:1,a=t["$[]"](2).$to_i(),f(v(u,0)))?e:((s=this.$dice_roll(u,a))["$text="]("("+u+"DM<="+a+") \uff1e "+s.$text()),s)}),b(o,"$roll_da",function($){var r,t=e,u=e,_=e,a=e,s=e,c=e;return t=/^(B|\d+)?DA(\d+)(\+\d+)?$/.$match($),f(t)?(u=t["$[]"](3).$to_i(),_=D(h(t["$[]"](1),"B")?1:f(a=(r=t["$[]"](1))===e||null==r?e:r.$to_i())?a:1,u),s=D(t["$[]"](1).$to_i(),t["$[]"](2).$to_i()),(c=this.$dice_roll(_,s))["$text="]("("+$+") \uff1e ("+_+"DM<="+s+") \uff1e "+c.$text()),c):e})})}}]);