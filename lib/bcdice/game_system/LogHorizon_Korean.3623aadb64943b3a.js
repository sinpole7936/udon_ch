(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4191],{6426:(ge,ye,he)=>{he(5151),Opal.modules["i18n/backend/fallbacks"]=function(e){var J,i,n,r,s,v,K=e.module,G=e.class_variable_set,l=e.truthy,B=e.class_variable_get,A=e.def,y=e.send,g=e.send2,T=e.find_super,D=e.hash2,N=e.find_block_super,Y=e.neqeq,W=e.thrower,P=e.return_val,F=[],L=e.nil,C=e.$$$;return J=F,v=[s=K(F[0],"I18n")].concat(J),G(v[0],"@@fallbacks",L),i=e.get_singleton_class(s),n=[i].concat(v),r=e.$r(n),A(i,"$fallbacks",function(){var z=L;return G(n[1],"@@fallbacks",l(null!=n[1].$$cvars["@@fallbacks"]?"class variable":L)&&l(z=B(n[1],"@@fallbacks",!1))?z:C(C(r("I18n"),"Locale"),"Fallbacks").$new()),l(z=r("Thread").$current()["$[]"]("i18n_fallbacks"))?z:B(n[1],"@@fallbacks",!1)}),A(i,"$fallbacks=",function(H){var z;return G(n[1],"@@fallbacks",l(H["$is_a?"](r("Array")))?C(C(r("I18n"),"Locale"),"Fallbacks").$new(H):H),z=["i18n_fallbacks",B(n[1],"@@fallbacks",!1)],y(r("Thread").$current(),"[]=",z),z[z.length-1]}),function(i,w){var H,z,M,k,r=[K(i,"Backend")].concat(w);return H=r,M=[z=K(r[0],"Fallbacks")].concat(H),k=e.$r(M),A(z,"$translate",function x(f,p,u){try{var h=W("return"),c=x.$$p||L,E=this,j=L,o=L;return x.$$p=null,null==u&&(u=k("EMPTY_HASH")),l(u.$fetch("fallback",!0))?l(u["$[]"]("fallback_in_progress"))?g(E,T(E,"translate",x,!1,!0),"translate",[f,p,u],c):(l(u["$[]"]("default"))&&(j=E["$extract_non_symbol_default!"](u)),o=u.$merge(D(["fallback_in_progress"],{fallback_in_progress:!0})),y(k("I18n").$fallbacks()["$[]"](f),"each",[],function $(m){var a=null==$.$$s?this:$.$$s;null==m&&(m=L);try{return y(a,"catch",["exception"],function _(){var t=null==_.$$s?this:_.$$s,R=L;if(R=g(t,N(t,"translate",_.$$def||$.$$def||x,!1,!1),"translate",[m,p,o],null),l(R["$nil?"]()))return L;Y(f.$to_s(),m.$to_s())&&t.$on_fallback(f,m,p,u),h.$throw(R)},{$$s:a,$$ret:h})}catch(_){if(!e.rescue(_,[C(k("I18n"),"InvalidLocale")]))throw _;try{return L}finally{e.pop_exception()}}},{$$s:E}),l(u["$key?"]("default"))&&l(u["$[]"]("default")["$nil?"]())?L:l(j)?g(E,T(E,"translate",x,!1,!0),"translate",[f,L,u.$merge(D(["default"],{default:j}))],null):E.$throw("exception",C(k("I18n"),"MissingTranslation").$new(f,p,u))):g(E,T(E,"translate",x,!1,!0),"translate",[f,p,u],c)}catch($){if($===h)return $.$v;throw $}},-3),A(z,"$extract_non_symbol_default!",function(f){var u,p=L;return p=[f["$[]"]("default")].$flatten(),u=y(p,"detect",[],function(c){return null==c&&(c=L),c["$is_a?"](k("Symbol"))["$!"]()}),l(u)&&f["$[]="]("default",p["$[]"](0,p.$index(u))),u}),A(z,"$exists?",function x(f,p,u){try{var h=W("return"),c=x.$$p||L,E=this;return x.$$p=null,null==u&&(u=k("EMPTY_HASH")),l(u.$fetch("fallback",!0))?(y(k("I18n").$fallbacks()["$[]"](f),"each",[],function j(o){var $=null==j.$$s?this:j.$$s;null==o&&(o=L);try{if(!l(g($,N($,"exists?",j.$$def||x,!1,!1),"exists?",[o,p],null)))return L;h.$throw(!0)}catch(m){if(!e.rescue(m,[C(k("I18n"),"InvalidLocale")]))throw m;try{return L}finally{e.pop_exception()}}},{$$s:E,$$ret:h}),!1):g(E,T(E,"exists?",x,!1,!0),"exists?",[f,p,u],c)}catch(j){if(j===h)return j.$v;throw j}},-3),z.$private(),A(z,"$on_fallback",P(L))}(v[0],v)},Opal.modules["bcdice/randomizer"]=function(e){var s,d,H,z,M,k,i,w,G=e.klass,l=e.const_set,B=e.def,A=e.truthy,y=e.rb_gt,g=e.rb_plus,T=e.rb_le,D=e.send,N=e.rb_minus,Y=e.eqeq,W=e.rb_times,P=e.eqeqeq,F=e.rb_ge,L=[],C=e.nil,X=e.$$$;return s=L,i=[(0,e.module)(L[0],"BCDice")].concat(s),w=e.$r(i),d=i,z=[H=G(i[0],null,"Randomizer")].concat(d),M=e.$r(z),(k=H.$$prototype).rand_results=k.detailed_rand_results=C,l(z[0],"UPPER_LIMIT_DICE_TIMES",200),l(z[0],"UPPER_LIMIT_DICE_SIDES",1e4),l(z[0],"UPPER_LIMIT_RANDS",1e4),B(H,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),H.$attr_reader("rand_results"),H.$attr_reader("detailed_rand_results"),l(z[0],"DetailedRandResult",M("Struct").$new("kind","sides","value")),B(H,"$roll_barabara",function(f,p){var u=this;return A(y(g(u.rand_results.$size(),f),M("UPPER_LIMIT_RANDS")))&&u.$raise(M("TooManyRandsError")),A(T(f,0))||A(y(f,M("UPPER_LIMIT_DICE_TIMES")))?[]:D(M("Array"),"new",[f],function h(){return(null==h.$$s?this:h.$$s).$roll_once(p)},{$$s:u})}),B(H,"$roll_sum",function(f,p){return this.$roll_barabara(f,p).$sum()}),B(H,"$roll_once",function(f){var u=C;return A(T(f,0))||A(y(f,M("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(f),this.$push_to_detail("normal",f,u),u)}),B(H,"$roll_index",function(f){return N(this.$roll_once(f),1)}),B(H,"$roll_tens_d10",function(){var u,p=C;return p=this.$rand_inner(10),Y(p,10)&&(p=0),u=W(p,10),this.$push_to_detail("tens_d10",10,u),u}),B(H,"$roll_d9",function(){var p;return p=N(this.$rand_inner(10),1),this.$push_to_detail("d9",10,p),p}),B(H,"$roll_d66",function(f){var h,u=C;return u=D(M("Array"),"new",[2],function c(){return(null==c.$$s?this:c.$$s).$roll_once(6)},{$$s:this}),P(X(M("D66SortType"),"ASC"),h=f)?u["$sort!"]():P(X(M("D66SortType"),"DESC"),h)&&u["$sort!"]()["$reverse!"](),g(W(u["$[]"](0),10),u["$[]"](1))}),H.$private(),B(H,"$rand_inner",function(f){var u,p=this;return A(F(p.rand_results.$size(),M("UPPER_LIMIT_RANDS")))&&p.$raise(M("TooManyRandsError")),u=p.$random(f),p.rand_results["$<<"]([u,f]),u}),B(H,"$random",function(f){return g(M("Kernel").$rand(f),1)}),B(H,"$push_to_detail",function(f,p,u){var c;return c=M("DetailedRandResult").$new(f,p,u),this.detailed_rand_results.$push(c)}),G(i[0],w("StandardError"),"TooManyRandsError"),C},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var D,P,J,s,v,i,w,L,Y,K=e.module,G=e.klass,l=e.def,B=e.truthy,A=e.return_val,y=[],g=e.nil;return D=y,P=Y=[K(y[0],"BCDice")].concat(D),J=L=[K(Y[0],"DiceTable")].concat(P),v=[s=G(L[0],null,"RollResult")].concat(J),i=e.$r(v),(w=s.$$prototype).table_name=w.value=w.body=g,l(s,"$initialize",function(r,d,H){var z=this;return z.table_name=r,z.value=d,z.body=H}),s.$attr_reader("table_name"),s.$attr_reader("value"),s.$attr_reader("body"),l(s,"$to_s",function(){var r=this;return r.table_name+"("+r.value+") \uff1e "+r.body}),l(s,"$last_body",function(){var r=this;return B(r.body["$is_a?"](i("RollResult")))?r.body.$last_body():r.body}),l(s,"$empty?",A(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var D,P,J,s,v,i,w,L,Y,K=e.module,G=e.klass,l=e.truthy,B=e.def,A=e.rb_minus,y=[],g=e.nil;return D=y,P=Y=[K(y[0],"BCDice")].concat(D),J=L=[K(Y[0],"DiceTable")].concat(P),v=[s=G(L[0],null,"ChainTable")].concat(J),i=e.$r(v),(w=s.$$prototype).times=w.sides=w.items=w.name=g,B(s,"$initialize",function(r,d,H){var z=this,M=g;return z.name=r,z.items=H.$freeze(),M=/(\d+)D(\d+)/i.$match(d),l(M)||z.$raise(i("ArgumentError"),"Unexpected table type: "+d),z.times=M["$[]"](1).$to_i(),z.sides=M["$[]"](2).$to_i()}),B(s,"$roll",function(r){var H,z,d=this,M=g;return H=r.$roll_sum(d.times,d.sides),z=A(H,d.times),M=d.items["$[]"](z),l(M["$respond_to?"]("roll"))&&(M=M.$roll(r)),i("RollResult").$new(d.name,H,M)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var W,C,i,w,n,r,d,J,F,K=e.module,G=e.klass,l=e.hash2,B=e.defs,A=e.def,y=e.rb_plus,g=e.rb_times,T=e.rb_minus,D=[],N=e.nil;return W=D,C=F=[K(D[0],"BCDice")].concat(W),i=J=[K(F[0],"DiceTable")].concat(C),n=[w=G(J[0],null,"D66GridTable")].concat(i),r=e.$r(n),(d=w.$$prototype).name=d.items=N,B(w,"$from_i18n",function(z,M){var x=N;return x=r("I18n").$t(z,l(["locale","raise"],{locale:M,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items"))}),A(w,"$initialize",function(z,M){return this.name=z,this.items=M.$freeze()}),A(w,"$roll",function(z){var k,x,f,p,u;return k=z.$roll_once(6),x=z.$roll_once(6),f=y(g(k,10),x),p=T(k,1),u=T(x,1),r("RollResult").$new(this.name,f,this.items["$[]"](p)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var N,F,v,i,w,n,C,X,W,K=e.module,G=e.klass,l=e.hash2,B=e.defs,A=e.def,g=[],T=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),N=g,F=W=[K(g[0],"BCDice")].concat(N),C=[K(W[0],"DiceTable")].concat(F),X=e.$r(C),v=C,w=[i=G(C[0],X("D66GridTable"),"D66HalfGridTable")].concat(v),n=e.$r(w),B(i,"$from_i18n",function(d,H){var M=T;return M=n("I18n").$t(d,l(["locale","raise"],{locale:H,raise:!0})),this.$new(M["$[]"]("name"),M["$[]"]("items_1_2_3"),M["$[]"]("items_4_5_6"))}),A(i,"$initialize",function(d,H,z){return this.name=d,this.items=[H,H,H,z,z,z].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var N,F,v,i,w,n,C,X,W,K=e.module,G=e.klass,l=e.hash2,B=e.defs,A=e.def,g=[],T=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),N=g,F=W=[K(g[0],"BCDice")].concat(N),C=[K(W[0],"DiceTable")].concat(F),X=e.$r(C),v=C,w=[i=G(C[0],X("D66GridTable"),"D66OneThirdTable")].concat(v),n=e.$r(w),B(i,"$from_i18n",function(d,H){var M=T;return M=n("I18n").$t(d,l(["locale","raise"],{locale:H,raise:!0})),this.$new(M["$[]"]("name"),M["$[]"]("items_1_2"),M["$[]"]("items_3_4"),M["$[]"]("items_5_6"))}),A(i,"$initialize",function(d,H,z,M){return this.name=d,this.items=[H,H,z,z,M,M].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var F,J,n,r,d,H,z,v,C,K=e.module,G=e.klass,l=e.hash2,B=e.defs,A=e.def,y=e.eqeqeq,g=e.rb_plus,T=e.rb_times,D=e.truthy,N=[],Y=e.nil,W=e.$$$;return F=N,J=C=[K(N[0],"BCDice")].concat(F),n=v=[K(C[0],"DiceTable")].concat(J),d=[r=G(v[0],null,"D66Table")].concat(n),H=e.$r(d),(z=r.$$prototype).sort_type=z.items=z.name=Y,B(r,"$from_i18n",function(k,x){var u,p=Y;return p=H("I18n").$t(k,l(["locale"],{locale:x})),u=H("D66SortType").$const_get(p["$[]"]("d66_sort_type")),this.$new(p["$[]"]("name"),u,p["$[]"]("items"))}),A(r,"$initialize",function(k,x,f){var p=this;return p.name=k,p.sort_type=x,p.items=f.$freeze()}),A(r,"$roll",function(k){var x=this,f=Y,p=Y,u=Y,h=Y;return f=k.$roll_barabara(2,6),y(W(H("D66SortType"),"ASC"),p=x.sort_type)?f["$sort!"]():y(W(H("D66SortType"),"DESC"),p)&&f["$sort!"]()["$reverse!"](),u=g(T(f["$[]"](0),10),f["$[]"](1)),h=D(p=x.items["$[]"](u))?p:x.items["$[]"](u.$to_s()),D(h["$respond_to?"]("roll"))&&(h=h.$roll(k)),H("RollResult").$new(x.name,u,h)}),A(r,"$choice",function(k){return H("RollResult").$new(this.name,k,this.items["$[]"](k))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var L,s,i,w,X,K=e.module,G=e.klass,l=e.hash2,B=e.send,A=e.to_ary,y=e.rb_plus,g=e.rb_times,T=e.send2,D=e.find_super,N=e.def,W=[],P=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),L=W,s=X=[K(W[0],"BCDice")].concat(L),i=[K(X[0],"DiceTable")].concat(s),w=e.$r(i),N(G(i[0],w("D66Table"),"D66LeftRangeTable"),"$initialize",function H(z,M,k){var p;return H.$$p=null,p=l([],{}),B(k,"each",[],function(h){var c,o;return null==h&&(h=P),c=A(h),o=null==c[1]?P:c[1],B(null==c[0]?P:c[0],"each",[],function(m){return null==m&&(m=P),B(o,"each_with_index",[],function(_,t){var R,q;return null==_&&(_=P),null==t&&(t=P),q=y(g(m,10),y(t,1)),B(p,"[]=",R=[q,_]),R[R.length-1]})})}),T(this,D(this,"initialize",H,!1,!0),"initialize",[z,M,p],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var P,X,w,n,r,d,H,s,L,K=e.module,G=e.klass,l=e.hash2,B=e.defs,A=e.def,y=e.truthy,g=e.rb_minus,T=e.rb_plus,D=e.rb_times,N=[],Y=e.nil;return P=N,X=L=[K(N[0],"BCDice")].concat(P),w=s=[K(L[0],"DiceTable")].concat(X),r=[n=G(s[0],null,"D66ParityTable")].concat(w),d=e.$r(r),(H=n.$$prototype).odd=H.even=H.name=Y,B(n,"$from_i18n",function(M,k){var f=Y;return f=d("I18n").$t(M,l(["locale","raise"],{locale:k,raise:!0})),this.$new(f["$[]"]("name"),f["$[]"]("odd"),f["$[]"]("even"))}),A(n,"$initialize",function(M,k,x){var f=this;return f.name=M,f.odd=k.$freeze(),f.even=x.$freeze()}),A(n,"$roll",function(M){var f,u,h,k=this,x=Y;return x=M.$roll_once(6),f=M.$roll_once(6),u=(y(x["$odd?"]())?k.odd:k.even)["$[]"](g(f,1)),h=T(D(x,10),f),d("RollResult").$new(k.name,h,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var N,F,s,v,i,w,n,C,W,K=e.module,G=e.klass,l=e.def,B=e.rb_plus,A=e.rb_times,y=e.send,g=[],T=e.nil;return N=g,F=W=[K(g[0],"BCDice")].concat(N),s=C=[K(W[0],"DiceTable")].concat(F),i=[v=G(C[0],null,"D66RangeTable")].concat(s),w=e.$r(i),(n=v.$$prototype).items=n.name=T,l(v,"$initialize",function(d,H){return this.name=d,this.items=H.$freeze()}),l(v,"$roll",function(d){var z,M,k,x=T;return z=d.$roll_once(6),M=d.$roll_once(6),k=B(A(z,10),M),x=y(this.items,"find",[],function(p){return null==p&&(p=T),p["$[]"](0)["$include?"](k)}),w("RollResult").$new(this.name,k,x["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var L,s,r,k,f,p,d,H,z,M,i,X,K=e.module,G=e.klass,l=e.const_set,B=e.send,A=e.hash2,y=e.def,g=e.eqeqeq,T=e.truthy,D=e.to_a,N=e.rb_times,Y=e.rb_plus,W=[],P=e.nil;return L=W,s=X=[K(W[0],"BCDice")].concat(L),r=i=[K(X[0],"DiceTable")].concat(s),H=[d=G(i[0],null,"RangeTable")].concat(r),z=e.$r(H),(M=d.$$prototype).name=M.items=M.num_of_dice=M.num_of_sides=M.formatter=P,l(H[0],"RollResult",B(z("Struct"),"new",["sum","values","content","formatted"],function k(){return(null==k.$$s?this:k.$$s).$alias_method("to_s","formatted")},{$$s:d})),l(H[0],"Item",z("Struct").$new("range","content")),l(H[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),l(H[0],"DEFAULT_FORMATTER",B(d,"lambda",[],function(x,f){return null==x&&(x=P),null==f&&(f=P),x.$name()+"("+f.$sum()+") \uff1e "+f.$content()})),d.$attr_reader("name"),d.$attr_reader("num_of_dice"),d.$attr_reader("num_of_sides"),f=[k=e.get_singleton_class(d)].concat(H),p=e.$r(f),y(k,"$from_i18n",function(h,c){var o,j=P;return j=p("I18n").$t(h,A(["locale"],{locale:c})),o=B(j["$[]"]("items"),"map",[],function $(m){return null==m&&(m=P),[(null==$.$$s?this:$.$$s).$conv_string_range(m["$[]"](0)),m["$[]"](1)]},{$$s:this}),this.$new(j["$[]"]("name"),j["$[]"]("type"),o)}),y(k,"$conv_string_range",function(h){var E,c=this;return null==c.name&&(c.name=P),g(p("Integer"),E=h)?h:g(p("String"),E)?T(h["$include?"](".."))?B(p("Range"),"new",D(B(h.$split("..",2),"map",[],function j(o){return null==o&&(o=P),(null==j.$$s?this:j.$$s).$Integer(o)},{$$s:c}))):c.$Integer(h):c.$raise(p("TypeError"),c.name+": "+h+" ("+h.$class()+") must be a String or an Integer")}),y(d,"$initialize",function k(x,f,p){var c,u=k.$$p||P,h=this,E=P;return k.$$p=null,h.name=x.$freeze(),h.formatter=T(c=u)?c:z("DEFAULT_FORMATTER"),E=z("DICE_ROLL_METHOD_RE").$match(f),T(E)||h.$raise(z("ArgumentError"),h.name+": invalid dice roll method: "+f),h.num_of_dice=E["$[]"](1).$to_i(),h.num_of_sides=E["$[]"](2).$to_i(),h.$store(p)}),y(d,"$fetch",function(x){var p,f=this;return p=B(f.items,"find",[],function(h){return null==h&&(h=P),h.$range()["$include?"](x)}),T(p)||f.$raise(z("RangeError"),f.name+": value is out of range: "+x),p}),y(d,"$roll",function(x){var u,f=this,p=P,h=P;return u=(p=x.$roll_barabara(f.num_of_dice,f.num_of_sides)).$sum(),(h=z("RollResult").$new(u,p,f.$fetch(u).$content()))["$formatted="](f.formatter["$[]"](f,h)),h}),d.$private(),y(d,"$store",function(x){var p,u,f=this;return p=B(x,"map",[],function h(c,E){return null==c&&(c=P),null==E&&(E=P),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(c),E]},{$$s:f}),u=B(p,"sort_by",[],function(c,E){return null==c&&(c=P),null==E&&(E=P),c.$min()}),f.$assert_min_sum_is_covered(u),f.$assert_max_sum_is_covered(u),f.$assert_no_gap_or_overlap_in_ranges(u),f.items=B(u,"map",[],function(c,E){return null==c&&(c=P),null==E&&(E=P),z("Item").$new(c,E.$freeze()).$freeze()}).$freeze(),f}),y(d,"$coerce_to_int_range",function(x){var p;return g(z("Integer"),p=x)?z("Range").$new(x,x):g(z("Range"),p)&&T(x.$begin()["$is_a?"](z("Integer")))&&T(x.$end()["$is_a?"](z("Integer")))?x:this.$raise(z("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),y(d,"$assert_min_sum_is_covered",function(x){var p,f=this,u=P;return p=f.num_of_dice,u=x.$first()["$[]"](0),T(u["$include?"](p))||f.$raise(z("RangeError"),f.name+": min value ("+p+") is not covered: "+u),f}),y(d,"$assert_max_sum_is_covered",function(x){var p,f=this,u=P;return p=N(f.num_of_dice,f.num_of_sides),u=x.$last()["$[]"](0),T(u["$include?"](p))||f.$raise(z("RangeError"),f.name+": max value ("+p+") is not covered: "+u),f}),y(d,"$assert_no_gap_or_overlap_in_ranges",function(x){return B(x,"each_cons",[2],function p(u,h){var o,$,c=null==p.$$s?this:p.$$s,E=P,j=P;return null==c.name&&(c.name=P),null==u&&(u=P),null==h&&(h=P),E=u["$[]"](0),j=h["$[]"](0),o=E.$max(),$=Y(o,1),T(j["$include?"](o))&&c.$raise(z("RangeError"),c.name+": Range overlap: "+E+" and "+j),T(j["$include?"]($))?P:c.$raise(z("RangeError"),c.name+": Range gap: "+E+" and "+j)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var Y,L,v,d,H,z,M,w,X,P,K=e.module,G=e.klass,l=e.send,B=e.def,A=e.rb_minus,y=e.return_ivar,g=[],T=e.nil,D=e.$$$;return Y=g,L=P=[K(g[0],"BCDice")].concat(Y),v=X=[K(P[0],"DiceTable")].concat(L),d=w=[G(X[0],null,"SaiFicSkillTable")].concat(v),z=[H=G(w[0],null,"Category")].concat(d),M=e.$r(z),B(H,"$initialize",function(x,f,p,u){var h=this;return h.name=x,h.skills=l(f.$map(),"with_index",[2],function(E,j){return null==E&&(E=T),null==j&&(j=T),D(M("SaiFicSkillTable"),"Skill").$new(x,E,p,j,u)}),h.dice=p}),B(H,"$roll",function(x){return this.$skills()["$[]"](A(x.$roll_sum(2,6),2))}),B(H,"$to_s",y("name")),H.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var T,W,X,w,n,s,F,N,K=e.module,G=e.klass,l=e.def,B=e.hash2,A=[],y=e.nil;return T=A,W=N=[K(A[0],"BCDice")].concat(T),X=F=[K(N[0],"DiceTable")].concat(W),s=[G(F[0],null,"SaiFicSkillTable")].concat(X),(n=(w=G(s[0],null,"Skill")).$$prototype).s_format=n.category_dice=n.row_dice=n.category_name=n.name=y,l(w,"$initialize",function(d,H,z,M,k){var x=this;return x.category_name=d,x.name=H,x.category_dice=z,x.row_dice=M,x.s_format=k}),l(w,"$to_s",function(){var d=this;return d.$format(d.s_format,B(["category_dice","row_dice","category_name","skill_name"],{category_dice:d.category_dice,row_dice:d.row_dice,category_name:d.category_name,skill_name:d.name}))}),w.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var s,n,M,k,x,f,p,d,i,K=e.module,G=e.klass,l=e.ensure_kwargs,B=e.hash2,A=e.send,g=e.defs,T=e.const_set,D=e.to_ary,N=e.def,Y=e.truthy,W=e.rb_minus,P=e.rb_plus,F=e.top,L=[],C=e.nil,X=e.$$$;return F.$require("bcdice/dice_table/sai_fic_skill_table/category"),F.$require("bcdice/dice_table/sai_fic_skill_table/skill"),s=L,n=i=[K(L[0],"BCDice")].concat(s),M=d=[K(i[0],"DiceTable")].concat(n),x=[k=G(d[0],null,"SaiFicSkillTable")].concat(M),f=e.$r(x),(p=k.$$prototype).rtt=p.rtt_format=p.rct=p.rct_format=p.rttn=p.rttn_format=p.categories=C,g(k,"$from_i18n",function(h,c,E){var j,o,$,t,_=C;return null==(j=(E=l(E)).$$smap.rtt)&&(j=C),null==(o=E.$$smap.rct)&&(o=C),null==($=E.$$smap.rttn)&&($=C),t=(_=f("I18n").$t("RTT",B(["locale","raise","default"],{locale:c,raise:!1,default:B([],{})})).$merge(f("I18n").$t(h,B(["locale","raise"],{locale:c,raise:!0}))))["$[]"]("items"),_=A(_,"select",[],function(q,S){return null==q&&(q=C),null==S&&(S=C),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](q)}),this.$new(t,e.to_hash(_).$merge(B(["rtt","rct","rttn"],{rtt:j,rct:o,rttn:$})))},-3),T(x[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),T(x[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),T(x[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),T(x[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),N(k,"$initialize",function(h,c){var E,j,o,$,m,a,_,t=this;return null==(E=(c=l(c)).$$smap.rtt)&&(E=C),null==(j=c.$$smap.rct)&&(j=C),null==(o=c.$$smap.rttn)&&(o=C),null==($=c.$$smap.rtt_format)&&($=f("DEFAULT_RTT")),null==(m=c.$$smap.rct_format)&&(m=f("DEFAULT_RCT")),null==(a=c.$$smap.rttn_format)&&(a=f("DEFAULT_RTTN")),null==(_=c.$$smap.s_format)&&(_=f("DEFAULT_S")),t.categories=A(h.$map(),"with_index",[1],function(q,S){var U,ee,V;return null==q&&(q=C),null==S&&(S=C),ee=null==(U=D(q))[0]?C:U[0],V=null==U[1]?C:U[1],X(f("SaiFicSkillTable"),"Category").$new(ee,V,S,_)},{$$has_top_level_mlhs_arg:!0}),t.rtt=E,t.rct=j,t.rttn=o.$to_a(),t.rtt_format=$,t.rct_format=m,t.rttn_format=a},-2),T(x[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),k.$attr_reader("categories"),N(k,"$roll_command",function(h,c){var j,E=this,o=C,$=C;return Y(["RTT",E.rtt]["$include?"](j=c))?E.$format_skill(E.rtt_format,E.$roll_skill(h)):Y(["RCT",E.rct]["$include?"](j))?(o=E.$roll_category(h),E.$format(E.rct_format,B(["category_dice","category_name"],{category_dice:o.$dice(),category_name:o.$name()}))):Y($=f("RTTN").$index(j))||Y($=E.rttn.$index(j))?E.$format_skill(E.rttn_format,E.categories["$[]"]($).$roll(h)):C}),N(k,"$roll_category",function(h){return this.categories["$[]"](W(h.$roll_once(6),1))}),N(k,"$roll_skill",function(h){return this.$roll_category(h).$roll(h)}),N(k,"$prefixes",function(){var h=this;return P(["RTT[1-6]?","RCT",h.rtt,h.rct],h.rttn).$compact()}),k.$private(),N(k,"$format_skill",function(h,c){return this.$format(h,B(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:c.$category_dice(),row_dice:c.$row_dice(),category_name:c.$category_name(),skill_name:c.$name(),text:c.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var Y,L,v,i,w,n,r,X,P,K=e.module,G=e.klass,l=e.hash2,B=e.defs,A=e.truthy,y=e.def,g=e.rb_minus,T=[],D=e.nil;return Y=T,L=P=[K(T[0],"BCDice")].concat(Y),v=X=[K(P[0],"DiceTable")].concat(L),w=[i=G(X[0],null,"Table")].concat(v),n=e.$r(w),(r=i.$$prototype).times=r.sides=r.name=r.items=D,B(i,"$from_i18n",function(H,z){var k=D;return k=n("I18n").$t(H,l(["locale"],{locale:z})),this.$new(k["$[]"]("name"),k["$[]"]("type"),k["$[]"]("items"))}),y(i,"$initialize",function(H,z,M){var k=this,x=D;return k.name=H,k.items=M.$freeze(),x=/(\d+)D(\d+)/i.$match(z),A(x)||k.$raise(n("ArgumentError"),"Unexpected table type: "+z),k.times=x["$[]"](1).$to_i(),k.sides=x["$[]"](2).$to_i()}),y(i,"$roll",function(H){var M,z=this;return M=H.$roll_sum(z.times,z.sides),z.$choice(M)}),y(i,"$choice",function(H){var M,z=this;return M=g(H,z.times),n("RollResult").$new(z.name,H,z.items["$[]"](M))})},Opal.modules["bcdice/dice_table"]=function(e){var K=e.top;return K.$require("bcdice/dice_table/roll_result"),K.$require("bcdice/dice_table/chain_table"),K.$require("bcdice/dice_table/d66_grid_table"),K.$require("bcdice/dice_table/d66_half_grid_table"),K.$require("bcdice/dice_table/d66_one_third_table"),K.$require("bcdice/dice_table/d66_left_range_table"),K.$require("bcdice/dice_table/d66_parity_table"),K.$require("bcdice/dice_table/d66_range_table"),K.$require("bcdice/dice_table/d66_table"),K.$require("bcdice/dice_table/range_table"),K.$require("bcdice/dice_table/sai_fic_skill_table"),K.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var y,N,W,T,K=e.module,G=e.const_set,l=[];return y=l,N=T=[K(l[0],"BCDice")].concat(y),W=[K(T[0],"D66SortType")].concat(N),G(W[0],"NO_SORT","no_sort"),G(W[0],"ASC","asc"),G(W[0],"DESC","desc"),function(D,N){var W=[K(D,"RoundType")].concat(N);return G(W[0],"CEIL","ceil"),G(W[0],"FLOOR","floor"),G(W[0],"ROUND","round")}(T[0],T)},Opal.modules["bcdice/translate"]=function(e){var N,F,L,C,X,W,K=e.module,G=e.ensure_kwargs,l=e.kwrestargs,A=e.hash2,y=e.def,g=[],T=e.nil;return N=g,F=W=[K(g[0],"BCDice")].concat(N),C=[L=K(W[0],"Translate")].concat(F),X=e.$r(C),y(L,"$translate",function(s,v){var i,w=this;return null==w.locale&&(w.locale=T),v=G(v),i=l(v,{}),X("I18n").$translate(s,A(["locale","raise"],{locale:w.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var L,J,C,N,W,G=e.klass,l=e.send,B=e.def,A=e.return_val,y=e.return_ivar,g=[],T=e.nil;return N=g,L=W=[(0,e.module)(g[0],"BCDice")].concat(N),[C=G(W[0],null,"Result")].concat(L),B(J=e.get_singleton_class(C),"$success",function(i){return l(this.$new(),"tap",[],function(r){var d;return null==r&&(r=T),r["$text="](i),l(r,"success=",d=[!0]),d[d.length-1]})}),B(J,"$failure",function(i){return l(this.$new(),"tap",[],function(r){var d;return null==r&&(r=T),r["$text="](i),l(r,"failure=",d=[!0]),d[d.length-1]})}),B(J,"$critical",function(i){return l(this.$new(),"tap",[],function(r){var d;return null==r&&(r=T),r["$text="](i),r["$critical="](!0),l(r,"success=",d=[!0]),d[d.length-1]})}),B(J,"$fumble",function(i){return l(this.$new(),"tap",[],function(r){var d;return null==r&&(r=T),r["$text="](i),r["$fumble="](!0),l(r,"failure=",d=[!0]),d[d.length-1]})}),B(J,"$nothing",A("nothing")),B(C,"$initialize",function(s){var v=this;return null==s&&(s=T),v.text=s,v.rands=T,v.detailed_rands=T,v.secret=!1,v.success=!1,v.failure=!1,v.critical=!1,v.fumble=!1},-1),C.$attr_accessor("text","rands","detailed_rands"),C.$attr_writer("secret","success","failure","critical","fumble"),B(C,"$secret?",y("secret")),B(C,"$success?",y("success")),B(C,"$failure?",y("failure")),B(C,"$critical?",y("critical")),B(C,"$fumble?",y("fumble")),B(C,"$condition=",function(s){return this.success=s,this.failure=s["$!"]()})},Opal.modules["racc/parser"]=function(e){var H,M,k,K=e.module,G=e.klass,l=e.truthy,B=e.const_set,A=e.defs,y=e.gvars,g=e.rb_lt,T=e.def,D=e.to_ary,N=e.send,Y=e.neqeq,W=e.rb_plus,P=e.eqeq,F=e.rb_ge,L=e.rb_gt,C=e.rb_minus,X=e.rb_le,J=e.rb_times,s=e.assign_ivar_val,i=[],w=e.$r(i),n=e.nil,r=e.$$$;return H=i,M=[K(i[0],"Racc")].concat(H),k=e.$r(M),G(M[0],k("StandardError"),"ParseError"),l(r("::","ParseError","skip_raise")?"constant":n)||B(i[0],"ParseError",r(w("Racc"),"ParseError")),function(d,H){var u,h,c,E,j,k=[K(d,"Racc")].concat(H),x=e.$r(k);return l(x("Racc_No_Extensions","skip_raise")?"constant":n)||B(k[0],"Racc_No_Extensions",!1),u=k,c=[h=G(k[0],null,"Parser")].concat(u),E=e.$r(c),(j=h.$$prototype).yydebug=j.racc_debug_out=j.racc_error_status=j.racc_t=j.racc_vstack=j.racc_val=j.racc_state=j.racc_tstack=n,B(c[0],"Racc_Runtime_Version","1.4.6"),B(c[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),B(c[0],"Racc_Runtime_Core_Version_R","1.4.6"),B(c[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),B(c[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),B(c[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),B(c[0],"Racc_Runtime_Core_Version",E("Racc_Runtime_Core_Version_R")),B(c[0],"Racc_Runtime_Core_Revision",E("Racc_Runtime_Core_Revision_R")),B(c[0],"Racc_Runtime_Type","ruby"),A(E("Parser"),"$racc_runtime_type",function(){return E("Racc_Runtime_Type")}),T(h,"$_racc_setup",function(){var $,m,a=this,_=n,t=n;return null==y.stderr&&(y.stderr=n),l(r(a.$class(),"Racc_debug_parser"))||(a.yydebug=!1),l(null!=($=a.yydebug)&&$!==n?"instance-variable":n)||(a.yydebug=!1),l(a.yydebug)&&(l(null!=(m=a.racc_debug_out)&&m!==n?"instance-variable":n)||(a.racc_debug_out=y.stderr),a.racc_debug_out=l(_=a.racc_debug_out)?_:y.stderr),t=r(a.$class(),"Racc_arg"),l(g(t.$size(),14))&&t["$[]="](13,!0),t}),T(h,"$_racc_init_sysvars",function(){var $=this;return $.racc_state=[0],$.racc_tstack=[],$.racc_vstack=[],$.racc_t=n,$.racc_val=n,$.racc_read_next=!0,$.racc_user_yyerror=!1,$.racc_error_status=0}),T(h,"$do_parse",function(){return this.$__send__(E("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),T(h,"$next_token",function(){return this.$raise(E("NotImplementedError"),this.$class()+"#next_token is not defined")}),T(h,"$_racc_do_parse_rb",function($,m){var a,t=this,R=n,q=n,S=n,U=n,ee=n,V=n,O=n,te=n;return a=D($),R=null==a[0]?n:a[0],q=null==a[1]?n:a[1],S=null==a[2]?n:a[2],U=null==a[3]?n:a[3],ee=null==a[10]?n:a[10],t.$_racc_init_sysvars(),V=O=te=n,N(t,"catch",["racc_end_parse"],function ne(){var ie,Z,b=null==ne.$$s?this:ne.$$s,re=n;for(null==b.racc_state&&(b.racc_state=n),null==b.racc_read_next&&(b.racc_read_next=n),null==b.racc_t&&(b.racc_t=n),null==b.yydebug&&(b.yydebug=n),null==b.racc_val&&(b.racc_val=n);l(!0);)for(l(te=U["$[]"](b.racc_state["$[]"](-1)))?(l(b.racc_read_next)&&Y(b.racc_t,0)&&(Z=b.$next_token(),ie=D(Z),V=null==ie[0]?n:ie[0],b.racc_val=null==ie[1]?n:ie[1],b.racc_t=l(V)?l(re=ee["$[]"](V))?re:1:0,l(b.yydebug)&&b.$racc_read_token(b.racc_t,V,b.racc_val),b.racc_read_next=!1),te=W(te,b.racc_t),l(F(te,0))&&l(O=R["$[]"](te))&&P(q["$[]"](te),b.racc_state["$[]"](-1))||(O=S["$[]"](b.racc_state["$[]"](-1)))):O=S["$[]"](b.racc_state["$[]"](-1));l(O=b.$_racc_evalact(O,$)););},{$$s:t})}),T(h,"$yyparse",function($,m){return this.$__send__(E("Racc_YY_Parse_Method"),$,m,this.$_racc_setup(),!0)}),T(h,"$_racc_yyparse_rb",function($,m,a,_){var t,q=this,S=n,U=n,Q=n,ee=n,O=n,te=n,ne=n;return t=D(a),S=null==t[0]?n:t[0],U=null==t[1]?n:t[1],Q=null==t[2]?n:t[2],ee=null==t[3]?n:t[3],O=null==t[10]?n:t[10],q.$_racc_init_sysvars(),te=n,ne=n,N(q,"catch",["racc_end_parse"],function ie(){var Z=null==ie.$$s?this:ie.$$s;for(null==Z.racc_state&&(Z.racc_state=n);!l(ne=ee["$[]"](Z.racc_state["$[]"](-1)));)for(;l(te=Z.$_racc_evalact(Q["$[]"](Z.racc_state["$[]"](-1)),a)););return N($,"__send__",[m],function b(re,$e){var I=null==b.$$s?this:b.$$s,se=n,ce=n;for(null==I.racc_t&&(I.racc_t=n),null==I.racc_state&&(I.racc_state=n),null==I.racc_read_next&&(I.racc_read_next=n),null==re&&(re=n),null==$e&&($e=n),I.racc_t=l(re)?l(se=O["$[]"](re))?se:1:0,I.racc_val=$e,I.racc_read_next=!1,ne=W(ne,I.racc_t),l(F(ne,0))&&l(te=S["$[]"](ne))&&P(U["$[]"](ne),I.racc_state["$[]"](-1))||(te=Q["$[]"](I.racc_state["$[]"](-1)));l(te=I.$_racc_evalact(te,a)););for(;l(l(se=l(ce=(ne=ee["$[]"](I.racc_state["$[]"](-1)))["$!"]())?ce:I.racc_read_next["$!"]())?se:I.racc_t["$=="](0));)for(l(ne)&&l(ne=W(ne,I.racc_t))&&l(F(ne,0))&&l(te=S["$[]"](ne))&&P(U["$[]"](ne),I.racc_state["$[]"](-1))||(te=Q["$[]"](I.racc_state["$[]"](-1)));l(te=I.$_racc_evalact(te,a)););},{$$s:Z})},{$$s:q})}),T(h,"$_racc_evalact",function($,m){var a,Q,t=this,R=n,q=n,U=n,ee=n,V=n,O=n;if(R=null==(a=D(m))[0]?n:a[0],q=null==a[1]?n:a[1],U=null==a[3]?n:a[3],Q=null==a[11]?n:a[11],ee=null==a[12]?n:a[12],l(L($,0))&&l(g($,Q)))l(L(t.racc_error_status,0))&&(P(t.racc_t,1)||(t.racc_error_status=C(t.racc_error_status,1))),t.racc_vstack.$push(t.racc_val),t.racc_state.$push($),t.racc_read_next=!0,l(t.yydebug)&&(t.racc_tstack.$push(t.racc_t),t.$racc_shift(t.racc_t,t.racc_tstack,t.racc_vstack));else if(l(g($,0))&&l(L($,ee["$-@"]()))){if(V=N(t,"catch",["racc_jump"],function te(){var ne=null==te.$$s?this:te.$$s;return null==ne.racc_state&&(ne.racc_state=n),ne.racc_state.$push(ne.$_racc_do_reduce(m,$)),!1},{$$s:t}),l(V))switch(V.valueOf()){case 1:return t.racc_user_yyerror=!0,ee["$-@"]();case 2:return Q;default:t.$raise("[Racc Bug] unknown jump code")}}else if(P($,Q))l(t.yydebug)&&t.$racc_accept(),t.$throw("racc_end_parse",t.racc_vstack["$[]"](0));else{if(P($,ee["$-@"]())){switch(t.racc_error_status.valueOf()){case 0:l(m["$[]"](21))||t.$on_error(t.racc_t,t.racc_val,t.racc_vstack);break;case 3:P(t.racc_t,0)&&t.$throw("racc_end_parse",n),t.racc_read_next=!0}for(t.racc_user_yyerror=!1,t.racc_error_status=3;l(!0)&&!(l(O=U["$[]"](t.racc_state["$[]"](-1)))&&(O=W(O,1),l(F(O,0))&&l($=R["$[]"](O))&&P(q["$[]"](O),t.racc_state["$[]"](-1))));)l(X(t.racc_state.$size(),1))&&t.$throw("racc_end_parse",n),t.racc_state.$pop(),t.racc_vstack.$pop(),l(t.yydebug)&&(t.racc_tstack.$pop(),t.$racc_e_pop(t.racc_state,t.racc_tstack,t.racc_vstack));return $}t.$raise("[Racc Bug] unknown action "+$.$inspect())}return l(t.yydebug)&&t.$racc_next_state(t.racc_state["$[]"](-1),t.racc_state),n}),T(h,"$_racc_do_reduce",function($,m){var a,ee,O,re,$e,I,ue,t=this,q=n,S=n,U=n,Q=n,V=n,te=n,ne=n,ie=n,Z=n,b=n,se=n,ce=n,ae=n;return q=null==(a=D($))[4]?n:a[4],S=null==a[5]?n:a[5],U=null==a[6]?n:a[6],Q=null==a[7]?n:a[7],ee=null==a[8]?n:a[8],V=null==a[9]?n:a[9],O=null==a[13]?n:a[13],te=t.racc_state,ne=t.racc_vstack,ie=t.racc_tstack,Z=J(m,-3),b=V["$[]"](Z),re=V["$[]"](W(Z,1)),$e=V["$[]"](W(Z,2)),I=[],l(t.yydebug)&&(se=ie["$[]"](b["$-@"](),b)),ce=ne["$[]"](b["$-@"](),b),l(t.yydebug)&&ie["$[]="](b["$-@"](),b,I),ne["$[]="](b["$-@"](),b,I),te["$[]="](b["$-@"](),b,I),l(O)?ne.$push(t.$__send__($e,ce,ne,ce["$[]"](0))):ne.$push(t.$__send__($e,ce,ne)),ie.$push(re),l(t.yydebug)&&t.$racc_reduce(se,re,ie,ne),ue=C(re,ee),l(Z=Q["$[]"](ue))&&(Z=W(Z,te["$[]"](-1)),l(F(Z,0))&&l(ae=q["$[]"](Z))&&P(S["$[]"](Z),ue))?ae:U["$[]"](ue)}),T(h,"$on_error",function($,m,a){var t,_=this;return _.$raise(E("ParseError"),_.$sprintf("\nparse error on value %s (%s)",m.$inspect(),l(t=_.$token_to_str($))?t:"?"))}),T(h,"$yyerror",function(){return this.$throw("racc_jump",1)}),T(h,"$yyaccept",function(){return this.$throw("racc_jump",2)}),T(h,"$yyerrok",s("racc_error_status",0)),T(h,"$racc_read_token",function($,m,a){var _=this;return _.racc_debug_out.$print("read    "),_.racc_debug_out.$print(m.$inspect(),"(",_.$racc_token2str($),") "),_.racc_debug_out.$puts(a.$inspect()),_.racc_debug_out.$puts()}),T(h,"$racc_shift",function($,m,a){var _=this;return _.racc_debug_out.$puts("shift   "+_.$racc_token2str($)),_.$racc_print_stacks(m,a),_.racc_debug_out.$puts()}),T(h,"$racc_reduce",function($,m,a,_){var t=this,R=n;return(R=t.racc_debug_out).$print("reduce "),l($["$empty?"]())?R.$print(" <none>"):N($,"each",[],function q(S){return null==S&&(S=n),R.$print(" ",(null==q.$$s?this:q.$$s).$racc_token2str(S))},{$$s:t}),R.$puts(" --\x3e "+t.$racc_token2str(m)),t.$racc_print_stacks(a,_),t.racc_debug_out.$puts()}),T(h,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),T(h,"$racc_e_pop",function($,m,a){var _=this;return _.racc_debug_out.$puts("error recovering mode: pop token"),_.$racc_print_states($),_.$racc_print_stacks(m,a),_.racc_debug_out.$puts()}),T(h,"$racc_next_state",function($,m){var a=this;return a.racc_debug_out.$puts("goto    "+$),a.$racc_print_states(m),a.racc_debug_out.$puts()}),T(h,"$racc_print_stacks",function($,m){var _=n;return(_=this.racc_debug_out).$print("        ["),N($,"each_index",[],function t(R){return null==R&&(R=n),_.$print(" (",(null==t.$$s?this:t.$$s).$racc_token2str($["$[]"](R))," ",m["$[]"](R).$inspect(),")")},{$$s:this}),_.$puts(" ]")}),T(h,"$racc_print_states",function($){var a=n;return(a=this.racc_debug_out).$print("        ["),N($,"each",[],function(t){return null==t&&(t=n),a.$print(" ",t)}),a.$puts(" ]")}),T(h,"$racc_token2str",function($){var a;return l(a=r(this.$class(),"Racc_token_to_s_table")["$[]"]($))?a:this.$raise("[Racc Bug] can't convert token "+$+" to string")}),T(h,"$token_to_str",function($){return r(this.$class(),"Racc_token_to_s_table")["$[]"]($)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var s,n,z,u,h,k,x,d,i,K=e.module,G=e.klass,l=e.def,B=e.thrower,A=e.return_ivar,y=e.send2,g=e.find_super,T=e.eqeq,D=e.const_set,N=e.eqeqeq,Y=e.rb_divide,W=e.truthy,P=e.assign_ivar,F=e.alias,L=[],C=e.nil,X=e.$$$;return s=L,n=i=[K(L[0],"BCDice")].concat(s),z=d=[K(i[0],"Arithmetic")].concat(n),k=[K(d[0],"Node")].concat(z),x=e.$r(k),(h=(u=G(k[0],null,"BinaryOp")).$$prototype).lhs=h.rhs=h.op=C,l(u,"$initialize",function(E,j,o){var $=this;return $.lhs=E,$.op=j,$.rhs=o}),l(u,"$eval",function(E){try{B("eval_return");var m,o=this,$=C;return $=o.lhs.$eval(E),m=o.rhs.$eval(E),$.$send(o.op,m)}catch(a){if(a===e.t_eval_return)return a.$v;throw a}}),l(u,"$output",function(){var E=this;return""+E.lhs.$output()+E.op+E.rhs.$output()}),l(u,"$s_exp",function(){var E=this;return"("+E.$op_for_s_exp()+" "+E.lhs.$s_exp()+" "+E.rhs.$s_exp()+")"}),l(u,"$op_for_s_exp",A("op")),function(f,p,u){var h=G(f,p,"DivideBase"),c=[h].concat(u),E=e.$r(c),j=h.$$prototype;j.lhs=j.rhs=j.op=C,l(h,"$initialize",function o($,m){return o.$$p=null,y(this,g(this,"initialize",o,!1,!0),"initialize",[$,"/",m],null)}),l(h,"$eval",function($){try{B("eval_return");var _,t,a=this;return _=a.lhs.$eval($),t=a.rhs.$eval($),T(t,0)&&a.$raise(E("ZeroDivisionError")),a.$divide_and_round(_,t,$)}catch(R){if(R===e.t_eval_return)return R.$v;throw R}}),l(h,"$output",function o(){var $=o.$$p||C,m=this;return o.$$p=null,""+y(m,g(m,"output",o,!1,!0),"output",[],$)+m.$rounding_method()}),h.$private(),l(h,"$rounding_method",function(){return X(this.$class(),"ROUNDING_METHOD")}),l(h,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),l(h,"$divide_and_round",function($,m,a){return this.$raise(E("NotImplementedError"))})}(k[0],x("BinaryOp"),k),function(f,p,u){var h=G(f,p,"DivideWithGameSystemDefault"),c=[h].concat(u),E=e.$r(c);D(c[0],"ROUNDING_METHOD",""),h.$private(),l(h,"$divide_and_round",function(o,$,m){var a,_=C;return N(X(E("RoundType"),"CEIL"),a=m)?Y(o.$to_f(),$).$ceil():N(X(E("RoundType"),"ROUND"),a)?(_=Y(o.$to_f(),$),W(_["$negative?"]())?_.$abs().$round()["$-@"]():_.$round()):Y(o,$).$floor()})}(k[0],x("DivideBase"),k),function(f,p,u){var h=G(f,p,"DivideWithCeil"),c=[h].concat(u);D(c[0],"ROUNDING_METHOD","C"),h.$private(),l(h,"$divide_and_round",function(j,o,$){return Y(j.$to_f(),o).$ceil()})}(k[0],x("DivideBase"),k),function(f,p,u){var h=G(f,p,"DivideWithRound"),c=[h].concat(u);D(c[0],"ROUNDING_METHOD","R"),h.$private(),l(h,"$divide_and_round",function(j,o,$){var m=C;return m=Y(j.$to_f(),o),W(m["$negative?"]())?m.$abs().$round()["$-@"]():m.$round()})}(k[0],x("DivideBase"),k),function(f,p,u){var h=G(f,p,"DivideWithFloor"),c=[h].concat(u);D(c[0],"ROUNDING_METHOD","F"),h.$private(),l(h,"$divide_and_round",function(j,o,$){return Y(j,o).$floor()})}(k[0],x("DivideBase"),k),function(f,p){var u=G(f,null,"Negative");u.$$prototype.body=C,l(u,"$initialize",P("body")),l(u,"$eval",function(E){try{return B("eval_return"),this.body.$eval(E)["$-@"]()}catch($){if($===e.t_eval_return)return $.$v;throw $}}),l(u,"$output",function(){return"-"+this.body.$output()}),l(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(k[0]),function(f,p){var u=G(f,null,"Parenthesis");u.$$prototype.expr=C,l(u,"$initialize",P("expr")),l(u,"$eval",function(E){try{return B("eval_return"),this.expr.$eval(E)}catch($){if($===e.t_eval_return)return $.$v;throw $}}),l(u,"$output",function(){return"("+this.expr.$output()+")"}),l(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(k[0]),function(f,p){var u=G(f,null,"Number");return u.$$prototype.value=C,l(u,"$initialize",P("value")),l(u,"$eval",A("value")),l(u,"$output",function(){return this.value.$to_s()}),F(u,"s_exp","output")}(k[0])},Opal.modules.strscan=function(e){var P,F,L,C,X,G=e.def,l=e.truthy,B=e.eqeqeq,A=e.Opal,y=e.return_ivar,g=e.send,T=e.alias,D=[],N=e.nil;return P=D,L=[F=(0,e.klass)(D[0],null,"StringScanner")].concat(P),C=e.$r(L),(X=F.$$prototype).pos=X.string=X.working=X.matched=X.prev_pos=X.match=N,F.$attr_reader("pos","matched"),G(F,"$initialize",function(s){var v=this;return v.string=s,v.pos=0,v.matched=N,v.working=s,v.match=[]}),F.$attr_reader("string"),G(F,"$beginning_of_line?",function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)}),G(F,"$scan",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return null==i?v.matched=N:(v.prev_pos=v.pos,v.pos+=i[0].length,v.working=v.working.substring(i[0].length),v.matched=i[0],v.match=i,i[0])}),G(F,"$scan_until",function(s){var v=this;s=v.$anchor(s);for(var i=v.working,w=0;i.length!=w;++w){var n=s.exec(i.substr(w));if(null!==n){var r=w+n[0].length,d=i.substr(0,r);return v.matched=n[0],v.match=n,v.prev_pos=v.pos+w,v.pos+=r,v.working=i.substr(r),d}}return v.matched=N}),G(F,"$[]",function(s){var i;if(l(this.match["$empty?"]()))return N;B(C("Symbol"),i=s)?s=s.$to_s():B(C("String"),i)||(s=A["$coerce_to!"](s,C("Integer"),"to_int"));var w=this.match;return s<0&&(s+=w.length),s<0||s>=w.length||null==w[s]?N:w[s]}),G(F,"$check",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return v.matched=null==i?N:i[0]}),G(F,"$check_until",function(s){var v=this,i=v.prev_pos,w=v.pos,n=v.working,r=v.$scan_until(s);return v.prev_pos=i,v.pos=w,v.working=n,r}),G(F,"$peek",function(s){return this.working.substring(0,s)}),G(F,"$eos?",function(){return 0===this.working.length}),G(F,"$exist?",function(s){var i=s.exec(this.working);return null==i?N:0==i.index?0:i.index+1}),G(F,"$skip",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);if(null==i)return v.match=[],v.matched=N;var w=i[0],n=w.length;return v.matched=w,v.match=i,v.prev_pos=v.pos,v.pos+=n,v.working=v.working.substring(n),n}),G(F,"$skip_until",function(s){var i=this.$scan_until(s);return i===N?N:(this.matched=i.substr(-1),i.length)}),G(F,"$get_byte",function(){var s=this,v=N;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,v=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=N,v}),G(F,"$match?",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return null==i?N:(v.prev_pos=v.pos,i[0].length)}),G(F,"$pos=",function(s){var v=this;return s<0&&(s+=v.string.$length()),v.pos=s,v.working=v.string.slice(s)}),G(F,"$matched_size",function(){return this.matched===N?N:this.matched.length}),G(F,"$post_match",function(){var s=this;return s.matched===N?N:s.string.substr(s.pos)}),G(F,"$pre_match",function(){var s=this;return s.matched===N?N:s.string.substr(0,s.prev_pos)}),G(F,"$reset",function(){var s=this;return s.working=s.string,s.matched=N,s.pos=0}),G(F,"$rest",y("working")),G(F,"$rest?",function(){return 0!==this.working.length}),G(F,"$rest_size",function(){return this.$rest().$size()}),G(F,"$terminate",function(){var s,v=this;return v.match=N,s=[v.string.$length()],g(v,"pos=",s),s[s.length-1]}),G(F,"$unscan",function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=N,s.match=N,s}),T(F,"bol?","beginning_of_line?"),T(F,"getch","get_byte"),F.$private(),G(F,"$anchor",function(s){var v=s.toString().match(/\/([^\/]+)$/);return v=v?v[1]:void 0,new RegExp("^(?:"+s.source+")",v)})},Opal.modules["bcdice/normalize"]=function(e){var T,W,N,K=e.module,G=e.eqeqeq,l=e.def,B=e.eqeq,A=[],y=e.nil;return T=A,N=[K(A[0],"BCDice")].concat(T),(W=K(N[0],"Normalize")).$module_function(),l(W,"$comparison_operator",function(F){var L;return G(/<=|=</,L=F)?"<=":G(/>=|=>/,L)?">=":G(/<>|!=|=!/,L)?"!=":G(/</,L)?"<":G(/>/,L)?">":G(/=/,L)?"==":y}),l(W,"$target_number",function(F){return B(F,"?")?F:F.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var P,X,w,n,r,d,H,s,L,K=e.module,G=e.klass,l=e.const_set,B=e.hash2,A=e.truthy,y=e.send,g=e.def,T=e.thrower,D=e.top,N=[],Y=e.nil;return D.$require("strscan"),D.$require("bcdice/normalize"),P=N,X=L=[K(N[0],"BCDice")].concat(P),w=s=[K(L[0],"Command")].concat(X),r=[n=G(s[0],null,"Lexer")].concat(w),d=e.$r(r),(H=n.$$prototype).scanner=H.notations=Y,l(r[0],"SYMBOLS",B(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),g(n,"$initialize",function(M,k){var x,f,u;return M=A(u=(x=(f=M)===Y||null==f?Y:f.$split(" ",2))===Y||null==x?Y:x.$first())?u:"",this.scanner=d("StringScanner").$new(M),this.notations=y(k,"map",[],function(c){return null==c&&(c=Y),A(c["$is_a?"](d("String")))?d("Regexp").$new(c):c})}),g(n,"$next_token",function(){try{var M=T("return"),k=this,x=Y,f=Y,u=Y,h=Y;return A(k.scanner["$eos?"]())?[!1,"$"]:(y(k.notations,"each",[],function c(E){var o,j=null==c.$$s?this:c.$$s;if(null==j.scanner&&(j.scanner=Y),null==E&&(E=Y),o=j.scanner.$scan(E),!A(o))return Y;M.$throw(["NOTATION",o])},{$$s:k,$$ret:M}),A(x=k.scanner.$scan(/\d+/))?["NUMBER",x.$to_i()]:A(f=k.scanner.$scan(/[<>!=]+/))?(f=d("Normalize").$comparison_operator(f),[A(f)?"CMP_OP":"ILLEGAL",f]):(u=k.scanner.$getch().$upcase(),[A(h=d("SYMBOLS")["$[]"](u))?h:u.$to_sym(),u]))}catch(c){if(c===M)return c.$v;throw c}}),g(n,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var D,P,J,s,v,i,w,L,Y,K=e.module,G=e.klass,l=e.def,B=e.return_ivar,A=e.truthy,y=[],g=e.nil;return D=y,P=Y=[K(y[0],"BCDice")].concat(D),J=L=[K(Y[0],"Command")].concat(P),v=[s=G(L[0],null,"Parsed")].concat(J),i=e.$r(v),(w=s.$$prototype).critical=w.fumble=w.dollar=w.modify_number=w.question_target=w.target_number=w.prefix_number=w.command=w.suffix_number=w.cmp_op=g,s.$attr_accessor("command"),s.$attr_accessor("prefix_number"),s.$attr_accessor("suffix_number"),s.$attr_accessor("critical"),s.$attr_accessor("fumble"),s.$attr_accessor("dollar"),s.$attr_accessor("modify_number"),s.$attr_accessor("cmp_op"),s.$attr_accessor("target_number"),s.$attr_writer("question_target"),l(s,"$initialize",function(){var r=this;return r.prefix_number=g,r.suffix_number=g,r.critical=g,r.fumble=g,r.dollar=g,r.cmp_op=g,r.target_number=g,r.question_target=!1}),l(s,"$question_target?",B("question_target")),l(s,"$to_s",function(r){var d=this,H=g,z=g,M=g,k=g,x=g;switch(null==r&&(r="after_command"),H=A(d.critical)?"@"+d.critical:g,z=A(d.fumble)?"#"+d.fumble:g,M=A(d.dollar)?"$"+d.dollar:g,k=i("Format").$modifier(d.modify_number),x=A(d.question_target)?"?":d.target_number,r.valueOf()){case"after_command":return[d.prefix_number,d.command,d.suffix_number,H,z,M,k,d.cmp_op,x].$join();case"after_modify_number":return[d.prefix_number,d.command,d.suffix_number,k,H,z,M,d.cmp_op,x].$join();case"after_target_number":return[d.prefix_number,d.command,d.suffix_number,k,d.cmp_op,x,H,z,M].$join();default:return g}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var r,M,h,m,a,_,t,R,q,S,U,Q,O,c,o,$,ie,x,f,H,K=e.klass,G=e.module,l=e.slice,B=e.extract_kwargs,A=e.ensure_kwargs,y=e.get_kwarg,g=e.send2,T=e.find_super,D=e.def,N=e.send,Y=e.eqeq,W=e.thrower,P=e.hash,F=e.const_set,L=e.truthy,C=e.to_ary,X=e.hash2,J=e.top,s=[],v=e.$r(s),i=e.nil,w=e.$$$;return J.$require("racc/parser.rb"),J.$require("bcdice/arithmetic/node"),J.$require("bcdice/command/lexer"),J.$require("bcdice/command/parsed"),K(w(v("BCDice"),"Command"),w(v("Racc"),"Parser"),"Parser"),r=s,M=H=[G(s[0],"BCDice")].concat(r),x=[G(H[0],"Command")].concat(M),f=e.$r(x),h=x,o=[c=K(x[0],w(f("Racc"),"Parser"),"Parser")].concat(h),$=e.$r(o),(ie=c.$$prototype).notations=ie.lexer=ie.modifier=ie.suffix_number=ie.prefix_number=ie.need_suffix_number=ie.need_prefix_number=ie.critical=ie.fumble=ie.dollar=ie.allowed_cmp_op=ie.question_target=i,D(c,"$initialize",function Z(b,re){var $e,I,se,ce,ae=this;return Z.$$p=null,$e=l(arguments),I=B($e),I=A(I),se=$e,ce=y(I,"round_type"),g(ae,T(ae,"initialize",Z,!1,!0),"initialize",[],null),ae.notations=se,ae.round_type=ce,ae.prefix_number=!1,ae.suffix_number=!1,ae.need_prefix_number=!1,ae.need_suffix_number=!1,ae.modifier=!0,ae.critical=!1,ae.fumble=!1,ae.dollar=!1,ae.allowed_cmp_op=[i,">=",">","<=","<","==","!="],ae.question_target=!1},-2),D(c,"$disable_modifier",function(){return this.modifier=!1,this}),D(c,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),D(c,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),D(c,"$has_prefix_number",function(){var b=this;return b.prefix_number=!0,b.need_prefix_number=!0,b}),D(c,"$has_suffix_number",function(){var b=this;return b.suffix_number=!0,b.need_suffix_number=!0,b}),D(c,"$enable_critical",function(){return this.critical=!0,this}),D(c,"$enable_fumble",function(){return this.fumble=!0,this}),D(c,"$enable_dollar",function(){return this.dollar=!0,this}),D(c,"$restrict_cmp_op_to",function(b){var re;return re=l(arguments),this.allowed_cmp_op=re,this},-1),D(c,"$enable_question_target",function(){return this.question_target=!0,this}),D(c,"$parse",function(b){try{return this.lexer=$("Lexer").$new(b,this.notations),this.$do_parse()}catch($e){if(!e.rescue($e,[$("ParseError"),$("ZeroDivisionError")]))throw $e;try{return i}finally{e.pop_exception()}}}),c.$private(),D(c,"$parsed",function(b,re,$e,I){try{return W("eval_return"),N($("Parsed").$new(),"tap",[],function ue(ae){var le,_e,de,ve,me,fe,be,oe=null==ue.$$s?this:ue.$$s;return null==oe.round_type&&(oe.round_type=i),null==ae&&(ae=i),ae["$command="](b["$[]"]("command")),ae["$prefix_number="]((le=b["$[]"]("prefix"))===i||null==le?i:le.$eval(oe.round_type)),ae["$suffix_number="]((_e=b["$[]"]("suffix"))===i||null==_e?i:_e.$eval(oe.round_type)),ae["$critical="]((de=re["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),ae["$fumble="]((ve=re["$[]"]("fumble"))===i||null==ve?i:ve.$eval(oe.round_type)),ae["$dollar="]((me=re["$[]"]("dollar"))===i||null==me?i:me.$eval(oe.round_type)),ae["$modify_number="]($e.$eval(oe.round_type)),ae["$cmp_op="](I["$[]"]("cmp_op")),Y(I["$[]"]("target"),"?")?(ae["$question_target="](!0),N(ae,"target_number=",fe=[0]),fe[fe.length-1]):(ae["$question_target="](!1),fe=[(be=I["$[]"]("target"),be===i||null==be?i:be.$eval(oe.round_type))],N(ae,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(ue){if(ue===e.t_eval_return)return ue.$v;throw ue}}),D(c,"$next_token",function(){return this.lexer.$next_token()}),m=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),a=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),_=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),t=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),R=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),q=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),S=[i,6,13,3,9,-1,27,-15,-10,-1,-38],U=[i,i,i,i,i,i,19,16,15,i,i],Q=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),O=P(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),F(o[0],"Racc_arg",[m,a,t,_,R,q,U,S,19,Q,O,58,35,!0]),L($("Ractor","skip_raise")?"constant":i)&&$("Ractor").$make_shareable($("Racc_arg")),F(o[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),L($("Ractor","skip_raise")?"constant":i)&&$("Ractor").$make_shareable($("Racc_token_to_s_table")),F(o[0],"Racc_debug_parser",!1),D(c,"$_reduce_1",function(b,re,$e){var I;return L(this.modifier)||this.$raise($("ParseError")),I=C(b),this.$parsed(null==I[0]?i:I[0],null==I[1]?i:I[1],null==I[2]?i:I[2],null==I[3]?i:I[3])}),D(c,"$_reduce_2",function(b,re,$e){var I;return L(this.modifier)||this.$raise($("ParseError")),I=C(b),this.$parsed(null==I[0]?i:I[0],null==I[2]?i:I[2],null==I[1]?i:I[1],null==I[3]?i:I[3])}),D(c,"$_reduce_3",function(b,re,$e){var I,le;return le=null==(I=C(b))[2]?i:I[2],this.$parsed(null==I[0]?i:I[0],null==I[1]?i:I[1],w(w($("Arithmetic"),"Node"),"Number").$new(0),le)}),D(c,"$_reduce_4",function(b,re,$e){var I=this;return L(I.prefix_number)&&L(I.suffix_number)||I.$raise($("ParseError")),X(["command","prefix","suffix"],{command:b["$[]"](1),prefix:b["$[]"](0),suffix:b["$[]"](2)})}),D(c,"$_reduce_5",function(b,re,$e){var I=this;return L(I.prefix_number)||I.$raise($("ParseError")),L(I.need_suffix_number)&&I.$raise($("ParseError")),X(["command","prefix"],{command:b["$[]"](1),prefix:b["$[]"](0)})}),D(c,"$_reduce_6",function(b,re,$e){var I=this;return L(I.suffix_number)||I.$raise($("ParseError")),L(I.need_prefix_number)&&I.$raise($("ParseError")),X(["command","suffix"],{command:b["$[]"](0),suffix:b["$[]"](1)})}),D(c,"$_reduce_7",function(b,re,$e){var I=this;return(L(I.need_prefix_number)||L(I.need_suffix_number))&&I.$raise($("ParseError")),X(["command"],{command:b["$[]"](0)})}),D(c,"$_reduce_8",function(b,re,$e){return X([],{})}),D(c,"$_reduce_9",function(b,re,$e){var I,le,ue=i;return ue=null==(I=C(b))[0]?i:I[0],le=null==I[2]?i:I[2],L(this.critical)&&L(ue["$[]"]("critical")["$nil?"]())||this.$raise($("ParseError")),ue["$[]="]("critical",le),ue}),D(c,"$_reduce_10",function(b,re,$e){var I,le,ue=i;return ue=null==(I=C(b))[0]?i:I[0],le=null==I[2]?i:I[2],L(this.fumble)&&L(ue["$[]"]("fumble")["$nil?"]())||this.$raise($("ParseError")),ue["$[]="]("fumble",le),ue}),D(c,"$_reduce_11",function(b,re,$e){var I,le,ue=i;return ue=null==(I=C(b))[0]?i:I[0],le=null==I[2]?i:I[2],L(this.dollar)&&L(ue["$[]"]("dollar")["$nil?"]())||this.$raise($("ParseError")),ue["$[]="]("dollar",le),ue}),D(c,"$_reduce_12",function(b,re,$e){return b["$[]"](1)}),D(c,"$_reduce_13",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"Negative").$new(b["$[]"](1))}),D(c,"$_reduce_14",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"+",b["$[]"](2))}),D(c,"$_reduce_15",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"-",b["$[]"](2))}),D(c,"$_reduce_16",function(b,re,$e){return L(this.allowed_cmp_op["$include?"](i))||this.$raise($("ParseError")),X([],{})}),D(c,"$_reduce_17",function(b,re,$e){var I,ue,ae;return ae=null==(I=C(b))[1]?i:I[1],L(this.allowed_cmp_op["$include?"](ue=null==I[0]?i:I[0]))||this.$raise($("ParseError")),X(["cmp_op","target"],{cmp_op:ue,target:ae})}),D(c,"$_reduce_18",function(b,re,$e){var se,I=this;return se=b["$[]"](0),L(I.question_target)||I.$raise($("ParseError")),L(I.allowed_cmp_op["$include?"](se))||I.$raise($("ParseError")),X(["cmp_op","target"],{cmp_op:se,target:"?"})}),D(c,"$_reduce_19",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"+",b["$[]"](2))}),D(c,"$_reduce_20",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"-",b["$[]"](2))}),D(c,"$_reduce_22",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"*",b["$[]"](2))}),D(c,"$_reduce_23",function(b,re,$e){return b["$[]"](3).$new(b["$[]"](0),b["$[]"](2))}),D(c,"$_reduce_25",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),D(c,"$_reduce_26",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"DivideWithCeil")}),D(c,"$_reduce_27",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"DivideWithCeil")}),D(c,"$_reduce_28",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"DivideWithRound")}),D(c,"$_reduce_29",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"DivideWithFloor")}),D(c,"$_reduce_30",function(b,re,$e){return b["$[]"](1)}),D(c,"$_reduce_31",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"Negative").$new(b["$[]"](1))}),D(c,"$_reduce_33",function(b,re,$e){return b["$[]"](1)}),D(c,"$_reduce_34",function(b,re,$e){return w(w($("Arithmetic"),"Node"),"Number").$new(b["$[]"](0))}),D(c,"$_reduce_none",function(b,re,$e){return b["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var N,F,J,s,v,i,C,W,K=e.module,G=e.send,l=e.eqeqeq,B=e.truthy,A=e.def,y=e.return_val,g=[],T=e.nil;return N=g,F=W=[K(g[0],"BCDice")].concat(N),J=C=[K(W[0],"Deprecated")].concat(F),v=[s=K(C[0],"Checker")].concat(J),i=e.$r(v),s.$private(),A(s,"$check_result_legacy",function(n,r,d,H){var x,z=this,M=T,k=T,f=T,p=T;return M=G(r,"map",[],"sides".$to_proc()),x=(k=G(r,"map",[],"value".$to_proc())).$sum(),f=l([100],p=M)?z.$check_1D100(n,x,d,H):l([20],p)?z.$check_1D20(n,x,d,H):l([6,6],p)?z.$check_2D6(n,x,k,d,H):T,(B(f["$nil?"]())||B(f["$empty?"]()))&&(f=l([10],p=M.$uniq())?z.$check_nD10(n,x,k,d,H):l([6],p)?z.$check_nD6(n,x,k,d,H):T,B(f["$nil?"]())||B(f["$empty?"]()))?T:i("Result").$new(f.$delete_prefix(" \uff1e "))}),A(s,"$check_1D100",y(T)),A(s,"$check_1D20",y(T)),A(s,"$check_nD10",y(T)),A(s,"$check_2D6",y(T)),A(s,"$check_nD6",y(T))},Opal.modules["bcdice/base"]=function(e){var v,z,p,j,$,m,u,h,c,E,k,K=e.module,G=e.klass,l=e.slice,B=e.rb_plus,A=e.truthy,y=e.def,g=e.regexp,T=e.send,D=e.thrower,N=e.return_ivar,Y=e.assign_ivar_val,W=e.eqeqeq,P=e.eqeq,F=e.return_val,L=e.range,C=e.rb_minus,X=e.rb_divide,J=e.rb_times,s=e.rb_ge,i=e.top,w=[],n=e.$r(w),r=e.nil,d=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),z=w,p=k=[K(w[0],"BCDice")].concat(z),h=[u=G(k[0],null,"Base")].concat(p),c=e.$r(h),(E=u.$$prototype).raw_input=E.randomizer=E.enabled_upcase_input=E.debug=r,$=[j=e.get_singleton_class(u)].concat(h),m=e.$r($),j.$attr_reader("prefixes"),y(j,"$register_prefix",function(_){var R,S,q=this;return null==q.prefixes&&(q.prefixes=r),R=l(arguments),q.prefixes=B(A(S=q.prefixes)?S:[],R.$flatten())},-1),y(j,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),y(j,"$prefixes_pattern",function(){var _=this,t=r;return null==_.prefixes_pattern&&(_.prefixes_pattern=r),null==_.prefixes&&(_.prefixes=r),_.prefixes_pattern=A(t=_.prefixes_pattern)?t:r,A(_.prefixes_pattern)?_.prefixes_pattern:(_.prefixes=A(t=_.prefixes)?t:[],_.prefixes.$freeze(),_.prefixes_pattern=(A(_.prefixes["$empty?"]())?/(?!)/:g(["^(S)?(",_.prefixes.$join("|"),")"],"i")).$freeze())}),y(j,"$command_pattern",function(){var _=this,t=r,R=r;return null==_.command_pattern&&(_.command_pattern=r),null==_.prefixes&&(_.prefixes=r),_.command_pattern=A(t=_.command_pattern)?t:r,A(_.command_pattern)?_.command_pattern:(_.prefixes=A(t=_.prefixes)?t:[],_.prefixes.$freeze(),R=B(T(d(m("CommonCommand"),"COMMANDS"),"map",[],function(S){return null==S&&(S=r),d(S,"PREFIX_PATTERN").$source()}),_.prefixes),_.command_pattern=g(["^S?(",R.$join("|"),")"],"i").$freeze())}),y(j,"$eval",function(_){try{return D("eval_return"),this.$new(_).$eval()}catch(q){if(q===e.t_eval_return)return q.$v;throw q}}),u.$include(c("Translate")),u.$include(d(c("Deprecated"),"Checker")),y(u,"$initialize",function(o){var $=this;return $.raw_input=o,$.sort_add_dice=!1,$.sort_barabara_dice=!1,$.d66_sort_type=d(c("D66SortType"),"NO_SORT"),$.enabled_d9=!1,$.round_type=d(c("RoundType"),"FLOOR"),$.sides_implicit_d=6,$.upper_dice_reroll_threshold=r,$.reroll_dice_reroll_threshold=r,$.default_cmp_op=r,$.default_target_number=r,$.enabled_upcase_input=!0,$.locale="ja_jp",$.randomizer=d(c("BCDice"),"Randomizer").$new(),$.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),y(u,"$sort_add_dice?",N("sort_add_dice")),y(u,"$sort_barabara_dice?",N("sort_barabara_dice")),y(u,"$enabled_d9?",N("enabled_d9")),y(u,"$enable_debug",Y("debug",!0)),y(u,"$eval",function(){var $,a,o=this,m=r;return $=d(c("BCDice"),"Preprocessor").$process(o.raw_input,o),m=A(a=o.$dice_command($))?a:o.$eval_common_command(o.raw_input),A(m)?(m["$rands="](o.randomizer.$rand_results()),m["$detailed_rands="](o.randomizer.$detailed_rand_results()),m):r}),y(u,"$change_text",function(o){return o}),y(u,"$check_result",function(o,$,m,a){var _=this,t=r,R=r,q=r,S=r,U=r;return t=_.$check_result_legacy(o,$,m,a),A(t)?t:(R=T($,"map",[],"sides".$to_proc()),S=(q=T($,"map",[],"value".$to_proc())).$sum(),t=W([100],U=R)?_.$result_1d100(o,S,m,a):W([20],U)?_.$result_1d20(o,S,m,a):W([6,6],U)?_.$result_2d6(o,S,q,m,a):r,P(t,c("Result").$nothing())?r:A(t)?t:(t=W([10],U=R.$uniq())?_.$result_nd10(o,S,q,m,a):W([6],U)?_.$result_nd6(o,S,q,m,a):r,P(t,c("Result").$nothing())?r:A(t)?t:_.$result_ndx(o,m,a)))}),y(u,"$grich_text",F(r)),u.$private(),y(u,"$eval_common_command",function(o){try{D("eval_return");var m=D("return");return o=this.$change_text(o),T(d(c("CommonCommand"),"COMMANDS"),"each",[],function _(t){var q,R=null==_.$$s?this:_.$$s;if(null==R.randomizer&&(R.randomizer=r),null==t&&(t=r),q=t.$eval(o,R,R.randomizer),!A(q))return r;m.$throw(q)},{$$s:this,$$ret:m}),r}catch(_){if(_===e.t_eval_return||_===m)return _.$v;throw _}}),y(u,"$dice_command",function(o){var $=this,m=r,a=r,_=r,t=r;return A($.enabled_upcase_input)&&(o=o.$upcase()),m=$.$class().$prefixes_pattern().$match(o),A(m)?(a=m["$[]"](1)["$nil?"]()["$!"](),A(a)&&(o=o["$[]"](L(1,-1,!1))),_=$.$eval_game_system_specific_command(o),A(_["$is_a?"](c("Result")))?(_["$secret="](A(t=_["$secret?"]())?t:a),_):A(_["$nil?"]())||A(_["$empty?"]())||P(_,"1")?r:T(c("Result").$new(),"tap",[],function(q){var S;return null==q&&(q=r),q["$text="](_.$to_s()),T(q,"secret=",S=[a]),S[S.length-1]})):r}),y(u,"$eval_game_system_specific_command",F(r)),y(u,"$result_ndx",function(o,$,m){return A(m["$is_a?"](c("String")))?r:A(o.$send($,m))?c("Result").$success(this.$translate("success")):c("Result").$failure(this.$translate("failure"))}),y(u,"$result_1d100",F(r)),y(u,"$result_1d20",F(r)),y(u,"$result_nd10",F(r)),y(u,"$result_2d6",F(r)),y(u,"$result_nd6",F(r)),y(u,"$get_table_by_2d6",function(o){return this.$get_table_by_nD6(o,2)}),y(u,"$get_table_by_1d6",function(o){return this.$get_table_by_nD6(o,1)}),y(u,"$get_table_by_nD6",function(o,$){return this.$get_table_by_nDx(o,$,6)}),y(u,"$get_table_by_nDx",function(o,$,m){var _,t=r;return _=this.randomizer.$roll_sum($,m),t=this.$get_table_value(o["$[]"](C(_,$))),A(t["$nil?"]())?["1",0]:[t,_]}),y(u,"$get_table_by_1d3",function(o){var a,_,$=this,t=r;return $.$debug("get_table_by_1d3"),a=$.randomizer.$roll_sum(1,6),$.$debug("num",a),_=X(C(a,1),2).$to_i(),$.$debug("index",_),t=o["$[]"](_),A(t["$nil?"]())?["1",0]:[t,a]}),y(u,"$get_table_by_d66_swap",function(o){var m;return m=this.randomizer.$roll_d66(d(c("D66SortType"),"ASC")),[this.$get_table_by_number(m,o),m]}),y(u,"$get_table_by_d66",function(o){var m,a,_,R,t=r;return m=this.randomizer.$roll_once(6),a=this.randomizer.$roll_once(6),_=B(J(C(m,1),6),C(a,1)),t=o["$[]"](_),R=""+m+a,A(t["$nil?"]())?["1",R]:[t,R]}),y(u,"$get_table_by_number",function(o,$,m){try{var a=D("return");return null==m&&(m="1"),T($,"each",[],function t(R){var S,q=null==t.$$s?this:t.$$s;if(null==R&&(R=r),S=R["$[]"](0),!A(s(S,o)))return r;a.$throw(q.$get_table_value(R["$[]"](1)))},{$$s:this,$$ret:a}),this.$get_table_value(m)}catch(t){if(t===a)return t.$v;throw t}},-3),y(u,"$get_table_value",function(o){return A(o["$is_a?"](c("Proc")))?o.$call():o}),y(u,"$roll_tables",function(o,$){var a=r;return a=$["$[]"](o),A(a)?a.$roll(this.randomizer).$to_s():r}),y(u,"$debug",function(o,$){var a,_=this,t=r,R=r;return a=l(arguments,1),A(_.debug)?(t=A(o["$is_a?"](c("String")))?o:o.$inspect(),A(a["$empty?"]())?_.$warn(t):(R=T(a,"map",[],function(S){return null==S&&(S=r),A(S["$is_a?"](c("String")))?'"'+S+'"':S.$inspect()}),_.$warn(t+": "+R.$join(", ")))):r},-2),d(d(n("I18n"),"Backend"),"Simple").$include(d(d(n("I18n"),"Backend"),"Fallbacks")),n("I18n").$load_path()["$<<"](n("Dir")["$[]"](n("File").$join("bcdice","../../i18n/**/*.yml"))),n("I18n")["$default_locale="]("ja_jp"),v=[["ja_jp"]],T(n("I18n").$fallbacks(),"defaults=",v),v[v.length-1]},Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var N,F,X,s,v,L,C,W,K=e.module,G=e.ensure_kwargs,l=e.truthy,B=e.thrower,A=e.def,y=[],g=e.nil,T=e.$$$;return N=y,F=W=[K(y[0],"BCDice")].concat(N),C=[L=K(W[0],"ArithmeticEvaluator")].concat(F),s=[X=e.get_singleton_class(L)].concat(C),v=e.$r(s),A(X,"$eval",function(w,n){try{B("eval_return");var d,H=g;return null==(d=(n=G(n)).$$smap.round_type)&&(d=T(v("RoundType"),"FLOOR")),l(w)&&l(H=v("Arithmetic").$eval(w,d))?H:0}catch(z){if(z===e.t_eval_return)return z.$v;throw z}},-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(e){var z,f,c,E,j,R,q,o,$,m,a,u,h,k,K=e.module,G=e.klass,l=e.const_set,B=e.send2,A=e.find_super,y=e.def,g=e.truthy,T=e.hash2,D=e.rb_plus,N=e.rb_ge,Y=e.thrower,W=e.eqeqeq,P=e.assign_ivar,F=e.rb_divide,L=e.rb_minus,C=e.rb_times,X=e.eqeq,J=e.neqeq,s=e.rb_le,v=e.send,i=e.rb_lt,w=e.top,n=[],r=e.nil,d=e.$$$;return w.$require("bcdice/base"),w.$require("bcdice/arithmetic_evaluator"),z=n,f=k=[K(n[0],"BCDice")].concat(z),u=[K(k[0],"GameSystem")].concat(f),h=e.$r(u),c=u[0],E=h("Base"),j=u,$=[o=G(c,E,"LogHorizon")].concat(j),m=e.$r($),(a=o.$$prototype).randomizer=a.locale=r,l($[0],"ID","LogHorizon"),l($[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),l($[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),l($[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),o.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),y(o,"$initialize",function _(t){var q=this;return _.$$p=null,B(q,A(q,"initialize",_,!1,!0),"initialize",[t],null),q.d66_sort_type=d(m("D66SortType"),"NO_SORT")}),y(o,"$eval_game_system_specific_command",function(t){var q,S,U,Q,ee,V,O,te,ne,ie,Z,R=this;return g(q=g(S=g(U=g(Q=g(ee=g(V=g(O=g(te=g(ne=g(ie=g(Z=R.$getCheckRollDiceCommandResult(t))?Z:R.$roll_consumption(t))?ie:R.$roll_consumption_table(t))?ne:R.$roll_treasure(t))?te:R.$roll_treasure_table(t))?O:R.$roll_treasure_table_b2(t))?V:R.$getInventionAttributeTextDiceCommandResult(t))?ee:R.$getTroubleInAkibaStreetDiceCommandResult(t))?Q:R.$getAbandonedChildDiceCommandResult(t))?U:R.$getMusicalInstrumentTypeDiceCommandResult(t))?S:R.$roll_eastal_exploration_table(t))?q:R.$roll_tables(t,d(R.$class(),"TABLES"))}),o.$private(),y(o,"$getCheckRollDiceCommandResult",function(t){var R=this,S=r,U=r,Q=r,ee=r,V=r,O=r,te=r;return S=d(m("Command"),"Parser").$new(/\d+LH/,T(["round_type"],{round_type:R.$round_type()})).$restrict_cmp_op_to(r,">=").$parse(t),g(S)?(U=S.$command().$to_i(),ee=(Q=R.randomizer.$roll_barabara(U,6)).$sum(),V=D(ee,S.$modify_number()),O=R.$result_text(U,Q,V,S),te=["("+S+")",ee+"["+Q.$join(",")+"]"+m("Format").$modifier(S.$modify_number()),V,O.$text()].$compact(),O["$text="](te.$join(" \uff1e ")),O):r}),y(o,"$result_text",function(t,R,q,S){var U=this;return g(N(R.$count(6),2))?m("Result").$critical(U.$translate("LogHorizon.LH.critical")):g(N(R.$count(1),t))?m("Result").$fumble(U.$translate("LogHorizon.LH.fumble")):g(S.$cmp_op()["$nil?"]())?m("Result").$new():g(N(q,S.$target_number()))?m("Result").$success(U.$translate("success")):m("Result").$failure(U.$translate("failure"))}),y(o,"$getValue",function(t,R){try{return Y("eval_return"),g(t["$nil?"]())||g(t["$empty?"]())?R:m("ArithmeticEvaluator").$eval(t)}catch(S){if(S===e.t_eval_return)return S.$v;throw S}}),y(o,"$roll_consumption",function(t){try{Y("eval_return");var S=r,U=r,Q=r,ee=r,V=r;return S=/^CT\d*([+\-\d]+)?$/.$match(t),g(S)?(U=m("ArithmeticEvaluator").$eval(S["$[]"](1)),Q=m("Format").$modifier(U),ee=this.randomizer.$roll_once(6),g(Q["$empty?"]())||(V=D(ee.$to_s(),Q)),["(1D6"+Q+")",V,D(ee,U)].$compact().$join(" \uff1e ")):r}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),y(o,"$roll_consumption_table",function(t){try{Y("eval_return");var S=r,U=r,Q=r,ee=r;return S=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(t),g(S)?(U=this.$construct_consumption_table(S["$[]"](1)),Q=S["$[]"](2).$to_i(),ee=m("ArithmeticEvaluator").$eval(S["$[]"](3)),g(S["$[]"](4))&&U.$fix_dice_value(S["$[]"](4).$to_i()),U.$roll(Q,ee,this.randomizer)):r}catch(V){if(V===e.t_eval_return)return V.$v;throw V}}),y(o,"$construct_consumption_table",function(t){var S,R=this,q=r;return q=W("P",S=t)?R.$translate("LogHorizon.CT.PCT"):W("E",S)?R.$translate("LogHorizon.CT.ECT"):W("G",S)?R.$translate("LogHorizon.CT.GCT"):W("C",S)?R.$translate("LogHorizon.CT.CCT"):W("ES",S)?R.$translate("LogHorizon.CT.ESCT"):W("CS",S)?R.$translate("LogHorizon.CT.CSCT"):r,m("ConsumptionTable").$new(q["$[]"]("name"),q["$[]"]("items"))}),(q=(R=G($[0],null,"ConsumptionTable")).$$prototype).tables=q.dice_value=q.name=r,y(R,"$initialize",function(U,Q){return this.name=U,this.tables=Q,this.dice_value=r}),y(R,"$fix_dice_value",P("dice_value")),y(R,"$roll",function(U,Q,ee){var O,ne,Z,V=this,te=r,ie=r;return O=F(L(U,1),5).$clamp(0,L(V.tables.$size(),1)),te=V.tables["$[]"](O),V.dice_value=g(ne=V.dice_value)?ne:ee.$roll_once(6),ie=D(V.dice_value,Q),Z=te["$[]"](ie.$clamp(0,7)),V.name+"("+ie+"["+V.dice_value+"]) \uff1e "+Z}),y(o,"$roll_treasure",function(t){try{Y("eval_return");var S=r,U=r,Q=r,ee=r,V=r,O=r;return S=/^TRS(\d+)?([+\-\d]+)?$/.$match(t),g(S)?(U=S["$[]"](1).$to_i(),Q=m("ArithmeticEvaluator").$eval(S["$[]"](2)),V=(ee=this.randomizer.$roll_barabara(2,6)).$sum(),O=D(D(V,C(U,5)),Q),"(2D6+"+U+"*5"+m("Format").$modifier(Q)+") \uff1e "+V+"["+ee.$join(",")+"]"+m("Format").$modifier(D(C(U,5),Q))+" \uff1e "+O):r}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),y(o,"$roll_treasure_table",function(t){try{Y("eval_return");var q=this,S=r,U=r,Q=r,ee=r,V=r;return S=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(t),g(S)?(U=S["$[]"](1),Q=q.$construct_treasure_table(U),ee=S["$[]"](2).$to_i(),V=m("ArithmeticEvaluator").$eval(S["$[]"](3)),X(ee,0)&&X(V,0)?q.$translate("LogHorizon.TRS.need_cr",T(["command"],{command:t})):(g(S["$[]"](4))&&Q.$fix_dice_value(7),Q.$roll(ee,V,q.randomizer))):r}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),y(o,"$construct_treasure_table",function(t){return X(t,"HTRS")?m("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):m("TreasureTable").$from_i18n("LogHorizon.TRS."+t,this.locale)}),y(o,"$roll_treasure_table_b2",function(t){try{Y("eval_return");var q=this,S=r,U=r,Q=r,ee=r,V=r;return S=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(t),g(S)?(U=S["$[]"](1),Q=m("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+U,q.locale),ee=S["$[]"](2).$to_i(),V=m("ArithmeticEvaluator").$eval(S["$[]"](3)),X(ee,0)&&X(V,0)?q.$translate("LogHorizon.TRS.need_cr",T(["command"],{command:t})):(g(S["$[]"](4))&&Q.$fix_dice_value(7),Q.$roll(ee,V,q.randomizer))):r}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),function(_,t,R){var ee,O,te,q=G(_,null,"TreasureTable"),S=[q].concat(R),U=e.$r(S),Q=q.$$prototype;Q.dice_list=Q.name=Q.items=r,q.$include(U("Translate")),O=[ee=e.get_singleton_class(q)].concat(S),te=e.$r(O),y(ee,"$from_i18n",function(ie,Z){var re=r;return re=te("I18n").$translate(ie,T(["raise","locale"],{raise:!0,locale:Z})),this.$new(re["$[]"]("name"),re["$[]"]("items"),Z)}),y(q,"$initialize",function(V,O,te){return this.name=V,this.items=O,this.locale=te,this.dice_list=r}),y(q,"$fix_dice_value",function(V){return this.dice_list=[V]}),y(q,"$roll",function(V,O,te){var ne,ie=this,Z=r,b=r,re=r,$e=r;return X(V,0)&&X(O,0)?r:(Z=X(V,0)&&J(O,0)?O:(ie.dice_list=g(b=ie.dice_list)?b:te.$roll_barabara(2,6),D(D(ie.dice_list.$sum(),C(5,V)),O)),re=ie.$pick_item(Z),g(ie.dice_list)&&($e="["+((ne=ie.dice_list)===r||null==ne?r:ne.$join(","))+"]"),ie.name+"("+Z+$e+") \uff1e "+re)}),q.$private(),y(q,"$pick_item",function(V){var O=this;return g(s(V,6))?O.$translate("LogHorizon.TRS.below_lower_limit",T(["value"],{value:6})):g(s(V,62))?O.items["$[]"](V.$to_s()):g(s(V,72))?O.items["$[]"](L(V,10).$to_s())+"&80G":g(s(V,82))?O.items["$[]"](L(V,20).$to_s())+"&160G":g(s(V,87))?O.items["$[]"](L(V,30).$to_s())+"&260G":O.$translate("LogHorizon.TRS.exceed_upper_limit",T(["value"],{value:88}))})}($[0],0,$),function(_,t){var R=G(_,t,"HeroineTreasureTable");R.$$prototype.items=r,y(R,"$pick_item",function(U){var Q=this;return g(s(U,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",T(["value"],{value:6})):g(s(U,53))?Q.items["$[]"](U.$to_s()):Q.$translate("LogHorizon.TRS.exceed_upper_limit",T(["value"],{value:54}))})}($[0],m("TreasureTable")),function(_,t){var R=G(_,t,"ExpansionTreasureTable");R.$$prototype.items=r,y(R,"$pick_item",function(U){var Q=this;return g(s(U,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",T(["value"],{value:6})):g(s(U,162))?Q.items["$[]"](U.$to_s()):g(s(U,172))?Q.items["$[]"](L(U,10).$to_s())+"&200G":g(s(U,182))?Q.items["$[]"](L(U,20).$to_s())+"&400G":g(s(U,187))?Q.items["$[]"](L(U,30).$to_s())+"&600G":Q.$translate("LogHorizon.TRS.exceed_upper_limit",T(["value"],{value:188}))})}($[0],m("TreasureTable")),y(o,"$getInventionAttributeTextDiceCommandResult",function(t){var q=r,S=r,U=r,Q=r,ee=r;return g(t["$=~"](/IAT([ABMDLT]*)/))?(q=this.$translate("LogHorizon.IAT.name"),S=g(m("Regexp").$last_match(1))&&J(m("Regexp").$last_match(1),"")?m("Regexp").$last_match(1):"MDLT",U=S.$length()["$=="](1),Q=[],ee=[],v(S.$split(/(?:)/),"each",[],function V(O){var Z,te=null==V.$$s?this:V.$$s,ne=r,ie=r,b=r;return null==te.randomizer&&(te.randomizer=r),null==O&&(O=r),ne=te.randomizer.$roll_once(6),ee["$<<"](ne.$to_s()),b=(ie=W("A",Z=O)||W("M",Z)?te.$translate("LogHorizon.IAT.A"):W("B",Z)||W("D",Z)?te.$translate("LogHorizon.IAT.B"):W("L",Z)?te.$translate("LogHorizon.IAT.L"):W("T",Z)?te.$translate("LogHorizon.IAT.T"):r)["$[]"]("items")["$[]"](L(ne,1)),g(U)&&(b=ie["$[]"]("name")+"\uff1a"+b),Q.$push(b)},{$$s:this}),q+"(["+ee.$join(",")+"]) \uff1e "+Q.$join(" ")):r}),y(o,"$getTroubleInAkibaStreetDiceCommandResult",function(t){return X(t,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):r}),y(o,"$getAbandonedChildDiceCommandResult",function(t){return X(t,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):r}),y(o,"$roll_random_table",function(t){var q=r,S=r,U=r,Q=r;return q=this.$translate(t),S=q["$[]"]("tables"),U=this.randomizer.$roll_barabara(S.$size(),6),Q=v(U.$map(),"with_index",[],function(V,O){return null==V&&(V=r),null==O&&(O=r),S["$[]"](O)["$[]"](L(V,1))}),q["$[]"]("name")+"(["+U.$join(",")+"]) \uff1e "+Q.$join(" ")}),y(o,"$getMusicalInstrumentTypeDiceCommandResult",function(t){var R=this,q=r,S=r,U=r,Q=r,ee=r,V=r,O=r;return!g(t["$=~"](/MII(\d?)/))||(q=(g(S=m("Regexp").$last_match(1))?m("Regexp").$last_match(1)["$!="](""):S)["$!"](),U=g(q)?R.randomizer.$roll_once(6):m("Regexp").$last_match(1).$to_i(),g(i(U,1))||i(6,U))?r:(Q=R.$translate("LogHorizon.MII.name"),ee=R.$translate("LogHorizon.MII.type_list")["$[]"](L(U,1)),V=R.randomizer.$roll_once(6),O=R.$translate("LogHorizon.MII.items")["$[]"](L(U,1))["$[]"](L(V,1)),D(D(Q.$to_s(),g(q)?"("+U+")":"")," \uff1e "+ee+"("+V+") \uff1e "+O))}),y(o,"$roll_eastal_exploration_table",function(t){try{Y("eval_return");var q,S=this,U=r,Q=r,ee=r,V=r,O=r,te=r,ne=r,ie=r,b=r;return U=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(t),!g(U)||g(U["$[]"](1)["$nil?"]())&&g(U["$[]"](2)["$nil?"]())&&g(U["$[]"](3)["$nil?"]())?r:(Q=U["$[]"](1).$to_i(),ee=m("ArithmeticEvaluator").$eval(U["$[]"](2)),V=(q=U["$[]"](3))===r||null==q?r:q.$to_i(),O=g(V)?[V]:X(Q,0)?[]:S.randomizer.$roll_barabara(2,6),g(O["$empty?"]())||(te="["+O.$join(",")+"]"),ne=D(D(O.$sum(),C(Q,5)),ee).$clamp(7,162),ie=S.$translate("LogHorizon.ESTL.name"),b=S.$translate("LogHorizon.ESTL.items")["$[]"](ne.$to_s()).$chomp(),ie+"("+ne+te+")\n"+b)}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),function(_,t){var R=[_].concat(t),q=e.$r(R);_.$private(),y(_,"$translate_tables",function(U){return T(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",U),KOYU:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",U),MGR1:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",U),MGR2:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",U),MGR3:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",U),HLOC:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",U),PCNM:d(q("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",U)})})}(e.get_singleton_class(o),$),l($[0],"TABLES",o.$translate_tables("ja_jp")),o.$register_prefix(m("TABLES").$keys())},Opal.queue(function(e){var Y,L,i,w,n,X,J,P,K=e.module,G=e.klass,l=e.const_set,B=e.send2,A=e.find_super,y=e.def,T=[];return e.top.$require("bcdice/game_system/LogHorizon"),Y=T,L=P=[K(T[0],"BCDice")].concat(Y),X=[K(P[0],"GameSystem")].concat(L),J=e.$r(X),i=X,l((n=[w=G(X[0],J("LogHorizon"),"LogHorizon_Korean")].concat(i))[0],"ID","LogHorizon:Korean"),l(n[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),l(n[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),l(n[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),w.$register_prefix_from_super_class(),y(w,"$initialize",function r(d){var z=this;return r.$$p=null,B(z,A(z,"initialize",r,!1,!0),"initialize",[d],null),z.locale="ko_kr"}),l(n[0],"TABLES",w.$translate_tables("ko_kr"))})}}]);