(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7563],{9190:(ge,ye,he)=>{he(5151),Opal.modules["i18n/backend/fallbacks"]=function(e){var B,i,t,_,a,m,G=e.module,M=e.class_variable_set,c=e.truthy,z=e.class_variable_get,E=e.def,w=e.send,F=e.send2,k=e.find_super,q=e.hash2,P=e.find_block_super,H=e.neqeq,j=e.thrower,C=e.return_val,U=[],L=e.nil,x=e.$$$;return B=U,m=[a=G(U[0],"I18n")].concat(B),M(m[0],"@@fallbacks",L),i=e.get_singleton_class(a),t=[i].concat(m),_=e.$r(t),E(i,"$fallbacks",function(){var D=L;return M(t[1],"@@fallbacks",c(null!=t[1].$$cvars["@@fallbacks"]?"class variable":L)&&c(D=z(t[1],"@@fallbacks",!1))?D:x(x(_("I18n"),"Locale"),"Fallbacks").$new()),c(D=_("Thread").$current()["$[]"]("i18n_fallbacks"))?D:z(t[1],"@@fallbacks",!1)}),E(i,"$fallbacks=",function(A){var D;return M(t[1],"@@fallbacks",c(A["$is_a?"](_("Array")))?x(x(_("I18n"),"Locale"),"Fallbacks").$new(A):A),D=["i18n_fallbacks",z(t[1],"@@fallbacks",!1)],w(_("Thread").$current(),"[]=",D),D[D.length-1]}),function(i,T){var A,D,I,y,_=[G(i,"Backend")].concat(T);return A=_,I=[D=G(_[0],"Fallbacks")].concat(A),y=e.$r(I),E(D,"$translate",function g(o,v,s){try{var f=j("return"),u=g.$$p||L,R=this,N=L,l=L;return g.$$p=null,null==s&&(s=y("EMPTY_HASH")),c(s.$fetch("fallback",!0))?c(s["$[]"]("fallback_in_progress"))?F(R,k(R,"translate",g,!1,!0),"translate",[o,v,s],u):(c(s["$[]"]("default"))&&(N=R["$extract_non_symbol_default!"](s)),l=s.$merge(q(["fallback_in_progress"],{fallback_in_progress:!0})),w(y("I18n").$fallbacks()["$[]"](o),"each",[],function r(p){var n=null==r.$$s?this:r.$$s;null==p&&(p=L);try{return w(n,"catch",["exception"],function d(){var $=null==d.$$s?this:d.$$s,Y=L;if(Y=F($,P($,"translate",d.$$def||r.$$def||g,!1,!1),"translate",[p,v,l],null),c(Y["$nil?"]()))return L;H(o.$to_s(),p.$to_s())&&$.$on_fallback(o,p,v,s),f.$throw(Y)},{$$s:n,$$ret:f})}catch(d){if(!e.rescue(d,[x(y("I18n"),"InvalidLocale")]))throw d;try{return L}finally{e.pop_exception()}}},{$$s:R}),c(s["$key?"]("default"))&&c(s["$[]"]("default")["$nil?"]())?L:c(N)?F(R,k(R,"translate",g,!1,!0),"translate",[o,L,s.$merge(q(["default"],{default:N}))],null):R.$throw("exception",x(y("I18n"),"MissingTranslation").$new(o,v,s))):F(R,k(R,"translate",g,!1,!0),"translate",[o,v,s],u)}catch(r){if(r===f)return r.$v;throw r}},-3),E(D,"$extract_non_symbol_default!",function(o){var s,v=L;return v=[o["$[]"]("default")].$flatten(),s=w(v,"detect",[],function(u){return null==u&&(u=L),u["$is_a?"](y("Symbol"))["$!"]()}),c(s)&&o["$[]="]("default",v["$[]"](0,v.$index(s))),s}),E(D,"$exists?",function g(o,v,s){try{var f=j("return"),u=g.$$p||L,R=this;return g.$$p=null,null==s&&(s=y("EMPTY_HASH")),c(s.$fetch("fallback",!0))?(w(y("I18n").$fallbacks()["$[]"](o),"each",[],function N(l){var r=null==N.$$s?this:N.$$s;null==l&&(l=L);try{if(!c(F(r,P(r,"exists?",N.$$def||g,!1,!1),"exists?",[l,v],null)))return L;f.$throw(!0)}catch(p){if(!e.rescue(p,[x(y("I18n"),"InvalidLocale")]))throw p;try{return L}finally{e.pop_exception()}}},{$$s:R,$$ret:f}),!1):F(R,k(R,"exists?",g,!1,!0),"exists?",[o,v,s],u)}catch(N){if(N===f)return N.$v;throw N}},-3),D.$private(),E(D,"$on_fallback",C(L))}(m[0],m)},Opal.modules["bcdice/randomizer"]=function(e){var a,b,A,D,I,y,i,T,M=e.klass,c=e.const_set,z=e.def,E=e.truthy,w=e.rb_gt,F=e.rb_plus,k=e.rb_le,q=e.send,P=e.rb_minus,H=e.eqeq,j=e.rb_times,C=e.eqeqeq,U=e.rb_ge,L=[],x=e.nil,K=e.$$$;return a=L,i=[(0,e.module)(L[0],"BCDice")].concat(a),T=e.$r(i),b=i,D=[A=M(i[0],null,"Randomizer")].concat(b),I=e.$r(D),(y=A.$$prototype).rand_results=y.detailed_rand_results=x,c(D[0],"UPPER_LIMIT_DICE_TIMES",200),c(D[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(D[0],"UPPER_LIMIT_RANDS",1e4),z(A,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),A.$attr_reader("rand_results"),A.$attr_reader("detailed_rand_results"),c(D[0],"DetailedRandResult",I("Struct").$new("kind","sides","value")),z(A,"$roll_barabara",function(o,v){var s=this;return E(w(F(s.rand_results.$size(),o),I("UPPER_LIMIT_RANDS")))&&s.$raise(I("TooManyRandsError")),E(k(o,0))||E(w(o,I("UPPER_LIMIT_DICE_TIMES")))?[]:q(I("Array"),"new",[o],function f(){return(null==f.$$s?this:f.$$s).$roll_once(v)},{$$s:s})}),z(A,"$roll_sum",function(o,v){return this.$roll_barabara(o,v).$sum()}),z(A,"$roll_once",function(o){var s=x;return E(k(o,0))||E(w(o,I("UPPER_LIMIT_DICE_SIDES")))?0:(s=this.$rand_inner(o),this.$push_to_detail("normal",o,s),s)}),z(A,"$roll_index",function(o){return P(this.$roll_once(o),1)}),z(A,"$roll_tens_d10",function(){var s,v=x;return v=this.$rand_inner(10),H(v,10)&&(v=0),s=j(v,10),this.$push_to_detail("tens_d10",10,s),s}),z(A,"$roll_d9",function(){var v;return v=P(this.$rand_inner(10),1),this.$push_to_detail("d9",10,v),v}),z(A,"$roll_d66",function(o){var f,s=x;return s=q(I("Array"),"new",[2],function u(){return(null==u.$$s?this:u.$$s).$roll_once(6)},{$$s:this}),C(K(I("D66SortType"),"ASC"),f=o)?s["$sort!"]():C(K(I("D66SortType"),"DESC"),f)&&s["$sort!"]()["$reverse!"](),F(j(s["$[]"](0),10),s["$[]"](1))}),A.$private(),z(A,"$rand_inner",function(o){var s,v=this;return E(U(v.rand_results.$size(),I("UPPER_LIMIT_RANDS")))&&v.$raise(I("TooManyRandsError")),s=v.$random(o),v.rand_results["$<<"]([s,o]),s}),z(A,"$random",function(o){return F(I("Kernel").$rand(o),1)}),z(A,"$push_to_detail",function(o,v,s){var u;return u=I("DetailedRandResult").$new(o,v,s),this.detailed_rand_results.$push(u)}),M(i[0],T("StandardError"),"TooManyRandsError"),x},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var q,C,B,a,m,i,T,L,H,G=e.module,M=e.klass,c=e.def,z=e.truthy,E=e.return_val,w=[],F=e.nil;return q=w,C=H=[G(w[0],"BCDice")].concat(q),B=L=[G(H[0],"DiceTable")].concat(C),m=[a=M(L[0],null,"RollResult")].concat(B),i=e.$r(m),(T=a.$$prototype).table_name=T.value=T.body=F,c(a,"$initialize",function(_,b,A){var D=this;return D.table_name=_,D.value=b,D.body=A}),a.$attr_reader("table_name"),a.$attr_reader("value"),a.$attr_reader("body"),c(a,"$to_s",function(){var _=this;return _.table_name+"("+_.value+") \uff1e "+_.body}),c(a,"$last_body",function(){var _=this;return z(_.body["$is_a?"](i("RollResult")))?_.body.$last_body():_.body}),c(a,"$empty?",E(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var q,C,B,a,m,i,T,L,H,G=e.module,M=e.klass,c=e.truthy,z=e.def,E=e.rb_minus,w=[],F=e.nil;return q=w,C=H=[G(w[0],"BCDice")].concat(q),B=L=[G(H[0],"DiceTable")].concat(C),m=[a=M(L[0],null,"ChainTable")].concat(B),i=e.$r(m),(T=a.$$prototype).times=T.sides=T.items=T.name=F,z(a,"$initialize",function(_,b,A){var D=this,I=F;return D.name=_,D.items=A.$freeze(),I=/(\d+)D(\d+)/i.$match(b),c(I)||D.$raise(i("ArgumentError"),"Unexpected table type: "+b),D.times=I["$[]"](1).$to_i(),D.sides=I["$[]"](2).$to_i()}),z(a,"$roll",function(_){var A,D,b=this,I=F;return A=_.$roll_sum(b.times,b.sides),D=E(A,b.times),I=b.items["$[]"](D),c(I["$respond_to?"]("roll"))&&(I=I.$roll(_)),i("RollResult").$new(b.name,A,I)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var j,x,i,T,t,_,b,B,U,G=e.module,M=e.klass,c=e.hash2,z=e.defs,E=e.def,w=e.rb_plus,F=e.rb_times,k=e.rb_minus,q=[],P=e.nil;return j=q,x=U=[G(q[0],"BCDice")].concat(j),i=B=[G(U[0],"DiceTable")].concat(x),t=[T=M(B[0],null,"D66GridTable")].concat(i),_=e.$r(t),(b=T.$$prototype).name=b.items=P,z(T,"$from_i18n",function(D,I){var g=P;return g=_("I18n").$t(D,c(["locale","raise"],{locale:I,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("items"))}),E(T,"$initialize",function(D,I){return this.name=D,this.items=I.$freeze()}),E(T,"$roll",function(D){var y,g,o,v,s;return y=D.$roll_once(6),g=D.$roll_once(6),o=w(F(y,10),g),v=k(y,1),s=k(g,1),_("RollResult").$new(this.name,o,this.items["$[]"](v)["$[]"](s))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var P,U,m,i,T,t,x,K,j,G=e.module,M=e.klass,c=e.hash2,z=e.defs,E=e.def,F=[],k=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=F,U=j=[G(F[0],"BCDice")].concat(P),x=[G(j[0],"DiceTable")].concat(U),K=e.$r(x),m=x,T=[i=M(x[0],K("D66GridTable"),"D66HalfGridTable")].concat(m),t=e.$r(T),z(i,"$from_i18n",function(b,A){var I=k;return I=t("I18n").$t(b,c(["locale","raise"],{locale:A,raise:!0})),this.$new(I["$[]"]("name"),I["$[]"]("items_1_2_3"),I["$[]"]("items_4_5_6"))}),E(i,"$initialize",function(b,A,D){return this.name=b,this.items=[A,A,A,D,D,D].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var P,U,m,i,T,t,x,K,j,G=e.module,M=e.klass,c=e.hash2,z=e.defs,E=e.def,F=[],k=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=F,U=j=[G(F[0],"BCDice")].concat(P),x=[G(j[0],"DiceTable")].concat(U),K=e.$r(x),m=x,T=[i=M(x[0],K("D66GridTable"),"D66OneThirdTable")].concat(m),t=e.$r(T),z(i,"$from_i18n",function(b,A){var I=k;return I=t("I18n").$t(b,c(["locale","raise"],{locale:A,raise:!0})),this.$new(I["$[]"]("name"),I["$[]"]("items_1_2"),I["$[]"]("items_3_4"),I["$[]"]("items_5_6"))}),E(i,"$initialize",function(b,A,D,I){return this.name=b,this.items=[A,A,D,D,I,I].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var U,B,t,_,b,A,D,m,x,G=e.module,M=e.klass,c=e.hash2,z=e.defs,E=e.def,w=e.eqeqeq,F=e.rb_plus,k=e.rb_times,q=e.truthy,P=[],H=e.nil,j=e.$$$;return U=P,B=x=[G(P[0],"BCDice")].concat(U),t=m=[G(x[0],"DiceTable")].concat(B),b=[_=M(m[0],null,"D66Table")].concat(t),A=e.$r(b),(D=_.$$prototype).sort_type=D.items=D.name=H,z(_,"$from_i18n",function(y,g){var s,v=H;return v=A("I18n").$t(y,c(["locale"],{locale:g})),s=A("D66SortType").$const_get(v["$[]"]("d66_sort_type")),this.$new(v["$[]"]("name"),s,v["$[]"]("items"))}),E(_,"$initialize",function(y,g,o){var v=this;return v.name=y,v.sort_type=g,v.items=o.$freeze()}),E(_,"$roll",function(y){var g=this,o=H,v=H,s=H,f=H;return o=y.$roll_barabara(2,6),w(j(A("D66SortType"),"ASC"),v=g.sort_type)?o["$sort!"]():w(j(A("D66SortType"),"DESC"),v)&&o["$sort!"]()["$reverse!"](),s=F(k(o["$[]"](0),10),o["$[]"](1)),f=q(v=g.items["$[]"](s))?v:g.items["$[]"](s.$to_s()),q(f["$respond_to?"]("roll"))&&(f=f.$roll(y)),A("RollResult").$new(g.name,s,f)}),E(_,"$choice",function(y){return A("RollResult").$new(this.name,y,this.items["$[]"](y))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var L,a,i,T,K,G=e.module,M=e.klass,c=e.hash2,z=e.send,E=e.to_ary,w=e.rb_plus,F=e.rb_times,k=e.send2,q=e.find_super,P=e.def,j=[],C=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),L=j,a=K=[G(j[0],"BCDice")].concat(L),i=[G(K[0],"DiceTable")].concat(a),T=e.$r(i),P(M(i[0],T("D66Table"),"D66LeftRangeTable"),"$initialize",function A(D,I,y){var v;return A.$$p=null,v=c([],{}),z(y,"each",[],function(f){var u,l;return null==f&&(f=C),u=E(f),l=null==u[1]?C:u[1],z(null==u[0]?C:u[0],"each",[],function(p){return null==p&&(p=C),z(l,"each_with_index",[],function(d,$){var Y,Q;return null==d&&(d=C),null==$&&($=C),Q=w(F(p,10),w($,1)),z(v,"[]=",Y=[Q,d]),Y[Y.length-1]})})}),k(this,q(this,"initialize",A,!1,!0),"initialize",[D,I,v],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var C,K,T,t,_,b,A,a,L,G=e.module,M=e.klass,c=e.hash2,z=e.defs,E=e.def,w=e.truthy,F=e.rb_minus,k=e.rb_plus,q=e.rb_times,P=[],H=e.nil;return C=P,K=L=[G(P[0],"BCDice")].concat(C),T=a=[G(L[0],"DiceTable")].concat(K),_=[t=M(a[0],null,"D66ParityTable")].concat(T),b=e.$r(_),(A=t.$$prototype).odd=A.even=A.name=H,z(t,"$from_i18n",function(I,y){var o=H;return o=b("I18n").$t(I,c(["locale","raise"],{locale:y,raise:!0})),this.$new(o["$[]"]("name"),o["$[]"]("odd"),o["$[]"]("even"))}),E(t,"$initialize",function(I,y,g){var o=this;return o.name=I,o.odd=y.$freeze(),o.even=g.$freeze()}),E(t,"$roll",function(I){var o,s,f,y=this,g=H;return g=I.$roll_once(6),o=I.$roll_once(6),s=(w(g["$odd?"]())?y.odd:y.even)["$[]"](F(o,1)),f=k(q(g,10),o),b("RollResult").$new(y.name,f,s)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var P,U,a,m,i,T,t,x,j,G=e.module,M=e.klass,c=e.def,z=e.rb_plus,E=e.rb_times,w=e.send,F=[],k=e.nil;return P=F,U=j=[G(F[0],"BCDice")].concat(P),a=x=[G(j[0],"DiceTable")].concat(U),i=[m=M(x[0],null,"D66RangeTable")].concat(a),T=e.$r(i),(t=m.$$prototype).items=t.name=k,c(m,"$initialize",function(b,A){return this.name=b,this.items=A.$freeze()}),c(m,"$roll",function(b){var D,I,y,g=k;return D=b.$roll_once(6),I=b.$roll_once(6),y=z(E(D,10),I),g=w(this.items,"find",[],function(v){return null==v&&(v=k),v["$[]"](0)["$include?"](y)}),T("RollResult").$new(this.name,y,g["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var L,a,_,y,o,v,b,A,D,I,i,K,G=e.module,M=e.klass,c=e.const_set,z=e.send,E=e.hash2,w=e.def,F=e.eqeqeq,k=e.truthy,q=e.to_a,P=e.rb_times,H=e.rb_plus,j=[],C=e.nil;return L=j,a=K=[G(j[0],"BCDice")].concat(L),_=i=[G(K[0],"DiceTable")].concat(a),A=[b=M(i[0],null,"RangeTable")].concat(_),D=e.$r(A),(I=b.$$prototype).name=I.items=I.num_of_dice=I.num_of_sides=I.formatter=C,c(A[0],"RollResult",z(D("Struct"),"new",["sum","values","content","formatted"],function y(){return(null==y.$$s?this:y.$$s).$alias_method("to_s","formatted")},{$$s:b})),c(A[0],"Item",D("Struct").$new("range","content")),c(A[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(A[0],"DEFAULT_FORMATTER",z(b,"lambda",[],function(g,o){return null==g&&(g=C),null==o&&(o=C),g.$name()+"("+o.$sum()+") \uff1e "+o.$content()})),b.$attr_reader("name"),b.$attr_reader("num_of_dice"),b.$attr_reader("num_of_sides"),o=[y=e.get_singleton_class(b)].concat(A),v=e.$r(o),w(y,"$from_i18n",function(f,u){var l,N=C;return N=v("I18n").$t(f,E(["locale"],{locale:u})),l=z(N["$[]"]("items"),"map",[],function r(p){return null==p&&(p=C),[(null==r.$$s?this:r.$$s).$conv_string_range(p["$[]"](0)),p["$[]"](1)]},{$$s:this}),this.$new(N["$[]"]("name"),N["$[]"]("type"),l)}),w(y,"$conv_string_range",function(f){var R,u=this;return null==u.name&&(u.name=C),F(v("Integer"),R=f)?f:F(v("String"),R)?k(f["$include?"](".."))?z(v("Range"),"new",q(z(f.$split("..",2),"map",[],function N(l){return null==l&&(l=C),(null==N.$$s?this:N.$$s).$Integer(l)},{$$s:u}))):u.$Integer(f):u.$raise(v("TypeError"),u.name+": "+f+" ("+f.$class()+") must be a String or an Integer")}),w(b,"$initialize",function y(g,o,v){var u,s=y.$$p||C,f=this,R=C;return y.$$p=null,f.name=g.$freeze(),f.formatter=k(u=s)?u:D("DEFAULT_FORMATTER"),R=D("DICE_ROLL_METHOD_RE").$match(o),k(R)||f.$raise(D("ArgumentError"),f.name+": invalid dice roll method: "+o),f.num_of_dice=R["$[]"](1).$to_i(),f.num_of_sides=R["$[]"](2).$to_i(),f.$store(v)}),w(b,"$fetch",function(g){var v,o=this;return v=z(o.items,"find",[],function(f){return null==f&&(f=C),f.$range()["$include?"](g)}),k(v)||o.$raise(D("RangeError"),o.name+": value is out of range: "+g),v}),w(b,"$roll",function(g){var s,o=this,v=C,f=C;return s=(v=g.$roll_barabara(o.num_of_dice,o.num_of_sides)).$sum(),(f=D("RollResult").$new(s,v,o.$fetch(s).$content()))["$formatted="](o.formatter["$[]"](o,f)),f}),b.$private(),w(b,"$store",function(g){var v,s,o=this;return v=z(g,"map",[],function f(u,R){return null==u&&(u=C),null==R&&(R=C),[(null==f.$$s?this:f.$$s).$coerce_to_int_range(u),R]},{$$s:o}),s=z(v,"sort_by",[],function(u,R){return null==u&&(u=C),null==R&&(R=C),u.$min()}),o.$assert_min_sum_is_covered(s),o.$assert_max_sum_is_covered(s),o.$assert_no_gap_or_overlap_in_ranges(s),o.items=z(s,"map",[],function(u,R){return null==u&&(u=C),null==R&&(R=C),D("Item").$new(u,R.$freeze()).$freeze()}).$freeze(),o}),w(b,"$coerce_to_int_range",function(g){var v;return F(D("Integer"),v=g)?D("Range").$new(g,g):F(D("Range"),v)&&k(g.$begin()["$is_a?"](D("Integer")))&&k(g.$end()["$is_a?"](D("Integer")))?g:this.$raise(D("TypeError"),this.name+": "+g+" ("+g.$class()+") must be an Integer or a Range with Integers ")}),w(b,"$assert_min_sum_is_covered",function(g){var v,o=this,s=C;return v=o.num_of_dice,s=g.$first()["$[]"](0),k(s["$include?"](v))||o.$raise(D("RangeError"),o.name+": min value ("+v+") is not covered: "+s),o}),w(b,"$assert_max_sum_is_covered",function(g){var v,o=this,s=C;return v=P(o.num_of_dice,o.num_of_sides),s=g.$last()["$[]"](0),k(s["$include?"](v))||o.$raise(D("RangeError"),o.name+": max value ("+v+") is not covered: "+s),o}),w(b,"$assert_no_gap_or_overlap_in_ranges",function(g){return z(g,"each_cons",[2],function v(s,f){var l,r,u=null==v.$$s?this:v.$$s,R=C,N=C;return null==u.name&&(u.name=C),null==s&&(s=C),null==f&&(f=C),R=s["$[]"](0),N=f["$[]"](0),l=R.$max(),r=H(l,1),k(N["$include?"](l))&&u.$raise(D("RangeError"),u.name+": Range overlap: "+R+" and "+N),k(N["$include?"](r))?C:u.$raise(D("RangeError"),u.name+": Range gap: "+R+" and "+N)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var H,L,m,b,A,D,I,T,K,C,G=e.module,M=e.klass,c=e.send,z=e.def,E=e.rb_minus,w=e.return_ivar,F=[],k=e.nil,q=e.$$$;return H=F,L=C=[G(F[0],"BCDice")].concat(H),m=K=[G(C[0],"DiceTable")].concat(L),b=T=[M(K[0],null,"SaiFicSkillTable")].concat(m),D=[A=M(T[0],null,"Category")].concat(b),I=e.$r(D),z(A,"$initialize",function(g,o,v,s){var f=this;return f.name=g,f.skills=c(o.$map(),"with_index",[2],function(R,N){return null==R&&(R=k),null==N&&(N=k),q(I("SaiFicSkillTable"),"Skill").$new(g,R,v,N,s)}),f.dice=v}),z(A,"$roll",function(g){return this.$skills()["$[]"](E(g.$roll_sum(2,6),2))}),z(A,"$to_s",w("name")),A.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var k,j,K,T,t,a,U,P,G=e.module,M=e.klass,c=e.def,z=e.hash2,E=[],w=e.nil;return k=E,j=P=[G(E[0],"BCDice")].concat(k),K=U=[G(P[0],"DiceTable")].concat(j),a=[M(U[0],null,"SaiFicSkillTable")].concat(K),(t=(T=M(a[0],null,"Skill")).$$prototype).s_format=t.category_dice=t.row_dice=t.category_name=t.name=w,c(T,"$initialize",function(b,A,D,I,y){var g=this;return g.category_name=b,g.name=A,g.category_dice=D,g.row_dice=I,g.s_format=y}),c(T,"$to_s",function(){var b=this;return b.$format(b.s_format,z(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))}),T.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var a,t,I,y,g,o,v,b,i,G=e.module,M=e.klass,c=e.ensure_kwargs,z=e.hash2,E=e.send,F=e.defs,k=e.const_set,q=e.to_ary,P=e.def,H=e.truthy,j=e.rb_minus,C=e.rb_plus,U=e.top,L=[],x=e.nil,K=e.$$$;return U.$require("bcdice/dice_table/sai_fic_skill_table/category"),U.$require("bcdice/dice_table/sai_fic_skill_table/skill"),a=L,t=i=[G(L[0],"BCDice")].concat(a),I=b=[G(i[0],"DiceTable")].concat(t),g=[y=M(b[0],null,"SaiFicSkillTable")].concat(I),o=e.$r(g),(v=y.$$prototype).rtt=v.rtt_format=v.rct=v.rct_format=v.rttn=v.rttn_format=v.categories=x,F(y,"$from_i18n",function(f,u,R){var N,l,r,$,d=x;return null==(N=(R=c(R)).$$smap.rtt)&&(N=x),null==(l=R.$$smap.rct)&&(l=x),null==(r=R.$$smap.rttn)&&(r=x),$=(d=o("I18n").$t("RTT",z(["locale","raise","default"],{locale:u,raise:!1,default:z([],{})})).$merge(o("I18n").$t(f,z(["locale","raise"],{locale:u,raise:!0}))))["$[]"]("items"),d=E(d,"select",[],function(Q,V){return null==Q&&(Q=x),null==V&&(V=x),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](Q)}),this.$new($,e.to_hash(d).$merge(z(["rtt","rct","rttn"],{rtt:N,rct:l,rttn:r})))},-3),k(g[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),k(g[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),k(g[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),k(g[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),P(y,"$initialize",function(f,u){var R,N,l,r,p,n,d,$=this;return null==(R=(u=c(u)).$$smap.rtt)&&(R=x),null==(N=u.$$smap.rct)&&(N=x),null==(l=u.$$smap.rttn)&&(l=x),null==(r=u.$$smap.rtt_format)&&(r=o("DEFAULT_RTT")),null==(p=u.$$smap.rct_format)&&(p=o("DEFAULT_RCT")),null==(n=u.$$smap.rttn_format)&&(n=o("DEFAULT_RTTN")),null==(d=u.$$smap.s_format)&&(d=o("DEFAULT_S")),$.categories=E(f.$map(),"with_index",[1],function(Q,V){var ne,ue,ie;return null==Q&&(Q=x),null==V&&(V=x),ue=null==(ne=q(Q))[0]?x:ne[0],ie=null==ne[1]?x:ne[1],K(o("SaiFicSkillTable"),"Category").$new(ue,ie,V,d)},{$$has_top_level_mlhs_arg:!0}),$.rtt=R,$.rct=N,$.rttn=l.$to_a(),$.rtt_format=r,$.rct_format=p,$.rttn_format=n},-2),k(g[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),y.$attr_reader("categories"),P(y,"$roll_command",function(f,u){var N,R=this,l=x,r=x;return H(["RTT",R.rtt]["$include?"](N=u))?R.$format_skill(R.rtt_format,R.$roll_skill(f)):H(["RCT",R.rct]["$include?"](N))?(l=R.$roll_category(f),R.$format(R.rct_format,z(["category_dice","category_name"],{category_dice:l.$dice(),category_name:l.$name()}))):H(r=o("RTTN").$index(N))||H(r=R.rttn.$index(N))?R.$format_skill(R.rttn_format,R.categories["$[]"](r).$roll(f)):x}),P(y,"$roll_category",function(f){return this.categories["$[]"](j(f.$roll_once(6),1))}),P(y,"$roll_skill",function(f){return this.$roll_category(f).$roll(f)}),P(y,"$prefixes",function(){var f=this;return C(["RTT[1-6]?","RCT",f.rtt,f.rct],f.rttn).$compact()}),y.$private(),P(y,"$format_skill",function(f,u){return this.$format(f,z(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:u.$category_dice(),row_dice:u.$row_dice(),category_name:u.$category_name(),skill_name:u.$name(),text:u.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var H,L,m,i,T,t,_,K,C,G=e.module,M=e.klass,c=e.hash2,z=e.defs,E=e.truthy,w=e.def,F=e.rb_minus,k=[],q=e.nil;return H=k,L=C=[G(k[0],"BCDice")].concat(H),m=K=[G(C[0],"DiceTable")].concat(L),T=[i=M(K[0],null,"Table")].concat(m),t=e.$r(T),(_=i.$$prototype).times=_.sides=_.name=_.items=q,z(i,"$from_i18n",function(A,D){var y=q;return y=t("I18n").$t(A,c(["locale"],{locale:D})),this.$new(y["$[]"]("name"),y["$[]"]("type"),y["$[]"]("items"))}),w(i,"$initialize",function(A,D,I){var y=this,g=q;return y.name=A,y.items=I.$freeze(),g=/(\d+)D(\d+)/i.$match(D),E(g)||y.$raise(t("ArgumentError"),"Unexpected table type: "+D),y.times=g["$[]"](1).$to_i(),y.sides=g["$[]"](2).$to_i()}),w(i,"$roll",function(A){var I,D=this;return I=A.$roll_sum(D.times,D.sides),D.$choice(I)}),w(i,"$choice",function(A){var I,D=this;return I=F(A,D.times),t("RollResult").$new(D.name,A,D.items["$[]"](I))})},Opal.modules["bcdice/dice_table"]=function(e){var G=e.top;return G.$require("bcdice/dice_table/roll_result"),G.$require("bcdice/dice_table/chain_table"),G.$require("bcdice/dice_table/d66_grid_table"),G.$require("bcdice/dice_table/d66_half_grid_table"),G.$require("bcdice/dice_table/d66_one_third_table"),G.$require("bcdice/dice_table/d66_left_range_table"),G.$require("bcdice/dice_table/d66_parity_table"),G.$require("bcdice/dice_table/d66_range_table"),G.$require("bcdice/dice_table/d66_table"),G.$require("bcdice/dice_table/range_table"),G.$require("bcdice/dice_table/sai_fic_skill_table"),G.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var w,P,j,k,G=e.module,M=e.const_set,c=[];return w=c,P=k=[G(c[0],"BCDice")].concat(w),j=[G(k[0],"D66SortType")].concat(P),M(j[0],"NO_SORT","no_sort"),M(j[0],"ASC","asc"),M(j[0],"DESC","desc"),function(q,P){var j=[G(q,"RoundType")].concat(P);return M(j[0],"CEIL","ceil"),M(j[0],"FLOOR","floor"),M(j[0],"ROUND","round")}(k[0],k)},Opal.modules["bcdice/translate"]=function(e){var P,U,L,x,K,j,G=e.module,M=e.ensure_kwargs,c=e.kwrestargs,E=e.hash2,w=e.def,F=[],k=e.nil;return P=F,U=j=[G(F[0],"BCDice")].concat(P),x=[L=G(j[0],"Translate")].concat(U),K=e.$r(x),w(L,"$translate",function(a,m){var i,T=this;return null==T.locale&&(T.locale=k),m=M(m),i=c(m,{}),K("I18n").$translate(a,E(["locale","raise"],{locale:T.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var L,B,x,P,j,M=e.klass,c=e.send,z=e.def,E=e.return_val,w=e.return_ivar,F=[],k=e.nil;return P=F,L=j=[(0,e.module)(F[0],"BCDice")].concat(P),[x=M(j[0],null,"Result")].concat(L),z(B=e.get_singleton_class(x),"$success",function(i){return c(this.$new(),"tap",[],function(_){var b;return null==_&&(_=k),_["$text="](i),c(_,"success=",b=[!0]),b[b.length-1]})}),z(B,"$failure",function(i){return c(this.$new(),"tap",[],function(_){var b;return null==_&&(_=k),_["$text="](i),c(_,"failure=",b=[!0]),b[b.length-1]})}),z(B,"$critical",function(i){return c(this.$new(),"tap",[],function(_){var b;return null==_&&(_=k),_["$text="](i),_["$critical="](!0),c(_,"success=",b=[!0]),b[b.length-1]})}),z(B,"$fumble",function(i){return c(this.$new(),"tap",[],function(_){var b;return null==_&&(_=k),_["$text="](i),_["$fumble="](!0),c(_,"failure=",b=[!0]),b[b.length-1]})}),z(B,"$nothing",E("nothing")),z(x,"$initialize",function(a){var m=this;return null==a&&(a=k),m.text=a,m.rands=k,m.detailed_rands=k,m.secret=!1,m.success=!1,m.failure=!1,m.critical=!1,m.fumble=!1},-1),x.$attr_accessor("text","rands","detailed_rands"),x.$attr_writer("secret","success","failure","critical","fumble"),z(x,"$secret?",w("secret")),z(x,"$success?",w("success")),z(x,"$failure?",w("failure")),z(x,"$critical?",w("critical")),z(x,"$fumble?",w("fumble")),z(x,"$condition=",function(a){return this.success=a,this.failure=a["$!"]()})},Opal.modules["racc/parser"]=function(e){var A,I,y,G=e.module,M=e.klass,c=e.truthy,z=e.const_set,E=e.defs,w=e.gvars,F=e.rb_lt,k=e.def,q=e.to_ary,P=e.send,H=e.neqeq,j=e.rb_plus,C=e.eqeq,U=e.rb_ge,L=e.rb_gt,x=e.rb_minus,K=e.rb_le,B=e.rb_times,a=e.assign_ivar_val,i=[],T=e.$r(i),t=e.nil,_=e.$$$;return A=i,I=[G(i[0],"Racc")].concat(A),y=e.$r(I),M(I[0],y("StandardError"),"ParseError"),c(_("::","ParseError","skip_raise")?"constant":t)||z(i[0],"ParseError",_(T("Racc"),"ParseError")),function(b,A){var s,f,u,R,N,y=[G(b,"Racc")].concat(A),g=e.$r(y);return c(g("Racc_No_Extensions","skip_raise")?"constant":t)||z(y[0],"Racc_No_Extensions",!1),s=y,u=[f=M(y[0],null,"Parser")].concat(s),R=e.$r(u),(N=f.$$prototype).yydebug=N.racc_debug_out=N.racc_error_status=N.racc_t=N.racc_vstack=N.racc_val=N.racc_state=N.racc_tstack=t,z(u[0],"Racc_Runtime_Version","1.4.6"),z(u[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),z(u[0],"Racc_Runtime_Core_Version_R","1.4.6"),z(u[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),z(u[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),z(u[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),z(u[0],"Racc_Runtime_Core_Version",R("Racc_Runtime_Core_Version_R")),z(u[0],"Racc_Runtime_Core_Revision",R("Racc_Runtime_Core_Revision_R")),z(u[0],"Racc_Runtime_Type","ruby"),E(R("Parser"),"$racc_runtime_type",function(){return R("Racc_Runtime_Type")}),k(f,"$_racc_setup",function(){var r,p,n=this,d=t,$=t;return null==w.stderr&&(w.stderr=t),c(_(n.$class(),"Racc_debug_parser"))||(n.yydebug=!1),c(null!=(r=n.yydebug)&&r!==t?"instance-variable":t)||(n.yydebug=!1),c(n.yydebug)&&(c(null!=(p=n.racc_debug_out)&&p!==t?"instance-variable":t)||(n.racc_debug_out=w.stderr),n.racc_debug_out=c(d=n.racc_debug_out)?d:w.stderr),$=_(n.$class(),"Racc_arg"),c(F($.$size(),14))&&$["$[]="](13,!0),$}),k(f,"$_racc_init_sysvars",function(){var r=this;return r.racc_state=[0],r.racc_tstack=[],r.racc_vstack=[],r.racc_t=t,r.racc_val=t,r.racc_read_next=!0,r.racc_user_yyerror=!1,r.racc_error_status=0}),k(f,"$do_parse",function(){return this.$__send__(R("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),k(f,"$next_token",function(){return this.$raise(R("NotImplementedError"),this.$class()+"#next_token is not defined")}),k(f,"$_racc_do_parse_rb",function(r,p){var n,$=this,Y=t,Q=t,V=t,ne=t,ue=t,ie=t,ce=t,ae=t;return n=q(r),Y=null==n[0]?t:n[0],Q=null==n[1]?t:n[1],V=null==n[2]?t:n[2],ne=null==n[3]?t:n[3],ue=null==n[10]?t:n[10],$.$_racc_init_sysvars(),ie=ce=ae=t,P($,"catch",["racc_end_parse"],function re(){var se,W,h=null==re.$$s?this:re.$$s,J=t;for(null==h.racc_state&&(h.racc_state=t),null==h.racc_read_next&&(h.racc_read_next=t),null==h.racc_t&&(h.racc_t=t),null==h.yydebug&&(h.yydebug=t),null==h.racc_val&&(h.racc_val=t);c(!0);)for(c(ae=ne["$[]"](h.racc_state["$[]"](-1)))?(c(h.racc_read_next)&&H(h.racc_t,0)&&(W=h.$next_token(),se=q(W),ie=null==se[0]?t:se[0],h.racc_val=null==se[1]?t:se[1],h.racc_t=c(ie)?c(J=ue["$[]"](ie))?J:1:0,c(h.yydebug)&&h.$racc_read_token(h.racc_t,ie,h.racc_val),h.racc_read_next=!1),ae=j(ae,h.racc_t),c(U(ae,0))&&c(ce=Y["$[]"](ae))&&C(Q["$[]"](ae),h.racc_state["$[]"](-1))||(ce=V["$[]"](h.racc_state["$[]"](-1)))):ce=V["$[]"](h.racc_state["$[]"](-1));c(ce=h.$_racc_evalact(ce,r)););},{$$s:$})}),k(f,"$yyparse",function(r,p){return this.$__send__(R("Racc_YY_Parse_Method"),r,p,this.$_racc_setup(),!0)}),k(f,"$_racc_yyparse_rb",function(r,p,n,d){var $,Q=this,V=t,ne=t,$e=t,ue=t,ce=t,ae=t,re=t;return $=q(n),V=null==$[0]?t:$[0],ne=null==$[1]?t:$[1],$e=null==$[2]?t:$[2],ue=null==$[3]?t:$[3],ce=null==$[10]?t:$[10],Q.$_racc_init_sysvars(),ae=t,re=t,P(Q,"catch",["racc_end_parse"],function se(){var W=null==se.$$s?this:se.$$s;for(null==W.racc_state&&(W.racc_state=t);!c(re=ue["$[]"](W.racc_state["$[]"](-1)));)for(;c(ae=W.$_racc_evalact($e["$[]"](W.racc_state["$[]"](-1)),n)););return P(r,"__send__",[p],function h(J,Z){var S=null==h.$$s?this:h.$$s,O=t,te=t;for(null==S.racc_t&&(S.racc_t=t),null==S.racc_state&&(S.racc_state=t),null==S.racc_read_next&&(S.racc_read_next=t),null==J&&(J=t),null==Z&&(Z=t),S.racc_t=c(J)?c(O=ce["$[]"](J))?O:1:0,S.racc_val=Z,S.racc_read_next=!1,re=j(re,S.racc_t),c(U(re,0))&&c(ae=V["$[]"](re))&&C(ne["$[]"](re),S.racc_state["$[]"](-1))||(ae=$e["$[]"](S.racc_state["$[]"](-1)));c(ae=S.$_racc_evalact(ae,n)););for(;c(c(O=c(te=(re=ue["$[]"](S.racc_state["$[]"](-1)))["$!"]())?te:S.racc_read_next["$!"]())?O:S.racc_t["$=="](0));)for(c(re)&&c(re=j(re,S.racc_t))&&c(U(re,0))&&c(ae=V["$[]"](re))&&C(ne["$[]"](re),S.racc_state["$[]"](-1))||(ae=$e["$[]"](S.racc_state["$[]"](-1)));c(ae=S.$_racc_evalact(ae,n)););},{$$s:W})},{$$s:Q})}),k(f,"$_racc_evalact",function(r,p){var n,$e,$=this,Y=t,Q=t,ne=t,ue=t,ie=t,ce=t;if(Y=null==(n=q(p))[0]?t:n[0],Q=null==n[1]?t:n[1],ne=null==n[3]?t:n[3],$e=null==n[11]?t:n[11],ue=null==n[12]?t:n[12],c(L(r,0))&&c(F(r,$e)))c(L($.racc_error_status,0))&&(C($.racc_t,1)||($.racc_error_status=x($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(r),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(F(r,0))&&c(L(r,ue["$-@"]()))){if(ie=P($,"catch",["racc_jump"],function ae(){var re=null==ae.$$s?this:ae.$$s;return null==re.racc_state&&(re.racc_state=t),re.racc_state.$push(re.$_racc_do_reduce(p,r)),!1},{$$s:$}),c(ie))switch(ie.valueOf()){case 1:return $.racc_user_yyerror=!0,ue["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(C(r,$e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(C(r,ue["$-@"]())){switch($.racc_error_status.valueOf()){case 0:c(p["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:C($.racc_t,0)&&$.$throw("racc_end_parse",t),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(ce=ne["$[]"]($.racc_state["$[]"](-1)))&&(ce=j(ce,1),c(U(ce,0))&&c(r=Y["$[]"](ce))&&C(Q["$[]"](ce),$.racc_state["$[]"](-1))));)c(K($.racc_state.$size(),1))&&$.$throw("racc_end_parse",t),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return r}$.$raise("[Racc Bug] unknown action "+r.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),t}),k(f,"$_racc_do_reduce",function(r,p){var n,ue,ce,J,Z,S,ee,$=this,Q=t,V=t,ne=t,$e=t,ie=t,ae=t,re=t,se=t,W=t,h=t,O=t,te=t,X=t;return Q=null==(n=q(r))[4]?t:n[4],V=null==n[5]?t:n[5],ne=null==n[6]?t:n[6],$e=null==n[7]?t:n[7],ue=null==n[8]?t:n[8],ie=null==n[9]?t:n[9],ce=null==n[13]?t:n[13],ae=$.racc_state,re=$.racc_vstack,se=$.racc_tstack,W=B(p,-3),h=ie["$[]"](W),J=ie["$[]"](j(W,1)),Z=ie["$[]"](j(W,2)),S=[],c($.yydebug)&&(O=se["$[]"](h["$-@"](),h)),te=re["$[]"](h["$-@"](),h),c($.yydebug)&&se["$[]="](h["$-@"](),h,S),re["$[]="](h["$-@"](),h,S),ae["$[]="](h["$-@"](),h,S),c(ce)?re.$push($.$__send__(Z,te,re,te["$[]"](0))):re.$push($.$__send__(Z,te,re)),se.$push(J),c($.yydebug)&&$.$racc_reduce(O,J,se,re),ee=x(J,ue),c(W=$e["$[]"](ee))&&(W=j(W,ae["$[]"](-1)),c(U(W,0))&&c(X=Q["$[]"](W))&&C(V["$[]"](W),ee))?X:ne["$[]"](ee)}),k(f,"$on_error",function(r,p,n){var $,d=this;return d.$raise(R("ParseError"),d.$sprintf("\nparse error on value %s (%s)",p.$inspect(),c($=d.$token_to_str(r))?$:"?"))}),k(f,"$yyerror",function(){return this.$throw("racc_jump",1)}),k(f,"$yyaccept",function(){return this.$throw("racc_jump",2)}),k(f,"$yyerrok",a("racc_error_status",0)),k(f,"$racc_read_token",function(r,p,n){var d=this;return d.racc_debug_out.$print("read    "),d.racc_debug_out.$print(p.$inspect(),"(",d.$racc_token2str(r),") "),d.racc_debug_out.$puts(n.$inspect()),d.racc_debug_out.$puts()}),k(f,"$racc_shift",function(r,p,n){var d=this;return d.racc_debug_out.$puts("shift   "+d.$racc_token2str(r)),d.$racc_print_stacks(p,n),d.racc_debug_out.$puts()}),k(f,"$racc_reduce",function(r,p,n,d){var $=this,Y=t;return(Y=$.racc_debug_out).$print("reduce "),c(r["$empty?"]())?Y.$print(" <none>"):P(r,"each",[],function Q(V){return null==V&&(V=t),Y.$print(" ",(null==Q.$$s?this:Q.$$s).$racc_token2str(V))},{$$s:$}),Y.$puts(" --\x3e "+$.$racc_token2str(p)),$.$racc_print_stacks(n,d),$.racc_debug_out.$puts()}),k(f,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),k(f,"$racc_e_pop",function(r,p,n){var d=this;return d.racc_debug_out.$puts("error recovering mode: pop token"),d.$racc_print_states(r),d.$racc_print_stacks(p,n),d.racc_debug_out.$puts()}),k(f,"$racc_next_state",function(r,p){var n=this;return n.racc_debug_out.$puts("goto    "+r),n.$racc_print_states(p),n.racc_debug_out.$puts()}),k(f,"$racc_print_stacks",function(r,p){var d=t;return(d=this.racc_debug_out).$print("        ["),P(r,"each_index",[],function $(Y){return null==Y&&(Y=t),d.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(r["$[]"](Y))," ",p["$[]"](Y).$inspect(),")")},{$$s:this}),d.$puts(" ]")}),k(f,"$racc_print_states",function(r){var n=t;return(n=this.racc_debug_out).$print("        ["),P(r,"each",[],function($){return null==$&&($=t),n.$print(" ",$)}),n.$puts(" ]")}),k(f,"$racc_token2str",function(r){var n;return c(n=_(this.$class(),"Racc_token_to_s_table")["$[]"](r))?n:this.$raise("[Racc Bug] can't convert token "+r+" to string")}),k(f,"$token_to_str",function(r){return _(this.$class(),"Racc_token_to_s_table")["$[]"](r)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var a,t,D,s,f,y,g,b,i,G=e.module,M=e.klass,c=e.def,z=e.thrower,E=e.return_ivar,w=e.send2,F=e.find_super,k=e.eqeq,q=e.const_set,P=e.eqeqeq,H=e.rb_divide,j=e.truthy,C=e.assign_ivar,U=e.alias,L=[],x=e.nil,K=e.$$$;return a=L,t=i=[G(L[0],"BCDice")].concat(a),D=b=[G(i[0],"Arithmetic")].concat(t),y=[G(b[0],"Node")].concat(D),g=e.$r(y),(f=(s=M(y[0],null,"BinaryOp")).$$prototype).lhs=f.rhs=f.op=x,c(s,"$initialize",function(R,N,l){var r=this;return r.lhs=R,r.op=N,r.rhs=l}),c(s,"$eval",function(R){try{z("eval_return");var p,l=this,r=x;return r=l.lhs.$eval(R),p=l.rhs.$eval(R),r.$send(l.op,p)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),c(s,"$output",function(){var R=this;return""+R.lhs.$output()+R.op+R.rhs.$output()}),c(s,"$s_exp",function(){var R=this;return"("+R.$op_for_s_exp()+" "+R.lhs.$s_exp()+" "+R.rhs.$s_exp()+")"}),c(s,"$op_for_s_exp",E("op")),function(o,v,s){var f=M(o,v,"DivideBase"),u=[f].concat(s),R=e.$r(u),N=f.$$prototype;N.lhs=N.rhs=N.op=x,c(f,"$initialize",function l(r,p){return l.$$p=null,w(this,F(this,"initialize",l,!1,!0),"initialize",[r,"/",p],null)}),c(f,"$eval",function(r){try{z("eval_return");var d,$,n=this;return d=n.lhs.$eval(r),$=n.rhs.$eval(r),k($,0)&&n.$raise(R("ZeroDivisionError")),n.$divide_and_round(d,$,r)}catch(Y){if(Y===e.t_eval_return)return Y.$v;throw Y}}),c(f,"$output",function l(){var r=l.$$p||x,p=this;return l.$$p=null,""+w(p,F(p,"output",l,!1,!0),"output",[],r)+p.$rounding_method()}),f.$private(),c(f,"$rounding_method",function(){return K(this.$class(),"ROUNDING_METHOD")}),c(f,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(f,"$divide_and_round",function(r,p,n){return this.$raise(R("NotImplementedError"))})}(y[0],g("BinaryOp"),y),function(o,v,s){var f=M(o,v,"DivideWithGameSystemDefault"),u=[f].concat(s),R=e.$r(u);q(u[0],"ROUNDING_METHOD",""),f.$private(),c(f,"$divide_and_round",function(l,r,p){var n,d=x;return P(K(R("RoundType"),"CEIL"),n=p)?H(l.$to_f(),r).$ceil():P(K(R("RoundType"),"ROUND"),n)?(d=H(l.$to_f(),r),j(d["$negative?"]())?d.$abs().$round()["$-@"]():d.$round()):H(l,r).$floor()})}(y[0],g("DivideBase"),y),function(o,v,s){var f=M(o,v,"DivideWithCeil"),u=[f].concat(s);q(u[0],"ROUNDING_METHOD","C"),f.$private(),c(f,"$divide_and_round",function(N,l,r){return H(N.$to_f(),l).$ceil()})}(y[0],g("DivideBase"),y),function(o,v,s){var f=M(o,v,"DivideWithRound"),u=[f].concat(s);q(u[0],"ROUNDING_METHOD","R"),f.$private(),c(f,"$divide_and_round",function(N,l,r){var p=x;return p=H(N.$to_f(),l),j(p["$negative?"]())?p.$abs().$round()["$-@"]():p.$round()})}(y[0],g("DivideBase"),y),function(o,v,s){var f=M(o,v,"DivideWithFloor"),u=[f].concat(s);q(u[0],"ROUNDING_METHOD","F"),f.$private(),c(f,"$divide_and_round",function(N,l,r){return H(N,l).$floor()})}(y[0],g("DivideBase"),y),function(o,v){var s=M(o,null,"Negative");s.$$prototype.body=x,c(s,"$initialize",C("body")),c(s,"$eval",function(R){try{return z("eval_return"),this.body.$eval(R)["$-@"]()}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),c(s,"$output",function(){return"-"+this.body.$output()}),c(s,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(y[0]),function(o,v){var s=M(o,null,"Parenthesis");s.$$prototype.expr=x,c(s,"$initialize",C("expr")),c(s,"$eval",function(R){try{return z("eval_return"),this.expr.$eval(R)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),c(s,"$output",function(){return"("+this.expr.$output()+")"}),c(s,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(y[0]),function(o,v){var s=M(o,null,"Number");return s.$$prototype.value=x,c(s,"$initialize",C("value")),c(s,"$eval",E("value")),c(s,"$output",function(){return this.value.$to_s()}),U(s,"s_exp","output")}(y[0])},Opal.modules.strscan=function(e){var C,U,L,x,K,M=e.def,c=e.truthy,z=e.eqeqeq,E=e.Opal,w=e.return_ivar,F=e.send,k=e.alias,q=[],P=e.nil;return C=q,L=[U=(0,e.klass)(q[0],null,"StringScanner")].concat(C),x=e.$r(L),(K=U.$$prototype).pos=K.string=K.working=K.matched=K.prev_pos=K.match=P,U.$attr_reader("pos","matched"),M(U,"$initialize",function(a){var m=this;return m.string=a,m.pos=0,m.matched=P,m.working=a,m.match=[]}),U.$attr_reader("string"),M(U,"$beginning_of_line?",function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)}),M(U,"$scan",function(a){var m=this,i=(a=m.$anchor(a)).exec(m.working);return null==i?m.matched=P:(m.prev_pos=m.pos,m.pos+=i[0].length,m.working=m.working.substring(i[0].length),m.matched=i[0],m.match=i,i[0])}),M(U,"$scan_until",function(a){var m=this;a=m.$anchor(a);for(var i=m.working,T=0;i.length!=T;++T){var t=a.exec(i.substr(T));if(null!==t){var _=T+t[0].length,b=i.substr(0,_);return m.matched=t[0],m.match=t,m.prev_pos=m.pos+T,m.pos+=_,m.working=i.substr(_),b}}return m.matched=P}),M(U,"$[]",function(a){var i;if(c(this.match["$empty?"]()))return P;z(x("Symbol"),i=a)?a=a.$to_s():z(x("String"),i)||(a=E["$coerce_to!"](a,x("Integer"),"to_int"));var T=this.match;return a<0&&(a+=T.length),a<0||a>=T.length||null==T[a]?P:T[a]}),M(U,"$check",function(a){var m=this,i=(a=m.$anchor(a)).exec(m.working);return m.matched=null==i?P:i[0]}),M(U,"$check_until",function(a){var m=this,i=m.prev_pos,T=m.pos,t=m.working,_=m.$scan_until(a);return m.prev_pos=i,m.pos=T,m.working=t,_}),M(U,"$peek",function(a){return this.working.substring(0,a)}),M(U,"$eos?",function(){return 0===this.working.length}),M(U,"$exist?",function(a){var i=a.exec(this.working);return null==i?P:0==i.index?0:i.index+1}),M(U,"$skip",function(a){var m=this,i=(a=m.$anchor(a)).exec(m.working);if(null==i)return m.match=[],m.matched=P;var T=i[0],t=T.length;return m.matched=T,m.match=i,m.prev_pos=m.pos,m.pos+=t,m.working=m.working.substring(t),t}),M(U,"$skip_until",function(a){var i=this.$scan_until(a);return i===P?P:(this.matched=i.substr(-1),i.length)}),M(U,"$get_byte",function(){var a=this,m=P;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,m=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=P,m}),M(U,"$match?",function(a){var m=this,i=(a=m.$anchor(a)).exec(m.working);return null==i?P:(m.prev_pos=m.pos,i[0].length)}),M(U,"$pos=",function(a){var m=this;return a<0&&(a+=m.string.$length()),m.pos=a,m.working=m.string.slice(a)}),M(U,"$matched_size",function(){return this.matched===P?P:this.matched.length}),M(U,"$post_match",function(){var a=this;return a.matched===P?P:a.string.substr(a.pos)}),M(U,"$pre_match",function(){var a=this;return a.matched===P?P:a.string.substr(0,a.prev_pos)}),M(U,"$reset",function(){var a=this;return a.working=a.string,a.matched=P,a.pos=0}),M(U,"$rest",w("working")),M(U,"$rest?",function(){return 0!==this.working.length}),M(U,"$rest_size",function(){return this.$rest().$size()}),M(U,"$terminate",function(){var a,m=this;return m.match=P,a=[m.string.$length()],F(m,"pos=",a),a[a.length-1]}),M(U,"$unscan",function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=P,a.match=P,a}),k(U,"bol?","beginning_of_line?"),k(U,"getch","get_byte"),U.$private(),M(U,"$anchor",function(a){var m=a.toString().match(/\/([^\/]+)$/);return m=m?m[1]:void 0,new RegExp("^(?:"+a.source+")",m)})},Opal.modules["bcdice/normalize"]=function(e){var k,j,P,G=e.module,M=e.eqeqeq,c=e.def,z=e.eqeq,E=[],w=e.nil;return k=E,P=[G(E[0],"BCDice")].concat(k),(j=G(P[0],"Normalize")).$module_function(),c(j,"$comparison_operator",function(U){var L;return M(/<=|=</,L=U)?"<=":M(/>=|=>/,L)?">=":M(/<>|!=|=!/,L)?"!=":M(/</,L)?"<":M(/>/,L)?">":M(/=/,L)?"==":w}),c(j,"$target_number",function(U){return z(U,"?")?U:U.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var C,K,T,t,_,b,A,a,L,G=e.module,M=e.klass,c=e.const_set,z=e.hash2,E=e.truthy,w=e.send,F=e.def,k=e.thrower,q=e.top,P=[],H=e.nil;return q.$require("strscan"),q.$require("bcdice/normalize"),C=P,K=L=[G(P[0],"BCDice")].concat(C),T=a=[G(L[0],"Command")].concat(K),_=[t=M(a[0],null,"Lexer")].concat(T),b=e.$r(_),(A=t.$$prototype).scanner=A.notations=H,c(_[0],"SYMBOLS",z(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),F(t,"$initialize",function(I,y){var g,o,s;return I=E(s=(g=(o=I)===H||null==o?H:o.$split(" ",2))===H||null==g?H:g.$first())?s:"",this.scanner=b("StringScanner").$new(I),this.notations=w(y,"map",[],function(u){return null==u&&(u=H),E(u["$is_a?"](b("String")))?b("Regexp").$new(u):u})}),F(t,"$next_token",function(){try{var I=k("return"),y=this,g=H,o=H,s=H,f=H;return E(y.scanner["$eos?"]())?[!1,"$"]:(w(y.notations,"each",[],function u(R){var l,N=null==u.$$s?this:u.$$s;if(null==N.scanner&&(N.scanner=H),null==R&&(R=H),l=N.scanner.$scan(R),!E(l))return H;I.$throw(["NOTATION",l])},{$$s:y,$$ret:I}),E(g=y.scanner.$scan(/\d+/))?["NUMBER",g.$to_i()]:E(o=y.scanner.$scan(/[<>!=]+/))?(o=b("Normalize").$comparison_operator(o),[E(o)?"CMP_OP":"ILLEGAL",o]):(s=y.scanner.$getch().$upcase(),[E(f=b("SYMBOLS")["$[]"](s))?f:s.$to_sym(),s]))}catch(u){if(u===I)return u.$v;throw u}}),F(t,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var q,C,B,a,m,i,T,L,H,G=e.module,M=e.klass,c=e.def,z=e.return_ivar,E=e.truthy,w=[],F=e.nil;return q=w,C=H=[G(w[0],"BCDice")].concat(q),B=L=[G(H[0],"Command")].concat(C),m=[a=M(L[0],null,"Parsed")].concat(B),i=e.$r(m),(T=a.$$prototype).critical=T.fumble=T.dollar=T.modify_number=T.question_target=T.target_number=T.prefix_number=T.command=T.suffix_number=T.cmp_op=F,a.$attr_accessor("command"),a.$attr_accessor("prefix_number"),a.$attr_accessor("suffix_number"),a.$attr_accessor("critical"),a.$attr_accessor("fumble"),a.$attr_accessor("dollar"),a.$attr_accessor("modify_number"),a.$attr_accessor("cmp_op"),a.$attr_accessor("target_number"),a.$attr_writer("question_target"),c(a,"$initialize",function(){var _=this;return _.prefix_number=F,_.suffix_number=F,_.critical=F,_.fumble=F,_.dollar=F,_.cmp_op=F,_.target_number=F,_.question_target=!1}),c(a,"$question_target?",z("question_target")),c(a,"$to_s",function(_){var b=this,A=F,D=F,I=F,y=F,g=F;switch(null==_&&(_="after_command"),A=E(b.critical)?"@"+b.critical:F,D=E(b.fumble)?"#"+b.fumble:F,I=E(b.dollar)?"$"+b.dollar:F,y=i("Format").$modifier(b.modify_number),g=E(b.question_target)?"?":b.target_number,_.valueOf()){case"after_command":return[b.prefix_number,b.command,b.suffix_number,A,D,I,y,b.cmp_op,g].$join();case"after_modify_number":return[b.prefix_number,b.command,b.suffix_number,y,A,D,I,b.cmp_op,g].$join();case"after_target_number":return[b.prefix_number,b.command,b.suffix_number,y,b.cmp_op,g,A,D,I].$join();default:return F}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var _,I,f,p,n,d,$,Y,Q,V,ne,$e,ce,u,l,r,se,g,o,A,G=e.klass,M=e.module,c=e.slice,z=e.extract_kwargs,E=e.ensure_kwargs,w=e.get_kwarg,F=e.send2,k=e.find_super,q=e.def,P=e.send,H=e.eqeq,j=e.thrower,C=e.hash,U=e.const_set,L=e.truthy,x=e.to_ary,K=e.hash2,B=e.top,a=[],m=e.$r(a),i=e.nil,T=e.$$$;return B.$require("racc/parser.rb"),B.$require("bcdice/arithmetic/node"),B.$require("bcdice/command/lexer"),B.$require("bcdice/command/parsed"),G(T(m("BCDice"),"Command"),T(m("Racc"),"Parser"),"Parser"),_=a,I=A=[M(a[0],"BCDice")].concat(_),g=[M(A[0],"Command")].concat(I),o=e.$r(g),f=g,l=[u=G(g[0],T(o("Racc"),"Parser"),"Parser")].concat(f),r=e.$r(l),(se=u.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=i,q(u,"$initialize",function W(h,J){var Z,S,O,te,X=this;return W.$$p=null,Z=c(arguments),S=z(Z),S=E(S),O=Z,te=w(S,"round_type"),F(X,k(X,"initialize",W,!1,!0),"initialize",[],null),X.notations=O,X.round_type=te,X.prefix_number=!1,X.suffix_number=!1,X.need_prefix_number=!1,X.need_suffix_number=!1,X.modifier=!0,X.critical=!1,X.fumble=!1,X.dollar=!1,X.allowed_cmp_op=[i,">=",">","<=","<","==","!="],X.question_target=!1},-2),q(u,"$disable_modifier",function(){return this.modifier=!1,this}),q(u,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),q(u,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),q(u,"$has_prefix_number",function(){var h=this;return h.prefix_number=!0,h.need_prefix_number=!0,h}),q(u,"$has_suffix_number",function(){var h=this;return h.suffix_number=!0,h.need_suffix_number=!0,h}),q(u,"$enable_critical",function(){return this.critical=!0,this}),q(u,"$enable_fumble",function(){return this.fumble=!0,this}),q(u,"$enable_dollar",function(){return this.dollar=!0,this}),q(u,"$restrict_cmp_op_to",function(h){var J;return J=c(arguments),this.allowed_cmp_op=J,this},-1),q(u,"$enable_question_target",function(){return this.question_target=!0,this}),q(u,"$parse",function(h){var J=this;try{return J.lexer=r("Lexer").$new(h,J.notations),J.$do_parse()}catch(Z){if(!e.rescue(Z,[r("ParseError"),r("ZeroDivisionError")]))throw Z;try{return i}finally{e.pop_exception()}}}),u.$private(),q(u,"$parsed",function(h,J,Z,S){try{return j("eval_return"),P(r("Parsed").$new(),"tap",[],function ee(X){var _e,le,de,me,ve,fe,be,oe=null==ee.$$s?this:ee.$$s;return null==oe.round_type&&(oe.round_type=i),null==X&&(X=i),X["$command="](h["$[]"]("command")),X["$prefix_number="]((_e=h["$[]"]("prefix"))===i||null==_e?i:_e.$eval(oe.round_type)),X["$suffix_number="]((le=h["$[]"]("suffix"))===i||null==le?i:le.$eval(oe.round_type)),X["$critical="]((de=J["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),X["$fumble="]((me=J["$[]"]("fumble"))===i||null==me?i:me.$eval(oe.round_type)),X["$dollar="]((ve=J["$[]"]("dollar"))===i||null==ve?i:ve.$eval(oe.round_type)),X["$modify_number="](Z.$eval(oe.round_type)),X["$cmp_op="](S["$[]"]("cmp_op")),H(S["$[]"]("target"),"?")?(X["$question_target="](!0),P(X,"target_number=",fe=[0]),fe[fe.length-1]):(X["$question_target="](!1),fe=[(be=S["$[]"]("target"),be===i||null==be?i:be.$eval(oe.round_type))],P(X,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),q(u,"$next_token",function(){return this.lexer.$next_token()}),p=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),n=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),d=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),$=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),Y=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),Q=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),V=[i,6,13,3,9,-1,27,-15,-10,-1,-38],ne=[i,i,i,i,i,i,19,16,15,i,i],$e=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ce=C(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),U(l[0],"Racc_arg",[p,n,$,d,Y,Q,ne,V,19,$e,ce,58,35,!0]),L(r("Ractor","skip_raise")?"constant":i)&&r("Ractor").$make_shareable(r("Racc_arg")),U(l[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),L(r("Ractor","skip_raise")?"constant":i)&&r("Ractor").$make_shareable(r("Racc_token_to_s_table")),U(l[0],"Racc_debug_parser",!1),q(u,"$_reduce_1",function(h,J,Z){var S;return L(this.modifier)||this.$raise(r("ParseError")),S=x(h),this.$parsed(null==S[0]?i:S[0],null==S[1]?i:S[1],null==S[2]?i:S[2],null==S[3]?i:S[3])}),q(u,"$_reduce_2",function(h,J,Z){var S;return L(this.modifier)||this.$raise(r("ParseError")),S=x(h),this.$parsed(null==S[0]?i:S[0],null==S[2]?i:S[2],null==S[1]?i:S[1],null==S[3]?i:S[3])}),q(u,"$_reduce_3",function(h,J,Z){var S,_e;return _e=null==(S=x(h))[2]?i:S[2],this.$parsed(null==S[0]?i:S[0],null==S[1]?i:S[1],T(T(r("Arithmetic"),"Node"),"Number").$new(0),_e)}),q(u,"$_reduce_4",function(h,J,Z){var S=this;return L(S.prefix_number)&&L(S.suffix_number)||S.$raise(r("ParseError")),K(["command","prefix","suffix"],{command:h["$[]"](1),prefix:h["$[]"](0),suffix:h["$[]"](2)})}),q(u,"$_reduce_5",function(h,J,Z){var S=this;return L(S.prefix_number)||S.$raise(r("ParseError")),L(S.need_suffix_number)&&S.$raise(r("ParseError")),K(["command","prefix"],{command:h["$[]"](1),prefix:h["$[]"](0)})}),q(u,"$_reduce_6",function(h,J,Z){var S=this;return L(S.suffix_number)||S.$raise(r("ParseError")),L(S.need_prefix_number)&&S.$raise(r("ParseError")),K(["command","suffix"],{command:h["$[]"](0),suffix:h["$[]"](1)})}),q(u,"$_reduce_7",function(h,J,Z){var S=this;return(L(S.need_prefix_number)||L(S.need_suffix_number))&&S.$raise(r("ParseError")),K(["command"],{command:h["$[]"](0)})}),q(u,"$_reduce_8",function(h,J,Z){return K([],{})}),q(u,"$_reduce_9",function(h,J,Z){var S,_e,ee=i;return ee=null==(S=x(h))[0]?i:S[0],_e=null==S[2]?i:S[2],L(this.critical)&&L(ee["$[]"]("critical")["$nil?"]())||this.$raise(r("ParseError")),ee["$[]="]("critical",_e),ee}),q(u,"$_reduce_10",function(h,J,Z){var S,_e,ee=i;return ee=null==(S=x(h))[0]?i:S[0],_e=null==S[2]?i:S[2],L(this.fumble)&&L(ee["$[]"]("fumble")["$nil?"]())||this.$raise(r("ParseError")),ee["$[]="]("fumble",_e),ee}),q(u,"$_reduce_11",function(h,J,Z){var S,_e,ee=i;return ee=null==(S=x(h))[0]?i:S[0],_e=null==S[2]?i:S[2],L(this.dollar)&&L(ee["$[]"]("dollar")["$nil?"]())||this.$raise(r("ParseError")),ee["$[]="]("dollar",_e),ee}),q(u,"$_reduce_12",function(h,J,Z){return h["$[]"](1)}),q(u,"$_reduce_13",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"Negative").$new(h["$[]"](1))}),q(u,"$_reduce_14",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"BinaryOp").$new(h["$[]"](0),"+",h["$[]"](2))}),q(u,"$_reduce_15",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"BinaryOp").$new(h["$[]"](0),"-",h["$[]"](2))}),q(u,"$_reduce_16",function(h,J,Z){return L(this.allowed_cmp_op["$include?"](i))||this.$raise(r("ParseError")),K([],{})}),q(u,"$_reduce_17",function(h,J,Z){var S,ee,X;return X=null==(S=x(h))[1]?i:S[1],L(this.allowed_cmp_op["$include?"](ee=null==S[0]?i:S[0]))||this.$raise(r("ParseError")),K(["cmp_op","target"],{cmp_op:ee,target:X})}),q(u,"$_reduce_18",function(h,J,Z){var O,S=this;return O=h["$[]"](0),L(S.question_target)||S.$raise(r("ParseError")),L(S.allowed_cmp_op["$include?"](O))||S.$raise(r("ParseError")),K(["cmp_op","target"],{cmp_op:O,target:"?"})}),q(u,"$_reduce_19",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"BinaryOp").$new(h["$[]"](0),"+",h["$[]"](2))}),q(u,"$_reduce_20",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"BinaryOp").$new(h["$[]"](0),"-",h["$[]"](2))}),q(u,"$_reduce_22",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"BinaryOp").$new(h["$[]"](0),"*",h["$[]"](2))}),q(u,"$_reduce_23",function(h,J,Z){return h["$[]"](3).$new(h["$[]"](0),h["$[]"](2))}),q(u,"$_reduce_25",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),q(u,"$_reduce_26",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"DivideWithCeil")}),q(u,"$_reduce_27",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"DivideWithCeil")}),q(u,"$_reduce_28",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"DivideWithRound")}),q(u,"$_reduce_29",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"DivideWithFloor")}),q(u,"$_reduce_30",function(h,J,Z){return h["$[]"](1)}),q(u,"$_reduce_31",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"Negative").$new(h["$[]"](1))}),q(u,"$_reduce_33",function(h,J,Z){return h["$[]"](1)}),q(u,"$_reduce_34",function(h,J,Z){return T(T(r("Arithmetic"),"Node"),"Number").$new(h["$[]"](0))}),q(u,"$_reduce_none",function(h,J,Z){return h["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var P,U,B,a,m,i,x,j,G=e.module,M=e.send,c=e.eqeqeq,z=e.truthy,E=e.def,w=e.return_val,F=[],k=e.nil;return P=F,U=j=[G(F[0],"BCDice")].concat(P),B=x=[G(j[0],"Deprecated")].concat(U),m=[a=G(x[0],"Checker")].concat(B),i=e.$r(m),a.$private(),E(a,"$check_result_legacy",function(t,_,b,A){var g,D=this,I=k,y=k,o=k,v=k;return I=M(_,"map",[],"sides".$to_proc()),g=(y=M(_,"map",[],"value".$to_proc())).$sum(),o=c([100],v=I)?D.$check_1D100(t,g,b,A):c([20],v)?D.$check_1D20(t,g,b,A):c([6,6],v)?D.$check_2D6(t,g,y,b,A):k,(z(o["$nil?"]())||z(o["$empty?"]()))&&(o=c([10],v=I.$uniq())?D.$check_nD10(t,g,y,b,A):c([6],v)?D.$check_nD6(t,g,y,b,A):k,z(o["$nil?"]())||z(o["$empty?"]()))?k:i("Result").$new(o.$delete_prefix(" \uff1e "))}),E(a,"$check_1D100",w(k)),E(a,"$check_1D20",w(k)),E(a,"$check_nD10",w(k)),E(a,"$check_2D6",w(k)),E(a,"$check_nD6",w(k))},Opal.modules["bcdice/base"]=function(e){var m,D,v,N,r,p,s,f,u,R,y,G=e.module,M=e.klass,c=e.slice,z=e.rb_plus,E=e.truthy,w=e.def,F=e.regexp,k=e.send,q=e.thrower,P=e.return_ivar,H=e.assign_ivar_val,j=e.eqeqeq,C=e.eqeq,U=e.return_val,L=e.range,x=e.rb_minus,K=e.rb_divide,B=e.rb_times,a=e.rb_ge,i=e.top,T=[],t=e.$r(T),_=e.nil,b=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),D=T,v=y=[G(T[0],"BCDice")].concat(D),f=[s=M(y[0],null,"Base")].concat(v),u=e.$r(f),(R=s.$$prototype).raw_input=R.randomizer=R.enabled_upcase_input=R.debug=_,r=[N=e.get_singleton_class(s)].concat(f),p=e.$r(r),N.$attr_reader("prefixes"),w(N,"$register_prefix",function(d){var Y,V,Q=this;return null==Q.prefixes&&(Q.prefixes=_),Y=c(arguments),Q.prefixes=z(E(V=Q.prefixes)?V:[],Y.$flatten())},-1),w(N,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),w(N,"$prefixes_pattern",function(){var d=this,$=_;return null==d.prefixes_pattern&&(d.prefixes_pattern=_),null==d.prefixes&&(d.prefixes=_),d.prefixes_pattern=E($=d.prefixes_pattern)?$:_,E(d.prefixes_pattern)?d.prefixes_pattern:(d.prefixes=E($=d.prefixes)?$:[],d.prefixes.$freeze(),d.prefixes_pattern=(E(d.prefixes["$empty?"]())?/(?!)/:F(["^(S)?(",d.prefixes.$join("|"),")"],"i")).$freeze())}),w(N,"$command_pattern",function(){var d=this,$=_,Y=_;return null==d.command_pattern&&(d.command_pattern=_),null==d.prefixes&&(d.prefixes=_),d.command_pattern=E($=d.command_pattern)?$:_,E(d.command_pattern)?d.command_pattern:(d.prefixes=E($=d.prefixes)?$:[],d.prefixes.$freeze(),Y=z(k(b(p("CommonCommand"),"COMMANDS"),"map",[],function(V){return null==V&&(V=_),b(V,"PREFIX_PATTERN").$source()}),d.prefixes),d.command_pattern=F(["^S?(",Y.$join("|"),")"],"i").$freeze())}),w(N,"$eval",function(d){try{return q("eval_return"),this.$new(d).$eval()}catch(Q){if(Q===e.t_eval_return)return Q.$v;throw Q}}),s.$include(u("Translate")),s.$include(b(u("Deprecated"),"Checker")),w(s,"$initialize",function(l){var r=this;return r.raw_input=l,r.sort_add_dice=!1,r.sort_barabara_dice=!1,r.d66_sort_type=b(u("D66SortType"),"NO_SORT"),r.enabled_d9=!1,r.round_type=b(u("RoundType"),"FLOOR"),r.sides_implicit_d=6,r.upper_dice_reroll_threshold=_,r.reroll_dice_reroll_threshold=_,r.default_cmp_op=_,r.default_target_number=_,r.enabled_upcase_input=!0,r.locale="ja_jp",r.randomizer=b(u("BCDice"),"Randomizer").$new(),r.debug=!1}),s.$attr_accessor("randomizer"),s.$attr_reader("d66_sort_type"),s.$attr_reader("round_type"),s.$attr_reader("sides_implicit_d"),s.$attr_reader("upper_dice_reroll_threshold"),s.$attr_reader("reroll_dice_reroll_threshold"),s.$attr_reader("default_cmp_op"),s.$attr_reader("default_target_number"),w(s,"$sort_add_dice?",P("sort_add_dice")),w(s,"$sort_barabara_dice?",P("sort_barabara_dice")),w(s,"$enabled_d9?",P("enabled_d9")),w(s,"$enable_debug",H("debug",!0)),w(s,"$eval",function(){var r,n,l=this,p=_;return r=b(u("BCDice"),"Preprocessor").$process(l.raw_input,l),p=E(n=l.$dice_command(r))?n:l.$eval_common_command(l.raw_input),E(p)?(p["$rands="](l.randomizer.$rand_results()),p["$detailed_rands="](l.randomizer.$detailed_rand_results()),p):_}),w(s,"$change_text",function(l){return l}),w(s,"$check_result",function(l,r,p,n){var d=this,$=_,Y=_,Q=_,V=_,ne=_;return $=d.$check_result_legacy(l,r,p,n),E($)?$:(Y=k(r,"map",[],"sides".$to_proc()),V=(Q=k(r,"map",[],"value".$to_proc())).$sum(),$=j([100],ne=Y)?d.$result_1d100(l,V,p,n):j([20],ne)?d.$result_1d20(l,V,p,n):j([6,6],ne)?d.$result_2d6(l,V,Q,p,n):_,C($,u("Result").$nothing())?_:E($)?$:($=j([10],ne=Y.$uniq())?d.$result_nd10(l,V,Q,p,n):j([6],ne)?d.$result_nd6(l,V,Q,p,n):_,C($,u("Result").$nothing())?_:E($)?$:d.$result_ndx(l,p,n)))}),w(s,"$grich_text",U(_)),s.$private(),w(s,"$eval_common_command",function(l){try{q("eval_return");var p=q("return");return l=this.$change_text(l),k(b(u("CommonCommand"),"COMMANDS"),"each",[],function d($){var Q,Y=null==d.$$s?this:d.$$s;if(null==Y.randomizer&&(Y.randomizer=_),null==$&&($=_),Q=$.$eval(l,Y,Y.randomizer),!E(Q))return _;p.$throw(Q)},{$$s:this,$$ret:p}),_}catch(d){if(d===e.t_eval_return||d===p)return d.$v;throw d}}),w(s,"$dice_command",function(l){var r=this,p=_,n=_,d=_,$=_;return E(r.enabled_upcase_input)&&(l=l.$upcase()),p=r.$class().$prefixes_pattern().$match(l),E(p)?(n=p["$[]"](1)["$nil?"]()["$!"](),E(n)&&(l=l["$[]"](L(1,-1,!1))),d=r.$eval_game_system_specific_command(l),E(d["$is_a?"](u("Result")))?(d["$secret="](E($=d["$secret?"]())?$:n),d):E(d["$nil?"]())||E(d["$empty?"]())||C(d,"1")?_:k(u("Result").$new(),"tap",[],function(Q){var V;return null==Q&&(Q=_),Q["$text="](d.$to_s()),k(Q,"secret=",V=[n]),V[V.length-1]})):_}),w(s,"$eval_game_system_specific_command",U(_)),w(s,"$result_ndx",function(l,r,p){return E(p["$is_a?"](u("String")))?_:E(l.$send(r,p))?u("Result").$success(this.$translate("success")):u("Result").$failure(this.$translate("failure"))}),w(s,"$result_1d100",U(_)),w(s,"$result_1d20",U(_)),w(s,"$result_nd10",U(_)),w(s,"$result_2d6",U(_)),w(s,"$result_nd6",U(_)),w(s,"$get_table_by_2d6",function(l){return this.$get_table_by_nD6(l,2)}),w(s,"$get_table_by_1d6",function(l){return this.$get_table_by_nD6(l,1)}),w(s,"$get_table_by_nD6",function(l,r){return this.$get_table_by_nDx(l,r,6)}),w(s,"$get_table_by_nDx",function(l,r,p){var d,$=_;return d=this.randomizer.$roll_sum(r,p),$=this.$get_table_value(l["$[]"](x(d,r))),E($["$nil?"]())?["1",0]:[$,d]}),w(s,"$get_table_by_1d3",function(l){var n,d,r=this,$=_;return r.$debug("get_table_by_1d3"),n=r.randomizer.$roll_sum(1,6),r.$debug("num",n),d=K(x(n,1),2).$to_i(),r.$debug("index",d),$=l["$[]"](d),E($["$nil?"]())?["1",0]:[$,n]}),w(s,"$get_table_by_d66_swap",function(l){var p;return p=this.randomizer.$roll_d66(b(u("D66SortType"),"ASC")),[this.$get_table_by_number(p,l),p]}),w(s,"$get_table_by_d66",function(l){var p,n,d,Y,$=_;return p=this.randomizer.$roll_once(6),n=this.randomizer.$roll_once(6),d=z(B(x(p,1),6),x(n,1)),$=l["$[]"](d),Y=""+p+n,E($["$nil?"]())?["1",Y]:[$,Y]}),w(s,"$get_table_by_number",function(l,r,p){try{var n=q("return");return null==p&&(p="1"),k(r,"each",[],function $(Y){var V,Q=null==$.$$s?this:$.$$s;if(null==Y&&(Y=_),V=Y["$[]"](0),!E(a(V,l)))return _;n.$throw(Q.$get_table_value(Y["$[]"](1)))},{$$s:this,$$ret:n}),this.$get_table_value(p)}catch($){if($===n)return $.$v;throw $}},-3),w(s,"$get_table_value",function(l){return E(l["$is_a?"](u("Proc")))?l.$call():l}),w(s,"$roll_tables",function(l,r){var n=_;return n=r["$[]"](l),E(n)?n.$roll(this.randomizer).$to_s():_}),w(s,"$debug",function(l,r){var n,d=this,$=_,Y=_;return n=c(arguments,1),E(d.debug)?($=E(l["$is_a?"](u("String")))?l:l.$inspect(),E(n["$empty?"]())?d.$warn($):(Y=k(n,"map",[],function(V){return null==V&&(V=_),E(V["$is_a?"](u("String")))?'"'+V+'"':V.$inspect()}),d.$warn($+": "+Y.$join(", ")))):_},-2),b(b(t("I18n"),"Backend"),"Simple").$include(b(b(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),t("I18n")["$default_locale="]("ja_jp"),m=[["ja_jp"]],k(t("I18n").$fallbacks(),"defaults=",m),m[m.length-1]},Opal.modules["bcdice/game_system/DesperateRun"]=function(e){var i,b,o,v,s,f,D,I,t,G=e.module,M=e.klass,c=e.const_set,z=e.hash2,E=e.send2,w=e.find_super,F=e.def,k=e.truthy,q=e.to_ary,P=e.rb_plus,H=e.range,j=e.neqeq,C=e.eqeq,U=e.rb_ge,L=e.rb_minus,K=[],B=e.nil,a=e.$$$;return e.top.$require("bcdice/base"),i=K,b=t=[G(K[0],"BCDice")].concat(i),D=[G(t[0],"GameSystem")].concat(b),I=e.$r(D),o=D,s=[v=M(D[0],I("Base"),"DesperateRun")].concat(o),f=e.$r(s),v.$$prototype.randomizer=B,c(s[0],"ID","DesperateRun"),c(s[0],"NAME","Desperate Run TRPG"),c(s[0],"SORT_KEY","\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG"),c(s[0],"HELP_MESSAGE","\u30fb\u96e3\u6613\u5ea6\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u3000DDC\n\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\u3000RCx\u3000or\u3000RCx+y\u3000or\u3000RCx-y\uff08x\uff1d\u96e3\u6613\u5ea6\u3001y=\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\u80fd\uff09\uff09\n\u30fb\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868\u3000ACT\n\u30fb\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868\u3000ITEMT\n\u30fb\u52d5\u6a5f\u8868\u3000DOUKIT\n\u30fb\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868\u3000FLAGT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868\u3000ENTRYT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3000ROADT\n"),c(s[0],"TABLES",z(["ACT","ITEMT","DOUKIT","FLAGT","ENTRYT","ROADT"],{ACT:a(f("DiceTable"),"Table").$new("\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868","1D6",["PC\u5168\u54e1\u3001\u968a\u5217\u30921D6\u3067\u6c7a\u3081\u308b\uff0812\uff1a\u524d\u5217\u300134\uff1a\u4e2d\u5217\u300156\uff1a\u5f8c\u5217\uff09","1\u30bf\u30fc\u30f3\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u5074\u306e\u307f\u884c\u52d5\u3059\u308b\u3002","\u3053\u306e\u6226\u95d8\u306e\u884c\u52d5\u9806\u304c\u3001PC\u2192\u30e2\u30f3\u30b9\u30bf\u30fc\u3001\u304b\u3089\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u2192PC\u306b\u5909\u308f\u308b\u3002","PC\u5168\u54e1\u3001\u30a2\u30a4\u30c6\u30e01\u3064\u3092\u9078\u3093\u3067\u5931\u3046\u3002","PC\u5168\u54e11D6\u3092\u632f\u308b\u3002\u3053\u306e\u6226\u95d8\u4e2d\u3001\u305d\u306e\u51fa\u76ee\u306f\u30ce\u30fc\u30d7\u30e9\u30f3\u306b\u306a\u308b\u3002","PC\u5168\u54e1\u3001Flag\u304c1\u5897\u52a0\u3059\u308b\u3002"]),ITEMT:a(f("DiceTable"),"Table").$new("\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868","2D6",["\u30ed\u30b1\u30c3\u30c8\u30e9\u30f3\u30c1\u30e3\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30de\u30ab\u30d6\u30ebLv+3\u3000\u56de\u6570\uff1a\u653b\u64831\u56de","\u30ad\u30fc\u30d4\u30c3\u30af\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002\u5224\u5b9a\u306e\u51fa\u76ee\u306e\u5408\u8a08+1\u3000\u56de\u6570\uff1a2\u56de","\u30ec\u30fc\u30c0\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ce\u30fc\u30d7\u30e9\u30f3\u3000\u88c5\u5099\u6642\u3001\u300c\u5371\u967a\u300d\u30921\u6e1b\u3089\u3059\u3053\u3068\u304c\u51fa\u6765\u308b\u3000\u56de\u6570\uff1a\u5371\u967a\u6e1b\u5c112\u56de","\u98df\u6599\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002Life3\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u5fdc\u6025\u30ad\u30c3\u30c8\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30e1\u30c7\u30a3\u30ab\u30ebLv+1\u3000\u56de\u6570\uff1a\u56de\u5fa93\u56de","\u5203\u7269\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30a2\u30bf\u30c3\u30afLv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u9283\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30b7\u30e5\u30fc\u30c8Lv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u30c9\u30e9\u30c3\u30b0\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u3044\u3064\u3067\u3082\u4f7f\u7528\u53ef\u3002Brave1\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u91d1\u5238\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30a2\u30d5\u30bf\u30fc\u30d7\u30ec\u30a4\u3067\u4f7f\u7528\u53ef\u3002\u7d4c\u9a13\u70b9+2\u3000\u56de\u6570\uff1a1\u56de","\u30d7\u30ed\u30c6\u30af\u30bf\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ac\u30fc\u30c9Lv+1\u3000\u56de\u6570\uff1a\u9632\u5fa15\u56de","\u30c8\u30df\u30fc\u30ac\u30f3\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30c1\u30a7\u30fc\u30f3Lv+5\u3000\u56de\u6570\uff1a\u653b\u64831\u56de"]),DOUKIT:a(f("DiceTable"),"Table").$new("\u52d5\u6a5f\u8868","1D6",["\u96b7\u5c5e\u3002\u4f55\u304b\u5f31\u307f\u306b\u4ed8\u3051\u8fbc\u307e\u308c\u3001\u5acc\u3005\u306a\u304c\u3089\u3082\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u308b\u3002\u5f8c\u308d\u3081\u305f\u3044\u4e8b\u3001\u501f\u91d1\u3001\u306a\u3069\u3002","\u732e\u8eab\u3002\u3053\u306e\u756a\u7d44\u306f\u8ab0\u304b\u306e\u305f\u3081\u306b\u51fa\u3066\u3044\u308b\u3002\u75c5\u6c17\u306e\u5bb6\u65cf\u3092\u6551\u3046\u305f\u3081\u3001\u53c2\u52a0\u8005\u306e\u4e00\u4eba\u304c\u604b\u4eba\u3067\u3042\u308b\u3001\u306a\u3069\u3002","\u6210\u884c\u3002\u671b\u3093\u3067\u3044\u306a\u3044\u306e\u306b\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\u8ab0\u304b\u304c\u52dd\u624b\u306b\u7533\u3057\u8fbc\u3093\u3060\u3001\u7d1b\u308c\u8fbc\u3093\u3067\u3057\u307e\u3063\u305f\u3001\u306a\u3069\u3002","\u6e07\u671b\u3002\u3068\u306b\u304b\u304f\u4f55\u304b\u3092\u6b32\u3057\u3066\u53c2\u52a0\u3057\u3066\u3044\u308b\u3002\u91d1\u3001\u30b9\u30ea\u30eb\u3001\u91d1\u3067\u624b\u306b\u5165\u308b\u3082\u306e\u3001\u306a\u3069\u3002","\u5947\u4eba\u3002\u597d\u304d\u597d\u3093\u3067\u3053\u306e\u756a\u7d44\u306b\u51fa\u3066\u3044\u308b\u3002\u6bba\u4eba\u7656\u3001\u30ca\u30eb\u30b7\u30b9\u30c8\u3001\u81ea\u6bba\u9858\u671b\u3001\u5316\u3051\u7269\u30de\u30cb\u30a2\u3001\u306a\u3069\u3002","\u4ed5\u4e8b\u3002\u3053\u306e\u756a\u7d44\u306b\u51fa\u308b\u306e\u306f\u4ed5\u4e8b\u3060\u304b\u3089\u3060\u3002\u8cde\u91d1\u7a3c\u304e\u3001\u82b8\u80fd\u4eba\u3001\u8a18\u8005\u3001\u756a\u7d44\u30b9\u30bf\u30c3\u30d5\u3001\u306a\u3069\u3002"]),FLAGT:a(f("DiceTable"),"Table").$new("\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868","1D6",["\u5e0c\u671b\u3002\u300c\u3053\u308c\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u4e00\u7dd2\u306b\u9152\u3067\u3082\u98f2\u3082\u3046\u3084\u300d\u300c\u3082\u3046\u4f55\u3082\u6016\u304f\u306a\u3044\u300d\u306a\u3069\u3002","\u671b\u90f7\u3002\u300c\u304f\u305d\u3063\u3001\u3001\u3001\u4ffa\u306b\u306f\u3001\u5e30\u308a\u3092\u5f85\u3064\u4eba\u304c\u3001\u3001\u3001\u3063\uff01\u300d\u300c\u3042\u3042\u3001\u6545\u90f7\u306e\u30de\u30eb\u30b2\u30ea\u30fc\u30bf\u3092\u3082\u3046\u4e00\u5ea6\u98df\u3079\u305f\u304b\u3063\u305f\u3001\u3001\u3001\u300d\u306a\u3069\u3002","\u72c2\u4e71\u3002\u300c\u304a\u524d\u3092\u3001\u6bba\u305b\u3070\u3001\u4ffa\u306f\u3001\u5104\u4e07\u9577\u8005\u306a\u3093\u3060\u3088\u3049\u3049\u3049\u304a\uff01\uff01\u300d\u300c\u30d2\u30cf\u30c3\u3001\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u3047\u3047\u3047\u3047\u300d\u306a\u3069\u3002","\u7d76\u671b\u3002\u300c\u3082\u3046\u3060\u3081\u3060\u3041\u3001\u3001\u3001\u304a\u3057\u307e\u3044\u3060\u3041\u3001\u3001\u3001\u300d\u300c\u304f\u3001\u304f\u308b\u306a\u3063\u3001\u304f\u308b\u306a\u3041\u3041\u3041\u3041\uff01\uff01\u300d\u306a\u3069\u3002","\u6162\u5fc3\u3002\u300c\u306a\u3093\u3060\u3001\u3053\u3093\u306a\u3084\u3064\u3001\u4ffa\u3060\u3051\u3067\u5341\u5206\u3060\u300d\u300c\u5927\u4e08\u592b\u3060\u3001\u554f\u984c\u306a\u3044\u300d\u306a\u3069\u3002","\u72a0\u7272\u3002\u300c\u3075\u3075\u3001\u4ffa\u306a\u3089\u5927\u4e08\u592b\u3060\u3001\u3001\u3001\u6c17\u306b\u3059\u308b\u306a\u300d\u300c\u304a\u524d\u3089\u4e0b\u304c\u308c\u3063\uff01\u3053\u3053\u306f\u4ffa\u306b\u4efb\u305b\u308d\uff01\u300d\u306a\u3069\u3002"]),ENTRYT:a(f("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868","1D6",["\u9045\u523b\u3002\u3082\u3068\u3082\u3068\u53c2\u52a0\u3059\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3060\u304c\u9045\u308c\u3066\u3057\u307e\u3063\u305f\u3002\u4eca\u304b\u3089\u3067\u3082\u8d70\u308c\u3068\u7121\u7406\u77e2\u7406\u53c2\u52a0\u3002","\u73fe\u4f4f\u3002\u3082\u3068\u3082\u3068\u3053\u3053\u306b\u4f4f\u3093\u3067\u3044\u305f\u3002\u4f55\uff1f\u756a\u7d44\uff1f\u3048\uff1f\u3042\u3001\u304a\u91d1\u3082\u3089\u3048\u3093\u306e\uff1f\u30a4\u30a4\u30cd\uff01","\u7a81\u767a\u3002\u3082\u3068\u3082\u3068\u8996\u8074\u8005\u3068\u3057\u3066\u30b9\u30bf\u30b8\u30aa\u306b\u5c45\u305f\u3093\u3060\u3051\u3069\u3001\u53f8\u4f1a\u306b\u3046\u307e\u304f\u4e57\u305b\u3089\u308c\u3066\u30fb\u30fb\u30fb","\u4e71\u5165\u3002\u4f55\u304b\u76ee\u7684\u304c\u3042\u3063\u3066\u4e71\u5165\u3057\u305f\u3002\u4eca\u56de\u306e\u30b9\u30c6\u30fc\u30b8\u304c\u7c21\u5358\u306b\u898b\u3048\u305f\u308a\u3001\u53c2\u52a0\u8005\u306b\u5927\u4e8b\u306a\u4eba\u304c\u3044\u305f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u795e\u96a0\u3002\u4eca\u56de\u3088\u308a\u524d\u306e\u756a\u7d44\u306b\u53c2\u52a0\u3057\u3066\u3044\u305f\u304c\u884c\u65b9\u4e0d\u660e\u30fb\u6b7b\u3093\u3060\u3068\u601d\u308f\u308c\u3066\u3044\u305f\u3002\u304c\u3002\u541b\u306f\u307e\u3060\u3053\u3053\u306b\u3044\u308b\u3002","\u8077\u54e1\u3002\u3042\u308c\u3001\u9003\u3052\u9045\u308c\u307e\u3057\u305f\uff1f\u3042\u3089\u3042\u3089\u3001\u5927\u5909\u3067\u3059\u306d\u3001\u3057\u3087\u3046\u304c\u306a\u3044\u304b\u3089\u53c2\u52a0\u8005\u3055\u3093\u3068\u4e00\u7dd2\u306b\u8d70\u3063\u3066\u304f\u3060\u3055\u3044\u3002"]),ROADT:a(f("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868","1D6",["\u6b7b\u7dda\u3002\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u3002Flag+1","\u602a\u6211\u3002\u75db\u3044\u3002Life-1","\u5931\u610f\u3002\u3069\u3046\u3057\u3066\u3053\u3046\u306a\u3063\u305f\u3002Brave-1\u3002\u6e1b\u3089\u305b\u306a\u3044\u5834\u5408\u3001Flag+1","\u7d1b\u5931\u3002\u3069\u3063\u304b\u3044\u3063\u305f\u3002Item\u3092\u3069\u308c\u304b1\u3064\u6368\u3066\u308b\u3002\u6368\u3066\u308c\u306a\u3044\u5834\u5408\u3001Flag+1","\u8ffd\u5c3e\u3002\u5f8c\u308d\uff01\u5f8c\u308d\u30fc\u3063\uff01\u53c2\u52a0\u958b\u59cb\u90e8\u5c4b\u306e\u5371\u967a+1","\u8ff7\u5b50\u3002\u3042\u308c\u3001\u3053\u3053\u3069\u3053\u3060\uff1f\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3092\u632f\u308b\u56de\u6570+2"])}).$freeze()),v.$register_prefix("RC","DDC",f("TABLES").$keys()),F(v,"$initialize",function R(N){var r=this;return R.$$p=null,E(r,w(r,"initialize",R,!1,!0),"initialize",[N],null),r.sort_add_dice=!0,r.d66_sort_type=a(f("D66SortType"),"ASC")}),v.$private(),F(v,"$eval_game_system_specific_command",function(N){var r,p,l=this;return k(r=k(p=l.$check_roll(N))?p:l.$ddc_table(N))?r:l.$roll_tables(N,a(l.$class(),"TABLES"))}),F(v,"$check_roll",function(N){var l,r,d=B,$=B,Y=B,Q=B,V=B,ne=B,$e=B,ue=B,ie=B;return d=a(f("Command"),"Parser").$new(/RC\d+/,z(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(B).$parse(N),k(d)?(r=this.randomizer.$roll_barabara(2,6),l=q(r),Q=P($=null==l[0]?B:l[0],Y=null==l[1]?B:l[1]),V=P(P($,Y),d.$modify_number()),ne=d.$command()["$[]"](H(2,-1,!1)).$to_i(),j(d.$modify_number(),0)&&($e="\u3000\u4fee\u6b63\u5024\uff1a"+d.$modify_number()),ie=["\u5224\u5b9a\u3000\u96e3\u6613\u5ea6\uff1a"+ne+$e,"\u51fa\u76ee\uff1a"+$+"\u3001"+Y,(ue=C($,Y)?f("Result").$critical("\u30be\u30ed\u76ee\uff01\u3010Critical\u3011"):C(Q,7)?f("Result").$fumble("\u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u304c\u8868\u88cf\uff01\u3010Fumble\u3011"):k(U(V,ne))?f("Result").$success(V+"\u3001\u96e3\u6613\u5ea6\u4ee5\u4e0a\uff01\u3010Success\u3011"):f("Result").$failure(V+"\u3001\u96e3\u6613\u5ea6\u672a\u6e80\uff01\u3010Miss\u3011")).$text()],ue["$text="](ie.$join(" \uff1e ")),ue):B}),F(v,"$ddc_table",function(N){var l,r,n=B,d=B,$=B,Y=B,Q=B;return j(N,"DDC")?B:(r=this.randomizer.$roll_barabara(2,6),r=[n=null==(l=q(r))[0]?B:l[0],d=null==l[1]?B:l[1]].$sort(),"\u96e3\u6613\u5ea6\u6c7a\u5b9a \uff1e \u51fa\u76ee\uff1a"+n+"\u3001"+d+" \uff1e "+(Y=null==(l=q(r))[1]?B:l[1])+"-"+($=null==l[0]?B:l[0])+"="+(Q=L(Y,$))+" \uff1e \u96e3\u6613\u5ea6"+P(5,Q))})},Opal.queue(function(e){var P,U,m,i,T,t,x,K,j,G=e.module,M=e.klass,c=e.const_set,z=e.hash2,w=[],k=e.$$$;return e.top.$require("bcdice/game_system/DesperateRun"),P=w,U=j=[G(w[0],"BCDice")].concat(P),x=[G(j[0],"GameSystem")].concat(U),K=e.$r(x),m=x,T=[i=M(x[0],K("DesperateRun"),"JekyllAndHyde")].concat(m),t=e.$r(T),c(T[0],"ID","JekyllAndHyde"),c(T[0],"NAME","\u30b8\u30ad\u30eb\u3068\u30cf\u30a4\u30c9\u3068\u30b0\u30ea\u30c8\u30b0\u30e9"),c(T[0],"SORT_KEY","\u3057\u304d\u308b\u3068\u306f\u3044\u3068\u3068\u304f\u308a\u3068\u304f\u3089"),c(T[0],"HELP_MESSAGE","\u30fb\u96e3\u6613\u5ea6\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u3000DDC\n\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\u3000RCx\u3000or\u3000RCx+y\u3000or\u3000RCx-y\uff08x\uff1d\u96e3\u6613\u5ea6\u3001y=\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\u80fd\uff09\uff09\n\u30fb\u76ee\u6a19\u6c7a\u5b9a\u8868\u3000GOALT\n"),c(T[0],"TABLES",z(["GOALT"],{GOALT:k(t("DiceTable"),"Table").$new("\u76ee\u6a19\u6c7a\u5b9a\u8868","1D6",["\u300c\u4e3b\u4eba\u683c\u306e\u76ee\u7684\u9054\u6210\u300d","\u300c\u4e3b\u4eba\u683c\u306e\u76ee\u7684\u963b\u5bb3\u300d","\u300c\u4e3b\u4eba\u683c\u306e\u30cf\u30c3\u30d4\u30fc\u30a8\u30f3\u30c9\uff08\u76ee\u7684\u9054\u6210\u3057\u306a\u304f\u3066\u3082\u3088\u3044\uff09\u300d","\u300c\u4e3b\u4eba\u683c\u306e\u30d0\u30c3\u30c9\u30a8\u30f3\u30c9\uff08\u76ee\u7684\u9054\u6210\u3057\u3066\u3044\u3066\u3082\u3088\u3044\uff09\u300d","\u300c\u81ea\u5206\u306e\u4eba\u683c\u304c\u76ee\u7684\u3092\u6c7a\u5b9a\u3067\u304d\u308b\u300d","\u300c\u4e3b\u4eba\u683c\u306e\u76ee\u7684\u9054\u6210\u300d\u300c\u4e3b\u4eba\u683c\u306e\u76ee\u7684\u963b\u5bb3\u300d\u300c\u4e3b\u4eba\u683c\u306e\u30cf\u30c3\u30d4\u30fc\u30a8\u30f3\u30c9\uff08\u76ee\u7684\u9054\u6210\u3057\u306a\u304f\u3066\u3082\u3088\u3044\uff09\u300d\u300c\u4e3b\u4eba\u683c\u306e\u30d0\u30c3\u30c9\u30a8\u30f3\u30c9\uff08\u76ee\u7684\u9054\u6210\u3057\u3066\u3044\u3066\u3082\u3088\u3044\uff09\u300d\u300c\u81ea\u5206\u306e\u4eba\u683c\u304c\u76ee\u7684\u3092\u6c7a\u5b9a\u3067\u304d\u308b\u300d\u306e\u3069\u308c\u304b\u3092\u81ea\u7531\u306b\u9078\u3079\u308b"])}).$freeze()),i.$register_prefix("RC","DDC",t("TABLES").$keys())})}}]);