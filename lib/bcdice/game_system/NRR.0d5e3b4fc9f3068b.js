(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7747],{2942:(W,Z,G)=>{G(5151),Opal.queue(function(r){var M,X,F,n,i,c,v,K,p,h=r.module,V=r.klass,s=r.const_set,w=r.send2,x=r.find_super,A=r.def,L=r.truthy,N=r.eqeqeq,S=r.eqeq,C=r.rb_minus,b=r.send,q=r.hash2,T=[],e=r.nil;return M=T,X=p=[h(T[0],"BCDice")].concat(M),v=[h(p[0],"GameSystem")].concat(X),K=r.$r(v),F=v,i=[n=V(v[0],K("Base"),"NRR")].concat(F),c=r.$r(i),n.$$prototype.randomizer=e,s(i[0],"ID","NRR"),s(i[0],"NAME","nRR"),s(i[0],"SORT_KEY","\u3048\u306c\u3042\u3042\u308b\u3042\u3042\u308b"),s(i[0],"HELP_MESSAGE","\u25aa\ufe0f\u5224\u5b9a\n\u30fb\u30ce\u30fc\u30de\u30eb\u30c0\u30a4\u30b9\u3000NR8\n\u30fb\u6709\u5229\u30c0\u30a4\u30b9\u3000NR10\n\u30fb\u4e0d\u5229\u30c0\u30a4\u30b9\u3000NR6\n\u30fbEx\u30c0\u30a4\u30b9\u3000NR12\n\n\u30c0\u30a4\u30b9\u306e\u500b\u6570\u3092\u6307\u5b9a\u3057\u3066\u306e\u5224\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\uff1a\u6709\u5229\u30c0\u30a4\u30b92\u500b\u3067\u5224\u5b9a\u30002NR10\n\n\u25aa\ufe0f\u5224\u5b9a\u7d50\u679c\u3068\u30b7\u30f3\u30dc\u30eb\n\u2b55\uff1a\u6210\u529f\n\u274c\uff1a\u5931\u6557\n\u2728\uff1a\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff08\u5927\u6210\u529f\uff09\n\u{1f480}\uff1a\u30d5\u30a1\u30f3\u30d6\u30eb\uff08\u5927\u5931\u6557\uff09\n\u{1f308}\uff1a\u30df\u30e9\u30af\u30eb\uff08\u5947\u8de1\uff09\n"),n.$register_prefix("\\d*NR(6|8|10|12)"),A(n,"$initialize",function $(f){var o=this;return $.$$p=null,w(o,x(o,"initialize",$,!1,!0),"initialize",[f],null),o.sort_barabara_dice=!0}),A(n,"$eval_game_system_specific_command",function(f){return this.$roll_nr(f)}),n.$private(),A(n,"$roll_nr",function(f){var t,m=e,_=e,d=e,E=e,R=e,l=e,I=e,a=e,g=e,k=e,D=e;return m=/^(\d+)?NR(6|8|10|12)$/.$match(f),L(m)?(_=L(d=(t=m["$[]"](1))===e||null==t?e:t.$to_i())?d:1,E=N("6",d=m["$[]"](2))?c("DISADVANTAGE"):N("8",d)?c("NORMAL"):N("10",d)?c("ADVANTAGE"):c("EXTRA"),R=this.randomizer.$roll_barabara(_,E.$size()),l=c("Result").$new(),I=S(_,1)?(a=E["$[]"](C(R["$[]"](0),1)),l["$condition="](c("SUCCESSES")["$include?"](a)),l["$fumble="](a["$=="]("fumble")),l["$critical="](c("CRITICALS")["$include?"](a)),c("ICON")["$[]"](a)+" "+c("RESULT_LABEL")["$[]"](a)):(g=b(R,"map",[],function(u){return null==u&&(u=e),E["$[]"](C(u,1))}),k=b(b(g,"group_by",[],"itself".$to_proc()),"transform_values",[],"length".$to_proc()),b(c("LEVELS"),"map",[],function(u){var z;return null==u&&(u=e),z=k.$fetch(u,0),S(z,0)?e:c("ICON")["$[]"](u)+" "+z}).$compact().$join(", ")),D=S(_,1)?e:_,l["$text="]("("+D+"NR"+m["$[]"](2)+") \uff1e "+R.$join(",")+" \uff1e "+I),l):e}),s(i[0],"LEVELS",["fumble","failure","success","critical","miracle"].$freeze()),s(i[0],"SUCCESSES",["success","critical","miracle"].$freeze()),s(i[0],"CRITICALS",["critical","miracle"].$freeze()),s(i[0],"DISADVANTAGE",["fumble","failure","failure","failure","success","success"].$freeze()),s(i[0],"NORMAL",["fumble","failure","failure","failure","success","success","success","critical"].$freeze()),s(i[0],"ADVANTAGE",["fumble","failure","failure","success","success","success","success","success","critical","critical"].$freeze()),s(i[0],"EXTRA",["fumble","fumble","failure","failure","success","success","critical","critical","critical","critical","miracle","miracle"].$freeze()),s(i[0],"ICON",q(["fumble","failure","success","critical","miracle"],{fumble:"\u{1f480}",failure:"\u274c",success:"\u2b55\ufe0f",critical:"\u2728",miracle:"\u{1f308}"}).$freeze()),s(i[0],"RESULT_LABEL",q(["fumble","failure","success","critical","miracle"],{fumble:"\u30d5\u30a1\u30f3\u30d6\u30eb\uff08\u5927\u5931\u6557\uff09",failure:"\u5931\u6557",success:"\u6210\u529f",critical:"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff08\u5927\u6210\u529f\uff09",miracle:"\u30df\u30e9\u30af\u30eb\uff08\u5947\u8de1\uff09"}).$freeze())})}}]);