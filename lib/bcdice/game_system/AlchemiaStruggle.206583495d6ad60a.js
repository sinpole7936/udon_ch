(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[252],{1871:(ge,pe,be)=>{be(5151),Opal.modules["i18n/backend/fallbacks"]=function(e){var G,i,t,_,c,d,F=e.module,B=e.class_variable_set,l=e.truthy,P=e.class_variable_get,C=e.def,w=e.send,U=e.send2,T=e.find_super,E=e.hash2,N=e.find_block_super,j=e.neqeq,H=e.thrower,L=e.return_val,M=[],D=e.nil,R=e.$$$;return G=M,d=[c=F(M[0],"I18n")].concat(G),B(d[0],"@@fallbacks",D),i=e.get_singleton_class(c),t=[i].concat(d),_=e.$r(t),C(i,"$fallbacks",function(){var S=D;return B(t[1],"@@fallbacks",l(null!=t[1].$$cvars["@@fallbacks"]?"class variable":D)&&l(S=P(t[1],"@@fallbacks",!1))?S:R(R(_("I18n"),"Locale"),"Fallbacks").$new()),l(S=_("Thread").$current()["$[]"]("i18n_fallbacks"))?S:P(t[1],"@@fallbacks",!1)}),C(i,"$fallbacks=",function(z){var S;return B(t[1],"@@fallbacks",l(z["$is_a?"](_("Array")))?R(R(_("I18n"),"Locale"),"Fallbacks").$new(z):z),S=["i18n_fallbacks",P(t[1],"@@fallbacks",!1)],w(_("Thread").$current(),"[]=",S),S[S.length-1]}),function(i,q){var z,S,I,b,_=[F(i,"Backend")].concat(q);return z=_,I=[S=F(_[0],"Fallbacks")].concat(z),b=e.$r(I),C(S,"$translate",function h($,g,u){try{var m=H("return"),s=h.$$p||D,k=this,x=D,o=D;return h.$$p=null,null==u&&(u=b("EMPTY_HASH")),l(u.$fetch("fallback",!0))?l(u["$[]"]("fallback_in_progress"))?U(k,T(k,"translate",h,!1,!0),"translate",[$,g,u],s):(l(u["$[]"]("default"))&&(x=k["$extract_non_symbol_default!"](u)),o=u.$merge(E(["fallback_in_progress"],{fallback_in_progress:!0})),w(b("I18n").$fallbacks()["$[]"]($),"each",[],function r(p){var n=null==r.$$s?this:r.$$s;null==p&&(p=D);try{return w(n,"catch",["exception"],function f(){var a=null==f.$$s?this:f.$$s,Y=D;if(Y=U(a,N(a,"translate",f.$$def||r.$$def||h,!1,!1),"translate",[p,g,o],null),l(Y["$nil?"]()))return D;j($.$to_s(),p.$to_s())&&a.$on_fallback($,p,g,u),m.$throw(Y)},{$$s:n,$$ret:m})}catch(f){if(!e.rescue(f,[R(b("I18n"),"InvalidLocale")]))throw f;try{return D}finally{e.pop_exception()}}},{$$s:k}),l(u["$key?"]("default"))&&l(u["$[]"]("default")["$nil?"]())?D:l(x)?U(k,T(k,"translate",h,!1,!0),"translate",[$,D,u.$merge(E(["default"],{default:x}))],null):k.$throw("exception",R(b("I18n"),"MissingTranslation").$new($,g,u))):U(k,T(k,"translate",h,!1,!0),"translate",[$,g,u],s)}catch(r){if(r===m)return r.$v;throw r}},-3),C(S,"$extract_non_symbol_default!",function($){var u,g=D;return g=[$["$[]"]("default")].$flatten(),u=w(g,"detect",[],function(s){return null==s&&(s=D),s["$is_a?"](b("Symbol"))["$!"]()}),l(u)&&$["$[]="]("default",g["$[]"](0,g.$index(u))),u}),C(S,"$exists?",function h($,g,u){try{var m=H("return"),s=h.$$p||D,k=this;return h.$$p=null,null==u&&(u=b("EMPTY_HASH")),l(u.$fetch("fallback",!0))?(w(b("I18n").$fallbacks()["$[]"]($),"each",[],function x(o){var r=null==x.$$s?this:x.$$s;null==o&&(o=D);try{if(!l(U(r,N(r,"exists?",x.$$def||h,!1,!1),"exists?",[o,g],null)))return D;m.$throw(!0)}catch(p){if(!e.rescue(p,[R(b("I18n"),"InvalidLocale")]))throw p;try{return D}finally{e.pop_exception()}}},{$$s:k,$$ret:m}),!1):U(k,T(k,"exists?",h,!1,!0),"exists?",[$,g,u],s)}catch(x){if(x===m)return x.$v;throw x}},-3),S.$private(),C(S,"$on_fallback",L(D))}(d[0],d)},Opal.modules["bcdice/randomizer"]=function(e){var c,v,z,S,I,b,i,q,B=e.klass,l=e.const_set,P=e.def,C=e.truthy,w=e.rb_gt,U=e.rb_plus,T=e.rb_le,E=e.send,N=e.rb_minus,j=e.eqeq,H=e.rb_times,L=e.eqeqeq,M=e.rb_ge,D=[],R=e.nil,W=e.$$$;return c=D,i=[(0,e.module)(D[0],"BCDice")].concat(c),q=e.$r(i),v=i,S=[z=B(i[0],null,"Randomizer")].concat(v),I=e.$r(S),(b=z.$$prototype).rand_results=b.detailed_rand_results=R,l(S[0],"UPPER_LIMIT_DICE_TIMES",200),l(S[0],"UPPER_LIMIT_DICE_SIDES",1e4),l(S[0],"UPPER_LIMIT_RANDS",1e4),P(z,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),z.$attr_reader("rand_results"),z.$attr_reader("detailed_rand_results"),l(S[0],"DetailedRandResult",I("Struct").$new("kind","sides","value")),P(z,"$roll_barabara",function($,g){var u=this;return C(w(U(u.rand_results.$size(),$),I("UPPER_LIMIT_RANDS")))&&u.$raise(I("TooManyRandsError")),C(T($,0))||C(w($,I("UPPER_LIMIT_DICE_TIMES")))?[]:E(I("Array"),"new",[$],function m(){return(null==m.$$s?this:m.$$s).$roll_once(g)},{$$s:u})}),P(z,"$roll_sum",function($,g){return this.$roll_barabara($,g).$sum()}),P(z,"$roll_once",function($){var u=R;return C(T($,0))||C(w($,I("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner($),this.$push_to_detail("normal",$,u),u)}),P(z,"$roll_index",function($){return N(this.$roll_once($),1)}),P(z,"$roll_tens_d10",function(){var u,g=R;return g=this.$rand_inner(10),j(g,10)&&(g=0),u=H(g,10),this.$push_to_detail("tens_d10",10,u),u}),P(z,"$roll_d9",function(){var g;return g=N(this.$rand_inner(10),1),this.$push_to_detail("d9",10,g),g}),P(z,"$roll_d66",function($){var m,u=R;return u=E(I("Array"),"new",[2],function s(){return(null==s.$$s?this:s.$$s).$roll_once(6)},{$$s:this}),L(W(I("D66SortType"),"ASC"),m=$)?u["$sort!"]():L(W(I("D66SortType"),"DESC"),m)&&u["$sort!"]()["$reverse!"](),U(H(u["$[]"](0),10),u["$[]"](1))}),z.$private(),P(z,"$rand_inner",function($){var u,g=this;return C(M(g.rand_results.$size(),I("UPPER_LIMIT_RANDS")))&&g.$raise(I("TooManyRandsError")),u=g.$random($),g.rand_results["$<<"]([u,$]),u}),P(z,"$random",function($){return U(I("Kernel").$rand($),1)}),P(z,"$push_to_detail",function($,g,u){var s;return s=I("DetailedRandResult").$new($,g,u),this.detailed_rand_results.$push(s)}),B(i[0],q("StandardError"),"TooManyRandsError"),R},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var E,L,G,c,d,i,q,D,j,F=e.module,B=e.klass,l=e.def,P=e.truthy,C=e.return_val,w=[],U=e.nil;return E=w,L=j=[F(w[0],"BCDice")].concat(E),G=D=[F(j[0],"DiceTable")].concat(L),d=[c=B(D[0],null,"RollResult")].concat(G),i=e.$r(d),(q=c.$$prototype).table_name=q.value=q.body=U,l(c,"$initialize",function(_,v,z){var S=this;return S.table_name=_,S.value=v,S.body=z}),c.$attr_reader("table_name"),c.$attr_reader("value"),c.$attr_reader("body"),l(c,"$to_s",function(){var _=this;return _.table_name+"("+_.value+") \uff1e "+_.body}),l(c,"$last_body",function(){var _=this;return P(_.body["$is_a?"](i("RollResult")))?_.body.$last_body():_.body}),l(c,"$empty?",C(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var E,L,G,c,d,i,q,D,j,F=e.module,B=e.klass,l=e.truthy,P=e.def,C=e.rb_minus,w=[],U=e.nil;return E=w,L=j=[F(w[0],"BCDice")].concat(E),G=D=[F(j[0],"DiceTable")].concat(L),d=[c=B(D[0],null,"ChainTable")].concat(G),i=e.$r(d),(q=c.$$prototype).times=q.sides=q.items=q.name=U,P(c,"$initialize",function(_,v,z){var S=this,I=U;return S.name=_,S.items=z.$freeze(),I=/(\d+)D(\d+)/i.$match(v),l(I)||S.$raise(i("ArgumentError"),"Unexpected table type: "+v),S.times=I["$[]"](1).$to_i(),S.sides=I["$[]"](2).$to_i()}),P(c,"$roll",function(_){var z,S,v=this,I=U;return z=_.$roll_sum(v.times,v.sides),S=C(z,v.times),I=v.items["$[]"](S),l(I["$respond_to?"]("roll"))&&(I=I.$roll(_)),i("RollResult").$new(v.name,z,I)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var H,R,i,q,t,_,v,G,M,F=e.module,B=e.klass,l=e.hash2,P=e.defs,C=e.def,w=e.rb_plus,U=e.rb_times,T=e.rb_minus,E=[],N=e.nil;return H=E,R=M=[F(E[0],"BCDice")].concat(H),i=G=[F(M[0],"DiceTable")].concat(R),t=[q=B(G[0],null,"D66GridTable")].concat(i),_=e.$r(t),(v=q.$$prototype).name=v.items=N,P(q,"$from_i18n",function(S,I){var h=N;return h=_("I18n").$t(S,l(["locale","raise"],{locale:I,raise:!0})),this.$new(h["$[]"]("name"),h["$[]"]("items"))}),C(q,"$initialize",function(S,I){return this.name=S,this.items=I.$freeze()}),C(q,"$roll",function(S){var b,h,$,g,u;return b=S.$roll_once(6),h=S.$roll_once(6),$=w(U(b,10),h),g=T(b,1),u=T(h,1),_("RollResult").$new(this.name,$,this.items["$[]"](g)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var N,M,d,i,q,t,R,W,H,F=e.module,B=e.klass,l=e.hash2,P=e.defs,C=e.def,U=[],T=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),N=U,M=H=[F(U[0],"BCDice")].concat(N),R=[F(H[0],"DiceTable")].concat(M),W=e.$r(R),d=R,q=[i=B(R[0],W("D66GridTable"),"D66HalfGridTable")].concat(d),t=e.$r(q),P(i,"$from_i18n",function(v,z){var I=T;return I=t("I18n").$t(v,l(["locale","raise"],{locale:z,raise:!0})),this.$new(I["$[]"]("name"),I["$[]"]("items_1_2_3"),I["$[]"]("items_4_5_6"))}),C(i,"$initialize",function(v,z,S){return this.name=v,this.items=[z,z,z,S,S,S].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var N,M,d,i,q,t,R,W,H,F=e.module,B=e.klass,l=e.hash2,P=e.defs,C=e.def,U=[],T=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),N=U,M=H=[F(U[0],"BCDice")].concat(N),R=[F(H[0],"DiceTable")].concat(M),W=e.$r(R),d=R,q=[i=B(R[0],W("D66GridTable"),"D66OneThirdTable")].concat(d),t=e.$r(q),P(i,"$from_i18n",function(v,z){var I=T;return I=t("I18n").$t(v,l(["locale","raise"],{locale:z,raise:!0})),this.$new(I["$[]"]("name"),I["$[]"]("items_1_2"),I["$[]"]("items_3_4"),I["$[]"]("items_5_6"))}),C(i,"$initialize",function(v,z,S,I){return this.name=v,this.items=[z,z,S,S,I,I].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var M,G,t,_,v,z,S,d,R,F=e.module,B=e.klass,l=e.hash2,P=e.defs,C=e.def,w=e.eqeqeq,U=e.rb_plus,T=e.rb_times,E=e.truthy,N=[],j=e.nil,H=e.$$$;return M=N,G=R=[F(N[0],"BCDice")].concat(M),t=d=[F(R[0],"DiceTable")].concat(G),v=[_=B(d[0],null,"D66Table")].concat(t),z=e.$r(v),(S=_.$$prototype).sort_type=S.items=S.name=j,P(_,"$from_i18n",function(b,h){var u,g=j;return g=z("I18n").$t(b,l(["locale"],{locale:h})),u=z("D66SortType").$const_get(g["$[]"]("d66_sort_type")),this.$new(g["$[]"]("name"),u,g["$[]"]("items"))}),C(_,"$initialize",function(b,h,$){var g=this;return g.name=b,g.sort_type=h,g.items=$.$freeze()}),C(_,"$roll",function(b){var h=this,$=j,g=j,u=j,m=j;return $=b.$roll_barabara(2,6),w(H(z("D66SortType"),"ASC"),g=h.sort_type)?$["$sort!"]():w(H(z("D66SortType"),"DESC"),g)&&$["$sort!"]()["$reverse!"](),u=U(T($["$[]"](0),10),$["$[]"](1)),m=E(g=h.items["$[]"](u))?g:h.items["$[]"](u.$to_s()),E(m["$respond_to?"]("roll"))&&(m=m.$roll(b)),z("RollResult").$new(h.name,u,m)}),C(_,"$choice",function(b){return z("RollResult").$new(this.name,b,this.items["$[]"](b))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var D,c,i,q,W,F=e.module,B=e.klass,l=e.hash2,P=e.send,C=e.to_ary,w=e.rb_plus,U=e.rb_times,T=e.send2,E=e.find_super,N=e.def,H=[],L=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),D=H,c=W=[F(H[0],"BCDice")].concat(D),i=[F(W[0],"DiceTable")].concat(c),q=e.$r(i),N(B(i[0],q("D66Table"),"D66LeftRangeTable"),"$initialize",function z(S,I,b){var g;return z.$$p=null,g=l([],{}),P(b,"each",[],function(m){var s,o;return null==m&&(m=L),s=C(m),o=null==s[1]?L:s[1],P(null==s[0]?L:s[0],"each",[],function(p){return null==p&&(p=L),P(o,"each_with_index",[],function(f,a){var Y,V;return null==f&&(f=L),null==a&&(a=L),V=w(U(p,10),w(a,1)),P(g,"[]=",Y=[V,f]),Y[Y.length-1]})})}),T(this,E(this,"initialize",z,!1,!0),"initialize",[S,I,g],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var L,W,q,t,_,v,z,c,D,F=e.module,B=e.klass,l=e.hash2,P=e.defs,C=e.def,w=e.truthy,U=e.rb_minus,T=e.rb_plus,E=e.rb_times,N=[],j=e.nil;return L=N,W=D=[F(N[0],"BCDice")].concat(L),q=c=[F(D[0],"DiceTable")].concat(W),_=[t=B(c[0],null,"D66ParityTable")].concat(q),v=e.$r(_),(z=t.$$prototype).odd=z.even=z.name=j,P(t,"$from_i18n",function(I,b){var $=j;return $=v("I18n").$t(I,l(["locale","raise"],{locale:b,raise:!0})),this.$new($["$[]"]("name"),$["$[]"]("odd"),$["$[]"]("even"))}),C(t,"$initialize",function(I,b,h){var $=this;return $.name=I,$.odd=b.$freeze(),$.even=h.$freeze()}),C(t,"$roll",function(I){var $,u,m,b=this,h=j;return h=I.$roll_once(6),$=I.$roll_once(6),u=(w(h["$odd?"]())?b.odd:b.even)["$[]"](U($,1)),m=T(E(h,10),$),v("RollResult").$new(b.name,m,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var N,M,c,d,i,q,t,R,H,F=e.module,B=e.klass,l=e.def,P=e.rb_plus,C=e.rb_times,w=e.send,U=[],T=e.nil;return N=U,M=H=[F(U[0],"BCDice")].concat(N),c=R=[F(H[0],"DiceTable")].concat(M),i=[d=B(R[0],null,"D66RangeTable")].concat(c),q=e.$r(i),(t=d.$$prototype).items=t.name=T,l(d,"$initialize",function(v,z){return this.name=v,this.items=z.$freeze()}),l(d,"$roll",function(v){var S,I,b,h=T;return S=v.$roll_once(6),I=v.$roll_once(6),b=P(C(S,10),I),h=w(this.items,"find",[],function(g){return null==g&&(g=T),g["$[]"](0)["$include?"](b)}),q("RollResult").$new(this.name,b,h["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var D,c,_,b,$,g,v,z,S,I,i,W,F=e.module,B=e.klass,l=e.const_set,P=e.send,C=e.hash2,w=e.def,U=e.eqeqeq,T=e.truthy,E=e.to_a,N=e.rb_times,j=e.rb_plus,H=[],L=e.nil;return D=H,c=W=[F(H[0],"BCDice")].concat(D),_=i=[F(W[0],"DiceTable")].concat(c),z=[v=B(i[0],null,"RangeTable")].concat(_),S=e.$r(z),(I=v.$$prototype).name=I.items=I.num_of_dice=I.num_of_sides=I.formatter=L,l(z[0],"RollResult",P(S("Struct"),"new",["sum","values","content","formatted"],function b(){return(null==b.$$s?this:b.$$s).$alias_method("to_s","formatted")},{$$s:v})),l(z[0],"Item",S("Struct").$new("range","content")),l(z[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),l(z[0],"DEFAULT_FORMATTER",P(v,"lambda",[],function(h,$){return null==h&&(h=L),null==$&&($=L),h.$name()+"("+$.$sum()+") \uff1e "+$.$content()})),v.$attr_reader("name"),v.$attr_reader("num_of_dice"),v.$attr_reader("num_of_sides"),$=[b=e.get_singleton_class(v)].concat(z),g=e.$r($),w(b,"$from_i18n",function(m,s){var o,x=L;return x=g("I18n").$t(m,C(["locale"],{locale:s})),o=P(x["$[]"]("items"),"map",[],function r(p){return null==p&&(p=L),[(null==r.$$s?this:r.$$s).$conv_string_range(p["$[]"](0)),p["$[]"](1)]},{$$s:this}),this.$new(x["$[]"]("name"),x["$[]"]("type"),o)}),w(b,"$conv_string_range",function(m){var k,s=this;return null==s.name&&(s.name=L),U(g("Integer"),k=m)?m:U(g("String"),k)?T(m["$include?"](".."))?P(g("Range"),"new",E(P(m.$split("..",2),"map",[],function x(o){return null==o&&(o=L),(null==x.$$s?this:x.$$s).$Integer(o)},{$$s:s}))):s.$Integer(m):s.$raise(g("TypeError"),s.name+": "+m+" ("+m.$class()+") must be a String or an Integer")}),w(v,"$initialize",function b(h,$,g){var s,u=b.$$p||L,m=this,k=L;return b.$$p=null,m.name=h.$freeze(),m.formatter=T(s=u)?s:S("DEFAULT_FORMATTER"),k=S("DICE_ROLL_METHOD_RE").$match($),T(k)||m.$raise(S("ArgumentError"),m.name+": invalid dice roll method: "+$),m.num_of_dice=k["$[]"](1).$to_i(),m.num_of_sides=k["$[]"](2).$to_i(),m.$store(g)}),w(v,"$fetch",function(h){var g,$=this;return g=P($.items,"find",[],function(m){return null==m&&(m=L),m.$range()["$include?"](h)}),T(g)||$.$raise(S("RangeError"),$.name+": value is out of range: "+h),g}),w(v,"$roll",function(h){var u,$=this,g=L,m=L;return u=(g=h.$roll_barabara($.num_of_dice,$.num_of_sides)).$sum(),(m=S("RollResult").$new(u,g,$.$fetch(u).$content()))["$formatted="]($.formatter["$[]"]($,m)),m}),v.$private(),w(v,"$store",function(h){var g,u,$=this;return g=P(h,"map",[],function m(s,k){return null==s&&(s=L),null==k&&(k=L),[(null==m.$$s?this:m.$$s).$coerce_to_int_range(s),k]},{$$s:$}),u=P(g,"sort_by",[],function(s,k){return null==s&&(s=L),null==k&&(k=L),s.$min()}),$.$assert_min_sum_is_covered(u),$.$assert_max_sum_is_covered(u),$.$assert_no_gap_or_overlap_in_ranges(u),$.items=P(u,"map",[],function(s,k){return null==s&&(s=L),null==k&&(k=L),S("Item").$new(s,k.$freeze()).$freeze()}).$freeze(),$}),w(v,"$coerce_to_int_range",function(h){var g;return U(S("Integer"),g=h)?S("Range").$new(h,h):U(S("Range"),g)&&T(h.$begin()["$is_a?"](S("Integer")))&&T(h.$end()["$is_a?"](S("Integer")))?h:this.$raise(S("TypeError"),this.name+": "+h+" ("+h.$class()+") must be an Integer or a Range with Integers ")}),w(v,"$assert_min_sum_is_covered",function(h){var g,$=this,u=L;return g=$.num_of_dice,u=h.$first()["$[]"](0),T(u["$include?"](g))||$.$raise(S("RangeError"),$.name+": min value ("+g+") is not covered: "+u),$}),w(v,"$assert_max_sum_is_covered",function(h){var g,$=this,u=L;return g=N($.num_of_dice,$.num_of_sides),u=h.$last()["$[]"](0),T(u["$include?"](g))||$.$raise(S("RangeError"),$.name+": max value ("+g+") is not covered: "+u),$}),w(v,"$assert_no_gap_or_overlap_in_ranges",function(h){return P(h,"each_cons",[2],function g(u,m){var o,r,s=null==g.$$s?this:g.$$s,k=L,x=L;return null==s.name&&(s.name=L),null==u&&(u=L),null==m&&(m=L),k=u["$[]"](0),x=m["$[]"](0),o=k.$max(),r=j(o,1),T(x["$include?"](o))&&s.$raise(S("RangeError"),s.name+": Range overlap: "+k+" and "+x),T(x["$include?"](r))?L:s.$raise(S("RangeError"),s.name+": Range gap: "+k+" and "+x)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var j,D,d,v,z,S,I,q,W,L,F=e.module,B=e.klass,l=e.send,P=e.def,C=e.rb_minus,w=e.return_ivar,U=[],T=e.nil,E=e.$$$;return j=U,D=L=[F(U[0],"BCDice")].concat(j),d=W=[F(L[0],"DiceTable")].concat(D),v=q=[B(W[0],null,"SaiFicSkillTable")].concat(d),S=[z=B(q[0],null,"Category")].concat(v),I=e.$r(S),P(z,"$initialize",function(h,$,g,u){var m=this;return m.name=h,m.skills=l($.$map(),"with_index",[2],function(k,x){return null==k&&(k=T),null==x&&(x=T),E(I("SaiFicSkillTable"),"Skill").$new(h,k,g,x,u)}),m.dice=g}),P(z,"$roll",function(h){return this.$skills()["$[]"](C(h.$roll_sum(2,6),2))}),P(z,"$to_s",w("name")),z.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var T,H,W,q,t,c,M,N,F=e.module,B=e.klass,l=e.def,P=e.hash2,C=[],w=e.nil;return T=C,H=N=[F(C[0],"BCDice")].concat(T),W=M=[F(N[0],"DiceTable")].concat(H),c=[B(M[0],null,"SaiFicSkillTable")].concat(W),(t=(q=B(c[0],null,"Skill")).$$prototype).s_format=t.category_dice=t.row_dice=t.category_name=t.name=w,l(q,"$initialize",function(v,z,S,I,b){var h=this;return h.category_name=v,h.name=z,h.category_dice=S,h.row_dice=I,h.s_format=b}),l(q,"$to_s",function(){var v=this;return v.$format(v.s_format,P(["category_dice","row_dice","category_name","skill_name"],{category_dice:v.category_dice,row_dice:v.row_dice,category_name:v.category_name,skill_name:v.name}))}),q.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var c,t,I,b,h,$,g,v,i,F=e.module,B=e.klass,l=e.ensure_kwargs,P=e.hash2,C=e.send,U=e.defs,T=e.const_set,E=e.to_ary,N=e.def,j=e.truthy,H=e.rb_minus,L=e.rb_plus,M=e.top,D=[],R=e.nil,W=e.$$$;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),c=D,t=i=[F(D[0],"BCDice")].concat(c),I=v=[F(i[0],"DiceTable")].concat(t),h=[b=B(v[0],null,"SaiFicSkillTable")].concat(I),$=e.$r(h),(g=b.$$prototype).rtt=g.rtt_format=g.rct=g.rct_format=g.rttn=g.rttn_format=g.categories=R,U(b,"$from_i18n",function(m,s,k){var x,o,r,a,f=R;return null==(x=(k=l(k)).$$smap.rtt)&&(x=R),null==(o=k.$$smap.rct)&&(o=R),null==(r=k.$$smap.rttn)&&(r=R),a=(f=$("I18n").$t("RTT",P(["locale","raise","default"],{locale:s,raise:!1,default:P([],{})})).$merge($("I18n").$t(m,P(["locale","raise"],{locale:s,raise:!0}))))["$[]"]("items"),f=C(f,"select",[],function(V,K){return null==V&&(V=R),null==K&&(K=R),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](V)}),this.$new(a,e.to_hash(f).$merge(P(["rtt","rct","rttn"],{rtt:x,rct:o,rttn:r})))},-3),T(h[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),T(h[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),T(h[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),T(h[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),N(b,"$initialize",function(m,s){var k,x,o,r,p,n,f,a=this;return null==(k=(s=l(s)).$$smap.rtt)&&(k=R),null==(x=s.$$smap.rct)&&(x=R),null==(o=s.$$smap.rttn)&&(o=R),null==(r=s.$$smap.rtt_format)&&(r=$("DEFAULT_RTT")),null==(p=s.$$smap.rct_format)&&(p=$("DEFAULT_RCT")),null==(n=s.$$smap.rttn_format)&&(n=$("DEFAULT_RTTN")),null==(f=s.$$smap.s_format)&&(f=$("DEFAULT_S")),a.categories=C(m.$map(),"with_index",[1],function(V,K){var ne,_e,ie;return null==V&&(V=R),null==K&&(K=R),_e=null==(ne=E(V))[0]?R:ne[0],ie=null==ne[1]?R:ne[1],W($("SaiFicSkillTable"),"Category").$new(_e,ie,K,f)},{$$has_top_level_mlhs_arg:!0}),a.rtt=k,a.rct=x,a.rttn=o.$to_a(),a.rtt_format=r,a.rct_format=p,a.rttn_format=n},-2),T(h[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),b.$attr_reader("categories"),N(b,"$roll_command",function(m,s){var x,k=this,o=R,r=R;return j(["RTT",k.rtt]["$include?"](x=s))?k.$format_skill(k.rtt_format,k.$roll_skill(m)):j(["RCT",k.rct]["$include?"](x))?(o=k.$roll_category(m),k.$format(k.rct_format,P(["category_dice","category_name"],{category_dice:o.$dice(),category_name:o.$name()}))):j(r=$("RTTN").$index(x))||j(r=k.rttn.$index(x))?k.$format_skill(k.rttn_format,k.categories["$[]"](r).$roll(m)):R}),N(b,"$roll_category",function(m){return this.categories["$[]"](H(m.$roll_once(6),1))}),N(b,"$roll_skill",function(m){return this.$roll_category(m).$roll(m)}),N(b,"$prefixes",function(){var m=this;return L(["RTT[1-6]?","RCT",m.rtt,m.rct],m.rttn).$compact()}),b.$private(),N(b,"$format_skill",function(m,s){return this.$format(m,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:s.$category_dice(),row_dice:s.$row_dice(),category_name:s.$category_name(),skill_name:s.$name(),text:s.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var j,D,d,i,q,t,_,W,L,F=e.module,B=e.klass,l=e.hash2,P=e.defs,C=e.truthy,w=e.def,U=e.rb_minus,T=[],E=e.nil;return j=T,D=L=[F(T[0],"BCDice")].concat(j),d=W=[F(L[0],"DiceTable")].concat(D),q=[i=B(W[0],null,"Table")].concat(d),t=e.$r(q),(_=i.$$prototype).times=_.sides=_.name=_.items=E,P(i,"$from_i18n",function(z,S){var b=E;return b=t("I18n").$t(z,l(["locale"],{locale:S})),this.$new(b["$[]"]("name"),b["$[]"]("type"),b["$[]"]("items"))}),w(i,"$initialize",function(z,S,I){var b=this,h=E;return b.name=z,b.items=I.$freeze(),h=/(\d+)D(\d+)/i.$match(S),C(h)||b.$raise(t("ArgumentError"),"Unexpected table type: "+S),b.times=h["$[]"](1).$to_i(),b.sides=h["$[]"](2).$to_i()}),w(i,"$roll",function(z){var I,S=this;return I=z.$roll_sum(S.times,S.sides),S.$choice(I)}),w(i,"$choice",function(z){var I,S=this;return I=U(z,S.times),t("RollResult").$new(S.name,z,S.items["$[]"](I))})},Opal.modules["bcdice/dice_table"]=function(e){var F=e.top;return F.$require("bcdice/dice_table/roll_result"),F.$require("bcdice/dice_table/chain_table"),F.$require("bcdice/dice_table/d66_grid_table"),F.$require("bcdice/dice_table/d66_half_grid_table"),F.$require("bcdice/dice_table/d66_one_third_table"),F.$require("bcdice/dice_table/d66_left_range_table"),F.$require("bcdice/dice_table/d66_parity_table"),F.$require("bcdice/dice_table/d66_range_table"),F.$require("bcdice/dice_table/d66_table"),F.$require("bcdice/dice_table/range_table"),F.$require("bcdice/dice_table/sai_fic_skill_table"),F.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var w,N,H,T,F=e.module,B=e.const_set,l=[];return w=l,N=T=[F(l[0],"BCDice")].concat(w),H=[F(T[0],"D66SortType")].concat(N),B(H[0],"NO_SORT","no_sort"),B(H[0],"ASC","asc"),B(H[0],"DESC","desc"),function(E,N){var H=[F(E,"RoundType")].concat(N);return B(H[0],"CEIL","ceil"),B(H[0],"FLOOR","floor"),B(H[0],"ROUND","round")}(T[0],T)},Opal.modules["bcdice/translate"]=function(e){var N,M,D,R,W,H,F=e.module,B=e.ensure_kwargs,l=e.kwrestargs,C=e.hash2,w=e.def,U=[],T=e.nil;return N=U,M=H=[F(U[0],"BCDice")].concat(N),R=[D=F(H[0],"Translate")].concat(M),W=e.$r(R),w(D,"$translate",function(c,d){var i,q=this;return null==q.locale&&(q.locale=T),d=B(d),i=l(d,{}),W("I18n").$translate(c,C(["locale","raise"],{locale:q.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var D,G,R,N,H,B=e.klass,l=e.send,P=e.def,C=e.return_val,w=e.return_ivar,U=[],T=e.nil;return N=U,D=H=[(0,e.module)(U[0],"BCDice")].concat(N),[R=B(H[0],null,"Result")].concat(D),P(G=e.get_singleton_class(R),"$success",function(i){return l(this.$new(),"tap",[],function(_){var v;return null==_&&(_=T),_["$text="](i),l(_,"success=",v=[!0]),v[v.length-1]})}),P(G,"$failure",function(i){return l(this.$new(),"tap",[],function(_){var v;return null==_&&(_=T),_["$text="](i),l(_,"failure=",v=[!0]),v[v.length-1]})}),P(G,"$critical",function(i){return l(this.$new(),"tap",[],function(_){var v;return null==_&&(_=T),_["$text="](i),_["$critical="](!0),l(_,"success=",v=[!0]),v[v.length-1]})}),P(G,"$fumble",function(i){return l(this.$new(),"tap",[],function(_){var v;return null==_&&(_=T),_["$text="](i),_["$fumble="](!0),l(_,"failure=",v=[!0]),v[v.length-1]})}),P(G,"$nothing",C("nothing")),P(R,"$initialize",function(c){var d=this;return null==c&&(c=T),d.text=c,d.rands=T,d.detailed_rands=T,d.secret=!1,d.success=!1,d.failure=!1,d.critical=!1,d.fumble=!1},-1),R.$attr_accessor("text","rands","detailed_rands"),R.$attr_writer("secret","success","failure","critical","fumble"),P(R,"$secret?",w("secret")),P(R,"$success?",w("success")),P(R,"$failure?",w("failure")),P(R,"$critical?",w("critical")),P(R,"$fumble?",w("fumble")),P(R,"$condition=",function(c){return this.success=c,this.failure=c["$!"]()})},Opal.modules["racc/parser"]=function(e){var z,I,b,F=e.module,B=e.klass,l=e.truthy,P=e.const_set,C=e.defs,w=e.gvars,U=e.rb_lt,T=e.def,E=e.to_ary,N=e.send,j=e.neqeq,H=e.rb_plus,L=e.eqeq,M=e.rb_ge,D=e.rb_gt,R=e.rb_minus,W=e.rb_le,G=e.rb_times,c=e.assign_ivar_val,i=[],q=e.$r(i),t=e.nil,_=e.$$$;return z=i,I=[F(i[0],"Racc")].concat(z),b=e.$r(I),B(I[0],b("StandardError"),"ParseError"),l(_("::","ParseError","skip_raise")?"constant":t)||P(i[0],"ParseError",_(q("Racc"),"ParseError")),function(v,z){var u,m,s,k,x,b=[F(v,"Racc")].concat(z),h=e.$r(b);return l(h("Racc_No_Extensions","skip_raise")?"constant":t)||P(b[0],"Racc_No_Extensions",!1),u=b,s=[m=B(b[0],null,"Parser")].concat(u),k=e.$r(s),(x=m.$$prototype).yydebug=x.racc_debug_out=x.racc_error_status=x.racc_t=x.racc_vstack=x.racc_val=x.racc_state=x.racc_tstack=t,P(s[0],"Racc_Runtime_Version","1.4.6"),P(s[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),P(s[0],"Racc_Runtime_Core_Version_R","1.4.6"),P(s[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),P(s[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),P(s[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),P(s[0],"Racc_Runtime_Core_Version",k("Racc_Runtime_Core_Version_R")),P(s[0],"Racc_Runtime_Core_Revision",k("Racc_Runtime_Core_Revision_R")),P(s[0],"Racc_Runtime_Type","ruby"),C(k("Parser"),"$racc_runtime_type",function(){return k("Racc_Runtime_Type")}),T(m,"$_racc_setup",function(){var r,p,n=this,f=t,a=t;return null==w.stderr&&(w.stderr=t),l(_(n.$class(),"Racc_debug_parser"))||(n.yydebug=!1),l(null!=(r=n.yydebug)&&r!==t?"instance-variable":t)||(n.yydebug=!1),l(n.yydebug)&&(l(null!=(p=n.racc_debug_out)&&p!==t?"instance-variable":t)||(n.racc_debug_out=w.stderr),n.racc_debug_out=l(f=n.racc_debug_out)?f:w.stderr),a=_(n.$class(),"Racc_arg"),l(U(a.$size(),14))&&a["$[]="](13,!0),a}),T(m,"$_racc_init_sysvars",function(){var r=this;return r.racc_state=[0],r.racc_tstack=[],r.racc_vstack=[],r.racc_t=t,r.racc_val=t,r.racc_read_next=!0,r.racc_user_yyerror=!1,r.racc_error_status=0}),T(m,"$do_parse",function(){return this.$__send__(k("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),T(m,"$next_token",function(){return this.$raise(k("NotImplementedError"),this.$class()+"#next_token is not defined")}),T(m,"$_racc_do_parse_rb",function(r,p){var n,a=this,Y=t,V=t,K=t,ne=t,_e=t,ie=t,ue=t,ae=t;return n=E(r),Y=null==n[0]?t:n[0],V=null==n[1]?t:n[1],K=null==n[2]?t:n[2],ne=null==n[3]?t:n[3],_e=null==n[10]?t:n[10],a.$_racc_init_sysvars(),ie=ue=ae=t,N(a,"catch",["racc_end_parse"],function re(){var se,Q,y=null==re.$$s?this:re.$$s,Z=t;for(null==y.racc_state&&(y.racc_state=t),null==y.racc_read_next&&(y.racc_read_next=t),null==y.racc_t&&(y.racc_t=t),null==y.yydebug&&(y.yydebug=t),null==y.racc_val&&(y.racc_val=t);l(!0);)for(l(ae=ne["$[]"](y.racc_state["$[]"](-1)))?(l(y.racc_read_next)&&j(y.racc_t,0)&&(Q=y.$next_token(),se=E(Q),ie=null==se[0]?t:se[0],y.racc_val=null==se[1]?t:se[1],y.racc_t=l(ie)?l(Z=_e["$[]"](ie))?Z:1:0,l(y.yydebug)&&y.$racc_read_token(y.racc_t,ie,y.racc_val),y.racc_read_next=!1),ae=H(ae,y.racc_t),l(M(ae,0))&&l(ue=Y["$[]"](ae))&&L(V["$[]"](ae),y.racc_state["$[]"](-1))||(ue=K["$[]"](y.racc_state["$[]"](-1)))):ue=K["$[]"](y.racc_state["$[]"](-1));l(ue=y.$_racc_evalact(ue,r)););},{$$s:a})}),T(m,"$yyparse",function(r,p){return this.$__send__(k("Racc_YY_Parse_Method"),r,p,this.$_racc_setup(),!0)}),T(m,"$_racc_yyparse_rb",function(r,p,n,f){var a,V=this,K=t,ne=t,$e=t,_e=t,ue=t,ae=t,re=t;return a=E(n),K=null==a[0]?t:a[0],ne=null==a[1]?t:a[1],$e=null==a[2]?t:a[2],_e=null==a[3]?t:a[3],ue=null==a[10]?t:a[10],V.$_racc_init_sysvars(),ae=t,re=t,N(V,"catch",["racc_end_parse"],function se(){var Q=null==se.$$s?this:se.$$s;for(null==Q.racc_state&&(Q.racc_state=t);!l(re=_e["$[]"](Q.racc_state["$[]"](-1)));)for(;l(ae=Q.$_racc_evalact($e["$[]"](Q.racc_state["$[]"](-1)),n)););return N(r,"__send__",[p],function y(Z,X){var A=null==y.$$s?this:y.$$s,O=t,te=t;for(null==A.racc_t&&(A.racc_t=t),null==A.racc_state&&(A.racc_state=t),null==A.racc_read_next&&(A.racc_read_next=t),null==Z&&(Z=t),null==X&&(X=t),A.racc_t=l(Z)?l(O=ue["$[]"](Z))?O:1:0,A.racc_val=X,A.racc_read_next=!1,re=H(re,A.racc_t),l(M(re,0))&&l(ae=K["$[]"](re))&&L(ne["$[]"](re),A.racc_state["$[]"](-1))||(ae=$e["$[]"](A.racc_state["$[]"](-1)));l(ae=A.$_racc_evalact(ae,n)););for(;l(l(O=l(te=(re=_e["$[]"](A.racc_state["$[]"](-1)))["$!"]())?te:A.racc_read_next["$!"]())?O:A.racc_t["$=="](0));)for(l(re)&&l(re=H(re,A.racc_t))&&l(M(re,0))&&l(ae=K["$[]"](re))&&L(ne["$[]"](re),A.racc_state["$[]"](-1))||(ae=$e["$[]"](A.racc_state["$[]"](-1)));l(ae=A.$_racc_evalact(ae,n)););},{$$s:Q})},{$$s:V})}),T(m,"$_racc_evalact",function(r,p){var n,$e,a=this,Y=t,V=t,ne=t,_e=t,ie=t,ue=t;if(Y=null==(n=E(p))[0]?t:n[0],V=null==n[1]?t:n[1],ne=null==n[3]?t:n[3],$e=null==n[11]?t:n[11],_e=null==n[12]?t:n[12],l(D(r,0))&&l(U(r,$e)))l(D(a.racc_error_status,0))&&(L(a.racc_t,1)||(a.racc_error_status=R(a.racc_error_status,1))),a.racc_vstack.$push(a.racc_val),a.racc_state.$push(r),a.racc_read_next=!0,l(a.yydebug)&&(a.racc_tstack.$push(a.racc_t),a.$racc_shift(a.racc_t,a.racc_tstack,a.racc_vstack));else if(l(U(r,0))&&l(D(r,_e["$-@"]()))){if(ie=N(a,"catch",["racc_jump"],function ae(){var re=null==ae.$$s?this:ae.$$s;return null==re.racc_state&&(re.racc_state=t),re.racc_state.$push(re.$_racc_do_reduce(p,r)),!1},{$$s:a}),l(ie))switch(ie.valueOf()){case 1:return a.racc_user_yyerror=!0,_e["$-@"]();case 2:return $e;default:a.$raise("[Racc Bug] unknown jump code")}}else if(L(r,$e))l(a.yydebug)&&a.$racc_accept(),a.$throw("racc_end_parse",a.racc_vstack["$[]"](0));else{if(L(r,_e["$-@"]())){switch(a.racc_error_status.valueOf()){case 0:l(p["$[]"](21))||a.$on_error(a.racc_t,a.racc_val,a.racc_vstack);break;case 3:L(a.racc_t,0)&&a.$throw("racc_end_parse",t),a.racc_read_next=!0}for(a.racc_user_yyerror=!1,a.racc_error_status=3;l(!0)&&!(l(ue=ne["$[]"](a.racc_state["$[]"](-1)))&&(ue=H(ue,1),l(M(ue,0))&&l(r=Y["$[]"](ue))&&L(V["$[]"](ue),a.racc_state["$[]"](-1))));)l(W(a.racc_state.$size(),1))&&a.$throw("racc_end_parse",t),a.racc_state.$pop(),a.racc_vstack.$pop(),l(a.yydebug)&&(a.racc_tstack.$pop(),a.$racc_e_pop(a.racc_state,a.racc_tstack,a.racc_vstack));return r}a.$raise("[Racc Bug] unknown action "+r.$inspect())}return l(a.yydebug)&&a.$racc_next_state(a.racc_state["$[]"](-1),a.racc_state),t}),T(m,"$_racc_do_reduce",function(r,p){var n,_e,ue,Z,X,A,ee,a=this,V=t,K=t,ne=t,$e=t,ie=t,ae=t,re=t,se=t,Q=t,y=t,O=t,te=t,J=t;return V=null==(n=E(r))[4]?t:n[4],K=null==n[5]?t:n[5],ne=null==n[6]?t:n[6],$e=null==n[7]?t:n[7],_e=null==n[8]?t:n[8],ie=null==n[9]?t:n[9],ue=null==n[13]?t:n[13],ae=a.racc_state,re=a.racc_vstack,se=a.racc_tstack,Q=G(p,-3),y=ie["$[]"](Q),Z=ie["$[]"](H(Q,1)),X=ie["$[]"](H(Q,2)),A=[],l(a.yydebug)&&(O=se["$[]"](y["$-@"](),y)),te=re["$[]"](y["$-@"](),y),l(a.yydebug)&&se["$[]="](y["$-@"](),y,A),re["$[]="](y["$-@"](),y,A),ae["$[]="](y["$-@"](),y,A),l(ue)?re.$push(a.$__send__(X,te,re,te["$[]"](0))):re.$push(a.$__send__(X,te,re)),se.$push(Z),l(a.yydebug)&&a.$racc_reduce(O,Z,se,re),ee=R(Z,_e),l(Q=$e["$[]"](ee))&&(Q=H(Q,ae["$[]"](-1)),l(M(Q,0))&&l(J=V["$[]"](Q))&&L(K["$[]"](Q),ee))?J:ne["$[]"](ee)}),T(m,"$on_error",function(r,p,n){var a,f=this;return f.$raise(k("ParseError"),f.$sprintf("\nparse error on value %s (%s)",p.$inspect(),l(a=f.$token_to_str(r))?a:"?"))}),T(m,"$yyerror",function(){return this.$throw("racc_jump",1)}),T(m,"$yyaccept",function(){return this.$throw("racc_jump",2)}),T(m,"$yyerrok",c("racc_error_status",0)),T(m,"$racc_read_token",function(r,p,n){var f=this;return f.racc_debug_out.$print("read    "),f.racc_debug_out.$print(p.$inspect(),"(",f.$racc_token2str(r),") "),f.racc_debug_out.$puts(n.$inspect()),f.racc_debug_out.$puts()}),T(m,"$racc_shift",function(r,p,n){var f=this;return f.racc_debug_out.$puts("shift   "+f.$racc_token2str(r)),f.$racc_print_stacks(p,n),f.racc_debug_out.$puts()}),T(m,"$racc_reduce",function(r,p,n,f){var a=this,Y=t;return(Y=a.racc_debug_out).$print("reduce "),l(r["$empty?"]())?Y.$print(" <none>"):N(r,"each",[],function V(K){return null==K&&(K=t),Y.$print(" ",(null==V.$$s?this:V.$$s).$racc_token2str(K))},{$$s:a}),Y.$puts(" --\x3e "+a.$racc_token2str(p)),a.$racc_print_stacks(n,f),a.racc_debug_out.$puts()}),T(m,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),T(m,"$racc_e_pop",function(r,p,n){var f=this;return f.racc_debug_out.$puts("error recovering mode: pop token"),f.$racc_print_states(r),f.$racc_print_stacks(p,n),f.racc_debug_out.$puts()}),T(m,"$racc_next_state",function(r,p){var n=this;return n.racc_debug_out.$puts("goto    "+r),n.$racc_print_states(p),n.racc_debug_out.$puts()}),T(m,"$racc_print_stacks",function(r,p){var f=t;return(f=this.racc_debug_out).$print("        ["),N(r,"each_index",[],function a(Y){return null==Y&&(Y=t),f.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(r["$[]"](Y))," ",p["$[]"](Y).$inspect(),")")},{$$s:this}),f.$puts(" ]")}),T(m,"$racc_print_states",function(r){var n=t;return(n=this.racc_debug_out).$print("        ["),N(r,"each",[],function(a){return null==a&&(a=t),n.$print(" ",a)}),n.$puts(" ]")}),T(m,"$racc_token2str",function(r){var n;return l(n=_(this.$class(),"Racc_token_to_s_table")["$[]"](r))?n:this.$raise("[Racc Bug] can't convert token "+r+" to string")}),T(m,"$token_to_str",function(r){return _(this.$class(),"Racc_token_to_s_table")["$[]"](r)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var c,t,S,u,m,b,h,v,i,F=e.module,B=e.klass,l=e.def,P=e.thrower,C=e.return_ivar,w=e.send2,U=e.find_super,T=e.eqeq,E=e.const_set,N=e.eqeqeq,j=e.rb_divide,H=e.truthy,L=e.assign_ivar,M=e.alias,D=[],R=e.nil,W=e.$$$;return c=D,t=i=[F(D[0],"BCDice")].concat(c),S=v=[F(i[0],"Arithmetic")].concat(t),b=[F(v[0],"Node")].concat(S),h=e.$r(b),(m=(u=B(b[0],null,"BinaryOp")).$$prototype).lhs=m.rhs=m.op=R,l(u,"$initialize",function(k,x,o){var r=this;return r.lhs=k,r.op=x,r.rhs=o}),l(u,"$eval",function(k){try{P("eval_return");var p,o=this,r=R;return r=o.lhs.$eval(k),p=o.rhs.$eval(k),r.$send(o.op,p)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),l(u,"$output",function(){var k=this;return""+k.lhs.$output()+k.op+k.rhs.$output()}),l(u,"$s_exp",function(){var k=this;return"("+k.$op_for_s_exp()+" "+k.lhs.$s_exp()+" "+k.rhs.$s_exp()+")"}),l(u,"$op_for_s_exp",C("op")),function($,g,u){var m=B($,g,"DivideBase"),s=[m].concat(u),k=e.$r(s),x=m.$$prototype;x.lhs=x.rhs=x.op=R,l(m,"$initialize",function o(r,p){return o.$$p=null,w(this,U(this,"initialize",o,!1,!0),"initialize",[r,"/",p],null)}),l(m,"$eval",function(r){try{P("eval_return");var f,a,n=this;return f=n.lhs.$eval(r),a=n.rhs.$eval(r),T(a,0)&&n.$raise(k("ZeroDivisionError")),n.$divide_and_round(f,a,r)}catch(Y){if(Y===e.t_eval_return)return Y.$v;throw Y}}),l(m,"$output",function o(){var r=o.$$p||R,p=this;return o.$$p=null,""+w(p,U(p,"output",o,!1,!0),"output",[],r)+p.$rounding_method()}),m.$private(),l(m,"$rounding_method",function(){return W(this.$class(),"ROUNDING_METHOD")}),l(m,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),l(m,"$divide_and_round",function(r,p,n){return this.$raise(k("NotImplementedError"))})}(b[0],h("BinaryOp"),b),function($,g,u){var m=B($,g,"DivideWithGameSystemDefault"),s=[m].concat(u),k=e.$r(s);E(s[0],"ROUNDING_METHOD",""),m.$private(),l(m,"$divide_and_round",function(o,r,p){var n,f=R;return N(W(k("RoundType"),"CEIL"),n=p)?j(o.$to_f(),r).$ceil():N(W(k("RoundType"),"ROUND"),n)?(f=j(o.$to_f(),r),H(f["$negative?"]())?f.$abs().$round()["$-@"]():f.$round()):j(o,r).$floor()})}(b[0],h("DivideBase"),b),function($,g,u){var m=B($,g,"DivideWithCeil"),s=[m].concat(u);E(s[0],"ROUNDING_METHOD","C"),m.$private(),l(m,"$divide_and_round",function(x,o,r){return j(x.$to_f(),o).$ceil()})}(b[0],h("DivideBase"),b),function($,g,u){var m=B($,g,"DivideWithRound"),s=[m].concat(u);E(s[0],"ROUNDING_METHOD","R"),m.$private(),l(m,"$divide_and_round",function(x,o,r){var p=R;return p=j(x.$to_f(),o),H(p["$negative?"]())?p.$abs().$round()["$-@"]():p.$round()})}(b[0],h("DivideBase"),b),function($,g,u){var m=B($,g,"DivideWithFloor"),s=[m].concat(u);E(s[0],"ROUNDING_METHOD","F"),m.$private(),l(m,"$divide_and_round",function(x,o,r){return j(x,o).$floor()})}(b[0],h("DivideBase"),b),function($,g){var u=B($,null,"Negative");u.$$prototype.body=R,l(u,"$initialize",L("body")),l(u,"$eval",function(k){try{return P("eval_return"),this.body.$eval(k)["$-@"]()}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),l(u,"$output",function(){return"-"+this.body.$output()}),l(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(b[0]),function($,g){var u=B($,null,"Parenthesis");u.$$prototype.expr=R,l(u,"$initialize",L("expr")),l(u,"$eval",function(k){try{return P("eval_return"),this.expr.$eval(k)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),l(u,"$output",function(){return"("+this.expr.$output()+")"}),l(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(b[0]),function($,g){var u=B($,null,"Number");return u.$$prototype.value=R,l(u,"$initialize",L("value")),l(u,"$eval",C("value")),l(u,"$output",function(){return this.value.$to_s()}),M(u,"s_exp","output")}(b[0])},Opal.modules.strscan=function(e){var L,M,D,R,W,B=e.def,l=e.truthy,P=e.eqeqeq,C=e.Opal,w=e.return_ivar,U=e.send,T=e.alias,E=[],N=e.nil;return L=E,D=[M=(0,e.klass)(E[0],null,"StringScanner")].concat(L),R=e.$r(D),(W=M.$$prototype).pos=W.string=W.working=W.matched=W.prev_pos=W.match=N,M.$attr_reader("pos","matched"),B(M,"$initialize",function(c){var d=this;return d.string=c,d.pos=0,d.matched=N,d.working=c,d.match=[]}),M.$attr_reader("string"),B(M,"$beginning_of_line?",function(){var c=this;return 0===c.pos||"\n"===c.string.charAt(c.pos-1)}),B(M,"$scan",function(c){var d=this,i=(c=d.$anchor(c)).exec(d.working);return null==i?d.matched=N:(d.prev_pos=d.pos,d.pos+=i[0].length,d.working=d.working.substring(i[0].length),d.matched=i[0],d.match=i,i[0])}),B(M,"$scan_until",function(c){var d=this;c=d.$anchor(c);for(var i=d.working,q=0;i.length!=q;++q){var t=c.exec(i.substr(q));if(null!==t){var _=q+t[0].length,v=i.substr(0,_);return d.matched=t[0],d.match=t,d.prev_pos=d.pos+q,d.pos+=_,d.working=i.substr(_),v}}return d.matched=N}),B(M,"$[]",function(c){var i;if(l(this.match["$empty?"]()))return N;P(R("Symbol"),i=c)?c=c.$to_s():P(R("String"),i)||(c=C["$coerce_to!"](c,R("Integer"),"to_int"));var q=this.match;return c<0&&(c+=q.length),c<0||c>=q.length||null==q[c]?N:q[c]}),B(M,"$check",function(c){var d=this,i=(c=d.$anchor(c)).exec(d.working);return d.matched=null==i?N:i[0]}),B(M,"$check_until",function(c){var d=this,i=d.prev_pos,q=d.pos,t=d.working,_=d.$scan_until(c);return d.prev_pos=i,d.pos=q,d.working=t,_}),B(M,"$peek",function(c){return this.working.substring(0,c)}),B(M,"$eos?",function(){return 0===this.working.length}),B(M,"$exist?",function(c){var i=c.exec(this.working);return null==i?N:0==i.index?0:i.index+1}),B(M,"$skip",function(c){var d=this,i=(c=d.$anchor(c)).exec(d.working);if(null==i)return d.match=[],d.matched=N;var q=i[0],t=q.length;return d.matched=q,d.match=i,d.prev_pos=d.pos,d.pos+=t,d.working=d.working.substring(t),t}),B(M,"$skip_until",function(c){var i=this.$scan_until(c);return i===N?N:(this.matched=i.substr(-1),i.length)}),B(M,"$get_byte",function(){var c=this,d=N;return c.pos<c.string.length?(c.prev_pos=c.pos,c.pos+=1,d=c.matched=c.working.substring(0,1),c.working=c.working.substring(1)):c.matched=N,d}),B(M,"$match?",function(c){var d=this,i=(c=d.$anchor(c)).exec(d.working);return null==i?N:(d.prev_pos=d.pos,i[0].length)}),B(M,"$pos=",function(c){var d=this;return c<0&&(c+=d.string.$length()),d.pos=c,d.working=d.string.slice(c)}),B(M,"$matched_size",function(){return this.matched===N?N:this.matched.length}),B(M,"$post_match",function(){var c=this;return c.matched===N?N:c.string.substr(c.pos)}),B(M,"$pre_match",function(){var c=this;return c.matched===N?N:c.string.substr(0,c.prev_pos)}),B(M,"$reset",function(){var c=this;return c.working=c.string,c.matched=N,c.pos=0}),B(M,"$rest",w("working")),B(M,"$rest?",function(){return 0!==this.working.length}),B(M,"$rest_size",function(){return this.$rest().$size()}),B(M,"$terminate",function(){var c,d=this;return d.match=N,c=[d.string.$length()],U(d,"pos=",c),c[c.length-1]}),B(M,"$unscan",function(){var c=this;return c.pos=c.prev_pos,c.prev_pos=N,c.match=N,c}),T(M,"bol?","beginning_of_line?"),T(M,"getch","get_byte"),M.$private(),B(M,"$anchor",function(c){var d=c.toString().match(/\/([^\/]+)$/);return d=d?d[1]:void 0,new RegExp("^(?:"+c.source+")",d)})},Opal.modules["bcdice/normalize"]=function(e){var T,H,N,F=e.module,B=e.eqeqeq,l=e.def,P=e.eqeq,C=[],w=e.nil;return T=C,N=[F(C[0],"BCDice")].concat(T),(H=F(N[0],"Normalize")).$module_function(),l(H,"$comparison_operator",function(M){var D;return B(/<=|=</,D=M)?"<=":B(/>=|=>/,D)?">=":B(/<>|!=|=!/,D)?"!=":B(/</,D)?"<":B(/>/,D)?">":B(/=/,D)?"==":w}),l(H,"$target_number",function(M){return P(M,"?")?M:M.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var L,W,q,t,_,v,z,c,D,F=e.module,B=e.klass,l=e.const_set,P=e.hash2,C=e.truthy,w=e.send,U=e.def,T=e.thrower,E=e.top,N=[],j=e.nil;return E.$require("strscan"),E.$require("bcdice/normalize"),L=N,W=D=[F(N[0],"BCDice")].concat(L),q=c=[F(D[0],"Command")].concat(W),_=[t=B(c[0],null,"Lexer")].concat(q),v=e.$r(_),(z=t.$$prototype).scanner=z.notations=j,l(_[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),U(t,"$initialize",function(I,b){var h,$,u;return I=C(u=(h=($=I)===j||null==$?j:$.$split(" ",2))===j||null==h?j:h.$first())?u:"",this.scanner=v("StringScanner").$new(I),this.notations=w(b,"map",[],function(s){return null==s&&(s=j),C(s["$is_a?"](v("String")))?v("Regexp").$new(s):s})}),U(t,"$next_token",function(){try{var I=T("return"),b=this,h=j,$=j,u=j,m=j;return C(b.scanner["$eos?"]())?[!1,"$"]:(w(b.notations,"each",[],function s(k){var o,x=null==s.$$s?this:s.$$s;if(null==x.scanner&&(x.scanner=j),null==k&&(k=j),o=x.scanner.$scan(k),!C(o))return j;I.$throw(["NOTATION",o])},{$$s:b,$$ret:I}),C(h=b.scanner.$scan(/\d+/))?["NUMBER",h.$to_i()]:C($=b.scanner.$scan(/[<>!=]+/))?($=v("Normalize").$comparison_operator($),[C($)?"CMP_OP":"ILLEGAL",$]):(u=b.scanner.$getch().$upcase(),[C(m=v("SYMBOLS")["$[]"](u))?m:u.$to_sym(),u]))}catch(s){if(s===I)return s.$v;throw s}}),U(t,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var E,L,G,c,d,i,q,D,j,F=e.module,B=e.klass,l=e.def,P=e.return_ivar,C=e.truthy,w=[],U=e.nil;return E=w,L=j=[F(w[0],"BCDice")].concat(E),G=D=[F(j[0],"Command")].concat(L),d=[c=B(D[0],null,"Parsed")].concat(G),i=e.$r(d),(q=c.$$prototype).critical=q.fumble=q.dollar=q.modify_number=q.question_target=q.target_number=q.prefix_number=q.command=q.suffix_number=q.cmp_op=U,c.$attr_accessor("command"),c.$attr_accessor("prefix_number"),c.$attr_accessor("suffix_number"),c.$attr_accessor("critical"),c.$attr_accessor("fumble"),c.$attr_accessor("dollar"),c.$attr_accessor("modify_number"),c.$attr_accessor("cmp_op"),c.$attr_accessor("target_number"),c.$attr_writer("question_target"),l(c,"$initialize",function(){var _=this;return _.prefix_number=U,_.suffix_number=U,_.critical=U,_.fumble=U,_.dollar=U,_.cmp_op=U,_.target_number=U,_.question_target=!1}),l(c,"$question_target?",P("question_target")),l(c,"$to_s",function(_){var v=this,z=U,S=U,I=U,b=U,h=U;switch(null==_&&(_="after_command"),z=C(v.critical)?"@"+v.critical:U,S=C(v.fumble)?"#"+v.fumble:U,I=C(v.dollar)?"$"+v.dollar:U,b=i("Format").$modifier(v.modify_number),h=C(v.question_target)?"?":v.target_number,_.valueOf()){case"after_command":return[v.prefix_number,v.command,v.suffix_number,z,S,I,b,v.cmp_op,h].$join();case"after_modify_number":return[v.prefix_number,v.command,v.suffix_number,b,z,S,I,v.cmp_op,h].$join();case"after_target_number":return[v.prefix_number,v.command,v.suffix_number,b,v.cmp_op,h,z,S,I].$join();default:return U}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var _,I,m,p,n,f,a,Y,V,K,ne,$e,ue,s,o,r,se,h,$,z,F=e.klass,B=e.module,l=e.slice,P=e.extract_kwargs,C=e.ensure_kwargs,w=e.get_kwarg,U=e.send2,T=e.find_super,E=e.def,N=e.send,j=e.eqeq,H=e.thrower,L=e.hash,M=e.const_set,D=e.truthy,R=e.to_ary,W=e.hash2,G=e.top,c=[],d=e.$r(c),i=e.nil,q=e.$$$;return G.$require("racc/parser.rb"),G.$require("bcdice/arithmetic/node"),G.$require("bcdice/command/lexer"),G.$require("bcdice/command/parsed"),F(q(d("BCDice"),"Command"),q(d("Racc"),"Parser"),"Parser"),_=c,I=z=[B(c[0],"BCDice")].concat(_),h=[B(z[0],"Command")].concat(I),$=e.$r(h),m=h,o=[s=F(h[0],q($("Racc"),"Parser"),"Parser")].concat(m),r=e.$r(o),(se=s.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=i,E(s,"$initialize",function Q(y,Z){var X,A,O,te,J=this;return Q.$$p=null,X=l(arguments),A=P(X),A=C(A),O=X,te=w(A,"round_type"),U(J,T(J,"initialize",Q,!1,!0),"initialize",[],null),J.notations=O,J.round_type=te,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[i,">=",">","<=","<","==","!="],J.question_target=!1},-2),E(s,"$disable_modifier",function(){return this.modifier=!1,this}),E(s,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),E(s,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),E(s,"$has_prefix_number",function(){var y=this;return y.prefix_number=!0,y.need_prefix_number=!0,y}),E(s,"$has_suffix_number",function(){var y=this;return y.suffix_number=!0,y.need_suffix_number=!0,y}),E(s,"$enable_critical",function(){return this.critical=!0,this}),E(s,"$enable_fumble",function(){return this.fumble=!0,this}),E(s,"$enable_dollar",function(){return this.dollar=!0,this}),E(s,"$restrict_cmp_op_to",function(y){var Z;return Z=l(arguments),this.allowed_cmp_op=Z,this},-1),E(s,"$enable_question_target",function(){return this.question_target=!0,this}),E(s,"$parse",function(y){var Z=this;try{return Z.lexer=r("Lexer").$new(y,Z.notations),Z.$do_parse()}catch(X){if(!e.rescue(X,[r("ParseError"),r("ZeroDivisionError")]))throw X;try{return i}finally{e.pop_exception()}}}),s.$private(),E(s,"$parsed",function(y,Z,X,A){try{return H("eval_return"),N(r("Parsed").$new(),"tap",[],function ee(J){var ce,le,de,me,ve,fe,he,oe=null==ee.$$s?this:ee.$$s;return null==oe.round_type&&(oe.round_type=i),null==J&&(J=i),J["$command="](y["$[]"]("command")),J["$prefix_number="]((ce=y["$[]"]("prefix"))===i||null==ce?i:ce.$eval(oe.round_type)),J["$suffix_number="]((le=y["$[]"]("suffix"))===i||null==le?i:le.$eval(oe.round_type)),J["$critical="]((de=Z["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),J["$fumble="]((me=Z["$[]"]("fumble"))===i||null==me?i:me.$eval(oe.round_type)),J["$dollar="]((ve=Z["$[]"]("dollar"))===i||null==ve?i:ve.$eval(oe.round_type)),J["$modify_number="](X.$eval(oe.round_type)),J["$cmp_op="](A["$[]"]("cmp_op")),j(A["$[]"]("target"),"?")?(J["$question_target="](!0),N(J,"target_number=",fe=[0]),fe[fe.length-1]):(J["$question_target="](!1),fe=[(he=A["$[]"]("target"),he===i||null==he?i:he.$eval(oe.round_type))],N(J,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),E(s,"$next_token",function(){return this.lexer.$next_token()}),p=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),n=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),f=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),a=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),Y=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),V=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),K=[i,6,13,3,9,-1,27,-15,-10,-1,-38],ne=[i,i,i,i,i,i,19,16,15,i,i],$e=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ue=L(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),M(o[0],"Racc_arg",[p,n,a,f,Y,V,ne,K,19,$e,ue,58,35,!0]),D(r("Ractor","skip_raise")?"constant":i)&&r("Ractor").$make_shareable(r("Racc_arg")),M(o[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),D(r("Ractor","skip_raise")?"constant":i)&&r("Ractor").$make_shareable(r("Racc_token_to_s_table")),M(o[0],"Racc_debug_parser",!1),E(s,"$_reduce_1",function(y,Z,X){var A;return D(this.modifier)||this.$raise(r("ParseError")),A=R(y),this.$parsed(null==A[0]?i:A[0],null==A[1]?i:A[1],null==A[2]?i:A[2],null==A[3]?i:A[3])}),E(s,"$_reduce_2",function(y,Z,X){var A;return D(this.modifier)||this.$raise(r("ParseError")),A=R(y),this.$parsed(null==A[0]?i:A[0],null==A[2]?i:A[2],null==A[1]?i:A[1],null==A[3]?i:A[3])}),E(s,"$_reduce_3",function(y,Z,X){var A,ce;return ce=null==(A=R(y))[2]?i:A[2],this.$parsed(null==A[0]?i:A[0],null==A[1]?i:A[1],q(q(r("Arithmetic"),"Node"),"Number").$new(0),ce)}),E(s,"$_reduce_4",function(y,Z,X){var A=this;return D(A.prefix_number)&&D(A.suffix_number)||A.$raise(r("ParseError")),W(["command","prefix","suffix"],{command:y["$[]"](1),prefix:y["$[]"](0),suffix:y["$[]"](2)})}),E(s,"$_reduce_5",function(y,Z,X){var A=this;return D(A.prefix_number)||A.$raise(r("ParseError")),D(A.need_suffix_number)&&A.$raise(r("ParseError")),W(["command","prefix"],{command:y["$[]"](1),prefix:y["$[]"](0)})}),E(s,"$_reduce_6",function(y,Z,X){var A=this;return D(A.suffix_number)||A.$raise(r("ParseError")),D(A.need_prefix_number)&&A.$raise(r("ParseError")),W(["command","suffix"],{command:y["$[]"](0),suffix:y["$[]"](1)})}),E(s,"$_reduce_7",function(y,Z,X){var A=this;return(D(A.need_prefix_number)||D(A.need_suffix_number))&&A.$raise(r("ParseError")),W(["command"],{command:y["$[]"](0)})}),E(s,"$_reduce_8",function(y,Z,X){return W([],{})}),E(s,"$_reduce_9",function(y,Z,X){var A,ce,ee=i;return ee=null==(A=R(y))[0]?i:A[0],ce=null==A[2]?i:A[2],D(this.critical)&&D(ee["$[]"]("critical")["$nil?"]())||this.$raise(r("ParseError")),ee["$[]="]("critical",ce),ee}),E(s,"$_reduce_10",function(y,Z,X){var A,ce,ee=i;return ee=null==(A=R(y))[0]?i:A[0],ce=null==A[2]?i:A[2],D(this.fumble)&&D(ee["$[]"]("fumble")["$nil?"]())||this.$raise(r("ParseError")),ee["$[]="]("fumble",ce),ee}),E(s,"$_reduce_11",function(y,Z,X){var A,ce,ee=i;return ee=null==(A=R(y))[0]?i:A[0],ce=null==A[2]?i:A[2],D(this.dollar)&&D(ee["$[]"]("dollar")["$nil?"]())||this.$raise(r("ParseError")),ee["$[]="]("dollar",ce),ee}),E(s,"$_reduce_12",function(y,Z,X){return y["$[]"](1)}),E(s,"$_reduce_13",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))}),E(s,"$_reduce_14",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))}),E(s,"$_reduce_15",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))}),E(s,"$_reduce_16",function(y,Z,X){return D(this.allowed_cmp_op["$include?"](i))||this.$raise(r("ParseError")),W([],{})}),E(s,"$_reduce_17",function(y,Z,X){var A,ee,J;return J=null==(A=R(y))[1]?i:A[1],D(this.allowed_cmp_op["$include?"](ee=null==A[0]?i:A[0]))||this.$raise(r("ParseError")),W(["cmp_op","target"],{cmp_op:ee,target:J})}),E(s,"$_reduce_18",function(y,Z,X){var O,A=this;return O=y["$[]"](0),D(A.question_target)||A.$raise(r("ParseError")),D(A.allowed_cmp_op["$include?"](O))||A.$raise(r("ParseError")),W(["cmp_op","target"],{cmp_op:O,target:"?"})}),E(s,"$_reduce_19",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))}),E(s,"$_reduce_20",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))}),E(s,"$_reduce_22",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"*",y["$[]"](2))}),E(s,"$_reduce_23",function(y,Z,X){return y["$[]"](3).$new(y["$[]"](0),y["$[]"](2))}),E(s,"$_reduce_25",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),E(s,"$_reduce_26",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"DivideWithCeil")}),E(s,"$_reduce_27",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"DivideWithCeil")}),E(s,"$_reduce_28",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"DivideWithRound")}),E(s,"$_reduce_29",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"DivideWithFloor")}),E(s,"$_reduce_30",function(y,Z,X){return y["$[]"](1)}),E(s,"$_reduce_31",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))}),E(s,"$_reduce_33",function(y,Z,X){return y["$[]"](1)}),E(s,"$_reduce_34",function(y,Z,X){return q(q(r("Arithmetic"),"Node"),"Number").$new(y["$[]"](0))}),E(s,"$_reduce_none",function(y,Z,X){return y["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var N,M,G,c,d,i,R,H,F=e.module,B=e.send,l=e.eqeqeq,P=e.truthy,C=e.def,w=e.return_val,U=[],T=e.nil;return N=U,M=H=[F(U[0],"BCDice")].concat(N),G=R=[F(H[0],"Deprecated")].concat(M),d=[c=F(R[0],"Checker")].concat(G),i=e.$r(d),c.$private(),C(c,"$check_result_legacy",function(t,_,v,z){var h,S=this,I=T,b=T,$=T,g=T;return I=B(_,"map",[],"sides".$to_proc()),h=(b=B(_,"map",[],"value".$to_proc())).$sum(),$=l([100],g=I)?S.$check_1D100(t,h,v,z):l([20],g)?S.$check_1D20(t,h,v,z):l([6,6],g)?S.$check_2D6(t,h,b,v,z):T,(P($["$nil?"]())||P($["$empty?"]()))&&($=l([10],g=I.$uniq())?S.$check_nD10(t,h,b,v,z):l([6],g)?S.$check_nD6(t,h,b,v,z):T,P($["$nil?"]())||P($["$empty?"]()))?T:i("Result").$new($.$delete_prefix(" \uff1e "))}),C(c,"$check_1D100",w(T)),C(c,"$check_1D20",w(T)),C(c,"$check_nD10",w(T)),C(c,"$check_2D6",w(T)),C(c,"$check_nD6",w(T))},Opal.modules["bcdice/base"]=function(e){var d,S,g,x,r,p,u,m,s,k,b,F=e.module,B=e.klass,l=e.slice,P=e.rb_plus,C=e.truthy,w=e.def,U=e.regexp,T=e.send,E=e.thrower,N=e.return_ivar,j=e.assign_ivar_val,H=e.eqeqeq,L=e.eqeq,M=e.return_val,D=e.range,R=e.rb_minus,W=e.rb_divide,G=e.rb_times,c=e.rb_ge,i=e.top,q=[],t=e.$r(q),_=e.nil,v=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),S=q,g=b=[F(q[0],"BCDice")].concat(S),m=[u=B(b[0],null,"Base")].concat(g),s=e.$r(m),(k=u.$$prototype).raw_input=k.randomizer=k.enabled_upcase_input=k.debug=_,r=[x=e.get_singleton_class(u)].concat(m),p=e.$r(r),x.$attr_reader("prefixes"),w(x,"$register_prefix",function(f){var Y,K,V=this;return null==V.prefixes&&(V.prefixes=_),Y=l(arguments),V.prefixes=P(C(K=V.prefixes)?K:[],Y.$flatten())},-1),w(x,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),w(x,"$prefixes_pattern",function(){var f=this,a=_;return null==f.prefixes_pattern&&(f.prefixes_pattern=_),null==f.prefixes&&(f.prefixes=_),f.prefixes_pattern=C(a=f.prefixes_pattern)?a:_,C(f.prefixes_pattern)?f.prefixes_pattern:(f.prefixes=C(a=f.prefixes)?a:[],f.prefixes.$freeze(),f.prefixes_pattern=(C(f.prefixes["$empty?"]())?/(?!)/:U(["^(S)?(",f.prefixes.$join("|"),")"],"i")).$freeze())}),w(x,"$command_pattern",function(){var f=this,a=_,Y=_;return null==f.command_pattern&&(f.command_pattern=_),null==f.prefixes&&(f.prefixes=_),f.command_pattern=C(a=f.command_pattern)?a:_,C(f.command_pattern)?f.command_pattern:(f.prefixes=C(a=f.prefixes)?a:[],f.prefixes.$freeze(),Y=P(T(v(p("CommonCommand"),"COMMANDS"),"map",[],function(K){return null==K&&(K=_),v(K,"PREFIX_PATTERN").$source()}),f.prefixes),f.command_pattern=U(["^S?(",Y.$join("|"),")"],"i").$freeze())}),w(x,"$eval",function(f){try{return E("eval_return"),this.$new(f).$eval()}catch(V){if(V===e.t_eval_return)return V.$v;throw V}}),u.$include(s("Translate")),u.$include(v(s("Deprecated"),"Checker")),w(u,"$initialize",function(o){var r=this;return r.raw_input=o,r.sort_add_dice=!1,r.sort_barabara_dice=!1,r.d66_sort_type=v(s("D66SortType"),"NO_SORT"),r.enabled_d9=!1,r.round_type=v(s("RoundType"),"FLOOR"),r.sides_implicit_d=6,r.upper_dice_reroll_threshold=_,r.reroll_dice_reroll_threshold=_,r.default_cmp_op=_,r.default_target_number=_,r.enabled_upcase_input=!0,r.locale="ja_jp",r.randomizer=v(s("BCDice"),"Randomizer").$new(),r.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),w(u,"$sort_add_dice?",N("sort_add_dice")),w(u,"$sort_barabara_dice?",N("sort_barabara_dice")),w(u,"$enabled_d9?",N("enabled_d9")),w(u,"$enable_debug",j("debug",!0)),w(u,"$eval",function(){var r,n,o=this,p=_;return r=v(s("BCDice"),"Preprocessor").$process(o.raw_input,o),p=C(n=o.$dice_command(r))?n:o.$eval_common_command(o.raw_input),C(p)?(p["$rands="](o.randomizer.$rand_results()),p["$detailed_rands="](o.randomizer.$detailed_rand_results()),p):_}),w(u,"$change_text",function(o){return o}),w(u,"$check_result",function(o,r,p,n){var f=this,a=_,Y=_,V=_,K=_,ne=_;return a=f.$check_result_legacy(o,r,p,n),C(a)?a:(Y=T(r,"map",[],"sides".$to_proc()),K=(V=T(r,"map",[],"value".$to_proc())).$sum(),a=H([100],ne=Y)?f.$result_1d100(o,K,p,n):H([20],ne)?f.$result_1d20(o,K,p,n):H([6,6],ne)?f.$result_2d6(o,K,V,p,n):_,L(a,s("Result").$nothing())?_:C(a)?a:(a=H([10],ne=Y.$uniq())?f.$result_nd10(o,K,V,p,n):H([6],ne)?f.$result_nd6(o,K,V,p,n):_,L(a,s("Result").$nothing())?_:C(a)?a:f.$result_ndx(o,p,n)))}),w(u,"$grich_text",M(_)),u.$private(),w(u,"$eval_common_command",function(o){try{E("eval_return");var p=E("return");return o=this.$change_text(o),T(v(s("CommonCommand"),"COMMANDS"),"each",[],function f(a){var V,Y=null==f.$$s?this:f.$$s;if(null==Y.randomizer&&(Y.randomizer=_),null==a&&(a=_),V=a.$eval(o,Y,Y.randomizer),!C(V))return _;p.$throw(V)},{$$s:this,$$ret:p}),_}catch(f){if(f===e.t_eval_return||f===p)return f.$v;throw f}}),w(u,"$dice_command",function(o){var r=this,p=_,n=_,f=_,a=_;return C(r.enabled_upcase_input)&&(o=o.$upcase()),p=r.$class().$prefixes_pattern().$match(o),C(p)?(n=p["$[]"](1)["$nil?"]()["$!"](),C(n)&&(o=o["$[]"](D(1,-1,!1))),f=r.$eval_game_system_specific_command(o),C(f["$is_a?"](s("Result")))?(f["$secret="](C(a=f["$secret?"]())?a:n),f):C(f["$nil?"]())||C(f["$empty?"]())||L(f,"1")?_:T(s("Result").$new(),"tap",[],function(V){var K;return null==V&&(V=_),V["$text="](f.$to_s()),T(V,"secret=",K=[n]),K[K.length-1]})):_}),w(u,"$eval_game_system_specific_command",M(_)),w(u,"$result_ndx",function(o,r,p){return C(p["$is_a?"](s("String")))?_:C(o.$send(r,p))?s("Result").$success(this.$translate("success")):s("Result").$failure(this.$translate("failure"))}),w(u,"$result_1d100",M(_)),w(u,"$result_1d20",M(_)),w(u,"$result_nd10",M(_)),w(u,"$result_2d6",M(_)),w(u,"$result_nd6",M(_)),w(u,"$get_table_by_2d6",function(o){return this.$get_table_by_nD6(o,2)}),w(u,"$get_table_by_1d6",function(o){return this.$get_table_by_nD6(o,1)}),w(u,"$get_table_by_nD6",function(o,r){return this.$get_table_by_nDx(o,r,6)}),w(u,"$get_table_by_nDx",function(o,r,p){var f,a=_;return f=this.randomizer.$roll_sum(r,p),a=this.$get_table_value(o["$[]"](R(f,r))),C(a["$nil?"]())?["1",0]:[a,f]}),w(u,"$get_table_by_1d3",function(o){var n,f,r=this,a=_;return r.$debug("get_table_by_1d3"),n=r.randomizer.$roll_sum(1,6),r.$debug("num",n),f=W(R(n,1),2).$to_i(),r.$debug("index",f),a=o["$[]"](f),C(a["$nil?"]())?["1",0]:[a,n]}),w(u,"$get_table_by_d66_swap",function(o){var p;return p=this.randomizer.$roll_d66(v(s("D66SortType"),"ASC")),[this.$get_table_by_number(p,o),p]}),w(u,"$get_table_by_d66",function(o){var p,n,f,Y,a=_;return p=this.randomizer.$roll_once(6),n=this.randomizer.$roll_once(6),f=P(G(R(p,1),6),R(n,1)),a=o["$[]"](f),Y=""+p+n,C(a["$nil?"]())?["1",Y]:[a,Y]}),w(u,"$get_table_by_number",function(o,r,p){try{var n=E("return");return null==p&&(p="1"),T(r,"each",[],function a(Y){var K,V=null==a.$$s?this:a.$$s;if(null==Y&&(Y=_),K=Y["$[]"](0),!C(c(K,o)))return _;n.$throw(V.$get_table_value(Y["$[]"](1)))},{$$s:this,$$ret:n}),this.$get_table_value(p)}catch(a){if(a===n)return a.$v;throw a}},-3),w(u,"$get_table_value",function(o){return C(o["$is_a?"](s("Proc")))?o.$call():o}),w(u,"$roll_tables",function(o,r){var n=_;return n=r["$[]"](o),C(n)?n.$roll(this.randomizer).$to_s():_}),w(u,"$debug",function(o,r){var n,f=this,a=_,Y=_;return n=l(arguments,1),C(f.debug)?(a=C(o["$is_a?"](s("String")))?o:o.$inspect(),C(n["$empty?"]())?f.$warn(a):(Y=T(n,"map",[],function(K){return null==K&&(K=_),C(K["$is_a?"](s("String")))?'"'+K+'"':K.$inspect()}),f.$warn(a+": "+Y.$join(", ")))):_},-2),v(v(t("I18n"),"Backend"),"Simple").$include(v(v(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),t("I18n")["$default_locale="]("ja_jp"),d=[["ja_jp"]],T(t("I18n").$fallbacks(),"defaults=",d),d[d.length-1]},Opal.queue(function(e){var G,q,I,u,m,b,h,$,g,_,v,d,F=e.module,B=e.klass,l=e.const_set,P=e.send2,C=e.find_super,w=e.def,U=e.truthy,T=e.send,E=e.hash2,N=e.rb_le,j=e.hash,H=e.rb_plus,M=[],D=e.nil,R=e.$$$;return e.top.$require("bcdice/base"),G=M,q=d=[F(M[0],"BCDice")].concat(G),_=[F(d[0],"GameSystem")].concat(q),v=e.$r(_),I=_,h=[b=B(_[0],v("Base"),"AlchemiaStruggle")].concat(I),$=e.$r(h),g=D,b.$$prototype.randomizer=D,l(h[0],"ID","AlchemiaStruggle"),l(h[0],"NAME","\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb"),l(h[0],"SORT_KEY","\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b"),l(h[0],"HELP_MESSAGE","\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff08 xAS \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 5AS\n\n\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff06\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u30d4\u30c3\u30af\uff08 xASy \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u3001\u305d\u3053\u304b\u3089\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306by\u500b\u3092\u30d4\u30c3\u30af\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 4AS3\n\n\u25a0 \u30a6\u30eb\u30c0\u30a4\u30b9\u306e\u7372\u5f97\uff08 xUL \uff09\n  xD\u306e\u30a6\u30eb\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u305f\u51fa\u76ee\u306e\u500b\u6570\u3092No.\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 6UL\n\n\u25a0 \u8868\n  \u30fb\u5947\u8de1\u306e\u89e6\u5a92\n    \u30fb\u30a8\u30ec\u30e1\u30f3\u30c8 (CELE, CElement)\n    \u30fb\u30a2\u30eb\u30b1\u30df\u30a2 (CALC, CAlchemia)\n    \u30fb\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8 (CINF, CInformant)\n    \u30fb\u30a4\u30ce\u30bb\u30f3\u30b9 (CINN, CInnocence)\n    \u30fb\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9 (CACQ, CAcquired)\n  \u30fb\u643a\u884c\u54c1\n    \u30fb\uff33\u30b5\u30a4\u30ba (ARS, ArticleS)\n    \u30fb\uff2d\u30b5\u30a4\u30ba (ARM, ArticleM)\n    \u30fb\uff2c\u30b5\u30a4\u30ba (ARL, ArticleL)\n  \u30fb\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868 (PCI, PCInformation)\n  \u30fb\u7406\u7531\u8868 (REA, Reason)\n  \u30fb\u4ea4\u6d41\u8868 (ASS, Associate)\n  \u30fb\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868 (CON, Contact)\n"),l(h[0],"ROLL_REG",/^(\d+)AS(\d+)?$/i.$freeze()),b.$register_prefix("\\d+AS","\\d+UL"),w(b,"$initialize",function k(x){var r=this;return k.$$p=null,P(r,C(r,"initialize",k,!1,!0),"initialize",[x],null),r.sort_add_dice=!0,r.sort_barabara_dice=!0,r.round_type=R($("RoundType"),"CEIL")}),w(b,"$eval_game_system_specific_command",function(x){var r,n,o=this,p=D;return r=U(p=$("ALIAS")["$[]"](x))?p:x,U(p=U(n=o.$try_roll_alchemia(r))?n:o.$try_roll_uldice(r))?p:o.$roll_tables(r,$("TABLES"))}),w(b,"$try_roll_alchemia",function(x){var o=this,r=D,p=D,n=D,f=D;return r=$("ROLL_REG").$match(x),U(r)?(p=r["$[]"](1).$to_i(),U(r["$[]"](2)["$nil?"]())?(n=o.$roll_alchemia(p),o.$make_roll_text(n)):(f=r["$[]"](2).$to_i(),n=o.$roll_alchemia_and_pick(p,f),o.$make_roll_and_pick_text(n["$[]"]("rolled_dices"),f,n["$[]"]("picked_dices")))):D}),w(b,"$try_roll_uldice",function(x){var r=D,p=D,n=D;return r=/^(\d+)UL$/.$match(x),U(r)?["("+(p=r["$[]"](1).$to_i())+"D6)","["+(n=this.randomizer.$roll_barabara(p,6).$sort()).$join(",")+"]",T(T(n,"group_by",[],"itself".$to_proc()),"map",[],function(K,ne){return null==K&&(K=D),null==ne&&(ne=D),"No."+K+": "+ne.$size()+"\u500b"}).$join(", ")].$join(" \uff1e "):D}),w(b,"$roll_alchemia",function(x){return this.randomizer.$roll_barabara(x,6)}),w(b,"$roll_alchemia_and_pick",function(x,o){var p;return p=this.$roll_alchemia(x),E(["rolled_dices","picked_dices"],{rolled_dices:p,picked_dices:this.$pick_maximum(p,o)})}),w(b,"$pick_maximum",function(x,o){return U(N(x.$size(),o))?x:x.$sort().$pop(o)}),w(b,"$make_roll_text",function(x){return"("+x.$size()+"D6) \uff1e "+this.$make_dice_text(x)}),w(b,"$make_roll_and_pick_text",function(x,o,r){return"("+x.$size()+"D6|>"+o+"D6) \uff1e "+this.$make_dice_text(x)+" >> "+this.$make_dice_text(r)+" \uff1e "+r.$sum()}),w(b,"$make_dice_text",function(x){return"["+x.$sort().$join(", ")+"]"}),l(h[0],"CATALYST_TABLES",T(E(["CElement","CAlchemia","CInformant","CInnocence","CAcquired"],{CElement:R($("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a8\u30ec\u30e1\u30f3\u30c8\uff09","1D6",["\u30ef\u30f3\u30c9","\u6c34\u6676\u7389","\u30ab\u30fc\u30c9","\u30b9\u30c6\u30c3\u30ad","\u624b\u93e1","\u5b9d\u77f3"]),CAlchemia:R($("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30eb\u30b1\u30df\u30a2\uff09","1D6",["\u6307\u8f2a","\u30d6\u30ec\u30b9\u30ec\u30c3\u30c8","\u30a4\u30e4\u30ea\u30f3\u30b0","\u30cd\u30c3\u30af\u30ec\u30b9","\u30d6\u30ed\u30fc\u30c1","\u30d8\u30a2\u30d4\u30f3"]),CInformant:R($("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8\uff09","1D6",["\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3","\u30bf\u30d6\u30ec\u30c3\u30c8","\u30ce\u30fc\u30c8\u30d1\u30bd\u30b3\u30f3","\u7121\u7dda\u6a5f\uff08\u30c8\u30e9\u30f3\u30b7\u30fc\u30d0\u30fc\uff09","\u30a6\u30a7\u30a2\u30e9\u30d6\u30eb\u30c7\u30d0\u30a4\u30b9","\u643a\u5e2f\u30b2\u30fc\u30e0\u6a5f"]),CInnocence:R($("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30ce\u30bb\u30f3\u30b9\uff09","1D6",["\u624b\u888b","\u7b1b","\u9774","\u9234","\u62e1\u58f0\u5668","\u5f26\u697d\u5668"]),CAcquired:R($("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9\uff09","1D6",["\u30dc\u30bf\u30f3","\u97f3\u58f0","\u30e2\u30fc\u30b7\u30e7\u30f3","\u8133\u6ce2","\u8a18\u9332\u5a92\u4f53","\uff21\uff29"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),l(h[0],"ARTICLE_TABLES",T(E(["ArticleS","ArticleM","ArticleL"],{ArticleS:R($("DiceTable"),"D66Table").$new("\u643a\u884c\u54c1\uff08\uff33\u30b5\u30a4\u30ba\uff09",R($("D66SortType"),"ASC"),j(11,"\u30de\u30c3\u30c1",12,"\u30da\u30c3\u30c8\u30dc\u30c8\u30eb",13,"\u8a66\u9a13\u7ba1",14,"\u56e3\u6247",15,"\u690d\u7269",16,"\u30cf\u30f3\u30ab\u30c1",22,"\u5316\u7ca7\u7528\u5177",23,"\u30d9\u30eb\u30c8",24,"\u30bf\u30d0\u30b3",25,"\u30c1\u30a7\u30fc\u30f3",26,"\u96fb\u6c60",33,"\u304a\u83d3\u5b50",34,"\u91dd\u91d1",35,"\u30b3\u30a4\u30f3",36,"\u30ca\u30a4\u30d5",44,"\u30ab\u30c8\u30e9\u30ea\u30fc",45,"\u7802",46,"\u30b9\u30d7\u30ec\u30fc",55,"\u77f3",56,"\u6587\u623f\u5177",66,"\u30da\u30f3\u30e9\u30a4\u30c8")),ArticleM:R($("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2d\u30b5\u30a4\u30ba\uff09",["\u672c","\u5098","\u91d1\u5c5e\u677f","\u82b1\u706b","\u30a8\u30a2\u30ac\u30f3","\u5305\u5e2f"],["\u5de5\u5177","\u30b8\u30e3\u30b1\u30c3\u30c8","\u30ed\u30fc\u30d7","\u4eba\u5f62","\u8efd\u98df","\u30ac\u30e9\u30b9\u74f6"]),ArticleL:R($("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2c\u30b5\u30a4\u30ba\uff09",["\u6728\u5200","\u91e3\u308a\u5177","\u81ea\u8ee2\u8eca","\u30d0\u30c3\u30c8","\u5bdd\u888b","\u4e38\u592a"],["\u7269\u5e72\u3057\u7aff","\u934b","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c9","\u30b7\u30e3\u30d9\u30eb\uff08\u30b9\u30b3\u30c3\u30d7\uff09","\u30bf\u30f3\u30af","\u811a\u7acb"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),l(h[0],"DRAMA_SEQUENCE_TABLES",T(E(["PCInformation","Reason","Associate","Contact"],{PCInformation:R($("DiceTable"),"D66ParityTable").$new("\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u3066\u3044\u305f\u5834\u6240\u3002\u805e\u304d\u305f\u3044\u3053\u3068\u3092\u7a81\u304d\u3064\u3051\u308b\u9803\u5408\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b9\u306b\u5f15\u304d\u8fbc\u307f\u3001\u3086\u3055\u3076\u308a\u3092\u304b\u3051\u308b\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u76f8\u624b\u306e\u30da\u30fc\u30b9\u306b\u5451\u307e\u308c\u306a\u3044\u3088\u3046\u3001\u614e\u91cd\u306b\u3044\u3053\u3046\u3002","\u81ea\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u4ef2\u9593\u306b\u624b\u306f\u51fa\u3055\u305b\u305a\u3001\u3042\u304f\u307e\u3067\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u3092\u4e0e\u3048\u308b\u3060\u3051\u306b\u3057\u3066\u3082\u3089\u3046\u3002","\u30ab\u30d5\u30a7\u3001\u30d0\u30fc \u2015\u2015 \u53b3\u304b\u306a\u7a7a\u6c17\u306b\u5305\u307e\u308c\u305f\u5927\u4eba\u306e\u5834\u6240\u3002\u3053\u3053\u3067\u58f0\u3092\u8352\u3052\u308b\u306e\u306f\u7d33\u58eb\u7684\u3067\u306f\u306a\u3044\u3002","\u8def\u5730\u88cf \u2015\u2015 \u5efa\u7269\u3068\u5efa\u7269\u306e\u9593\u3084\u3001\u4eba\u901a\u308a\u306e\u5c11\u306a\u3044\u88cf\u901a\u308a\u3002\u591a\u5c11\u624b\u8352\u306a\u624b\u6bb5\u306b\u51fa\u3066\u3082\u76ee\u7acb\u3061\u306f\u3057\u306a\u3044\u3060\u308d\u3046\u3002"],["\u5ec3\u589f \u2015\u2015 \u5ec3\u30d3\u30eb\u3001\u5ec3\u5de5\u5834\u306e\u3088\u3046\u306a\u4eba\u304c\u7acb\u3061\u5165\u3089\u306a\u3044\u5834\u6240\u3002\u304a\u3042\u3064\u3089\u3048\u5411\u304d\u306e\u5834\u6240\u3092\u7528\u610f\u3057\u3066\u3084\u3063\u305f\u3002","\u516c\u5171\u4ea4\u901a\u6a5f\u95a2 \u2015\u2015 \u30d0\u30b9\u3001\u96fb\u8eca\u306a\u3069\u3002\u663c\u591c\u554f\u308f\u305a\u591a\u304f\u306e\u4eba\u304c\u5229\u7528\u3059\u308b\u4e57\u308a\u7269\u3002\u6562\u3048\u3066\u4eba\u76ee\u306b\u4ed8\u304f\u5834\u6240\u3067\u8a70\u3081\u5bc4\u308a\u3001\u52d5\u63fa\u3092\u8a98\u3046\u3002","\u96d1\u6728\u6797 \u2015\u2015 \u8349\u6728\u304c\u63fa\u308c\u308b\u97f3\u3001\u866b\u3084\u9ce5\u306e\u9cf4\u304d\u58f0\u3060\u3051\u304c\u805e\u3053\u3048\u308b\u3002\u305d\u3053\u306b\u90aa\u9b54\u3059\u308b\u8005\u306f\u3044\u306a\u3044\u3002","\u591c\u306e\u516c\u5712 \u2015\u2015 \u5bdd\u9759\u307e\u3063\u305f\u8857\u306e\u516c\u5712\u3002\u8857\u706f\u306b\u7167\u3089\u3055\u308c\u306a\u3044\u5834\u6240\u306a\u3089\u76ee\u7acb\u3064\u3053\u3068\u3082\u306a\u3044\u3060\u308d\u3046\u3002","\u99d0\u8eca\u5834 \u2015\u2015 \u7acb\u4f53\u3001\u5e73\u9762\u3001\u5730\u4e0b\u3092\u554f\u308f\u305a\u8eca\u3092\u505c\u3081\u308b\u5834\u6240\u3002\u4eba\u306e\u51fa\u5165\u308a\u306e\u6fc0\u3057\u3055\u306b\u5bfe\u3057\u3001\u305d\u3053\u306b\u7559\u307e\u308b\u4eba\u306f\u5c11\u306a\u3044\u3002\u76ee\u6483\u8005\u3082\u591a\u304f\u306f\u306a\u3044\u3060\u308d\u3046\u3002","\u9ad8\u67b6\u4e0b \u2015\u2015 \u7dda\u8def\u3001\u9053\u8def\u306e\u6a4b\u306e\u4e0b\u3002\u97ff\u304f\u9a12\u97f3\u304c\u81ea\u5206\u305f\u3061\u306e\u5b58\u5728\u3092\u8584\u3081\u3066\u304f\u308c\u308b\u3002"]),Reason:R($("DiceTable"),"Table").$new("\u7406\u7531\u8868","1D6",["\u4e0d\u4fe1\u611f \u2015\u2015 \u884c\u52d5\u3084\u8a00\u52d5\u306b\u306a\u306b\u304b\u91c8\u7136\u3068\u3057\u306a\u3044\u90e8\u5206\u3092\u611f\u3058\u308b\u3002\u767d\u9ed2\u306f\u3063\u304d\u308a\u3055\u305b\u3088\u3046\u3002","\u597d\u5947\u5fc3 \u2015\u2015 \u76f8\u624b\u306e\u3053\u3068\u3092\u77e5\u308a\u305f\u3044\u3068\u63bb\u304d\u7acb\u3066\u3089\u308c\u308b\u3002\u77e5\u308a\u305f\u3044\u6c17\u6301\u3061\u3092\u6291\u3048\u3089\u308c\u306a\u3044\u3002","\u5e87\u8b77\u611f \u2015\u2015 \u77e5\u53e4\u306e\u59ff\u3092\u91cd\u306d\u3066\u5b88\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u4fe1\u983c\u95a2\u4fc2\u3092\u541b\u3068\u7bc9\u304f\u305f\u3081\u3001\u8e0f\u307f\u8fbc\u3093\u3060\u3068\u3053\u308d\u307e\u3067\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\u3002","\u5acc\u60aa\u611f \u2015\u2015 \u7406\u7531\u306f\u306a\u3044\u3051\u3069\u6c17\u306b\u98df\u308f\u306a\u3044\u3002\u60c5\u5831\u306e\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u3092\u63e1\u308b\u3053\u3068\u3067\u512a\u4f4d\u306b\u7acb\u3066\u308b\u306f\u305a\u3060\u3002","\u504f\u611b \u2015\u2015 \u611b\u3086\u3048\u306b\u77e5\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u541b\u306e\u601d\u8003\u3001\u76ee\u7684\u3001\u611f\u60c5\u306e\u3059\u3079\u3066\u3092\u624b\u306b\u5165\u308c\u305f\u3044\u3002","\u76f4\u611f \u2015\u2015 \u6839\u62e0\u306f\u306a\u3044\u304c\u3001\u306a\u306b\u304b\u96a0\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e00\u304b\u516b\u304b\u3001\u52dd\u8ca0\u306b\u51fa\u3088\u3046\u3002"]),Associate:R($("DiceTable"),"D66ParityTable").$new("\u4ea4\u6d41\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u305f\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u4e00\u606f\u3064\u304f\u3082\u306e\u3044\u3044\u3060\u308d\u3046\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u4e00\u7dd2\u306b\u304f\u3064\u308d\u304e\u306a\u304c\u3089\u8a71\u3092\u3057\u3088\u3046\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u304a\u90aa\u9b54\u3055\u305b\u3066\u3082\u3089\u3048\u306a\u3044\u3060\u308d\u3046\u304b\uff1f","\u76f8\u624b\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u82e5\u5e72\u306e\u5c45\u5fc3\u5730\u60aa\u3055\u306f\u3042\u308b\u304c\u3001\u597d\u611f\u3092\u6301\u3063\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u306f\u6211\u6162\u3082\u5fc5\u8981\u3002","\u98df\u4e8b\u51e6 \u2015\u2015 \u30d5\u30a1\u30df\u30ec\u30b9\u3001\u5c45\u9152\u5c4b\u306a\u3069\u3002\u4eba\u3067\u306b\u304e\u308f\u3046\u98df\u4e8b\u51e6\u3002\u6c17\u8efd\u306b\u98f2\u307f\u98df\u3044\u3067\u304d\u308b\u7a7a\u9593\u3067\u3001\u8a71\u3082\u5f3e\u3080\u306f\u305a\u3002","\u30a2\u30df\u30e5\u30fc\u30ba\u30e1\u30f3\u30c8\u65bd\u8a2d \u2015\u2015 \u30ab\u30e9\u30aa\u30b1\u3001\u30dc\u30fc\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30bb\u30f3\u30bf\u30fc\u306a\u3069\u306e\u5a2f\u697d\u65bd\u8a2d\u3002\u904a\u3079\u3070\u4eba\u3068\u306a\u308a\u304c\u308f\u304b\u308b\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u3044\u3053\u3046\u3002"],["\u304a\u796d\u308a \u2015\u2015 \u8001\u82e5\u7537\u5973\u304c\u53c2\u52a0\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3002\u975e\u65e5\u5e38\u7684\u306a\u7a7a\u6c17\u3092\u697d\u3057\u3080\u3053\u3068\u3067\u3001\u6c17\u5206\u8ee2\u63db\u3082\u3067\u304d\u308b\u3060\u308d\u3046\u3002","\u663c\u9593\u306e\u516c\u5712 \u2015\u2015 \u6563\u6b69\u3059\u308b\u4eba\u3084\u5b50\u9023\u308c\u306e\u5bb6\u65cf\u3067\u6ea2\u308c\u308b\u516c\u5712\u3002\u50d5\u3089\u306b\u3082\u3042\u3042\u3084\u3063\u3066\u751f\u304d\u308b\u9053\u304c\u3042\u3063\u305f\u306e\u3060\u308d\u3046\u304b\u3002","\u601d\u3044\u51fa\u306e\u5834\u6240 \u2015\u2015 \u81ea\u5206\u306b\u3068\u3063\u3066\u601d\u3044\u5165\u308c\u306e\u3042\u308b\u5927\u4e8b\u306a\u5834\u6240\u3002\u3053\u306e\u4eba\u306b\u306a\u3089\u80f8\u306e\u5185\u3092\u660e\u304b\u3057\u3066\u3082\u3044\u3044\u6c17\u5206\u306b\u306a\u3063\u305f\u3002","\u30b9\u30dd\u30fc\u30c4\u89b3\u6226 \u2015\u2015 \u91ce\u7403\u3001\u30b5\u30c3\u30ab\u30fc\u3001\u30d0\u30b9\u30b1\u306a\u3069\u3002\u30d7\u30ed\u30a2\u30de\u554f\u308f\u305a\u89b3\u6226\u3059\u308b\u3002\u624b\u306b\u6c57\u63e1\u308b\u5c55\u958b\u3092\u5171\u306b\u898b\u5c4a\u3051\u3088\u3046\u3002","\u5c4b\u4e0a \u2015\u2015 \u8857\u3068\u4eba\u3092\u898b\u4e0b\u308d\u3059\u773a\u3081\u306e\u3044\u3044\u5834\u6240\u3002\u3053\u306e\u666f\u8272\u3092\u541b\u306f\u559c\u3076\u3060\u308d\u3046\u304b\u3001\u6016\u304c\u308b\u3060\u308d\u3046\u304b\u3002","\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 \u2015\u2015 \u5927\u578b\u5546\u696d\u65bd\u8a2d\u3084\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30b9\u30c8\u30ea\u30fc\u30c8\u306b\u5411\u304b\u3046\u3002\u4e92\u3044\u306e\u8208\u5473\u304c\u3042\u308b\u3082\u306e\u3092\u77e5\u308b\u3044\u3044\u6a5f\u4f1a\u3060\u3002"]),Contact:R($("DiceTable"),"Table").$new("\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868","1D6",["\u4f53\u52e2\u3092\u5d29\u3059 \u2015\u2015 \u8ee2\u3073\u305d\u3046\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u652f\u3048\u308b\u3001\u652f\u3048\u3089\u308c\u308b\u3002","\u4ed8\u7740\u7269\u3092\u3068\u308b \u2015\u2015 \u9aea\u3084\u670d\u306b\u3064\u3044\u3066\u3044\u308b\u30b4\u30df\u3001\u6c5a\u308c\u3092\u3068\u3063\u3066\u3042\u3052\u308b\u3002","\u601d\u308f\u305a\u624b\u304c\u51fa\u308b \u2015\u2015 \u8a00\u8449\u3088\u308a\u5148\u306b\u3001\u5f37\u3081\u306b\u624b\u304c\u51fa\u3066\u3057\u307e\u3046\u3002","\u7269\u3054\u3057\u306b\u89e6\u308c\u308b \u2015\u2015 \u7269\u3092\u6e21\u3059\u3001\u62fe\u3046\u969b\u306b\u6307\u5148\u540c\u58eb\u304c\u3076\u3064\u304b\u308b\u3002","\u53cb\u597d\u306e\u30b5\u30a4\u30f3 \u2015\u2015 \u80a9\u3092\u7d44\u3080\u3001\u63e1\u624b\u3092\u3059\u308b\u3001\u30cf\u30b0\u3092\u3059\u308b\u306a\u3069\u3002","\u30b1\u30a2\u3092\u3057\u3066\u3042\u3052\u308b \u2015\u2015 \u9aea\u3092\u3068\u304b\u3059\u3001\u80a9\u3092\u3082\u3080\u3001\u982d\u3092\u64ab\u3067\u308b\u3002\u76f8\u624b\u3092\u52b4\u3063\u3066\u3059\u308b\u884c\u70ba\u5168\u822c\u3002"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),l(h[0],"TABLES",$("CATALYST_TABLES").$merge($("ARTICLE_TABLES")).$merge($("DRAMA_SEQUENCE_TABLES"))),g=T($("CATALYST_TABLES").$keys(),"map",[],function(x){return null==x&&(x=D),[x["$[]"](0,4),x]}).$to_h(),u=T($("ARTICLE_TABLES").$keys(),"map",[],function(x){return null==x&&(x=D),[H(x["$[]"](0,2),x["$[]"](-1)),x]}).$to_h(),m=T($("DRAMA_SEQUENCE_TABLES").$keys(),"map",[],function(x){return null==x&&(x=D),[x["$[]"](0,3),x]}).$to_h(),l(h[0],"ALIAS",g.$merge(u).$merge(m).$freeze()),b.$register_prefix($("ALIAS").$keys(),$("TABLES").$keys())})}}]);