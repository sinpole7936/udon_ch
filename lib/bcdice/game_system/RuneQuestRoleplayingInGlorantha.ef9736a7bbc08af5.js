(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[698],{2765:(Z,x,I)=>{I(5151),Opal.queue(function(n){var L,j,W,_,g,o,Q,F,C,T=n.module,B=n.klass,S=n.const_set,G=n.eqeqeq,a=n.def,$=n.truthy,m=n.eqeq,w=n.thrower,H=n.rb_lt,h=n.rb_plus,z=n.rb_times,y=n.rb_ge,b=n.rb_le,A=n.rb_divide,k=n.rb_minus,M=n.rb_gt,U=[],r=n.nil,E=n.$$$;return L=U,j=C=[T(U[0],"BCDice")].concat(L),Q=[T(C[0],"GameSystem")].concat(j),F=n.$r(Q),W=Q,g=[_=B(Q[0],F("Base"),"RuneQuestRoleplayingInGlorantha")].concat(W),o=n.$r(g),_.$$prototype.randomizer=r,S(g[0],"ID","RuneQuestRoleplayingInGlorantha"),S(g[0],"NAME","\u30eb\u30fc\u30f3\u30af\u30a8\u30b9\u30c8\uff1a\u30ed\u30fc\u30eb\u30d7\u30ec\u30a4\u30f3\u30b0\u30fb\u30a4\u30f3\u30fb\u30b0\u30ed\u30fc\u30e9\u30f3\u30b5"),S(g[0],"SORT_KEY","\u308b\u3046\u3093\u304f\u3048\u3059\u30684"),S(g[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30b9\u30da\u30b7\u30e3\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u3092\u542b\u3081\u305f\u5224\u5b9a\u3092\u884c\u3046\u3002\nRQG<=\u6210\u529f\u7387\n\n\u4f8b1\uff1aRQG<=80 \uff08\u6280\u80fd\u502480\u3067\u5224\u5b9a\uff09\n\u4f8b2\uff1aRQG<=80+20 \uff08\u6280\u80fd\u5024100\u3067\u5224\u5b9a\uff09\n\n\u30fb\u62b5\u6297\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\uff08\u80fd\u52d5-\u53d7\u52d5\uff09 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30b9\u30da\u30b7\u30e3\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u3092\u542b\u3081\u305f\u5224\u5b9a\u3092\u884c\u3046\u3002\nRES(\u80fd\u52d5\u80fd\u529b-\u53d7\u52d5\u80fd\u529b)m\u5897\u5f37\u5024\n\u5897\u5f37\u5024\u306f\u7701\u7565\u53ef\u80fd\u3002\n\n\u4f8b1\uff1aRES(9-11)    (\u80fd\u52d5\u80fd\u529b9 vs \u53d7\u52d5\u80fd\u529b11\u3067\u5224\u5b9a)\n\u4f8b2\uff1aRES(9-11)m20 (\u80fd\u52d5\u80fd\u529b9 vs \u53d7\u52d5\u80fd\u529b11\u3001+20%\u306e\u5897\u5f37\u304c\u80fd\u52d5\u5074\u306b\u5165\u308b\u5224\u5b9a)\n\u4f8b3\uff1aRES(9)m50    (\u80fd\u52d5\u80fd\u529b\u3068\u53d7\u52d5\u80fd\u529b\u306e\u5dee\u304c9\u3067\u3001+50%\u306e\u5897\u5f37\u304c\u80fd\u52d5\u5074\u306b\u5165\u308b\u5224\u5b9a)\n\n\u30fb\u62b5\u6297\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(\u80fd\u52d5\u5074\u306e\u307f) \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30b9\u30da\u30b7\u30e3\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306f\u542b\u3081\u305a\u5224\u5b9a\u3092\u884c\u3046\u3002\nRSA(\u80fd\u52d5\u80fd\u529b)m\u5897\u5f37\u5024\n\u5897\u5f37\u5024\u306f\u7701\u7565\u53ef\u80fd\u3002\n\n\u4f8b1\uff1aRSA(9)       (\u80fd\u52d5\u80fd\u529b9\u3067\u5224\u5b9a)\n\u4f8b2\uff1aRSA(9)m20    (\u80fd\u52d5\u80fd\u529b9\u3067\u5224\u5b9a\u3001+20%\u306e\u5897\u5f37\u304c\u80fd\u52d5\u5074\u306b\u5165\u308b\u5224\u5b9a)\n\n"),_.$register_prefix("RQG","RES","RSA"),a(_,"$eval_game_system_specific_command",function(c){var e,R=this;return G(/RQG/i,e=c)?R.$do_ability_roll(c):G(/RES/i,e)?R.$do_resistance_roll(c):G(/RSA/i,e)?R.$do_resistance_active_characteristic_roll(c):r}),_.$private(),a(_,"$do_ability_roll",function(c){try{w("eval_return");var t=r,u=r,i=r,s=r;return t=/^(RQG)(<=([+-\/*\d]+))?$/.$match(c),$(t)?(u=this.randomizer.$roll_once(100),$(t["$[]"](3))?(s="(1D100<="+(i=o("Arithmetic").$eval(t["$[]"](3),E(o("RoundType"),"ROUND")))+") \uff1e",m(i,0)?o("Result").$failure(s+" \u5931\u6557"):this.$get_roll_result(s+" "+u+" \uff1e",i,u)):"(1D100) \uff1e "+u):r}catch(f){if(f===n.t_eval_return)return f.$v;throw f}}),a(_,"$do_resistance_roll",function(c){try{w("eval_return");var t=r,u=r,i=r,s=r;return t=/^(RES)([+-\/*\d]+)(M([+-\/*\d]+))?$/.$match(c),$(t)&&$(t["$[]"](2))?(u=o("Arithmetic").$eval(t["$[]"](2),E(o("RoundType"),"ROUND")),$(H(u,-10))&&(u=-10),i=h(50,z(u,5)),$(t["$[]"](4))&&(i=h(i,o("Arithmetic").$eval(t["$[]"](4),E(o("RoundType"),"ROUND")))),s=this.randomizer.$roll_once(100),this.$get_roll_result("(1D100<="+i+") \uff1e "+s+" \uff1e",i,s)):r}catch(f){if(f===n.t_eval_return)return f.$v;throw f}}),a(_,"$do_resistance_active_characteristic_roll",function(c){try{w("eval_return");var t=r,u=r,i=r,s=r,f=r,D=r;return t=/^(RSA)(\d+)(M([+-\/*\d]+))?$/.$match(c),$(t)&&$(t["$[]"](2))?(u=t["$[]"](2).$to_i(),m(u,0)?"0\u306f\u6307\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002":(i=$(t["$[]"](4))?o("Arithmetic").$eval(t["$[]"](4),E(o("RoundType"),"ROUND")):0,s=this.randomizer.$roll_once(100),f="(1D100<="+h(z(u,5),i)+") \uff1e "+s+" \uff1e",D="\u30af\u30ea\u30c6\u30a3\u30ab\u30eb/\u30b9\u30da\u30b7\u30e3\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306f\u672a\u51e6\u7406\u3002\u5fc5\u8981\u306a\u3089\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3002",$(y(s,96))?o("Result").$failure(f+" \u5931\u6557\n"+D):$(b(s,5))||$(b(s,i))?o("Result").$success(f+" \u6210\u529f\n"+D):f+" \u76f8\u624b\u5074\u80fd\u529b\u5024"+h(u,A(k(h(50,i),s),5).$floor())+"\u307e\u3067\u6210\u529f\n"+D)):r}catch(N){if(N===n.t_eval_return)return N.$v;throw N}}),a(_,"$get_roll_result",function(c,R,e){var t,u,i;return t=A(R.$to_f(),20).$round(),u=A(R.$to_f(),5).$round(),i=A(k(100,R.$to_f()),20).$round(),m(e,1)||$(b(e,t))?o("Result").$critical(c+" \u30af\u30ea\u30c6\u30a3\u30ab\u30eb/\u30b9\u30da\u30b7\u30e3\u30eb"):m(e,100)||$(y(e,h(k(100,i),1)))?o("Result").$fumble(c+" \u30d5\u30a1\u30f3\u30d6\u30eb"):$(y(e,96))||$(M(e,R))&&$(M(e,5))?o("Result").$failure(c+" \u5931\u6557"):$(b(e,u))?o("Result").$success(c+" \u30b9\u30da\u30b7\u30e3\u30eb"):$(b(e,5))||$(b(e,R))?o("Result").$success(c+" \u6210\u529f"):o("Result").$failure(c+" \u30a8\u30e9\u30fc")})})}}]);