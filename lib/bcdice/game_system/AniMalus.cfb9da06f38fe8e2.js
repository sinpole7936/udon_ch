(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4259],{1918:(e$,i$,H)=>{H(5151),Opal.queue(function(m){var J,V,$$,v,z,M,R,X,B,I=m.module,K=m.klass,D=m.const_set,L=m.send2,N=m.find_super,y=m.def,n=m.truthy,P=m.eqeq,q=m.rb_gt,j=m.rb_plus,p=m.send,G=m.rb_le,E=m.rb_ge,S=m.rb_times,T=m.rb_minus,Y=m.rb_lt,C=[],$=m.nil;return J=C,V=B=[I(C[0],"BCDice")].concat(J),R=[I(B[0],"GameSystem")].concat(V),X=m.$r(R),$$=R,z=[v=K(R[0],X("Base"),"AniMalus")].concat($$),M=m.$r(z),v.$$prototype.randomizer=$,D(z[0],"ID","AniMalus"),D(z[0],"NAME","\u30a2\u30cb\u30de\u30e9\u30b9"),D(z[0],"SORT_KEY","\u3042\u306b\u307e\u3089\u3059"),D(z[0],"HELP_MESSAGE","\u25a0\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u30c0\u30a4\u30b9\u5224\u5b9a\u3000n[+-b]AM<=t,x        n:\u80fd\u529b\u5024 b:\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u80fd) t:\u6210\u529f\u5024 x:\u5fc5\u8981\u6210\u529f\u6570\n\u4f8b)3AM<=2,1: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u6210\u529f\u50242,\u5fc5\u8981\u6210\u529f\u65701\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u6570,\u6210\u529f\u30fb\u5931\u6557,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb,\u30d5\u30a1\u30f3\u30d6\u30eb)\u3092\u8868\u793a\n\n\u25a0\u63a2\u7d22\u6280\u80fd\u306e\u30c0\u30a4\u30b9\u5224\u5b9a\u3000[+-b]AI<=t,x        t:\u63a2\u7d22\u6280\u80fd\u30ec\u30d9\u30eb b:\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u80fd) x:\u5fc5\u8981\u6210\u529f\u6570\n\u4f8b)AI<=3,1: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u63a2\u7d22\u6280\u80fd\u30ec\u30d9\u30eb3,\u5fc5\u8981\u6210\u529f\u65701\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u6570,\u6210\u529f\u30fb\u5931\u6557,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb,\u30d5\u30a1\u30f3\u30d6\u30eb)\u3092\u8868\u793a\n\n\u25a0\u653b\u6483\u5224\u5b9a\u3000[+-b]AA<=t       t:\u6226\u95d8\u6280\u80fd\u30ec\u30d9\u30eb b:\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u80fd)\n\u4f8b)AA<=3: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u6226\u95d8\u6280\u80fd\u30ec\u30d9\u30eb3\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u30fb\u5931\u6557,\u30c0\u30e1\u30fc\u30b8,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb,\u30d5\u30a1\u30f3\u30d6\u30eb)\u3092\u8868\u793a\n\n\u25a0\u9632\u5fa1\u5224\u5b9a\u3000[+-b]AG=t        t:\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb b:\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u80fd)\n\u4f8b)AG=2: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb2\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u30fb\u5931\u6557,\u30c0\u30e1\u30fc\u30b8\u8efd\u6e1b,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb,\u30d5\u30a1\u30f3\u30d6\u30eb)\u3092\u8868\u793a\n\n\u25a0\u56de\u907f\u5224\u5b9a\u3000[+-b]AD=t        t:\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb b:\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u80fd)\n\u4f8b)AD=3: \u30c0\u30a4\u30b9\u30921\u500b\u632f\u3063\u3066\u3001\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb3\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u30fb\u5931\u6557)\u3092\u8868\u793a\n"),v.$register_prefix("[-+\\d]*A[MIAGD]"),y(v,"$initialize",function w(s){var t=this;return w.$$p=null,L(t,N(t,"initialize",w,!1,!0),"initialize",[s],null),t.sort_barabara_dice=!0}),y(v,"$eval_game_system_specific_command",function(s){var t,o,c,i,f=this;return n(t=n(o=n(c=n(i=f.$resolute_action(s))?i:f.$resolute_investigation(s))?c:f.$resolute_attacking(s))?o:f.$resolute_guarding(s))?t:f.$resolute_dodging(s)}),v.$private(),y(v,"$with_symbol",function(s){return P(s,0)?"":n(q(s,0))?"+"+s:s.$to_s()}),y(v,"$resolute_action",function(s){var t=$,o=$,c=$,i=$,_=$,r=$,A=$,a=$,l=$,h=$,g=$,d=$;return t=/^(\d+)([-+]\d+)?AM<=(\d+),(\d)$/.$match(s),n(t)?(o=t["$[]"](1).$to_i(),c=t["$[]"](2).$to_i(),i=t["$[]"](3).$to_i(),_=t["$[]"](4).$to_i(),r=this.randomizer.$roll_barabara(j(o,c),6).$sort(),A=r.$join(","),a=p(r,"count",[],function(e){return null==e&&(e=$),G(e,i)}),l=n(h=n(g=r["$include?"](1))?r["$include?"](2):g)?r["$include?"](3):h,d=n(h=n(g=r["$include?"](4))?r["$include?"](5):g)?r["$include?"](6):h,p(M("Result").$new(),"tap",[],function u(e){var b,k=null==u.$$s?this:u.$$s,x=$;return null==e&&(e=$),e["$critical="](l),e["$fumble="](d),e["$condition="](E(a,_)),x=["("+o+k.$with_symbol(c)+"AM<="+i+","+_+")",A,"\u6210\u529f\u6570"+a,n(e["$success?"]())?"\u6210\u529f":"\u5931\u6557"].$compact(),n(e["$critical?"]())&&x.$push("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"),n(e["$fumble?"]())&&x.$push("\u30d5\u30a1\u30f3\u30d6\u30eb"),b=[x.$join(" \uff1e ")],p(e,"text=",b),b[b.length-1]},{$$s:this})):$}),y(v,"$resolute_investigation",function(s){var t=$,o=$,c=$,i=$,_=$,r=$,A=$,a=$,l=$,h=$,g=$;return t=/^([-+]\d+)?AI<=(\d+),(\d)$/.$match(s),n(t)?(o=t["$[]"](1).$to_i(),c=t["$[]"](2).$to_i(),i=t["$[]"](3).$to_i(),_=this.randomizer.$roll_barabara(j(3,o),6).$sort(),r=_.$join(","),A=p(_,"count",[],function(u){return null==u&&(u=$),G(u,c)}),a=n(l=n(h=_["$include?"](1))?_["$include?"](2):h)?_["$include?"](3):l,g=n(l=n(h=_["$include?"](4))?_["$include?"](5):h)?_["$include?"](6):l,p(M("Result").$new(),"tap",[],function d(u){var e,b=null==d.$$s?this:d.$$s,k=$;return null==u&&(u=$),u["$critical="](a),u["$fumble="](g),u["$condition="](E(A,i)),k=["("+b.$with_symbol(o)+"AI<="+c+","+i+")",r,"\u6210\u529f\u6570"+A,n(u["$success?"]())?"\u6210\u529f":"\u5931\u6557"].$compact(),n(u["$critical?"]())&&k.$push("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"),n(u["$fumble?"]())&&k.$push("\u30d5\u30a1\u30f3\u30d6\u30eb"),e=[k.$join(" \uff1e ")],p(u,"text=",e),e[e.length-1]},{$$s:this})):$}),y(v,"$resolute_attacking",function(s){var t=$,o=$,c=$,i=$,_=$,r=$,A=$,a=$,l=$,h=$,g=$,d=$;return t=/^([-+]\d+)?AA<=(\d+)$/.$match(s),n(t)?(o=t["$[]"](1).$to_i(),c=t["$[]"](2).$to_i(),i=this.randomizer.$roll_barabara(j(3,o),6).$sort(),_=i.$join(","),r=p(i,"count",[],function(e){return null==e&&(e=$),G(e,c)}),A=n(a=n(l=i["$include?"](1))?i["$include?"](2):l)?i["$include?"](3):a,h=n(a=n(l=i["$include?"](4))?i["$include?"](5):l)?i["$include?"](6):a,g=i.$max(),d=i.$max(),p(m.Range.$new(1,c,!1),"each",[],function(e){var b=$;return null==e&&(e=$),n(q(i.$count(e),1))?(b=j(g,S(3,T(i.$count(e),1))),n(Y(d,b))?d=b:$):$}),p(M("Result").$new(),"tap",[],function u(e){var b,k=null==u.$$s?this:u.$$s,x=$;return null==e&&(e=$),e["$critical="](A),e["$fumble="](h),e["$condition="](q(r,0)),x=["("+k.$with_symbol(o)+"AA<="+c+")",_,"\u6210\u529f\u6570"+r,n(e["$success?"]())?"\u6210\u529f":"\u5931\u6557"].$compact(),n(e["$success?"]())&&x.$push("\u6700\u5927\u30c0\u30e1\u30fc\u30b8("+d+")"),n(e["$critical?"]())&&x.$push("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"),n(e["$fumble?"]())&&x.$push("\u30d5\u30a1\u30f3\u30d6\u30eb"),b=[x.$join(" \uff1e ")],p(e,"text=",b),b[b.length-1]},{$$s:this})):$}),y(v,"$resolute_guarding",function(s){var t=$,o=$,c=$,i=$,_=$,r=$,A=$,a=$,l=$,h=$;return t=/^([-+]\d+)?AG=(\d+)$/.$match(s),n(t)?(o=t["$[]"](1).$to_i(),c=t["$[]"](2).$to_i(),i=this.randomizer.$roll_barabara(j(3,o),6).$sort(),_=i.$join(","),r=i.$count(c),A=n(a=n(l=i["$include?"](1))?i["$include?"](2):l)?i["$include?"](3):a,h=n(a=n(l=i["$include?"](4))?i["$include?"](5):l)?i["$include?"](6):a,p(M("Result").$new(),"tap",[],function g(d){var u,e=null==g.$$s?this:g.$$s,b=$;return null==d&&(d=$),d["$critical="](A),d["$fumble="](h),d["$condition="](q(r,0)),b=["("+e.$with_symbol(o)+"AG="+c+")",_,"\u6210\u529f\u6570"+r,n(d["$success?"]())?"\u6210\u529f \uff1e \u30c0\u30e1\u30fc\u30b8\u8efd\u6e1b("+S(r,2)+")":"\u5931\u6557"].$compact(),n(d["$critical?"]())&&b.$push("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"),n(d["$fumble?"]())&&b.$push("\u30d5\u30a1\u30f3\u30d6\u30eb"),u=[b.$join(" \uff1e ")],p(d,"text=",u),u[u.length-1]},{$$s:this})):$}),y(v,"$resolute_dodging",function(s){var t=$,o=$,c=$,i=$,_=$,r=$;return t=/^([-+]\d+)?AD=(\d+)$/.$match(s),n(t)?(o=t["$[]"](1).$to_i(),c=t["$[]"](2).$to_i(),i=this.randomizer.$roll_barabara(j(1,o),6),_=i.$join(","),r=i.$count(c),p(M("Result").$new(),"tap",[],function A(a){var l,h=null==A.$$s?this:A.$$s;return null==a&&(a=$),a["$condition="](q(r,0)),l=[["("+h.$with_symbol(o)+"AD="+c+")",_,"\u6210\u529f\u6570"+r,n(a["$success?"]())?"\u6210\u529f(\u30c0\u30e1\u30fc\u30b8\u7121\u52b9)":"\u5931\u6557"].$compact().$join(" \uff1e ")],p(a,"text=",l),l[l.length-1]},{$$s:this})):$})})}}]);