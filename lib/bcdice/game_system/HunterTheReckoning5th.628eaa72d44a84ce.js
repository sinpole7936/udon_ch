(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8421],{4216:(x,ee,y)=>{y(5151),Opal.queue(function($){var z,M,Z,d,l,c,p,J,S,k=$.module,P=$.klass,f=$.const_set,_=$.truthy,H=$.to_ary,D=$.rb_gt,v=$.rb_plus,R=$.def,I=$.rb_ge,U=$.rb_minus,T=$.eqeq,w=$.rb_lt,A=$.rb_times,W=$.rb_divide,Y=$.send,N=[],e=$.nil;return z=N,M=S=[k(N[0],"BCDice")].concat(z),p=[k(S[0],"GameSystem")].concat(M),J=$.$r(p),Z=p,l=[d=P(p[0],J("Base"),"HunterTheReckoning5th")].concat(Z),c=$.$r(l),d.$$prototype.randomizer=e,f(l[0],"ID","HunterTheReckoning5th"),f(l[0],"NAME","Hunter: The Reckoning 5th Edition"),f(l[0],"SORT_KEY","\u306f\u3093\u3042\u305f\u3055\u308c\u3053\u306b\u3093\u304f5"),f(l[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nHRFx+x)\n  \u6ce8\u610f\uff1a\u96e3\u6613\u5ea6\u306f\u5fc5\u8981\u6210\u529f\u6570\u3092\u8868\u3059\n\n  \u96e3\u6613\u5ea6\u6307\u5b9a\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u6210\u529f\u3068\u5931\u6557\u3001Critical\u51e6\u7406\u3001Critical Win\u3001Total Failure\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n             \uff08Desperation\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Overreach\u3068Despair\u306e\u767a\u751f\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n  \u4f8b) (\u96e3\u6613\u5ea6)HRF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Desperation\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)HRF(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea6\u7701\u7565\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u5931\u6557\u3001Critical\u51e6\u7406\u3001Total Failure\u3001\uff08Desperation\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Despair\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n              \u5224\u5b9a\u6210\u529f\u3001Overreach\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n              Critical Win\u3001\uff08Desperation\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Despair\u3001Overreach\u306e\u30d2\u30f3\u30c8\u3092\u51fa\u529b\n  \u4f8b) HRF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Desperation\u30c0\u30a4\u30b9)\n      HRF(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea60\u6307\u5b9a\uff1a\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n  \u4f8b) 0HRF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Desperation\u30c0\u30a4\u30b9)\n      0HRF(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n"),f(l[0],"DIFFICULTY_INDEX",1),f(l[0],"DICE_POOL_INDEX",3),f(l[0],"DESPERATION_DICE_INDEX",5),f(l[0],"NOT_CHECK_SUCCESS",-1),d.$register_prefix("\\d*HRF"),R(d,"$eval_game_system_specific_command",function(n){var i,r,m,t,o,q,b,s=this,a=e,u=e,C=e,E=e,X=e,L=e,g=e,h=e;if(a=/^(\d+)?(HRF)(\d+)(\+(\d+))?$/.$match(n),!_(a))return"";if(t=a["$[]"](c("DICE_POOL_INDEX")).$to_i(),r=s.$make_dice_roll(t),o=null==(i=H(r))[0]?e:i[0],u=null==i[1]?e:i[1],C=null==i[2]?e:i[2],E="("+t+"D10",b=(i=a["$[]"](c("DESPERATION_DICE_INDEX")))===e||null==i?e:i.$to_i(),_(b)){if(_(D(b,5)))return"Desperation\u30c0\u30a4\u30b9\u6307\u5b9a\u306f5\u30c0\u30a4\u30b9\u304c\u6700\u5927\u3067\u3059\u3002";m=s.$make_dice_roll(b),X=null==(r=H(m))[0]?e:r[0],L=null==r[1]?e:r[1],h=null==r[3]?e:r[3],C=v(C,g=null==r[2]?e:r[2]),u=v(u,L),E=E+"+"+b+"D10) \uff1e ["+o+"]+["+X+"] "}else g=0,h=0,E=E+") \uff1e ["+o+"] ";return u=v(u,s.$get_critical_success(C)),q=_(a["$[]"](c("DIFFICULTY_INDEX")))?a["$[]"](c("DIFFICULTY_INDEX")).$to_i():c("NOT_CHECK_SUCCESS"),s.$get_roll_result(E,u,C,g,h,q)}),d.$private(),R(d,"$get_roll_result",function(n,i,r,m,s,a){var t,o=e;return n=n+" \u6210\u529f\u6570="+i,t=I(r,2),o="",_(D(a,0))?(n=n+" \u96e3\u6613\u5ea6="+a,_(I(i,a))?(n=n+" \u5dee\u5206="+U(i,a),_(D(s,0))&&(o=" [Overreach or Despair?]"),_(t)?c("Result").$critical(n+"\uff1a\u5224\u5b9a\u6210\u529f! [Critical Win]"+o):c("Result").$success(n+"\uff1a\u5224\u5b9a\u6210\u529f!"+o)):_(D(s,0))?c("Result").$fumble(n+"\uff1a\u5224\u5b9a\u5931\u6557! [Despair]"):T(i,0)?c("Result").$fumble(n+"\uff1a\u5224\u5b9a\u5931\u6557! [Total Failure]"):c("Result").$failure(n+"\uff1a\u5224\u5b9a\u5931\u6557!")):_(w(a,0))?T(i,0)?_(D(s,0))?c("Result").$fumble(n+"\uff1a\u5224\u5b9a\u5931\u6557! [Despair]"):c("Result").$fumble(n+"\uff1a\u5224\u5b9a\u5931\u6557! [Total Failure]"):(_(D(s,0))&&(n+="\n\u3000\u5224\u5b9a\u5931\u6557\u306a\u3089 [Despair]",o=" [Overreach or Despair?]"),_(t)?n+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089 [Critical Win]":_(D(s,0))&&(n+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089"),""+n+o):n.$to_s()}),R(d,"$get_critical_success",function(n){return A(W(n,2).$to_i(),2)}),R(d,"$make_dice_roll",function(n){var r=e;return[(r=this.randomizer.$roll_barabara(n,10)).$join(","),Y(r,"count",[],function(u){return null==u&&(u=e),I(u,6)}),r.$count(10),r.$count(1)]})})}}]);