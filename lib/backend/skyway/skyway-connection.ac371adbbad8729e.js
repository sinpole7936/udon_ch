(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1528],{844:(ve,we,ee)=>{"use strict";ee.r(we),ee.d(we,{SkyWayConnection:()=>O});var Z=ee(467),P=ee(1701),v=ee.n(P),h=ee(9138),u=ee(750),y=ee(4232),m=ee(8161),g=ee(2306),C=ee(8848),x=ee(8518),d=ee(1788),e=ee(4356),n=ee(1185),f=ee(6609),o=ee(5643),t=ee(4136);class p extends e.EventEmitter{get open(){return this.conn.open}get remoteId(){return this.conn.remoteId}get metadata(){return this.conn.metadata}get bufferedAmount(){return this.conn._dc?.bufferedAmount??0}get timestamp(){return this._timestamp}set timestamp(a){this._timestamp=a}get ping(){return this._ping}set ping(a){this._ping=a}get candidateType(){return this._candidateType}set candidateType(a){this._candidateType=a}constructor(a,l){super(),this.conn=a,this.chunkSize=15872,this.receivedMap=new Map,this.timeoutTimer=null,this._timestamp=performance.now(),this._ping=0,this._candidateType=o.a.UNKNOWN,this.peer=x.y.parse(l.peerId),this.peer.userId=l.userId,this.peer.password=l.password,a.on("data",E=>this.onData(E)),a.on("open",()=>{this.stats=new o.X(this.getPeerConnection()),this.peer.isOpen=!0,this.clearTimeoutTimer(),function w(N){N._dc&&N._sendBuffer&&(N._startSendLoop=R)}(a),this.emit("open"),this.startMonitoring()}),a.on("close",()=>{this.peer.isOpen=!1,this.clearTimeoutTimer(),this.emit("close")}),a.on("error",E=>{this.clearTimeoutTimer(),this.emit("error",E)}),this.setTimeoutTimer()}close(){this.peer.isOpen=!1,this.clearTimeoutTimer(),this.stopMonitoring(),this.conn.close()}send(a){let l=m.$.encode(a),E=Math.ceil(l.byteLength/this.chunkSize);if(E<=1)return void this.conn.send(l);let T=n.k.generateUuid(),B=null,j=null;for(let V=0;V<E;V++)B=l.slice(V*this.chunkSize,(V+1)*this.chunkSize),j={id:T,data:B,index:V,total:E},this.conn.send(m.$.encode(j))}getPeerConnection(){return this.conn.getPeerConnection()}startMonitoring(){t.p.add(this)}stopMonitoring(){t.p.remove(this)}updateStatsAsync(){var a=this;return(0,Z.A)(function*(){if(null==a.stats)return;a.sendPing(),yield a.stats.updateAsync(),a.candidateType=a.stats.candidateType;let l=performance.now()-a.timestamp,E=l<=1e4?1:5e3/(l-1e4+5e3),T=E<1?l:a.ping,B=500/(T+500);switch(a.peer.session.health=E,a.peer.session.ping=T,a.peer.session.speed=B*E,a.candidateType){case o.a.HOST:a.peer.session.grade=f.s.HIGH;break;case o.a.SRFLX:case o.a.PRFLX:a.peer.session.grade=f.s.MIDDLE;break;case o.a.RELAY:a.peer.session.grade=f.s.LOW;break;default:a.peer.session.grade=f.s.UNSPECIFIED}a.peer.session.description=a.candidateType,a.emit("stats",a.stats)})()}sendPing(){let a=m.$.encode({from:this.remoteId,ping:performance.now()});this.conn.send(a)}receivePing(a){if(a.from===this.remoteId){let E=performance.now()-a.ping;this.ping=E<=this.ping?.5*this.ping+.5*E:E}else{let l=m.$.encode(a);this.conn.send(l)}}onData(a){this.timestamp=performance.now();let l=m.$.decode(new Uint8Array(a));if(null!=l.ping)return void this.receivePing(l);let T=l;if(null==T.id)return void this.emit("data",l);let B=this.receivedMap.get(T.id);if(null==B&&(B={id:T.id,chanks:new Array(T.total),length:0,byteLength:0},this.receivedMap.set(T.id,B)),null!=B.chanks[T.index]||(B.length++,B.byteLength+=T.data.byteLength,B.chanks[T.index]=T.data,B.length<T.total))return;this.receivedMap.delete(T.id);let j=new Uint8Array(B.byteLength),V=0;for(let _ of B.chanks)j.set(_,V),V+=_.byteLength;let L=m.$.decode(j);this.emit("data",L)}setTimeoutTimer(){this.clearTimeoutTimer(),this.timeoutTimer=setTimeout(()=>{console.warn(`timeout ${this.conn.remoteId}`),this.timeoutTimer=null,this.emit("close")},15e3)}clearTimeoutTimer(){null!=this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)}}function R(){this.sendInterval||(this.sendInterval=(0,g.W)(I.bind(this)))}function I(){const N=this._sendBuffer.shift();try{this._dc.send(N)}catch{this._sendBuffer.push(N)}this.sendInterval=0===this._sendBuffer.length?void 0:(0,g.W)(I.bind(this))}class b{constructor(){this.connections=[],this.needsRefreshPeers=!1,this._peers=[],this.needsRefreshPeerIds=!1,this._peerIds=[]}get length(){return this.connections.length}[Symbol.iterator](){let a=this.connections.concat(),l=0;return{next:()=>({value:a[l++],done:a.length+1<=l})}}get peers(){return this.needsRefreshPeers&&(this.needsRefreshPeers=!1,this._peers=this.connections.map(a=>a.peer),this._peers.sort((a,l)=>a.peerId>l.peerId?1:a.peerId<l.peerId?-1:0)),this._peers}get peerIds(){if(this.needsRefreshPeerIds){this.needsRefreshPeerIds=!1;let a=[];for(let l of this.connections)l.open&&a.push(l.remoteId);a.sort((l,E)=>l>E?1:l<E?-1:0),this._peerIds=a}return this._peerIds}add(a){let l=this.find(a.remoteId);if(null!=l){if(console.log("add() is Fail. "+a.remoteId+" is already connecting.",l),l!==a){if(!(l.metadata.sortKey<a.metadata.sortKey))return this.remove(l),this.add(a);this.remove(a)}return null}return this.connections.push(a),this.refresh(),console.log("<add()> Peer:"+a.remoteId+" length:"+this.connections.length),a}remove(a){a.close();let l=this.connections.indexOf(a);return 0<=l&&(console.log(a.remoteId+" is \u3048\u3093\u3044\u30fcindex:"+l+" length:"+this.connections.length),this.connections.splice(l,1),this.refresh()),console.log("<close()> Peer:"+a.remoteId+" length:"+this.connections.length),0<=l?a:null}find(a){return this.connections.find(l=>l.remoteId===a)}refresh(){this.needsRefreshPeers=!0,this.needsRefreshPeerIds=!0}}class O{constructor(){this.peer=x.y.parse("???"),this.callback=new C.U,this.bandwidthUsage=0,this.key="",this.connections=new b,this.listAllPeersCache=[],this.httpRequestInterval=performance.now()+500,this.outboundQueue=Promise.resolve(),this.inboundQueue=Promise.resolve(),this.relayingPeerIds=new Map,this.maybeUnavailablePeerIds=new Set}get userIds(){return this.peers.map(a=>a.userId).filter(a=>0<a.length).concat([this.peer.userId])}get peerId(){return this.peer.peerId}get peerIds(){return this.connections.peerIds}get peers(){return this.connections.peers}configure(a){this.key!==a?.webrtc?.key&&console.log("Key Change"),this.key=a?.webrtc?.key??""}open(...a){console.log("open",a),this.peer=0===a.length?x.y.create(x.y.generateId()):1===a.length?x.y.create(a[0]):x.y.create(a[0],a[1],a[2],a[3]),this.openSkyWay()}close(){this.skyWay&&this.skyWay.destroy(),this.disconnectAll(),this.skyWay=null,this.peer=x.y.parse("???")}connect(a){if(!this.shouldConnect(a.peerId))return!1;let l=new p(this.skyWay.connect(a.peerId,{serialization:"none",metadata:{sortKey:this.peer.digestUserId,token:this.peer.isRoom?"":y.M.sha256Base64Url(this.peer.digestUserId+a.userId)}}),a);return this.openDataConnection(l),!0}shouldConnect(a){return this.peer&&this.skyWay&&this.peerId?this.peerId===a?(console.log("connect() is Fail. "+a+" is me."),!1):this.connections.find(a)?(console.log("connect() is Fail. <"+a+"> is already connecting."),!1):this.peer.verifyPeer(a)?!(!a||!a.length||a===this.peerId):(console.log("connect() is Fail. <"+a+"> is invalid."),!1):(console.log("connect() is Fail. ID\u304c\u5272\u308a\u632f\u3089\u308c\u308b\u307e\u3067\u5f85\u3066\u3084"),!1)}disconnect(a){let l=this.connections.find(a.peerId);return!!l&&(this.closeDataConnection(l),!0)}disconnectAll(){console.log("<closeAllDataConnection()>");for(let a of this.connections)this.closeDataConnection(a)}send(a,l){var E=this;if(this.connections.length<1)return;let T={data:m.$.encode(a),ttl:1},B=T.data.byteLength;this.bandwidthUsage+=B,this.outboundQueue=this.outboundQueue.then(()=>new Promise((j,V)=>{(0,g.W)((0,Z.A)(function*(){if(1024<T.data.byteLength&&Array.isArray(a)&&1<a.length){let L=yield(0,u.D)(T.data);L.byteLength<T.data.byteLength&&(T.data=L,T.isCompressed=!0)}return l?E.sendUnicast(T,l):E.sendBroadcast(T),E.bandwidthUsage-=B,j()}))}))}sendUnicast(a,l){a.ttl=0;let E=this.connections.find(l);E&&E.open&&E.send(a)}sendBroadcast(a){for(let l of this.connections)l.open&&l.send(a)}listAllPeers(){return new Promise((a,l)=>{if(!this.skyWay)return a([]);let E=performance.now();if(E<this.httpRequestInterval)return console.warn("httpRequestInterval... "+(this.httpRequestInterval-E)),void a(this.listAllPeersCache.concat());this.httpRequestInterval=E+6e3,this.skyWay.listAllPeers(T=>{this.listAllPeersCache=T.concat(),a(T)})})}listAllRooms(){var a=this;return(0,Z.A)(function*(){let l=yield a.listAllPeers();return d.G.listFrom(l)})()}openSkyWay(){this.skyWay&&(console.warn("It is already opened."),this.close());let a=new(v())(this.peer.peerId,{key:this.key});a.on("open",l=>{console.log("My peer ID is: "+l),this.peer.peerId===l?(this.peer.isOpen=!0,console.log("My peer Context",this.peer),this.callback.onOpen&&this.callback.onOpen(this.peer)):console.error("...peer is not me? <"+l+">",this.peer)}),a.on("close",()=>{console.log("Peer close"),this.peer.isOpen&&(this.peer.isOpen=!1,this.callback.onClose&&this.callback.onClose(this.peer))}),a.on("connection",l=>{let E=this.peer.verifyPeer(l.remoteId),T=this.peer.isRoom||l.metadata.token===y.M.sha256Base64Url(l.metadata.sortKey+this.peer.userId);if(!E||!T)return l.close(),l.on("open",()=>l.close()),void console.log("connection is close. <"+l.remoteId+"> is invalid.");let B=x.y.parse(l.remoteId);this.openDataConnection(new p(l,B))}),a.on("error",l=>{console.error("<"+this.peerId+"> "+l.type+" => "+l.message);let E=`${this.getSkyWayErrorMessage(l.type)}\n\n${l.type}: ${l.message}`;switch(l.type){case"peer-unavailable":let T=/"(.+)"/.exec(l.message)[1];this.disconnect(x.y.parse(T));break;case"disconnected":case"socket-error":case"unavailable-id":case"authentication":case"server-error":this.peer&&this.peer.isOpen&&(this.close(),this.callback.onClose&&this.callback.onClose(this.peer))}this.callback.onError&&this.callback.onError(this.peer,l.type,E,l)}),this.skyWay=a}openDataConnection(a){null!=this.connections.add(a)&&(this.maybeUnavailablePeerIds.add(a.remoteId),a.on("data",l=>{this.onData(a,l)}),a.on("open",()=>{this.maybeUnavailablePeerIds.delete(a.remoteId),this.notifyUserList(),this.callback.onConnect&&this.callback.onConnect(a.peer)}),a.on("close",()=>{this.closeDataConnection(a)}),a.on("error",()=>{this.closeDataConnection(a)}),a.on("stats",()=>{(a.peer.session.health<.35||a.peer.session.grade<1&&a.peer.session.health<.7)&&(console.log(`reconnecting... ${a.peer.peerId}`),this.closeDataConnection(a),this.connect(a.peer))}))}closeDataConnection(a){let l=this.connections.remove(a);this.relayingPeerIds.delete(a.remoteId),this.relayingPeerIds.forEach(E=>{let T=E.indexOf(a.remoteId);0<=T&&E.splice(T,1)}),this.notifyUserList(),l&&this.callback.onDisconnect&&this.callback.onDisconnect(a.peer)}onData(a,l){var E=this;if(l.users&&0<l.users.length&&this.onUpdateUserIds(a,l.users),0<l.ttl&&this.onRelay(a,l),!this.callback.onData)return;let T=l.data.byteLength;this.bandwidthUsage+=T,this.inboundQueue=this.inboundQueue.then(()=>new Promise((B,j)=>{(0,g.W)((0,Z.A)(function*(){if(!E.callback.onData)return;let V=l.isCompressed?yield(0,u.S)(l.data):l.data;return E.callback.onData(a.peer,m.$.decode(V)),E.bandwidthUsage-=T,B()}))}))}onRelay(a,l){l.ttl--;let E=this.relayingPeerIds.get(a.remoteId);if(null!=E){l.users&&0<l.users.length&&(l.users=this.userIds);for(let T of E){let B=this.connections.find(T);B&&B.open&&(console.log("<"+T+"> \u8ee2\u9001\u3057\u306a\u304d\u3083\u30fb\u30fb\u30fb"),B.send(l))}}}onUpdateUserIds(a,l){let E=!1;l.forEach(V=>{let L=this.makeFriendPeer(V),_=this.connections.find(L.peerId);_&&_.peer.userId!==V&&(_.peer.userId=V,E=!0)});let T=h._.diff(this.userIds,l),j=T.diff2;if(this.relayingPeerIds.set(a.remoteId,T.diff1.map(V=>this.makeFriendPeer(V).peerId)),j.length)for(let V of j){let L=this.makeFriendPeer(V);!this.maybeUnavailablePeerIds.has(L.peerId)&&this.connect(L)&&console.log("auto connect to unknown Peer <"+L.peerId+">")}E&&this.notifyUserList()}notifyUserList(){if(this.connections.refresh(),this.connections.length<1)return;let a={data:m.$.encode([]),users:this.userIds,ttl:1};this.sendBroadcast(a)}makeFriendPeer(a){return this.peer.isRoom?x.y.create(a,this.peer.roomId,this.peer.roomName,this.peer.password):x.y.create(a)}getSkyWayErrorMessage(a){switch(a){case"room-error":return"SkyWay Room API \u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002";case"permission":return"\u8a72\u5f53\u306e SkyWay Room \u306e\u5229\u7528\u304c\u8a31\u53ef\u3055\u308c\u3066\u307e\u305b\u3093\u3002";case"list-error":return"SkyWay listAllPeers API \u304c Disabled \u3067\u3059\u3002";case"disconnected":return"SkyWay \u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002";case"socket-error":return"SkyWay \u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u3068\u306e\u901a\u4fe1\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002";case"invalid-id":return"Peer ID \u304c\u4e0d\u6b63\u3067\u3059\u3002";case"unavailable-id":return"\u305d\u306e Peer ID \u3059\u3067\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002";case"invalid-key":return"SkyWay API \u30ad\u30fc\u304c\u7121\u52b9\u3067\u3059\u3002";case"invalid-domain":return"SkyWay API \u30ad\u30fc\u306b\u306f\u73fe\u5728\u306e\u30c9\u30e1\u30a4\u30f3\u306f\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002";case"authentication":return"\u8a8d\u8a3c\u30a8\u30e9\u30fc\u3067\u3059\u3002";case"server-error":return"SkyWay \u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u3068\u306e\u63a5\u7d9a\u4e2d\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3057\u305f\u3002 \u5c11\u3057\u5f85\u3063\u3066\u3001\u30ea\u30c8\u30e9\u30a4\u3057\u3066\u304f\u3060\u3055\u3044\u3002";case"sfu-client-not-supported":return"\u3053\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f SFU \u306e\u4f7f\u7528\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6700\u65b0\u306e Google Chrome \u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044";case"peer-unavailable":return"Peer \u3078\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002Peer ID \u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002";case"signaling-limited":return"\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u56de\u6570\u304c\u7121\u511f\u5229\u7528\u67a0\u3092\u8d85\u904e\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u5168\u3066\u306e\u6a5f\u80fd\u304c\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\uff08SkyWay Community Edition \u306e\u307f\uff09";case"sfu-limited":return"SFU \u30b5\u30fc\u30d0\u306e\u5229\u7528\u91cf\u304c\u7121\u511f\u5229\u7528\u67a0\u3092\u8d85\u904e\u3057\u3066\u3044\u308b\u305f\u3081\u3001SFU \u306e\u6a5f\u80fd\u304c\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\uff08SkyWay Community Edition \u306e\u307f\uff09";case"turn-limited":return"TURN \u30b5\u30fc\u30d0\u306e\u5229\u7528\u91cf\u304c\u7121\u511f\u5229\u7528\u67a0\u3092\u8d85\u904e\u3057\u3066\u3044\u308b\u305f\u3081\u3001TURN \u306e\u6a5f\u80fd\u304c\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\uff08SkyWay Community Edition \u306e\u307f\uff09\n\u3053\u306e\u72b6\u614b\u3067\u306f\u3001\u4e00\u90e8\u306e\u30e6\u30fc\u30b6\u306e\u63a5\u7d9a\u306b\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002";default:return"SkyWay\u306b\u95a2\u3059\u308b\u4e0d\u660e\u306a\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"}}}},1701:(ve,we,ee)=>{var Z=ee(9293).default;globalThis,ve.exports=function(P){var v={};function h(u){if(v[u])return v[u].exports;var y=v[u]={i:u,l:!1,exports:{}};return P[u].call(y.exports,y,y.exports,h),y.l=!0,y.exports}return h.m=P,h.c=v,h.d=function(u,y,m){h.o(u,y)||Object.defineProperty(u,y,{enumerable:!0,get:m})},h.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},h.t=function(u,y){if(1&y&&(u=h(u)),8&y||4&y&&"object"==typeof u&&u&&u.__esModule)return u;var m=Object.create(null);if(h.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:u}),2&y&&"string"!=typeof u)for(var g in u)h.d(m,g,function(C){return u[C]}.bind(null,g));return m},h.n=function(u){var y=u&&u.__esModule?function(){return u.default}:function(){return u};return h.d(y,"a",y),y},h.o=function(u,y){return Object.prototype.hasOwnProperty.call(u,y)},h.p="",h(h.s="./src/peer.js")}({"./node_modules/@jitsi/sdp-interop/lib/array-equals.js":
/*!*************************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/lib/array-equals.js ***!
                \*************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=function h(u){if(!u||this.length!=u.length)return!1;for(var y=0,m=this.length;y<m;y++)if(this[y]instanceof Array&&u[y]instanceof Array){if(!h.apply(this[y],[u[y]]))return!1}else if(this[y]!=u[y])return!1;return!0}},"./node_modules/@jitsi/sdp-interop/lib/index.js":
/*!******************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/lib/index.js ***!
                \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){v.Interop=h(
/*! ./interop */
"./node_modules/@jitsi/sdp-interop/lib/interop.js")},"./node_modules/@jitsi/sdp-interop/lib/interop.js":
/*!********************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/lib/interop.js ***!
                \********************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";var u=h(
/*! ./transform */
"./node_modules/@jitsi/sdp-interop/lib/transform.js"),y=h(
/*! ./array-equals */
"./node_modules/@jitsi/sdp-interop/lib/array-equals.js");function m(d){"number"==typeof d.mid&&(d.mid=d.mid.toString())}function g(){this.cache={mlB2UMap:{},mlU2BMap:{}}}P.exports=g,g.prototype.candidateToUnifiedPlan=function(d){var e=new RTCIceCandidate(d);return e.sdpMLineIndex=this.cache.mlB2UMap[e.sdpMLineIndex],e},g.prototype.candidateToPlanB=function(d){var e=new RTCIceCandidate(d);if(0===e.sdpMid.indexOf("audio"))e.sdpMid="audio";else{if(0!==e.sdpMid.indexOf("video"))throw new Error("candidate with "+e.sdpMid+" not allowed");e.sdpMid="video"}return e.sdpMLineIndex=this.cache.mlU2BMap[e.sdpMLineIndex],e},g.prototype.getFirstSendingIndexFromAnswer=function(d){if(!this.cache.answer)return null;var e=u.parse(this.cache.answer);if(e&&e.media&&Array.isArray(e.media))for(var n=0;n<e.media.length;n++)if(e.media[n].type==d&&(!e.media[n].direction||"sendrecv"===e.media[n].direction||"sendonly"===e.media[n].direction))return n;return null},g.prototype.toPlanB=function(d){var e=this;if("object"!=typeof d||null===d||"string"!=typeof d.sdp)return console.warn("An empty description was passed as an argument."),d;var n=u.parse(d.sdp);if(typeof n.media>"u"||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),d;if(n.media.length<=3&&n.media.every(function(N){return-1!==["video","audio","data"].indexOf(N.mid)}))return console.warn("This description does not look like Unified Plan."),d;for(var f=d.sdp,o=!1,t=0;t<n.media.length;t++)n.media[t].rtp.forEach(function(N){if("NULL"===N.codec){o=!0;var a=u.parse(e.cache.offer);N.codec=a.media[t].rtp[0].codec}});o&&(f=u.write(n)),this.cache[d.type]=f;var w=n.media;n.media=[];var R={},I=[],b={};w.forEach(function(N){if(m(N),("string"!=typeof N.rtcpMux||"rtcp-mux"!==N.rtcpMux)&&"inactive"!==N.direction&&"application"!==N.type)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");(typeof R[N.type]>"u"||"inactive"===R[N.type].direction)&&(R[N.type]=N)}),w.forEach(function(N){var a=N.type;if("application"===a)return N.mid="data",n.media.push(N),void I.push(N.mid);"object"==typeof N.sources&&Object.keys(N.sources).forEach(function(E){"object"!=typeof R[a].sources&&(R[a].sources={}),R[a].sources[E]=N.sources[E],typeof N.msid<"u"&&(R[a].sources[E].msid=N.msid)}),typeof N.ssrcGroups<"u"&&Array.isArray(N.ssrcGroups)&&((typeof R[a].ssrcGroups>"u"||!Array.isArray(R[a].ssrcGroups))&&(R[a].ssrcGroups=[]),y.apply(R[a].ssrcGroups,[N.ssrcGroups])||(R[a].ssrcGroups=R[a].ssrcGroups.concat(N.ssrcGroups)));var l=N.direction;b[a]=(b[a]||0)|C[l||"inactive"],R[a]===N&&(N.mid=a,delete N.bundleOnly,delete N.msid,"inactive"!==l&&I.push(a),n.media.push(N))}),n.groups.some(function(N){if("BUNDLE"===N.type)return N.mids=I.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var O=u.write(n);return new RTCSessionDescription({type:d.type,sdp:O})},g.prototype.toUnifiedPlan=function(d){var e=this;if("object"!=typeof d||null===d||"string"!=typeof d.sdp)return console.warn("An empty description was passed as an argument."),d;var n=u.parse(d.sdp);if(typeof n.media>"u"||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),d;if(n.media.length>3||!n.media.every(function(a){return-1!==["video","audio","data"].indexOf(a.mid)}))return console.warn("This description does not look like Plan B."),d;var f=[];n.media.forEach(function(a){f.push(a.mid)});var t,o=!1;if(typeof n.groups<"u"&&Array.isArray(n.groups)&&(o=n.groups.every(function(a){return"BUNDLE"!==a.type||y.apply(a.mids.sort(),[f.sort()])})),!o)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");typeof this.cache[d.type]<"u"&&(t=u.parse(this.cache[d.type]));var p={audio:{},video:{}},w={},R=0,I=0;if(n.media.forEach(function(a){if(("string"!=typeof a.rtcpMux||"rtcp-mux"!==a.rtcpMux)&&"inactive"!==a.direction&&"application"!==a.type)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"===a.type){var l=null;return t&&t.media&&(l=t.media.find(function(z){return"application"===z.type})),void(l?w[l.mid]=l:w[a.mid]=a)}var E=a.sources,T=a.ssrcGroups,B=a.candidates,j=a.iceUfrag,V=a.icePwd,L=a.fingerprint,_=a.port;delete a.sources,delete a.ssrcGroups,delete a.candidates,delete a.iceUfrag,delete a.icePwd,delete a.fingerprint,delete a.port,delete a.mid;var G={};typeof T<"u"&&Array.isArray(T)&&T.forEach(function(z){"SIM"!==z.semantics&&typeof z.ssrcs<"u"&&Array.isArray(z.ssrcs)&&z.ssrcs.forEach(function(H){typeof G[H]>"u"&&(G[H]=[]),G[H].push(z)})});var X={};"object"==typeof E&&Object.keys(E).forEach(function(z){var H;if("offer"!==d.type||E[z].msid)if(typeof G[z]<"u"&&Array.isArray(G[z])&&G[z].some(function(ae){return ae.ssrcs.some(function(ge){if("object"==typeof X[ge])return H=X[ge],!0})}),"object"==typeof H)H.sources[z]=E[z],delete E[z].msid;else{if(H=Object.create(a),X[z]=H,typeof E[z].msid<"u"&&(H.msid=E[z].msid,delete E[z].msid),H.sources={},H.sources[z]=E[z],H.ssrcGroups=G[z],typeof t<"u"&&typeof t.media<"u"&&Array.isArray(t.media)&&t.media.forEach(function(ae){"object"==typeof ae.sources&&Object.keys(ae.sources).forEach(function(ge){ge===z&&(H.mid=ae.mid)})}),m(H),typeof H.mid>"u"){if("answer"===d.type)throw new Error("An unmapped SSRC was found.");H.mid=[a.type,"-",z].join("")}H.candidates=B,H.iceUfrag=j,H.icePwd=V,H.fingerprint=L,H.port=_,w[H.mid]=H,e.cache.mlU2BMap[I]=R,typeof e.cache.mlB2UMap[R]>"u"&&(e.cache.mlB2UMap[R]=I),I++}else p[a.type][z]=E[z]}),R++}),n.media=[],f=[],"answer"===d.type)for(var b=0;b<t.media.length;b++){var O=t.media[b];m(O),typeof w[O.mid]>"u"&&(delete O.msid,delete O.sources,delete O.ssrcGroups,O.direction&&"sendrecv"!==O.direction?"sendonly"===O.direction&&(O.direction="inactive"):O.direction="recvonly"),n.media.push(O),"string"==typeof O.mid&&f.push(O.mid)}else typeof t<"u"&&typeof t.media<"u"&&Array.isArray(t.media)&&t.media.forEach(function(a){m(a),f.push(a.mid),typeof w[a.mid]<"u"?n.media.push(w[a.mid]):(delete a.msid,delete a.sources,delete a.ssrcGroups,(!a.direction||"sendrecv"===a.direction)&&(a.direction="recvonly"),(!a.direction||"sendonly"===a.direction)&&(a.direction="inactive"),n.media.push(a))}),Object.keys(w).forEach(function(a){-1===f.indexOf(a)&&(f.push(a),"recvonly"===w[a].direction?n.media.some(function(l){if(("sendrecv"===l.direction||"sendonly"===l.direction)&&l.type===w[a].type)return Object.keys(w[a].sources).forEach(function(E){l.sources[E]=w[a].sources[E]}),!0}):n.media.push(w[a]))});["audio","video"].forEach(function(a){if(n&&n.media&&Array.isArray(n.media)){var l=null;if(Object.keys(p[a]).length>0&&null===(l=e.getFirstSendingIndexFromAnswer(a)))for(var E=0;E<n.media.length;E++)if(n.media[E].type===a){l=E;break}if(l&&n.media.length>l){var T=n.media[l];Object.keys(p[a]).forEach(function(B){T.sources&&T.sources[B]&&console.warn("Replacing an existing SSRC."),T.sources||(T.sources={}),T.sources[B]=p[a][B]})}}}),n.groups.some(function(a){if("BUNDLE"===a.type)return a.mids=f.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var N=u.write(n);return this.cache[d.type]=N,new RTCSessionDescription({type:d.type,sdp:N})};var C={inactive:0,recvonly:1,sendonly:2,sendrecv:3}},"./node_modules/@jitsi/sdp-interop/lib/transform.js":
/*!**********************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/lib/transform.js ***!
                \**********************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! sdp-transform */
"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/index.js");v.write=function(y,m){return typeof y<"u"&&typeof y.media<"u"&&Array.isArray(y.media)&&y.media.forEach(function(g){typeof g.sources<"u"&&0!==Object.keys(g.sources).length&&(g.ssrcs=[],Object.keys(g.sources).forEach(function(C){var x=g.sources[C];Object.keys(x).forEach(function(d){g.ssrcs.push({id:C,attribute:d,value:x[d]})})}),delete g.sources),typeof g.ssrcGroups<"u"&&Array.isArray(g.ssrcGroups)&&g.ssrcGroups.forEach(function(C){typeof C.ssrcs<"u"&&Array.isArray(C.ssrcs)&&(C.ssrcs=C.ssrcs.join(" "))})}),typeof y<"u"&&typeof y.groups<"u"&&Array.isArray(y.groups)&&y.groups.forEach(function(g){typeof g.mids<"u"&&Array.isArray(g.mids)&&(g.mids=g.mids.join(" "))}),u.write(y,m)},v.parse=function(y){var m=u.parse(y);return typeof m<"u"&&typeof m.media<"u"&&Array.isArray(m.media)&&m.media.forEach(function(g){typeof g.ssrcs<"u"&&Array.isArray(g.ssrcs)&&(g.sources={},g.ssrcs.forEach(function(C){g.sources[C.id]||(g.sources[C.id]={}),g.sources[C.id][C.attribute]=C.value}),delete g.ssrcs),typeof g.ssrcGroups<"u"&&Array.isArray(g.ssrcGroups)&&g.ssrcGroups.forEach(function(C){"string"==typeof C.ssrcs&&(C.ssrcs=C.ssrcs.split(" "))})}),typeof m<"u"&&typeof m.groups<"u"&&Array.isArray(m.groups)&&m.groups.forEach(function(g){"string"==typeof g.mids&&(g.mids=g.mids.split(" "))}),m}},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js":
/*!***********************************************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js ***!
                \***********************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=P.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(u){return u.encoding?"rtpmap:%d %s/%s/%s":u.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(u){return null!=u.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(u){return null!=u.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(u){return"extmap:%d"+(u.direction?"/%s":"%v")+" %s"+(u.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(u){return null!=u.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(u){var y="candidate:%s %d %s %d %s %d typ %s";return y+=null!=u.raddr?" raddr %s rport %d":"%v%v",y+=null!=u.tcptype?" tcptype %s":"%v",null!=u.generation&&(y+=" generation %d"),(y+=null!=u["network-id"]?" network-id %d":"%v")+(null!=u["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(u){var y="ssrc:%d";return null!=u.attribute&&(y+=" %s",null!=u.value&&(y+=":%s")),y}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(u){return null!=u.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(u){return u.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(u){return"imageattr:%s %s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(u){return"simulcast:%s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(h).forEach(function(u){h[u].forEach(function(m){m.reg||(m.reg=/(.*)/),m.format||(m.format="%s")})})},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/index.js":
/*!*********************************************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/index.js ***!
                \*********************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./parser */
"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/parser.js"),y=h(
/*! ./writer */
"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/writer.js");v.write=y,v.parse=u.parse,v.parseFmtpConfig=u.parseFmtpConfig,v.parseParams=u.parseParams,v.parsePayloads=u.parsePayloads,v.parseRemoteCandidates=u.parseRemoteCandidates,v.parseImageAttributes=u.parseImageAttributes,v.parseSimulcastStreamList=u.parseSimulcastStreamList},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/parser.js":
/*!**********************************************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/parser.js ***!
                \**********************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=function(d){return String(Number(d))===d?Number(d):d},m=function(d,e,n){var f=d.name&&d.names;d.push&&!e[d.push]?e[d.push]=[]:f&&!e[d.name]&&(e[d.name]={});var o=d.push?{}:f?e[d.name]:e;(function(d,e,n,f){if(f&&!n)e[f]=u(d[1]);else for(var o=0;o<n.length;o+=1)null!=d[o+1]&&(e[n[o]]=u(d[o+1]))})(n.match(d.reg),o,d.names,d.name),d.push&&e[d.push].push(o)},g=h(
/*! ./grammar */
"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js"),C=RegExp.prototype.test.bind(/^([a-z])=(.*)/);v.parse=function(d){var e={},n=[],f=e;return d.split(/(\r\n|\r|\n)/).filter(C).forEach(function(o){var t=o[0],p=o.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),f=n[n.length-1]);for(var w=0;w<(g[t]||[]).length;w+=1){var R=g[t][w];if(R.reg.test(p))return m(R,f,p)}}),e.media=n,e};var x=function(d,e){var n=e.split(/=(.+)/,2);return 2===n.length&&(d[n[0]]=u(n[1])),d};v.parseParams=function(d){return d.split(/\;\s?/).reduce(x,{})},v.parseFmtpConfig=v.parseParams,v.parsePayloads=function(d){return d.split(" ").map(Number)},v.parseRemoteCandidates=function(d){for(var e=[],n=d.split(" ").map(u),f=0;f<n.length;f+=3)e.push({component:n[f],ip:n[f+1],port:n[f+2]});return e},v.parseImageAttributes=function(d){return d.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(x,{})})},v.parseSimulcastStreamList=function(d){return d.split(";").map(function(e){return e.split(",").map(function(n){var f,o=!1;return"~"!==n[0]?f=u(n):(f=u(n.substring(1,n.length)),o=!0),{scid:f,paused:o}})})}},"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/writer.js":
/*!**********************************************************************************!*\
                !*** ./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/writer.js ***!
                \**********************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./grammar */
"./node_modules/@jitsi/sdp-interop/node_modules/sdp-transform/lib/grammar.js"),y=/%[sdv%]/g,m=function(d){var e=1,n=arguments,f=n.length;return d.replace(y,function(o){if(e>=f)return o;var t=n[e];switch(e+=1,o){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}})},g=function(d,e,n){var o=[d+"="+(e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format)];if(e.names)for(var t=0;t<e.names.length;t+=1)o.push(e.name?n[e.name][e.names[t]]:n[e.names[t]]);else o.push(n[e.name]);return m.apply(null,o)},C=["v","o","s","i","u","e","p","c","b","t","r","z","a"],x=["i","c","b","a"];P.exports=function(d,e){e=e||{},null==d.version&&(d.version=0),null==d.name&&(d.name=" "),d.media.forEach(function(t){null==t.payloads&&(t.payloads="")});var f=e.innerOrder||x,o=[];return(e.outerOrder||C).forEach(function(t){u[t].forEach(function(p){p.name in d&&null!=d[p.name]?o.push(g(t,p,d)):p.push in d&&null!=d[p.push]&&d[p.push].forEach(function(w){o.push(g(t,p,w))})})}),d.media.forEach(function(t){o.push(g("m",u.m[0],t)),f.forEach(function(p){u[p].forEach(function(w){w.name in t&&null!=t[w.name]?o.push(g(p,w,t)):w.push in t&&null!=t[w.push]&&t[w.push].forEach(function(R){o.push(g(p,w,R))})})})}),o.join("\r\n")+"\r\n"}},"./node_modules/after/index.js":
/*!*************************************!*\
                !*** ./node_modules/after/index.js ***!
                \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){function u(){}P.exports=function h(y,m,g){var C=!1;return g=g||u,x.count=y,0===y?m():x;function x(d,e){if(x.count<=0)throw new Error("after called too many times");--x.count,d?(C=!0,m(d),m=g):0===x.count&&!C&&m(null,e)}}},"./node_modules/arraybuffer.slice/index.js":
/*!*************************************************!*\
                !*** ./node_modules/arraybuffer.slice/index.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=function(h,u,y){var m=h.byteLength;if(u=u||0,y=y||m,h.slice)return h.slice(u,y);if(u<0&&(u+=m),y<0&&(y+=m),y>m&&(y=m),u>=m||u>=y||0===m)return new ArrayBuffer(0);for(var g=new Uint8Array(h),C=new Uint8Array(y-u),x=u,d=0;x<y;x++,d++)C[d]=g[x];return C.buffer}},"./node_modules/backo2/index.js":
/*!**************************************!*\
                !*** ./node_modules/backo2/index.js ***!
                \**************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){function h(u){this.ms=(u=u||{}).min||100,this.max=u.max||1e4,this.factor=u.factor||2,this.jitter=u.jitter>0&&u.jitter<=1?u.jitter:0,this.attempts=0}P.exports=h,h.prototype.duration=function(){var u=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var y=Math.random(),m=Math.floor(y*this.jitter*u);u=1&Math.floor(10*y)?u+m:u-m}return 0|Math.min(u,this.max)},h.prototype.reset=function(){this.attempts=0},h.prototype.setMin=function(u){this.ms=u},h.prototype.setMax=function(u){this.max=u},h.prototype.setJitter=function(u){this.jitter=u}},"./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":
/*!*******************************************************************!*\
                !*** ./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
                \*******************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){!function(h){"use strict";v.encode=function(u){var m,y=new Uint8Array(u),g=y.length,C="";for(m=0;m<g;m+=3)C+=h[y[m]>>2],C+=h[(3&y[m])<<4|y[m+1]>>4],C+=h[(15&y[m+1])<<2|y[m+2]>>6],C+=h[63&y[m+2]];return g%3==2?C=C.substring(0,C.length-1)+"=":g%3==1&&(C=C.substring(0,C.length-2)+"=="),C},v.decode=function(u){var g,x,d,e,n,y=.75*u.length,m=u.length,C=0;"="===u[u.length-1]&&(y--,"="===u[u.length-2]&&y--);var f=new ArrayBuffer(y),o=new Uint8Array(f);for(g=0;g<m;g+=4)x=h.indexOf(u[g]),d=h.indexOf(u[g+1]),e=h.indexOf(u[g+2]),n=h.indexOf(u[g+3]),o[C++]=x<<2|d>>4,o[C++]=(15&d)<<4|e>>2,o[C++]=(3&e)<<6|63&n;return f}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},"./node_modules/base64-js/index.js":
/*!*****************************************!*\
                !*** ./node_modules/base64-js/index.js ***!
                \*****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";v.byteLength=function e(w){var R=d(w),b=R[1];return 3*(R[0]+b)/4-b},v.toByteArray=function f(w){var R,E,I=d(w),b=I[0],O=I[1],N=new m(function n(w,R,I){return 3*(R+I)/4-I}(0,b,O)),a=0,l=O>0?b-4:b;for(E=0;E<l;E+=4)R=y[w.charCodeAt(E)]<<18|y[w.charCodeAt(E+1)]<<12|y[w.charCodeAt(E+2)]<<6|y[w.charCodeAt(E+3)],N[a++]=R>>16&255,N[a++]=R>>8&255,N[a++]=255&R;return 2===O&&(R=y[w.charCodeAt(E)]<<2|y[w.charCodeAt(E+1)]>>4,N[a++]=255&R),1===O&&(R=y[w.charCodeAt(E)]<<10|y[w.charCodeAt(E+1)]<<4|y[w.charCodeAt(E+2)]>>2,N[a++]=R>>8&255,N[a++]=255&R),N},v.fromByteArray=function p(w){for(var R,I=w.length,b=I%3,O=[],N=16383,a=0,l=I-b;a<l;a+=N)O.push(t(w,a,a+N>l?l:a+N));return 1===b?O.push(u[(R=w[I-1])>>2]+u[R<<4&63]+"=="):2===b&&O.push(u[(R=(w[I-2]<<8)+w[I-1])>>10]+u[R>>4&63]+u[R<<2&63]+"="),O.join("")};for(var u=[],y=[],m=typeof Uint8Array<"u"?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0;C<64;++C)u[C]=g[C],y[g.charCodeAt(C)]=C;function d(w){var R=w.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=w.indexOf("=");return-1===I&&(I=R),[I,I===R?0:4-I%4]}function o(w){return u[w>>18&63]+u[w>>12&63]+u[w>>6&63]+u[63&w]}function t(w,R,I){for(var O=[],N=R;N<I;N+=3)O.push(o((w[N]<<16&16711680)+(w[N+1]<<8&65280)+(255&w[N+2])));return O.join("")}y[45]=62,y[95]=63},"./node_modules/blob/index.js":
/*!************************************!*\
                !*** ./node_modules/blob/index.js ***!
                \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=typeof h<"u"?h:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"&&MozBlobBuilder,u=function(){try{return 2===new Blob(["hi"]).size}catch{return!1}}(),y=u&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch{return!1}}(),m=h&&h.prototype.append&&h.prototype.getBlob;function g(d){return d.map(function(e){if(e.buffer instanceof ArrayBuffer){var n=e.buffer;if(e.byteLength!==n.byteLength){var f=new Uint8Array(e.byteLength);f.set(new Uint8Array(n,e.byteOffset,e.byteLength)),n=f.buffer}return n}return e})}function C(d,e){e=e||{};var n=new h;return g(d).forEach(function(f){n.append(f)}),e.type?n.getBlob(e.type):n.getBlob()}function x(d,e){return new Blob(g(d),e||{})}typeof Blob<"u"&&(C.prototype=Blob.prototype,x.prototype=Blob.prototype),P.exports=function(){return u?y?Blob:x:m?C:void 0}()},"./node_modules/component-bind/index.js":
/*!**********************************************!*\
                !*** ./node_modules/component-bind/index.js ***!
                \**********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=[].slice;P.exports=function(u,y){if("string"==typeof y&&(y=u[y]),"function"!=typeof y)throw new Error("bind() requires a function");var m=h.call(arguments,2);return function(){return y.apply(u,m.concat(h.call(arguments)))}}},"./node_modules/component-emitter/index.js":
/*!*************************************************!*\
                !*** ./node_modules/component-emitter/index.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){function u(m){if(m)return function y(m){for(var g in u.prototype)m[g]=u.prototype[g];return m}(m)}P.exports=u,u.prototype.on=u.prototype.addEventListener=function(m,g){return this._callbacks=this._callbacks||{},(this._callbacks["$"+m]=this._callbacks["$"+m]||[]).push(g),this},u.prototype.once=function(m,g){function C(){this.off(m,C),g.apply(this,arguments)}return C.fn=g,this.on(m,C),this},u.prototype.off=u.prototype.removeListener=u.prototype.removeAllListeners=u.prototype.removeEventListener=function(m,g){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var C=this._callbacks["$"+m];if(!C)return this;if(1==arguments.length)return delete this._callbacks["$"+m],this;for(var x,d=0;d<C.length;d++)if((x=C[d])===g||x.fn===g){C.splice(d,1);break}return 0===C.length&&delete this._callbacks["$"+m],this},u.prototype.emit=function(m){this._callbacks=this._callbacks||{};for(var g=new Array(arguments.length-1),C=this._callbacks["$"+m],x=1;x<arguments.length;x++)g[x-1]=arguments[x];if(C){x=0;for(var d=(C=C.slice(0)).length;x<d;++x)C[x].apply(this,g)}return this},u.prototype.listeners=function(m){return this._callbacks=this._callbacks||{},this._callbacks["$"+m]||[]},u.prototype.hasListeners=function(m){return!!this.listeners(m).length}},"./node_modules/component-inherit/index.js":
/*!*************************************************!*\
                !*** ./node_modules/component-inherit/index.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=function(h,u){var y=function(){};y.prototype=u.prototype,h.prototype=new y,h.prototype.constructor=h}},"./node_modules/debug/src/browser.js":
/*!*******************************************!*\
                !*** ./node_modules/debug/src/browser.js ***!
                \*******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){(function(u){function x(){var e;try{e=v.storage.debug}catch{}return!e&&typeof u<"u"&&"env"in u&&(e=u.env.DEBUG),e}(v=P.exports=h(
/*! ./debug */
"./node_modules/debug/src/debug.js")).log=function g(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},v.formatArgs=function m(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+v.humanize(this.diff),n){var f="color: "+this.color;e.splice(1,0,f,"color: inherit");var o=0,t=0;e[0].replace(/%[a-zA-Z%]/g,function(p){"%%"!==p&&(o++,"%c"===p&&(t=o))}),e.splice(t,0,f)}},v.save=function C(e){try{null==e?v.storage.removeItem("debug"):v.storage.debug=e}catch{}},v.load=x,v.useColors=function y(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},v.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:function d(){try{return window.localStorage}catch{}}(),v.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],v.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},v.enable(x())}).call(this,h(
/*! ./../../process/browser.js */
"./node_modules/process/browser.js"))},"./node_modules/debug/src/debug.js":
/*!*****************************************!*\
                !*** ./node_modules/debug/src/debug.js ***!
                \*****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){function y(e){var n;function f(){if(f.enabled){var o=f,t=+new Date;o.diff=t-(n||t),o.prev=n,o.curr=t,n=t;for(var w=new Array(arguments.length),R=0;R<w.length;R++)w[R]=arguments[R];w[0]=v.coerce(w[0]),"string"!=typeof w[0]&&w.unshift("%O");var I=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,function(O,N){if("%%"===O)return O;I++;var a=v.formatters[N];return"function"==typeof a&&(O=a.call(o,w[I]),w.splice(I,1),I--),O}),v.formatArgs.call(o,w),(f.log||v.log||console.log.bind(console)).apply(o,w)}}return f.namespace=e,f.enabled=v.enabled(e),f.useColors=v.useColors(),f.color=function u(e){var f,n=0;for(f in e)n=(n<<5)-n+e.charCodeAt(f),n|=0;return v.colors[Math.abs(n)%v.colors.length]}(e),f.destroy=m,"function"==typeof v.init&&v.init(f),v.instances.push(f),f}function m(){var e=v.instances.indexOf(this);return-1!==e&&(v.instances.splice(e,1),!0)}(v=P.exports=y.debug=y.default=y).coerce=function d(e){return e instanceof Error?e.stack||e.message:e},v.disable=function C(){v.enable("")},v.enable=function g(e){v.save(e),v.names=[],v.skips=[];var n,f=("string"==typeof e?e:"").split(/[\s,]+/),o=f.length;for(n=0;n<o;n++)f[n]&&("-"===(e=f[n].replace(/\*/g,".*?"))[0]?v.skips.push(new RegExp("^"+e.substr(1)+"$")):v.names.push(new RegExp("^"+e+"$")));for(n=0;n<v.instances.length;n++){var t=v.instances[n];t.enabled=v.enabled(t.namespace)}},v.enabled=function x(e){if("*"===e[e.length-1])return!0;var n,f;for(n=0,f=v.skips.length;n<f;n++)if(v.skips[n].test(e))return!1;for(n=0,f=v.names.length;n<f;n++)if(v.names[n].test(e))return!0;return!1},v.humanize=h(
/*! ms */
"./node_modules/ms/index.js"),v.instances=[],v.names=[],v.skips=[],v.formatters={}},"./node_modules/decode-uri-component/index.js":
/*!****************************************************!*\
                !*** ./node_modules/decode-uri-component/index.js ***!
                \****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";var u="%[a-f0-9]{2}",y=new RegExp(u,"gi"),m=new RegExp("("+u+")+","gi");function g(d,e){try{return decodeURIComponent(d.join(""))}catch{}if(1===d.length)return d;var n=d.slice(0,e=e||1),f=d.slice(e);return Array.prototype.concat.call([],g(n),g(f))}function C(d){try{return decodeURIComponent(d)}catch{for(var e=d.match(y),n=1;n<e.length;n++)e=(d=g(e,n).join("")).match(y);return d}}P.exports=function(d){if("string"!=typeof d)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof d+"`");try{return d=d.replace(/\+/g," "),decodeURIComponent(d)}catch{return function x(d){for(var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=m.exec(d);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{var f=C(n[0]);f!==n[0]&&(e[n[0]]=f)}n=m.exec(d)}e["%C2"]="\ufffd";for(var o=Object.keys(e),t=0;t<o.length;t++){var p=o[t];d=d.replace(new RegExp(p,"g"),e[p])}return d}(d)}}},"./node_modules/detect-browser/index.js":
/*!**********************************************!*\
                !*** ./node_modules/detect-browser/index.js ***!
                \**********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";(function(u){var y=this&&this.__spreadArrays||function(){for(var I=0,b=0,O=arguments.length;b<O;b++)I+=arguments[b].length;var N=Array(I),a=0;for(b=0;b<O;b++)for(var l=arguments[b],E=0,T=l.length;E<T;E++,a++)N[a]=l[E];return N};Object.defineProperty(v,"__esModule",{value:!0});var m=function(){return function I(b,O,N){this.name=b,this.version=O,this.os=N}}();v.BrowserInfo=m;var g=function(){return function I(b){this.version=b,this.name="node",this.os=u.platform}}();v.NodeInfo=g;var C=function(){return function I(){this.bot=!0,this.name="bot",this.version=null,this.os=null}}();v.BotInfo=C;var e=3,n=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]];function t(I){var b=""!==I&&n.reduce(function(l,E){var T=E[0];if(l)return l;var j=E[1].exec(I);return!!j&&[T,j]},!1);if(!b)return null;var O=b[0],N=b[1];if("searchbot"===O)return new C;var a=N[1]&&N[1].split(/[._]/).slice(0,3);return a?a.length<e&&(a=y(a,function R(I){for(var b=[],O=0;O<I;O++)b.push("0");return b}(e-a.length))):a=[],new m(O,a.join("."),p(I))}function p(I){for(var b=0,O=f.length;b<O;b++){var N=f[b],a=N[0];if(N[1].test(I))return a}return null}function w(){return typeof u<"u"&&u.version?new g(u.version.slice(1)):null}v.detect=function o(I){return I?t(I):typeof navigator<"u"?t(navigator.userAgent):w()},v.parseUserAgent=t,v.detectOS=p,v.getNodeVersion=w}).call(this,h(
/*! ./../process/browser.js */
"./node_modules/process/browser.js"))},"./node_modules/engine.io-client/lib/globalThis.browser.js":
/*!*****************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/globalThis.browser.js ***!
                \*****************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=typeof self<"u"?self:typeof window<"u"?window:Function("return this")()},"./node_modules/engine.io-client/lib/index.js":
/*!****************************************************!*\
                !*** ./node_modules/engine.io-client/lib/index.js ***!
                \****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){P.exports=h(
/*! ./socket */
"./node_modules/engine.io-client/lib/socket.js"),P.exports.parser=h(
/*! engine.io-parser */
"./node_modules/engine.io-parser/lib/browser.js")},"./node_modules/engine.io-client/lib/socket.js":
/*!*****************************************************!*\
                !*** ./node_modules/engine.io-client/lib/socket.js ***!
                \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./transports/index */
"./node_modules/engine.io-client/lib/transports/index.js"),y=h(
/*! component-emitter */
"./node_modules/component-emitter/index.js"),m=h(
/*! debug */
"./node_modules/debug/src/browser.js")("engine.io-client:socket"),g=h(
/*! indexof */
"./node_modules/indexof/index.js"),C=h(
/*! engine.io-parser */
"./node_modules/engine.io-parser/lib/browser.js"),x=h(
/*! parseuri */
"./node_modules/parseuri/index.js"),d=h(
/*! parseqs */
"./node_modules/parseqs/index.js");function e(f,o){if(!(this instanceof e))return new e(f,o);o=o||{},f&&"object"==typeof f&&(o=f,f=null),f?(f=x(f),o.hostname=f.host,o.secure="https"===f.protocol||"wss"===f.protocol,o.port=f.port,f.query&&(o.query=f.query)):o.host&&(o.hostname=x(o.host).host),this.secure=null!=o.secure?o.secure:typeof location<"u"&&"https:"===location.protocol,o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.agent=o.agent||!1,this.hostname=o.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=o.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=o.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==o.upgrade,this.path=(o.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!o.forceJSONP,this.jsonp=!1!==o.jsonp,this.forceBase64=!!o.forceBase64,this.enablesXDR=!!o.enablesXDR,this.withCredentials=!1!==o.withCredentials,this.timestampParam=o.timestampParam||"t",this.timestampRequests=o.timestampRequests,this.transports=o.transports||["polling","websocket"],this.transportOptions=o.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=o.policyPort||843,this.rememberUpgrade=o.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=o.onlyBinaryUpgrades,this.perMessageDeflate=!1!==o.perMessageDeflate&&(o.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=o.pfx||void 0,this.key=o.key||void 0,this.passphrase=o.passphrase||void 0,this.cert=o.cert||void 0,this.ca=o.ca||void 0,this.ciphers=o.ciphers||void 0,this.rejectUnauthorized=void 0===o.rejectUnauthorized||o.rejectUnauthorized,this.forceNode=!!o.forceNode,this.isReactNative=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),(typeof self>"u"||this.isReactNative)&&(o.extraHeaders&&Object.keys(o.extraHeaders).length>0&&(this.extraHeaders=o.extraHeaders),o.localAddress&&(this.localAddress=o.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}P.exports=e,e.priorWebsocketSuccess=!1,y(e.prototype),e.protocol=C.protocol,e.Socket=e,e.Transport=h(
/*! ./transport */
"./node_modules/engine.io-client/lib/transport.js"),e.transports=h(
/*! ./transports/index */
"./node_modules/engine.io-client/lib/transports/index.js"),e.parser=h(
/*! engine.io-parser */
"./node_modules/engine.io-parser/lib/browser.js"),e.prototype.createTransport=function(f){m('creating transport "%s"',f);var o=function n(f){var o={};for(var t in f)f.hasOwnProperty(t)&&(o[t]=f[t]);return o}(this.query);o.EIO=C.protocol,o.transport=f;var t=this.transportOptions[f]||{};return this.id&&(o.sid=this.id),new u[f]({query:o,socket:this,agent:t.agent||this.agent,hostname:t.hostname||this.hostname,port:t.port||this.port,secure:t.secure||this.secure,path:t.path||this.path,forceJSONP:t.forceJSONP||this.forceJSONP,jsonp:t.jsonp||this.jsonp,forceBase64:t.forceBase64||this.forceBase64,enablesXDR:t.enablesXDR||this.enablesXDR,withCredentials:t.withCredentials||this.withCredentials,timestampRequests:t.timestampRequests||this.timestampRequests,timestampParam:t.timestampParam||this.timestampParam,policyPort:t.policyPort||this.policyPort,pfx:t.pfx||this.pfx,key:t.key||this.key,passphrase:t.passphrase||this.passphrase,cert:t.cert||this.cert,ca:t.ca||this.ca,ciphers:t.ciphers||this.ciphers,rejectUnauthorized:t.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:t.perMessageDeflate||this.perMessageDeflate,extraHeaders:t.extraHeaders||this.extraHeaders,forceNode:t.forceNode||this.forceNode,localAddress:t.localAddress||this.localAddress,requestTimeout:t.requestTimeout||this.requestTimeout,protocols:t.protocols||void 0,isReactNative:this.isReactNative})},e.prototype.open=function(){var f;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))f="websocket";else{if(0===this.transports.length){var o=this;return void setTimeout(function(){o.emit("error","No transports available")},0)}f=this.transports[0]}this.readyState="opening";try{f=this.createTransport(f)}catch{return this.transports.shift(),void this.open()}f.open(),this.setTransport(f)},e.prototype.setTransport=function(f){m("setting transport %s",f.name);var o=this;this.transport&&(m("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=f,f.on("drain",function(){o.onDrain()}).on("packet",function(t){o.onPacket(t)}).on("error",function(t){o.onError(t)}).on("close",function(){o.onClose("transport close")})},e.prototype.probe=function(f){m('probing transport "%s"',f);var o=this.createTransport(f,{probe:1}),t=!1,p=this;function w(){p.onlyBinaryUpgrades&&(t=t||!this.supportsBinary&&p.transport.supportsBinary),t||(m('probe transport "%s" opened',f),o.send([{type:"ping",data:"probe"}]),o.once("packet",function(E){if(!t)if("pong"===E.type&&"probe"===E.data){if(m('probe transport "%s" pong',f),p.upgrading=!0,p.emit("upgrading",o),!o)return;e.priorWebsocketSuccess="websocket"===o.name,m('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){t||"closed"!==p.readyState&&(m("changing transport and sending upgrade packet"),a(),p.setTransport(o),o.send([{type:"upgrade"}]),p.emit("upgrade",o),o=null,p.upgrading=!1,p.flush())})}else{m('probe transport "%s" failed',f);var T=new Error("probe error");T.transport=o.name,p.emit("upgradeError",T)}}))}function R(){t||(t=!0,a(),o.close(),o=null)}function I(l){var E=new Error("probe error: "+l);E.transport=o.name,R(),m('probe transport "%s" failed because of error: %s',f,l),p.emit("upgradeError",E)}function b(){I("transport closed")}function O(){I("socket closed")}function N(l){o&&l.name!==o.name&&(m('"%s" works - aborting "%s"',l.name,o.name),R())}function a(){o.removeListener("open",w),o.removeListener("error",I),o.removeListener("close",b),p.removeListener("close",O),p.removeListener("upgrading",N)}e.priorWebsocketSuccess=!1,o.once("open",w),o.once("error",I),o.once("close",b),this.once("close",O),this.once("upgrading",N),o.open()},e.prototype.onOpen=function(){if(m("socket open"),this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){m("starting upgrade probes");for(var f=0,o=this.upgrades.length;f<o;f++)this.probe(this.upgrades[f])}},e.prototype.onPacket=function(f){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(m('socket receive: type "%s", data "%s"',f.type,f.data),this.emit("packet",f),this.emit("heartbeat"),f.type){case"open":this.onHandshake(JSON.parse(f.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var o=new Error("server error");o.code=f.data,this.onError(o);break;case"message":this.emit("data",f.data),this.emit("message",f.data)}else m('packet received with socket readyState "%s"',this.readyState)},e.prototype.onHandshake=function(f){this.emit("handshake",f),this.id=f.sid,this.transport.query.sid=f.sid,this.upgrades=this.filterUpgrades(f.upgrades),this.pingInterval=f.pingInterval,this.pingTimeout=f.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(f){clearTimeout(this.pingTimeoutTimer);var o=this;o.pingTimeoutTimer=setTimeout(function(){"closed"!==o.readyState&&o.onClose("ping timeout")},f||o.pingInterval+o.pingTimeout)},e.prototype.setPing=function(){var f=this;clearTimeout(f.pingIntervalTimer),f.pingIntervalTimer=setTimeout(function(){m("writing ping packet - expecting pong within %sms",f.pingTimeout),f.ping(),f.onHeartbeat(f.pingTimeout)},f.pingInterval)},e.prototype.ping=function(){var f=this;this.sendPacket("ping",function(){f.emit("ping")})},e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},e.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(m("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(f,o,t){return this.sendPacket("message",f,o,t),this},e.prototype.sendPacket=function(f,o,t,p){if("function"==typeof o&&(p=o,o=void 0),"function"==typeof t&&(p=t,t=null),"closing"!==this.readyState&&"closed"!==this.readyState){(t=t||{}).compress=!1!==t.compress;var w={type:f,data:o,options:t};this.emit("packetCreate",w),this.writeBuffer.push(w),p&&this.once("flush",p),this.flush()}},e.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var f=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?p():o()}):this.upgrading?p():o()}function o(){f.onClose("forced close"),m("socket closing - telling transport to close"),f.transport.close()}function t(){f.removeListener("upgrade",t),f.removeListener("upgradeError",t),o()}function p(){f.once("upgrade",t),f.once("upgradeError",t)}return this},e.prototype.onError=function(f){m("socket error %j",f),e.priorWebsocketSuccess=!1,this.emit("error",f),this.onClose("transport error",f)},e.prototype.onClose=function(f,o){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){m('socket close with reason: "%s"',f);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",f,o),this.writeBuffer=[],this.prevBufferLen=0}},e.prototype.filterUpgrades=function(f){for(var o=[],t=0,p=f.length;t<p;t++)~g(this.transports,f[t])&&o.push(f[t]);return o}},"./node_modules/engine.io-client/lib/transport.js":
/*!********************************************************!*\
                !*** ./node_modules/engine.io-client/lib/transport.js ***!
                \********************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! engine.io-parser */
"./node_modules/engine.io-parser/lib/browser.js"),y=h(
/*! component-emitter */
"./node_modules/component-emitter/index.js");function m(g){this.path=g.path,this.hostname=g.hostname,this.port=g.port,this.secure=g.secure,this.query=g.query,this.timestampParam=g.timestampParam,this.timestampRequests=g.timestampRequests,this.readyState="",this.agent=g.agent||!1,this.socket=g.socket,this.enablesXDR=g.enablesXDR,this.withCredentials=g.withCredentials,this.pfx=g.pfx,this.key=g.key,this.passphrase=g.passphrase,this.cert=g.cert,this.ca=g.ca,this.ciphers=g.ciphers,this.rejectUnauthorized=g.rejectUnauthorized,this.forceNode=g.forceNode,this.isReactNative=g.isReactNative,this.extraHeaders=g.extraHeaders,this.localAddress=g.localAddress}P.exports=m,y(m.prototype),m.prototype.onError=function(g,C){var x=new Error(g);return x.type="TransportError",x.description=C,this.emit("error",x),this},m.prototype.open=function(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this},m.prototype.close=function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this},m.prototype.send=function(g){if("open"!==this.readyState)throw new Error("Transport not open");this.write(g)},m.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},m.prototype.onData=function(g){var C=u.decodePacket(g,this.socket.binaryType);this.onPacket(C)},m.prototype.onPacket=function(g){this.emit("packet",g)},m.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},"./node_modules/engine.io-client/lib/transports/index.js":
/*!***************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/transports/index.js ***!
                \***************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! xmlhttprequest-ssl */
"./node_modules/engine.io-client/lib/xmlhttprequest.js"),y=h(
/*! ./polling-xhr */
"./node_modules/engine.io-client/lib/transports/polling-xhr.js"),m=h(
/*! ./polling-jsonp */
"./node_modules/engine.io-client/lib/transports/polling-jsonp.js"),g=h(
/*! ./websocket */
"./node_modules/engine.io-client/lib/transports/websocket.js");v.polling=function C(x){var e=!1,n=!1,f=!1!==x.jsonp;if(typeof location<"u"){var o="https:"===location.protocol,t=location.port;t||(t=o?443:80),e=x.hostname!==location.hostname||t!==x.port,n=x.secure!==o}if(x.xdomain=e,x.xscheme=n,"open"in new u(x)&&!x.forceJSONP)return new y(x);if(!f)throw new Error("JSONP disabled");return new m(x)},v.websocket=g},"./node_modules/engine.io-client/lib/transports/polling-jsonp.js":
/*!***********************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/transports/polling-jsonp.js ***!
                \***********************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./polling */
"./node_modules/engine.io-client/lib/transports/polling.js"),y=h(
/*! component-inherit */
"./node_modules/component-inherit/index.js"),m=h(
/*! ../globalThis */
"./node_modules/engine.io-client/lib/globalThis.browser.js");P.exports=e;var x,g=/\n/g,C=/\\n/g;function d(){}function e(n){u.call(this,n),this.query=this.query||{},x||(x=m.___eio=m.___eio||[]),this.index=x.length;var f=this;x.push(function(o){f.onData(o)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){f.script&&(f.script.onerror=d)},!1)}y(e,u),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),u.prototype.doClose.call(this)},e.prototype.doPoll=function(){var n=this,f=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),f.async=!0,f.src=this.uri(),f.onerror=function(p){n.onError("jsonp poll error",p)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(f,o):(document.head||document.body).appendChild(f),this.script=f,typeof navigator<"u"&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var p=document.createElement("iframe");document.body.appendChild(p),document.body.removeChild(p)},100)},e.prototype.doWrite=function(n,f){var o=this;if(!this.form){var R,t=document.createElement("form"),p=document.createElement("textarea"),w=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=w,t.method="POST",t.setAttribute("accept-charset","utf-8"),p.name="d",t.appendChild(p),document.body.appendChild(t),this.form=t,this.area=p}function I(){b(),f()}function b(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(N){o.onError("jsonp polling iframe removal error",N)}try{R=document.createElement('<iframe src="javascript:0" name="'+o.iframeId+'">')}catch{(R=document.createElement("iframe")).name=o.iframeId,R.src="javascript:0"}R.id=o.iframeId,o.form.appendChild(R),o.iframe=R}this.form.action=this.uri(),b(),n=n.replace(C,"\\\n"),this.area.value=n.replace(g,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&I()}:this.iframe.onload=I}},"./node_modules/engine.io-client/lib/transports/polling-xhr.js":
/*!*********************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/transports/polling-xhr.js ***!
                \*********************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! xmlhttprequest-ssl */
"./node_modules/engine.io-client/lib/xmlhttprequest.js"),y=h(
/*! ./polling */
"./node_modules/engine.io-client/lib/transports/polling.js"),m=h(
/*! component-emitter */
"./node_modules/component-emitter/index.js"),g=h(
/*! component-inherit */
"./node_modules/component-inherit/index.js"),C=h(
/*! debug */
"./node_modules/debug/src/browser.js")("engine.io-client:polling-xhr"),x=h(
/*! ../globalThis */
"./node_modules/engine.io-client/lib/globalThis.browser.js");function d(){}function e(t){if(y.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location<"u"){var p="https:"===location.protocol,w=location.port;w||(w=p?443:80),this.xd=typeof location<"u"&&t.hostname!==location.hostname||w!==t.port,this.xs=t.secure!==p}}function n(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function o(){for(var t in n.requests)n.requests.hasOwnProperty(t)&&n.requests[t].abort()}P.exports=e,P.exports.Request=n,g(e,y),e.prototype.supportsBinary=!0,e.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new n(t)},e.prototype.doWrite=function(t,p){var R=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),I=this;R.on("success",p),R.on("error",function(b){I.onError("xhr post error",b)}),this.sendXhr=R},e.prototype.doPoll=function(){C("xhr poll");var t=this.request(),p=this;t.on("data",function(w){p.onData(w)}),t.on("error",function(w){p.onError("xhr poll error",w)}),this.pollXhr=t},m(n.prototype),n.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var p=this.xhr=new u(t),w=this;try{C("xhr open %s: %s",this.method,this.uri),p.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var R in p.setDisableHeaderCheck&&p.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(R)&&p.setRequestHeader(R,this.extraHeaders[R])}catch{}if("POST"===this.method)try{p.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch{}try{p.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in p&&(p.withCredentials=this.withCredentials),this.requestTimeout&&(p.timeout=this.requestTimeout),this.hasXDR()?(p.onload=function(){w.onLoad()},p.onerror=function(){w.onError(p.responseText)}):p.onreadystatechange=function(){if(2===p.readyState)try{var I=p.getResponseHeader("Content-Type");(w.supportsBinary&&"application/octet-stream"===I||"application/octet-stream; charset=UTF-8"===I)&&(p.responseType="arraybuffer")}catch{}4===p.readyState&&(200===p.status||1223===p.status?w.onLoad():setTimeout(function(){w.onError("number"==typeof p.status?p.status:0)},0))},C("xhr data %s",this.data),p.send(this.data)}catch(I){return void setTimeout(function(){w.onError(I)},0)}typeof document<"u"&&(this.index=n.requestsCount++,n.requests[this.index]=this)},n.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},n.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},n.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},n.prototype.cleanup=function(t){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete n.requests[this.index],this.xhr=null}},n.prototype.onLoad=function(){var t;try{var p;try{p=this.xhr.getResponseHeader("Content-Type")}catch{}t=("application/octet-stream"===p||"application/octet-stream; charset=UTF-8"===p)&&this.xhr.response||this.xhr.responseText}catch(w){this.onError(w)}null!=t&&this.onData(t)},n.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR},n.prototype.abort=function(){this.cleanup()},n.requestsCount=0,n.requests={},typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",o):"function"==typeof addEventListener&&addEventListener("onpagehide"in x?"pagehide":"unload",o,!1))},"./node_modules/engine.io-client/lib/transports/polling.js":
/*!*****************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/transports/polling.js ***!
                \*****************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ../transport */
"./node_modules/engine.io-client/lib/transport.js"),y=h(
/*! parseqs */
"./node_modules/parseqs/index.js"),m=h(
/*! engine.io-parser */
"./node_modules/engine.io-parser/lib/browser.js"),g=h(
/*! component-inherit */
"./node_modules/component-inherit/index.js"),C=h(
/*! yeast */
"./node_modules/yeast/index.js"),x=h(
/*! debug */
"./node_modules/debug/src/browser.js")("engine.io-client:polling");P.exports=e;var d=null!=new(h(
/*! xmlhttprequest-ssl */
"./node_modules/engine.io-client/lib/xmlhttprequest.js"))({xdomain:!1}).responseType;function e(n){(!d||n&&n.forceBase64)&&(this.supportsBinary=!1),u.call(this,n)}g(e,u),e.prototype.name="polling",e.prototype.doOpen=function(){this.poll()},e.prototype.pause=function(n){var f=this;function o(){x("paused"),f.readyState="paused",n()}if(this.readyState="pausing",this.polling||!this.writable){var t=0;this.polling&&(x("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){x("pre-pause polling complete"),--t||o()})),this.writable||(x("we are currently writing - waiting to pause"),t++,this.once("drain",function(){x("pre-pause writing complete"),--t||o()}))}else o()},e.prototype.poll=function(){x("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},e.prototype.onData=function(n){var f=this;x("polling got data %s",n),m.decodePayload(n,this.socket.binaryType,function(t,p,w){if("opening"===f.readyState&&"open"===t.type&&f.onOpen(),"close"===t.type)return f.onClose(),!1;f.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():x('ignoring poll - transport state "%s"',this.readyState))},e.prototype.doClose=function(){var n=this;function f(){x("writing close packet"),n.write([{type:"close"}])}"open"===this.readyState?(x("transport open - closing"),f()):(x("transport not open - deferring close"),this.once("open",f))},e.prototype.write=function(n){var f=this;this.writable=!1;var o=function(){f.writable=!0,f.emit("drain")};m.encodePayload(n,this.supportsBinary,function(t){f.doWrite(t,o)})},e.prototype.uri=function(){var n=this.query||{},f=this.secure?"https":"http",o="";return!1!==this.timestampRequests&&(n[this.timestampParam]=C()),!this.supportsBinary&&!n.sid&&(n.b64=1),n=y.encode(n),this.port&&("https"===f&&443!==Number(this.port)||"http"===f&&80!==Number(this.port))&&(o=":"+this.port),n.length&&(n="?"+n),f+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+n}},"./node_modules/engine.io-client/lib/transports/websocket.js":
/*!*******************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/transports/websocket.js ***!
                \*******************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){(function(u){var e,n,y=h(
/*! ../transport */
"./node_modules/engine.io-client/lib/transport.js"),m=h(
/*! engine.io-parser */
"./node_modules/engine.io-parser/lib/browser.js"),g=h(
/*! parseqs */
"./node_modules/parseqs/index.js"),C=h(
/*! component-inherit */
"./node_modules/component-inherit/index.js"),x=h(
/*! yeast */
"./node_modules/yeast/index.js"),d=h(
/*! debug */
"./node_modules/debug/src/browser.js")("engine.io-client:websocket");if(typeof WebSocket<"u"?e=WebSocket:typeof self<"u"&&(e=self.WebSocket||self.MozWebSocket),typeof window>"u")try{n=h(
/*! ws */
0)}catch{}var f=e||n;function o(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=e&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=n),y.call(this,t)}P.exports=o,C(o,y),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var t=this.uri(),p=this.protocols,w={};this.isReactNative||(w.agent=this.agent,w.perMessageDeflate=this.perMessageDeflate,w.pfx=this.pfx,w.key=this.key,w.passphrase=this.passphrase,w.cert=this.cert,w.ca=this.ca,w.ciphers=this.ciphers,w.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(w.headers=this.extraHeaders),this.localAddress&&(w.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?p?new f(t,p):new f(t):new f(t,p,w)}catch(R){return this.emit("error",R)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(p){t.onData(p.data)},this.ws.onerror=function(p){t.onError("websocket error",p)}},o.prototype.write=function(t){var p=this;this.writable=!1;for(var w=t.length,R=0,I=w;R<I;R++)!function(O){m.encodePacket(O,p.supportsBinary,function(N){if(!p.usingBrowserWebSocket){var a={};O.options&&(a.compress=O.options.compress),p.perMessageDeflate&&("string"==typeof N?u.byteLength(N):N.length)<p.perMessageDeflate.threshold&&(a.compress=!1)}try{p.usingBrowserWebSocket?p.ws.send(N):p.ws.send(N,a)}catch{d("websocket closed before onclose event")}--w||(p.emit("flush"),setTimeout(function(){p.writable=!0,p.emit("drain")},0))})}(t[R])},o.prototype.onClose=function(){y.prototype.onClose.call(this)},o.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},o.prototype.uri=function(){var t=this.query||{},p=this.secure?"wss":"ws",w="";return this.port&&("wss"===p&&443!==Number(this.port)||"ws"===p&&80!==Number(this.port))&&(w=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=x()),this.supportsBinary||(t.b64=1),(t=g.encode(t)).length&&(t="?"+t),p+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+w+this.path+t},o.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===o.prototype.name)}}).call(this,h(
/*! ./../../../node-libs-browser/node_modules/buffer/index.js */
"./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/engine.io-client/lib/xmlhttprequest.js":
/*!*************************************************************!*\
                !*** ./node_modules/engine.io-client/lib/xmlhttprequest.js ***!
                \*************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! has-cors */
"./node_modules/has-cors/index.js"),y=h(
/*! ./globalThis */
"./node_modules/engine.io-client/lib/globalThis.browser.js");P.exports=function(m){var g=m.xdomain,C=m.xscheme,x=m.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!g||u))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!C&&x)return new XDomainRequest}catch{}if(!g)try{return new(y[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}},"./node_modules/engine.io-parser/lib/browser.js":
/*!******************************************************!*\
                !*** ./node_modules/engine.io-parser/lib/browser.js ***!
                \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var x,u=h(
/*! ./keys */
"./node_modules/engine.io-parser/lib/keys.js"),y=h(
/*! has-binary2 */
"./node_modules/has-binary2/index.js"),m=h(
/*! arraybuffer.slice */
"./node_modules/arraybuffer.slice/index.js"),g=h(
/*! after */
"./node_modules/after/index.js"),C=h(
/*! ./utf8 */
"./node_modules/engine.io-parser/lib/utf8.js");typeof ArrayBuffer<"u"&&(x=h(
/*! base64-arraybuffer */
"./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"));var d=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),e=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),n=d||e;v.protocol=3;var f=v.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},o=u(f),t={type:"error",data:"parser error"},p=h(
/*! blob */
"./node_modules/blob/index.js");function b(a,l,E){if(!l)return v.encodeBase64Packet(a,E);if(n)return function I(a,l,E){if(!l)return v.encodeBase64Packet(a,E);var T=new FileReader;return T.onload=function(){v.encodePacket({type:a.type,data:T.result},l,!0,E)},T.readAsArrayBuffer(a.data)}(a,l,E);var T=new Uint8Array(1);return T[0]=f[a.type],E(new p([T.buffer,a.data]))}function N(a,l,E){for(var T=new Array(a.length),B=g(a.length,E),j=function(L,_,G){l(_,function(X,z){T[L]=z,G(X,T)})},V=0;V<a.length;V++)j(V,a[V],B)}v.encodePacket=function(a,l,E,T){"function"==typeof l&&(T=l,l=!1),"function"==typeof E&&(T=E,E=null);var B=void 0===a.data?void 0:a.data.buffer||a.data;if(typeof ArrayBuffer<"u"&&B instanceof ArrayBuffer)return function R(a,l,E){if(!l)return v.encodeBase64Packet(a,E);var T=a.data,B=new Uint8Array(T),j=new Uint8Array(1+T.byteLength);j[0]=f[a.type];for(var V=0;V<B.length;V++)j[V+1]=B[V];return E(j.buffer)}(a,l,T);if(typeof p<"u"&&B instanceof p)return b(a,l,T);if(B&&B.base64)return function w(a,l){return l("b"+v.packets[a.type]+a.data.data)}(a,T);var j=f[a.type];return void 0!==a.data&&(j+=E?C.encode(String(a.data),{strict:!1}):String(a.data)),T(""+j)},v.encodeBase64Packet=function(a,l){var B,E="b"+v.packets[a.type];if(typeof p<"u"&&a.data instanceof p){var T=new FileReader;return T.onload=function(){var _=T.result.split(",")[1];l(E+_)},T.readAsDataURL(a.data)}try{B=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch{for(var j=new Uint8Array(a.data),V=new Array(j.length),L=0;L<j.length;L++)V[L]=j[L];B=String.fromCharCode.apply(null,V)}return E+=btoa(B),l(E)},v.decodePacket=function(a,l,E){if(void 0===a)return t;if("string"==typeof a){if("b"===a.charAt(0))return v.decodeBase64Packet(a.substr(1),l);if(E&&!1===(a=function O(a){try{a=C.decode(a,{strict:!1})}catch{return!1}return a}(a)))return t;var B=a.charAt(0);return Number(B)==B&&o[B]?a.length>1?{type:o[B],data:a.substring(1)}:{type:o[B]}:t}B=new Uint8Array(a)[0];var j=m(a,1);return p&&"blob"===l&&(j=new p([j])),{type:o[B],data:j}},v.decodeBase64Packet=function(a,l){var E=o[a.charAt(0)];if(!x)return{type:E,data:{base64:!0,data:a.substr(1)}};var T=x.decode(a.substr(1));return"blob"===l&&p&&(T=new p([T])),{type:E,data:T}},v.encodePayload=function(a,l,E){"function"==typeof l&&(E=l,l=null);var T=y(a);if(l&&T)return p&&!n?v.encodePayloadAsBlob(a,E):v.encodePayloadAsArrayBuffer(a,E);if(!a.length)return E("0:");N(a,function j(V,L){v.encodePacket(V,!!T&&l,!1,function(_){L(null,function B(V){return V.length+":"+V}(_))})},function(V,L){return E(L.join(""))})},v.decodePayload=function(a,l,E){if("string"!=typeof a)return v.decodePayloadAsBinary(a,l,E);var T;if("function"==typeof l&&(E=l,l=null),""===a)return E(t,0,1);for(var j,V,B="",L=0,_=a.length;L<_;L++){var G=a.charAt(L);if(":"===G){if(""===B||B!=(j=Number(B))||B!=(V=a.substr(L+1,j)).length)return E(t,0,1);if(V.length){if(T=v.decodePacket(V,l,!1),t.type===T.type&&t.data===T.data)return E(t,0,1);if(!1===E(T,L+j,_))return}L+=j,B=""}else B+=G}return""!==B?E(t,0,1):void 0},v.encodePayloadAsArrayBuffer=function(a,l){if(!a.length)return l(new ArrayBuffer(0));N(a,function E(T,B){v.encodePacket(T,!0,!0,function(j){return B(null,j)})},function(T,B){var j=B.reduce(function(_,G){var X;return _+(X="string"==typeof G?G.length:G.byteLength).toString().length+X+2},0),V=new Uint8Array(j),L=0;return B.forEach(function(_){var G="string"==typeof _,X=_;if(G){for(var ae=new Uint8Array(_.length),z=0;z<_.length;z++)ae[z]=_.charCodeAt(z);X=ae.buffer}V[L++]=G?0:1;var H=X.byteLength.toString();for(z=0;z<H.length;z++)V[L++]=parseInt(H[z]);for(V[L++]=255,ae=new Uint8Array(X),z=0;z<ae.length;z++)V[L++]=ae[z]}),l(V.buffer)})},v.encodePayloadAsBlob=function(a,l){N(a,function E(T,B){v.encodePacket(T,!0,!0,function(j){var V=new Uint8Array(1);if(V[0]=1,"string"==typeof j){for(var L=new Uint8Array(j.length),_=0;_<j.length;_++)L[_]=j.charCodeAt(_);j=L.buffer,V[0]=0}var X=(j instanceof ArrayBuffer?j.byteLength:j.size).toString(),z=new Uint8Array(X.length+1);for(_=0;_<X.length;_++)z[_]=parseInt(X[_]);if(z[X.length]=255,p){var H=new p([V.buffer,z.buffer,j]);B(null,H)}})},function(T,B){return l(new p(B))})},v.decodePayloadAsBinary=function(a,l,E){"function"==typeof l&&(E=l,l=null);for(var T=a,B=[];T.byteLength>0;){for(var j=new Uint8Array(T),V=0===j[0],L="",_=1;255!==j[_];_++){if(L.length>310)return E(t,0,1);L+=j[_]}T=m(T,2+L.length),L=parseInt(L);var G=m(T,0,L);if(V)try{G=String.fromCharCode.apply(null,new Uint8Array(G))}catch{var X=new Uint8Array(G);for(G="",_=0;_<X.length;_++)G+=String.fromCharCode(X[_])}B.push(G),T=m(T,L)}var z=B.length;B.forEach(function(H,ae){E(v.decodePacket(H,l,!0),ae,z)})}},"./node_modules/engine.io-parser/lib/keys.js":
/*!***************************************************!*\
                !*** ./node_modules/engine.io-parser/lib/keys.js ***!
                \***************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=Object.keys||function(u){var y=[],m=Object.prototype.hasOwnProperty;for(var g in u)m.call(u,g)&&y.push(g);return y}},"./node_modules/engine.io-parser/lib/utf8.js":
/*!***************************************************!*\
                !*** ./node_modules/engine.io-parser/lib/utf8.js ***!
                \***************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var n,f,o,h=String.fromCharCode;function u(p){for(var b,O,w=[],R=0,I=p.length;R<I;)(b=p.charCodeAt(R++))>=55296&&b<=56319&&R<I?56320==(64512&(O=p.charCodeAt(R++)))?w.push(((1023&b)<<10)+(1023&O)+65536):(w.push(b),R--):w.push(b);return w}function m(p,w){if(p>=55296&&p<=57343){if(w)throw Error("Lone surrogate U+"+p.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function g(p,w){return h(p>>w&63|128)}function C(p,w){if(!(4294967168&p))return h(p);var R="";return 4294965248&p?4294901760&p?4292870144&p||(R=h(p>>18&7|240),R+=g(p,12),R+=g(p,6)):(m(p,w)||(p=65533),R=h(p>>12&15|224),R+=g(p,6)):R=h(p>>6&31|192),R+h(63&p|128)}function d(){if(o>=f)throw Error("Invalid byte index");var p=255&n[o];if(o++,128==(192&p))return 63&p;throw Error("Invalid continuation byte")}function e(p){var w,O;if(o>f)throw Error("Invalid byte index");if(o==f)return!1;if(w=255&n[o],o++,!(128&w))return w;if(192==(224&w)){if((O=(31&w)<<6|d())>=128)return O;throw Error("Invalid continuation byte")}if(224==(240&w)){if((O=(15&w)<<12|d()<<6|d())>=2048)return m(O,p)?O:65533;throw Error("Invalid continuation byte")}if(240==(248&w)&&(O=(7&w)<<18|d()<<12|d()<<6|d())>=65536&&O<=1114111)return O;throw Error("Invalid UTF-8 detected")}P.exports={version:"2.1.2",encode:function x(p,w){for(var R=!1!==(w=w||{}).strict,I=u(p),b=I.length,O=-1,a="";++O<b;)a+=C(I[O],R);return a},decode:function t(p,w){var R=!1!==(w=w||{}).strict;n=u(p),f=n.length,o=0;for(var b,I=[];!1!==(b=e(R));)I.push(b);return function y(p){for(var I,w=p.length,R=-1,b="";++R<w;)(I=p[R])>65535&&(b+=h((I-=65536)>>>10&1023|55296),I=56320|1023&I),b+=h(I);return b}(I)}}},"./node_modules/enum/lib/enum.js":
/*!***************************************!*\
                !*** ./node_modules/enum/lib/enum.js ***!
                \***************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module uses injected variables (global) */function(P,v,h){"use strict";h.r(v),function(u){h.d(v,"default",function(){return e});var y=h(
/*! ./enumItem.js */
"./node_modules/enum/lib/enumItem.js"),m=h(
/*! ./isType.js */
"./node_modules/enum/lib/isType.js"),g=h(
/*! ./indexOf.js */
"./node_modules/enum/lib/indexOf.js");const d=(()=>{const o=new ArrayBuffer(2);return new DataView(o).setInt16(0,256,!0),256===new Int16Array(o)[0]?"LE":"BE"})();class e{constructor(t,p){if(this.size=4,this.indirection=1,p&&Object(m.isString)(p)&&(p={name:p}),this._options=p||{},this._options.separator=this._options.separator||" | ",this._options.endianness=this._options.endianness||d,this._options.ignoreCase=this._options.ignoreCase||!1,this._options.freez=this._options.freez||!1,this._options.freeze=this._options.freeze||this._options.freez||!1,this.enums=[],t.length){this._enumLastIndex=t.length;var w=t;t={};for(var R=0;R<w.length;R++)t[w[R]]=Math.pow(2,R)}for(var I in t)f(this._options.name,I),this[I]=new y.default(I,t[I],{ignoreCase:this._options.ignoreCase}),this.enums.push(this[I]);this._enumMap=t,this._options.ignoreCase&&(this.getLowerCaseEnums=function(){for(var O={},N=0,a=this.enums.length;N<a;N++)O[this.enums[N].key.toLowerCase()]=this.enums[N];return O}),this._options.name&&(this.name=this._options.name),this.isFlaggable=(()=>{for(var O=0,N=this.enums.length;O<N;O++){var a=this.enums[O];if(0===a.value||a.value&a.value-1)return!1}return!0})(),this._options.freeze&&this.freezeEnums()}getKey(t){var p=this.get(t);if(p)return p.key}getValue(t){var p=this.get(t);if(p)return p.value}get(t,p){if(null!=t){if(null!=(o=t)&&null!=o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)&&(t=t["readUInt32"+this._options.endianness](p||0)),y.default.isEnumItem(t))return g.indexOf.call(this.enums,t)>=0?t:!this.isFlaggable||this.isFlaggable&&t.key.indexOf(this._options.separator)<0?void 0:this.get(t.key);if(Object(m.isString)(t)){var R=this;if(this._options.ignoreCase&&(R=this.getLowerCaseEnums(),t=t.toLowerCase()),t.indexOf(this._options.separator)>0){for(var I=t.split(this._options.separator),b=0,O=0;O<I.length;O++)b|=R[I[O]].value;return new y.default(t,b)}return R[t]}for(var a in this)if(this.hasOwnProperty(a)&&this[a].value===t)return this[a];var l=null;if(this.isFlaggable)for(var E in this)this.hasOwnProperty(E)&&t&this[E].value&&(l?l+=this._options.separator:l="",l+=E);return this.get(l||null)}var o}set(t,p,w){var R=this.get(w);if(R)return t["writeUInt32"+this._options.endianness](R.value,p||0)}freezeEnums(){function w(I){return I}return function t(){return Object.isFrozen&&Object.isSealed&&Object.getOwnPropertyNames&&Object.getOwnPropertyDescriptor&&Object.defineProperties&&Object.__defineGetter__&&Object.__defineSetter__}()&&function R(I){if("object"==typeof I&&null!==I&&!Object.isFrozen(I)&&!Object.isSealed(I)){for(var b in I)I.hasOwnProperty(b)&&(I.__defineGetter__(b,w.bind(null,I[b])),I.__defineSetter__(b,function(N){throw TypeError("Cannot redefine property; Enum Type is not extensible.")}),R(I[b]));Object.freeze?Object.freeze(I):function p(I){return Object.getOwnPropertyNames(I).forEach(function(O){Object.getOwnPropertyDescriptor(I,O).configurable&&Object.defineProperties(I,O,{writable:!1,configurable:!1})}),I}(I)}}(this),this}isDefined(t){let p=w=>w===t;return(Object(m.isString)(t)||Object(m.isNumber)(t))&&(p=w=>w.is(t)),this.enums.some(p)}toJSON(){return this._enumMap}extend(t){if(t.length){var p=t;t={};for(var w=0;w<p.length;w++)t[p[w]]=Math.pow(2,this._enumLastIndex+w);for(var I in t)f(this._options.name,I),this[I]=new y.default(I,t[I],{ignoreCase:this._options.ignoreCase}),this.enums.push(this[I]);for(var b in this._enumMap)t[b]=this._enumMap[b];this._enumLastIndex+=t.length,this._enumMap=t,this._options.freeze&&this.freezeEnums()}}static register(t="Enum"){typeof u<"u"&&!u[t]?u[t]=e:typeof window<"u"&&!window[t]&&(window[t]=e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.enums.length?{done:!1,value:this.enums[t++]}:{done:!0}}}}var n=["_options","get","getKey","getValue","enums","isFlaggable","_enumMap","toJSON","_enumLastIndex"];function f(o,t){if(o&&"name"===t||g.indexOf.call(n,t)>=0)throw new Error(`Enum key ${t} is a reserved word!`)}}.call(this,h(
/*! ./../../webpack/buildin/global.js */
"./node_modules/webpack/buildin/global.js"))},"./node_modules/enum/lib/enumItem.js":
/*!*******************************************!*\
                !*** ./node_modules/enum/lib/enumItem.js ***!
                \*******************************************/
/*! exports provided: default */function(P,v,h){"use strict";h.r(v),h.d(v,"default",function(){return y});var u=h(
/*! ./isType.js */
"./node_modules/enum/lib/isType.js");class y{constructor(g,C,x={}){this.key=g,this.value=C,this._options=x,this._options.ignoreCase=this._options.ignoreCase||!1}has(g){return y.isEnumItem(g)?!!(this.value&g.value):Object(u.isString)(g)?this._options.ignoreCase?this.key.toLowerCase().indexOf(g.toLowerCase())>=0:this.key.indexOf(g)>=0:!!(this.value&g)}is(g){return y.isEnumItem(g)?this.key===g.key:Object(u.isString)(g)?this._options.ignoreCase?this.key.toLowerCase()===g.toLowerCase():this.key===g:this.value===g}toString(){return this.key}toJSON(){return this.key}valueOf(){return this.value}static isEnumItem(g){return g instanceof y||Object(u.isObject)(g)&&void 0!==g.key&&void 0!==g.value}}},"./node_modules/enum/lib/indexOf.js":
/*!******************************************!*\
                !*** ./node_modules/enum/lib/indexOf.js ***!
                \******************************************/
/*! exports provided: indexOf */function(P,v,h){"use strict";h.r(v),h.d(v,"indexOf",function(){return u});const u=Array.prototype.indexOf||function(y,m){void 0===m&&(m=0),m<0&&(m+=this.length),m<0&&(m=0);for(var g=this.length;m<g;m++)if(m in this&&this[m]===y)return m;return-1}},"./node_modules/enum/lib/isType.js":
/*!*****************************************!*\
                !*** ./node_modules/enum/lib/isType.js ***!
                \*****************************************/
/*! exports provided: isType, isObject, isString, isNumber */function(P,v,h){"use strict";h.r(v),h.d(v,"isType",function(){return u}),h.d(v,"isObject",function(){return y}),h.d(v,"isString",function(){return m}),h.d(v,"isNumber",function(){return g});const u=(C,x)=>typeof x===C,y=C=>u("object",C),m=C=>u("string",C),g=C=>u("number",C)},"./node_modules/events/events.js":
/*!***************************************!*\
                !*** ./node_modules/events/events.js ***!
                \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";var m,u="object"==typeof Reflect?Reflect:null,y=u&&"function"==typeof u.apply?u.apply:function(E,T,B){return Function.prototype.apply.call(E,T,B)};m=u&&"function"==typeof u.ownKeys?u.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var C=Number.isNaN||function(E){return E!=E};function x(){x.init.call(this)}P.exports=x,P.exports.once=function O(l,E){return new Promise(function(T,B){function j(L){l.removeListener(E,V),B(L)}function V(){"function"==typeof l.removeListener&&l.removeListener("error",j),T([].slice.call(arguments))}a(l,E,V,{once:!0}),"error"!==E&&function N(l,E,T){"function"==typeof l.on&&a(l,"error",E,T)}(l,j,{once:!0})})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var d=10;function e(l){if("function"!=typeof l)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function n(l){return void 0===l._maxListeners?x.defaultMaxListeners:l._maxListeners}function f(l,E,T,B){var j,V,L;if(e(T),void 0===(V=l._events)?(V=l._events=Object.create(null),l._eventsCount=0):(void 0!==V.newListener&&(l.emit("newListener",E,T.listener?T.listener:T),V=l._events),L=V[E]),void 0===L)L=V[E]=T,++l._eventsCount;else if("function"==typeof L?L=V[E]=B?[T,L]:[L,T]:B?L.unshift(T):L.push(T),(j=n(l))>0&&L.length>j&&!L.warned){L.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=l,_.type=E,_.count=L.length,function g(l){console&&console.warn&&console.warn(l)}(_)}return l}function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t(l,E,T){var B={fired:!1,wrapFn:void 0,target:l,type:E,listener:T},j=o.bind(B);return j.listener=T,B.wrapFn=j,j}function p(l,E,T){var B=l._events;if(void 0===B)return[];var j=B[E];return void 0===j?[]:"function"==typeof j?T?[j.listener||j]:[j]:T?function b(l){for(var E=new Array(l.length),T=0;T<E.length;++T)E[T]=l[T].listener||l[T];return E}(j):R(j,j.length)}function w(l){var E=this._events;if(void 0!==E){var T=E[l];if("function"==typeof T)return 1;if(void 0!==T)return T.length}return 0}function R(l,E){for(var T=new Array(E),B=0;B<E;++B)T[B]=l[B];return T}function a(l,E,T,B){if("function"==typeof l.on)B.once?l.once(E,T):l.on(E,T);else{if("function"!=typeof l.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof l);l.addEventListener(E,function j(V){B.once&&l.removeEventListener(E,j),T(V)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(l){if("number"!=typeof l||l<0||C(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");d=l}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(E){if("number"!=typeof E||E<0||C(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},x.prototype.getMaxListeners=function(){return n(this)},x.prototype.emit=function(E){for(var T=[],B=1;B<arguments.length;B++)T.push(arguments[B]);var j="error"===E,V=this._events;if(void 0!==V)j=j&&void 0===V.error;else if(!j)return!1;if(j){var L;if(T.length>0&&(L=T[0]),L instanceof Error)throw L;var _=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw _.context=L,_}var G=V[E];if(void 0===G)return!1;if("function"==typeof G)y(G,this,T);else{var X=G.length,z=R(G,X);for(B=0;B<X;++B)y(z[B],this,T)}return!0},x.prototype.on=x.prototype.addListener=function(E,T){return f(this,E,T,!1)},x.prototype.prependListener=function(E,T){return f(this,E,T,!0)},x.prototype.once=function(E,T){return e(T),this.on(E,t(this,E,T)),this},x.prototype.prependOnceListener=function(E,T){return e(T),this.prependListener(E,t(this,E,T)),this},x.prototype.off=x.prototype.removeListener=function(E,T){var B,j,V,L,_;if(e(T),void 0===(j=this._events))return this;if(void 0===(B=j[E]))return this;if(B===T||B.listener===T)0==--this._eventsCount?this._events=Object.create(null):(delete j[E],j.removeListener&&this.emit("removeListener",E,B.listener||T));else if("function"!=typeof B){for(V=-1,L=B.length-1;L>=0;L--)if(B[L]===T||B[L].listener===T){_=B[L].listener,V=L;break}if(V<0)return this;0===V?B.shift():function I(l,E){for(;E+1<l.length;E++)l[E]=l[E+1];l.pop()}(B,V),1===B.length&&(j[E]=B[0]),void 0!==j.removeListener&&this.emit("removeListener",E,_||T)}return this},x.prototype.removeAllListeners=function(E){var T,B,j;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[E]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[E]),this;if(0===arguments.length){var L,V=Object.keys(B);for(j=0;j<V.length;++j)"removeListener"!==(L=V[j])&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(T=B[E]))this.removeListener(E,T);else if(void 0!==T)for(j=T.length-1;j>=0;j--)this.removeListener(E,T[j]);return this},x.prototype.listeners=function(E){return p(this,E,!0)},x.prototype.rawListeners=function(E){return p(this,E,!1)},x.listenerCount=function(l,E){return"function"==typeof l.listenerCount?l.listenerCount(E):w.call(l,E)},x.prototype.listenerCount=w,x.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},"./node_modules/filter-obj/index.js":
/*!******************************************!*\
                !*** ./node_modules/filter-obj/index.js ***!
                \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";P.exports=function(u,y){for(var m={},g=Object.keys(u),C=Array.isArray(y),x=0;x<g.length;x++){var d=g[x],e=u[d];(C?-1!==y.indexOf(d):y(d,e,u))&&(m[d]=e)}return m}},"./node_modules/has-binary2/index.js":
/*!*******************************************!*\
                !*** ./node_modules/has-binary2/index.js ***!
                \*******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){(function(u){var y=h(
/*! isarray */
"./node_modules/isarray/index.js"),m=Object.prototype.toString,g="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===m.call(Blob),C="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===m.call(File);P.exports=function x(d){if(!d||"object"!=typeof d)return!1;if(y(d)){for(var e=0,n=d.length;e<n;e++)if(x(d[e]))return!0;return!1}if("function"==typeof u&&u.isBuffer&&u.isBuffer(d)||"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||g&&d instanceof Blob||C&&d instanceof File)return!0;if(d.toJSON&&"function"==typeof d.toJSON&&1===arguments.length)return x(d.toJSON(),!0);for(var f in d)if(Object.prototype.hasOwnProperty.call(d,f)&&x(d[f]))return!0;return!1}}).call(this,h(
/*! ./../node-libs-browser/node_modules/buffer/index.js */
"./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/has-cors/index.js":
/*!****************************************!*\
                !*** ./node_modules/has-cors/index.js ***!
                \****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){try{P.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{P.exports=!1}},"./node_modules/ieee754/index.js":
/*!***************************************!*\
                !*** ./node_modules/ieee754/index.js ***!
                \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){v.read=function(h,u,y,m,g){var C,x,d=8*g-m-1,e=(1<<d)-1,n=e>>1,f=-7,o=y?g-1:0,t=y?-1:1,p=h[u+o];for(o+=t,C=p&(1<<-f)-1,p>>=-f,f+=d;f>0;C=256*C+h[u+o],o+=t,f-=8);for(x=C&(1<<-f)-1,C>>=-f,f+=m;f>0;x=256*x+h[u+o],o+=t,f-=8);if(0===C)C=1-n;else{if(C===e)return x?NaN:1/0*(p?-1:1);x+=Math.pow(2,m),C-=n}return(p?-1:1)*x*Math.pow(2,C-m)},v.write=function(h,u,y,m,g,C){var x,d,e,n=8*C-g-1,f=(1<<n)-1,o=f>>1,t=23===g?Math.pow(2,-24)-Math.pow(2,-77):0,p=m?0:C-1,w=m?1:-1,R=u<0||0===u&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(d=isNaN(u)?1:0,x=f):(x=Math.floor(Math.log(u)/Math.LN2),u*(e=Math.pow(2,-x))<1&&(x--,e*=2),(u+=x+o>=1?t/e:t*Math.pow(2,1-o))*e>=2&&(x++,e/=2),x+o>=f?(d=0,x=f):x+o>=1?(d=(u*e-1)*Math.pow(2,g),x+=o):(d=u*Math.pow(2,o-1)*Math.pow(2,g),x=0));g>=8;h[y+p]=255&d,p+=w,d/=256,g-=8);for(x=x<<g|d,n+=g;n>0;h[y+p]=255&x,p+=w,x/=256,n-=8);h[y+p-w]|=128*R}},"./node_modules/indexof/index.js":
/*!***************************************!*\
                !*** ./node_modules/indexof/index.js ***!
                \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=[].indexOf;P.exports=function(u,y){if(h)return u.indexOf(y);for(var m=0;m<u.length;++m)if(u[m]===y)return m;return-1}},"./node_modules/isarray/index.js":
/*!***************************************!*\
                !*** ./node_modules/isarray/index.js ***!
                \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h={}.toString;P.exports=Array.isArray||function(u){return"[object Array]"==h.call(u)}},"./node_modules/js-binarypack/lib/binarypack.js":
/*!******************************************************!*\
                !*** ./node_modules/js-binarypack/lib/binarypack.js ***!
                \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./bufferbuilder */
"./node_modules/js-binarypack/lib/bufferbuilder.js").BufferBuilder,y=h(
/*! ./bufferbuilder */
"./node_modules/js-binarypack/lib/bufferbuilder.js").binaryFeatures;function g(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function C(){this.bufferBuilder=new u}function x(e){var n=e.charCodeAt(0);return n<=2047?"00":n<=65535?"000":n<=2097151?"0000":n<=67108863?"00000":"000000"}P.exports={unpack:function(e){return new g(e).unpack()},pack:function(e){var n=new C;return n.pack(e),n.getBuffer()}},g.prototype.unpack=function(){var o,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((o=160^e)<=15)return this.unpack_raw(o);if((o=176^e)<=15)return this.unpack_string(o);if((o=144^e)<=15)return this.unpack_array(o);if((o=128^e)<=15)return this.unpack_map(o);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return o=this.unpack_uint16(),this.unpack_string(o);case 217:return o=this.unpack_uint32(),this.unpack_string(o);case 218:return o=this.unpack_uint16(),this.unpack_raw(o);case 219:return o=this.unpack_uint32(),this.unpack_raw(o);case 220:return o=this.unpack_uint16(),this.unpack_array(o);case 221:return o=this.unpack_uint32(),this.unpack_array(o);case 222:return o=this.unpack_uint16(),this.unpack_map(o);case 223:return o=this.unpack_uint32(),this.unpack_map(o)}},g.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},g.prototype.unpack_uint16=function(){var e=this.read(2),n=256*(255&e[0])+(255&e[1]);return this.index+=2,n},g.prototype.unpack_uint32=function(){var e=this.read(4),n=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,n},g.prototype.unpack_uint64=function(){var e=this.read(8),n=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,n},g.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},g.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},g.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},g.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},g.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n},g.prototype.unpack_string=function(e){for(var t,p,n=this.read(e),f=0,o="";f<e;)(t=n[f])<128?(o+=String.fromCharCode(t),f++):(192^t)<32?(p=(192^t)<<6|63&n[f+1],o+=String.fromCharCode(p),f+=2):(p=(15&t)<<12|(63&n[f+1])<<6|63&n[f+2],o+=String.fromCharCode(p),f+=3);return this.index+=e,o},g.prototype.unpack_array=function(e){for(var n=new Array(e),f=0;f<e;f++)n[f]=this.unpack();return n},g.prototype.unpack_map=function(e){for(var n={},f=0;f<e;f++){var o=this.unpack(),t=this.unpack();n[o]=t}return n},g.prototype.unpack_float=function(){var e=this.unpack_uint32();return(e>>31?-1:1)*(8388607&e|8388608)*Math.pow(2,(e>>23&255)-127-23)},g.prototype.unpack_double=function(){var e=this.unpack_uint32(),n=this.unpack_uint32(),o=(e>>20&2047)-1023;return(e>>31?-1:1)*((1048575&e|1048576)*Math.pow(2,o-20)+n*Math.pow(2,o-52))},g.prototype.read=function(e){var n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")},C.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},C.prototype.pack=function(e){var n=typeof e;if("string"==n)this.pack_string(e);else if("number"==n)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==n)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"==n)this.bufferBuilder.append(192);else{if("object"!=n)throw new Error('Type "'+n+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var f=e.constructor;if(f==Array)this.pack_array(e);else if(f==Blob||f==File)this.pack_bin(e);else if(f==ArrayBuffer)this.pack_bin(y.useArrayBufferView?new Uint8Array(e):e);else if("BYTES_PER_ELEMENT"in e)this.pack_bin(y.useArrayBufferView?new Uint8Array(e.buffer):e.buffer);else if(f==Object)this.pack_object(e);else if(f==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+f.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},C.prototype.pack_bin=function(e){var n=e.length||e.byteLength||e.size;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this.bufferBuilder.append(218),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(n)}this.bufferBuilder.append(e)},C.prototype.pack_string=function(e){var n=function d(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,x).length}(e);if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this.bufferBuilder.append(216),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(n)}this.bufferBuilder.append(e)},C.prototype.pack_array=function(e){var n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this.bufferBuilder.append(220),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(n)}for(var f=0;f<n;f++)this.pack(e[f])},C.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(255&e);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-0x8000000000000000<=e&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(0<=e&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},C.prototype.pack_double=function(e){var n=0;e<0&&(n=1,e=-e);var f=Math.floor(Math.log(e)/Math.LN2),o=e/Math.pow(2,f)-1,t=Math.floor(o*Math.pow(2,52)),p=Math.pow(2,32),w=n<<31|f+1023<<20|t/p&1048575,R=t%p;this.bufferBuilder.append(203),this.pack_int32(w),this.pack_int32(R)},C.prototype.pack_object=function(e){var f=Object.keys(e).length;if(f<=15)this.pack_uint8(128+f);else if(f<=65535)this.bufferBuilder.append(222),this.pack_uint16(f);else{if(!(f<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(f)}for(var o in e)e.hasOwnProperty(o)&&(this.pack(o),this.pack(e[o]))},C.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},C.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},C.prototype.pack_uint32=function(e){var n=4294967295&e;this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},C.prototype.pack_uint64=function(e){var n=e/Math.pow(2,32),f=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n),this.bufferBuilder.append((4278190080&f)>>>24),this.bufferBuilder.append((16711680&f)>>>16),this.bufferBuilder.append((65280&f)>>>8),this.bufferBuilder.append(255&f)},C.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},C.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},C.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},C.prototype.pack_int64=function(e){var n=Math.floor(e/Math.pow(2,32)),f=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n),this.bufferBuilder.append((4278190080&f)>>>24),this.bufferBuilder.append((16711680&f)>>>16),this.bufferBuilder.append((65280&f)>>>8),this.bufferBuilder.append(255&f)}},"./node_modules/js-binarypack/lib/bufferbuilder.js":
/*!*********************************************************!*\
                !*** ./node_modules/js-binarypack/lib/bufferbuilder.js ***!
                \*********************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h={};h.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),h.useArrayBufferView=!h.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch{return!0}}(),P.exports.binaryFeatures=h;var u=P.exports.BlobBuilder;function y(){this._pieces=[],this._parts=[]}typeof window<"u"&&(u=P.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),y.prototype.append=function(m){"number"==typeof m?this._pieces.push(m):(this.flush(),this._parts.push(m))},y.prototype.flush=function(){if(this._pieces.length>0){var m=new Uint8Array(this._pieces);h.useArrayBufferView||(m=m.buffer),this._parts.push(m),this._pieces=[]}},y.prototype.getBuffer=function(){if(this.flush(),h.useBlobBuilder){for(var m=new u,g=0,C=this._parts.length;g<C;g++)m.append(this._parts[g]);return m.getBlob()}return new Blob(this._parts)},P.exports.BufferBuilder=y},"./node_modules/ms/index.js":
/*!**********************************!*\
                !*** ./node_modules/ms/index.js ***!
                \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=1e3,u=60*h,y=60*u,m=24*y;function e(n,f,o){if(!(n<f))return n<1.5*f?Math.floor(n/f)+" "+o:Math.ceil(n/f)+" "+o+"s"}P.exports=function(n,f){f=f||{};var o=typeof n;if("string"===o&&n.length>0)return function C(n){if(!((n=String(n)).length>100)){var f=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(f){var o=parseFloat(f[1]);switch((f[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*m;case"hours":case"hour":case"hrs":case"hr":case"h":return o*y;case"minutes":case"minute":case"mins":case"min":case"m":return o*u;case"seconds":case"second":case"secs":case"sec":case"s":return o*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(n);if("number"===o&&!1===isNaN(n))return f.long?function d(n){return e(n,m,"day")||e(n,y,"hour")||e(n,u,"minute")||e(n,h,"second")||n+" ms"}(n):function x(n){return n>=m?Math.round(n/m)+"d":n>=y?Math.round(n/y)+"h":n>=u?Math.round(n/u)+"m":n>=h?Math.round(n/h)+"s":n+"ms"}(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":
/*!*********************************************************************!*\
                !*** ./node_modules/node-libs-browser/node_modules/buffer/index.js ***!
                \*********************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";(function(u){var y=h(
/*! base64-js */
"./node_modules/base64-js/index.js"),m=h(
/*! ieee754 */
"./node_modules/ieee754/index.js"),g=h(
/*! isarray */
"./node_modules/node-libs-browser/node_modules/isarray/index.js");function x(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(S,i){if(x()<i)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(S=new Uint8Array(i)).__proto__=e.prototype:(null===S&&(S=new e(i)),S.length=i),S}function e(S,i,s){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(S,i,s);if("number"==typeof S){if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return t(this,S)}return n(this,S,i,s)}function n(S,i,s,k){if("number"==typeof i)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer?function R(S,i,s,k){if(s<0||i.byteLength<s)throw new RangeError("'offset' is out of bounds");if(i.byteLength<s+(k||0))throw new RangeError("'length' is out of bounds");return i=void 0===s&&void 0===k?new Uint8Array(i):void 0===k?new Uint8Array(i,s):new Uint8Array(i,s,k),e.TYPED_ARRAY_SUPPORT?(S=i).__proto__=e.prototype:S=w(S,i),S}(S,i,s,k):"string"==typeof i?function p(S,i,s){if(("string"!=typeof s||""===s)&&(s="utf8"),!e.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var k=0|N(i,s),F=(S=d(S,k)).write(i,s);return F!==k&&(S=S.slice(0,F)),S}(S,i,s):function I(S,i){if(e.isBuffer(i)){var s=0|b(i.length);return 0===(S=d(S,s)).length||i.copy(S,0,0,s),S}if(i){if(typeof ArrayBuffer<"u"&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||function Ue(S){return S!=S}(i.length)?d(S,0):w(S,i);if("Buffer"===i.type&&g(i.data))return w(S,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(S,i)}function f(S){if("number"!=typeof S)throw new TypeError('"size" argument must be a number');if(S<0)throw new RangeError('"size" argument must not be negative')}function t(S,i){if(f(i),S=d(S,i<0?0:0|b(i)),!e.TYPED_ARRAY_SUPPORT)for(var s=0;s<i;++s)S[s]=0;return S}function w(S,i){var s=i.length<0?0:0|b(i.length);S=d(S,s);for(var k=0;k<s;k+=1)S[k]=255&i[k];return S}function b(S){if(S>=x())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x().toString(16)+" bytes");return 0|S}function N(S,i){if(e.isBuffer(S))return S.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(S)||S instanceof ArrayBuffer))return S.byteLength;"string"!=typeof S&&(S=""+S);var s=S.length;if(0===s)return 0;for(var k=!1;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":case void 0:return re(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return me(S).length;default:if(k)return re(S).length;i=(""+i).toLowerCase(),k=!0}}function a(S,i,s){var k=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0)||(s>>>=0)<=(i>>>=0))return"";for(S||(S="utf8");;)switch(S){case"hex":return Fe(this,i,s);case"utf8":case"utf-8":return z(this,i,s);case"ascii":return ge(this,i,s);case"latin1":case"binary":return Ne(this,i,s);case"base64":return X(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,i,s);default:if(k)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),k=!0}}function l(S,i,s){var k=S[i];S[i]=S[s],S[s]=k}function E(S,i,s,k,F){if(0===S.length)return-1;if("string"==typeof s?(k=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,isNaN(s)&&(s=F?0:S.length-1),s<0&&(s=S.length+s),s>=S.length){if(F)return-1;s=S.length-1}else if(s<0){if(!F)return-1;s=0}if("string"==typeof i&&(i=e.from(i,k)),e.isBuffer(i))return 0===i.length?-1:T(S,i,s,k,F);if("number"==typeof i)return i&=255,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?F?Uint8Array.prototype.indexOf.call(S,i,s):Uint8Array.prototype.lastIndexOf.call(S,i,s):T(S,[i],s,k,F);throw new TypeError("val must be string, number or Buffer")}function T(S,i,s,k,F){var K,D=1,U=S.length,Y=i.length;if(void 0!==k&&("ucs2"===(k=String(k).toLowerCase())||"ucs-2"===k||"utf16le"===k||"utf-16le"===k)){if(S.length<2||i.length<2)return-1;D=2,U/=2,Y/=2,s/=2}function J(Re,Oe){return 1===D?Re[Oe]:Re.readUInt16BE(Oe*D)}if(F){var oe=-1;for(K=s;K<U;K++)if(J(S,K)===J(i,-1===oe?0:K-oe)){if(-1===oe&&(oe=K),K-oe+1===Y)return oe*D}else-1!==oe&&(K-=K-oe),oe=-1}else for(s+Y>U&&(s=U-Y),K=s;K>=0;K--){for(var Q=!0,Ce=0;Ce<Y;Ce++)if(J(S,K+Ce)!==J(i,Ce)){Q=!1;break}if(Q)return K}return-1}function B(S,i,s,k){s=Number(s)||0;var F=S.length-s;k?(k=Number(k))>F&&(k=F):k=F;var D=i.length;if(D%2!=0)throw new TypeError("Invalid hex string");k>D/2&&(k=D/2);for(var U=0;U<k;++U){var Y=parseInt(i.substr(2*U,2),16);if(isNaN(Y))return U;S[s+U]=Y}return U}function j(S,i,s,k){return ce(re(i,S.length-s),S,s,k)}function V(S,i,s,k){return ce(function ue(S){for(var i=[],s=0;s<S.length;++s)i.push(255&S.charCodeAt(s));return i}(i),S,s,k)}function L(S,i,s,k){return V(S,i,s,k)}function _(S,i,s,k){return ce(me(i),S,s,k)}function G(S,i,s,k){return ce(function je(S,i){for(var s,k,D=[],U=0;U<S.length&&!((i-=2)<0);++U)k=(s=S.charCodeAt(U))>>8,D.push(s%256),D.push(k);return D}(i,S.length-s),S,s,k)}function X(S,i,s){return y.fromByteArray(0===i&&s===S.length?S:S.slice(i,s))}function z(S,i,s){s=Math.min(S.length,s);for(var k=[],F=i;F<s;){var J,K,oe,Q,D=S[F],U=null,Y=D>239?4:D>223?3:D>191?2:1;if(F+Y<=s)switch(Y){case 1:D<128&&(U=D);break;case 2:128==(192&(J=S[F+1]))&&(Q=(31&D)<<6|63&J)>127&&(U=Q);break;case 3:K=S[F+2],128==(192&(J=S[F+1]))&&128==(192&K)&&(Q=(15&D)<<12|(63&J)<<6|63&K)>2047&&(Q<55296||Q>57343)&&(U=Q);break;case 4:K=S[F+2],oe=S[F+3],128==(192&(J=S[F+1]))&&128==(192&K)&&128==(192&oe)&&(Q=(15&D)<<18|(63&J)<<12|(63&K)<<6|63&oe)>65535&&Q<1114112&&(U=Q)}null===U?(U=65533,Y=1):U>65535&&(k.push((U-=65536)>>>10&1023|55296),U=56320|1023&U),k.push(U),F+=Y}return function ae(S){var i=S.length;if(i<=H)return String.fromCharCode.apply(String,S);for(var s="",k=0;k<i;)s+=String.fromCharCode.apply(String,S.slice(k,k+=H));return s}(k)}v.Buffer=e,v.SlowBuffer=function O(S){return+S!=S&&(S=0),e.alloc(+S)},v.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==u.TYPED_ARRAY_SUPPORT?u.TYPED_ARRAY_SUPPORT:function C(){try{var S=new Uint8Array(1);return S.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===S.foo()&&"function"==typeof S.subarray&&0===S.subarray(1,1).byteLength}catch{return!1}}(),v.kMaxLength=x(),e.poolSize=8192,e._augment=function(S){return S.__proto__=e.prototype,S},e.from=function(S,i,s){return n(null,S,i,s)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(S,i,s){return function o(S,i,s,k){return f(i),i<=0?d(S,i):void 0!==s?"string"==typeof k?d(S,i).fill(s,k):d(S,i).fill(s):d(S,i)}(null,S,i,s)},e.allocUnsafe=function(S){return t(null,S)},e.allocUnsafeSlow=function(S){return t(null,S)},e.isBuffer=function(i){return!(null==i||!i._isBuffer)},e.compare=function(i,s){if(!e.isBuffer(i)||!e.isBuffer(s))throw new TypeError("Arguments must be Buffers");if(i===s)return 0;for(var k=i.length,F=s.length,D=0,U=Math.min(k,F);D<U;++D)if(i[D]!==s[D]){k=i[D],F=s[D];break}return k<F?-1:F<k?1:0},e.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(i,s){if(!g(i))throw new TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return e.alloc(0);var k;if(void 0===s)for(s=0,k=0;k<i.length;++k)s+=i[k].length;var F=e.allocUnsafe(s),D=0;for(k=0;k<i.length;++k){var U=i[k];if(!e.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(F,D),D+=U.length}return F},e.byteLength=N,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var i=this.length;if(i%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<i;s+=2)l(this,s,s+1);return this},e.prototype.swap32=function(){var i=this.length;if(i%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<i;s+=4)l(this,s,s+3),l(this,s+1,s+2);return this},e.prototype.swap64=function(){var i=this.length;if(i%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<i;s+=8)l(this,s,s+7),l(this,s+1,s+6),l(this,s+2,s+5),l(this,s+3,s+4);return this},e.prototype.toString=function(){var i=0|this.length;return 0===i?"":0===arguments.length?z(this,0,i):a.apply(this,arguments)},e.prototype.equals=function(i){if(!e.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i||0===e.compare(this,i)},e.prototype.inspect=function(){var i="",s=v.INSPECT_MAX_BYTES;return this.length>0&&(i=this.toString("hex",0,s).match(/.{2}/g).join(" "),this.length>s&&(i+=" ... ")),"<Buffer "+i+">"},e.prototype.compare=function(i,s,k,F,D){if(!e.isBuffer(i))throw new TypeError("Argument must be a Buffer");if(void 0===s&&(s=0),void 0===k&&(k=i?i.length:0),void 0===F&&(F=0),void 0===D&&(D=this.length),s<0||k>i.length||F<0||D>this.length)throw new RangeError("out of range index");if(F>=D&&s>=k)return 0;if(F>=D)return-1;if(s>=k)return 1;if(this===i)return 0;for(var U=(D>>>=0)-(F>>>=0),Y=(k>>>=0)-(s>>>=0),J=Math.min(U,Y),K=this.slice(F,D),oe=i.slice(s,k),Q=0;Q<J;++Q)if(K[Q]!==oe[Q]){U=K[Q],Y=oe[Q];break}return U<Y?-1:Y<U?1:0},e.prototype.includes=function(i,s,k){return-1!==this.indexOf(i,s,k)},e.prototype.indexOf=function(i,s,k){return E(this,i,s,k,!0)},e.prototype.lastIndexOf=function(i,s,k){return E(this,i,s,k,!1)},e.prototype.write=function(i,s,k,F){if(void 0===s)F="utf8",k=this.length,s=0;else if(void 0===k&&"string"==typeof s)F=s,k=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s|=0,isFinite(k)?(k|=0,void 0===F&&(F="utf8")):(F=k,k=void 0)}var D=this.length-s;if((void 0===k||k>D)&&(k=D),i.length>0&&(k<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");for(var U=!1;;)switch(F){case"hex":return B(this,i,s,k);case"utf8":case"utf-8":return j(this,i,s,k);case"ascii":return V(this,i,s,k);case"latin1":case"binary":return L(this,i,s,k);case"base64":return _(this,i,s,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,i,s,k);default:if(U)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),U=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;function ge(S,i,s){var k="";s=Math.min(S.length,s);for(var F=i;F<s;++F)k+=String.fromCharCode(127&S[F]);return k}function Ne(S,i,s){var k="";s=Math.min(S.length,s);for(var F=i;F<s;++F)k+=String.fromCharCode(S[F]);return k}function Fe(S,i,s){var k=S.length;(!i||i<0)&&(i=0),(!s||s<0||s>k)&&(s=k);for(var F="",D=i;D<s;++D)F+=De(S[D]);return F}function Pe(S,i,s){for(var k=S.slice(i,s),F="",D=0;D<k.length;D+=2)F+=String.fromCharCode(k[D]+256*k[D+1]);return F}function ne(S,i,s){if(S%1!=0||S<0)throw new RangeError("offset is not uint");if(S+i>s)throw new RangeError("Trying to access beyond buffer length")}function q(S,i,s,k,F,D){if(!e.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>F||i<D)throw new RangeError('"value" argument is out of bounds');if(s+k>S.length)throw new RangeError("Index out of range")}function be(S,i,s,k){i<0&&(i=65535+i+1);for(var F=0,D=Math.min(S.length-s,2);F<D;++F)S[s+F]=(i&255<<8*(k?F:1-F))>>>8*(k?F:1-F)}function xe(S,i,s,k){i<0&&(i=4294967295+i+1);for(var F=0,D=Math.min(S.length-s,4);F<D;++F)S[s+F]=i>>>8*(k?F:3-F)&255}function Ie(S,i,s,k,F,D){if(s+k>S.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function Be(S,i,s,k,F){return F||Ie(S,0,s,4),m.write(S,i,s,k,23,4),s+4}function Ee(S,i,s,k,F){return F||Ie(S,0,s,8),m.write(S,i,s,k,52,8),s+8}e.prototype.slice=function(i,s){var F,k=this.length;if((i=~~i)<0?(i+=k)<0&&(i=0):i>k&&(i=k),(s=void 0===s?k:~~s)<0?(s+=k)<0&&(s=0):s>k&&(s=k),s<i&&(s=i),e.TYPED_ARRAY_SUPPORT)(F=this.subarray(i,s)).__proto__=e.prototype;else{var D=s-i;F=new e(D,void 0);for(var U=0;U<D;++U)F[U]=this[U+i]}return F},e.prototype.readUIntLE=function(i,s,k){i|=0,s|=0,k||ne(i,s,this.length);for(var F=this[i],D=1,U=0;++U<s&&(D*=256);)F+=this[i+U]*D;return F},e.prototype.readUIntBE=function(i,s,k){i|=0,s|=0,k||ne(i,s,this.length);for(var F=this[i+--s],D=1;s>0&&(D*=256);)F+=this[i+--s]*D;return F},e.prototype.readUInt8=function(i,s){return s||ne(i,1,this.length),this[i]},e.prototype.readUInt16LE=function(i,s){return s||ne(i,2,this.length),this[i]|this[i+1]<<8},e.prototype.readUInt16BE=function(i,s){return s||ne(i,2,this.length),this[i]<<8|this[i+1]},e.prototype.readUInt32LE=function(i,s){return s||ne(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},e.prototype.readUInt32BE=function(i,s){return s||ne(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},e.prototype.readIntLE=function(i,s,k){i|=0,s|=0,k||ne(i,s,this.length);for(var F=this[i],D=1,U=0;++U<s&&(D*=256);)F+=this[i+U]*D;return F>=(D*=128)&&(F-=Math.pow(2,8*s)),F},e.prototype.readIntBE=function(i,s,k){i|=0,s|=0,k||ne(i,s,this.length);for(var F=s,D=1,U=this[i+--F];F>0&&(D*=256);)U+=this[i+--F]*D;return U>=(D*=128)&&(U-=Math.pow(2,8*s)),U},e.prototype.readInt8=function(i,s){return s||ne(i,1,this.length),128&this[i]?-1*(255-this[i]+1):this[i]},e.prototype.readInt16LE=function(i,s){s||ne(i,2,this.length);var k=this[i]|this[i+1]<<8;return 32768&k?4294901760|k:k},e.prototype.readInt16BE=function(i,s){s||ne(i,2,this.length);var k=this[i+1]|this[i]<<8;return 32768&k?4294901760|k:k},e.prototype.readInt32LE=function(i,s){return s||ne(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},e.prototype.readInt32BE=function(i,s){return s||ne(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},e.prototype.readFloatLE=function(i,s){return s||ne(i,4,this.length),m.read(this,i,!0,23,4)},e.prototype.readFloatBE=function(i,s){return s||ne(i,4,this.length),m.read(this,i,!1,23,4)},e.prototype.readDoubleLE=function(i,s){return s||ne(i,8,this.length),m.read(this,i,!0,52,8)},e.prototype.readDoubleBE=function(i,s){return s||ne(i,8,this.length),m.read(this,i,!1,52,8)},e.prototype.writeUIntLE=function(i,s,k,F){i=+i,s|=0,k|=0,F||q(this,i,s,k,Math.pow(2,8*k)-1,0);var U=1,Y=0;for(this[s]=255&i;++Y<k&&(U*=256);)this[s+Y]=i/U&255;return s+k},e.prototype.writeUIntBE=function(i,s,k,F){i=+i,s|=0,k|=0,F||q(this,i,s,k,Math.pow(2,8*k)-1,0);var U=k-1,Y=1;for(this[s+U]=255&i;--U>=0&&(Y*=256);)this[s+U]=i/Y&255;return s+k},e.prototype.writeUInt8=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,1,255,0),e.TYPED_ARRAY_SUPPORT||(i=Math.floor(i)),this[s]=255&i,s+1},e.prototype.writeUInt16LE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[s]=255&i,this[s+1]=i>>>8):be(this,i,s,!0),s+2},e.prototype.writeUInt16BE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[s]=i>>>8,this[s+1]=255&i):be(this,i,s,!1),s+2},e.prototype.writeUInt32LE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=255&i):xe(this,i,s,!0),s+4},e.prototype.writeUInt32BE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=255&i):xe(this,i,s,!1),s+4},e.prototype.writeIntLE=function(i,s,k,F){if(i=+i,s|=0,!F){var D=Math.pow(2,8*k-1);q(this,i,s,k,D-1,-D)}var U=0,Y=1,J=0;for(this[s]=255&i;++U<k&&(Y*=256);)i<0&&0===J&&0!==this[s+U-1]&&(J=1),this[s+U]=(i/Y|0)-J&255;return s+k},e.prototype.writeIntBE=function(i,s,k,F){if(i=+i,s|=0,!F){var D=Math.pow(2,8*k-1);q(this,i,s,k,D-1,-D)}var U=k-1,Y=1,J=0;for(this[s+U]=255&i;--U>=0&&(Y*=256);)i<0&&0===J&&0!==this[s+U+1]&&(J=1),this[s+U]=(i/Y|0)-J&255;return s+k},e.prototype.writeInt8=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,1,127,-128),e.TYPED_ARRAY_SUPPORT||(i=Math.floor(i)),i<0&&(i=255+i+1),this[s]=255&i,s+1},e.prototype.writeInt16LE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[s]=255&i,this[s+1]=i>>>8):be(this,i,s,!0),s+2},e.prototype.writeInt16BE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[s]=i>>>8,this[s+1]=255&i):be(this,i,s,!1),s+2},e.prototype.writeInt32LE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[s]=255&i,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24):xe(this,i,s,!0),s+4},e.prototype.writeInt32BE=function(i,s,k){return i=+i,s|=0,k||q(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),e.TYPED_ARRAY_SUPPORT?(this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=255&i):xe(this,i,s,!1),s+4},e.prototype.writeFloatLE=function(i,s,k){return Be(this,i,s,!0,k)},e.prototype.writeFloatBE=function(i,s,k){return Be(this,i,s,!1,k)},e.prototype.writeDoubleLE=function(i,s,k){return Ee(this,i,s,!0,k)},e.prototype.writeDoubleBE=function(i,s,k){return Ee(this,i,s,!1,k)},e.prototype.copy=function(i,s,k,F){if(k||(k=0),!F&&0!==F&&(F=this.length),s>=i.length&&(s=i.length),s||(s=0),F>0&&F<k&&(F=k),F===k||0===i.length||0===this.length)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("sourceStart out of bounds");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),i.length-s<F-k&&(F=i.length-s+k);var U,D=F-k;if(this===i&&k<s&&s<F)for(U=D-1;U>=0;--U)i[U+s]=this[U+k];else if(D<1e3||!e.TYPED_ARRAY_SUPPORT)for(U=0;U<D;++U)i[U+s]=this[U+k];else Uint8Array.prototype.set.call(i,this.subarray(k,k+D),s);return D},e.prototype.fill=function(i,s,k,F){if("string"==typeof i){if("string"==typeof s?(F=s,s=0,k=this.length):"string"==typeof k&&(F=k,k=this.length),1===i.length){var D=i.charCodeAt(0);D<256&&(i=D)}if(void 0!==F&&"string"!=typeof F)throw new TypeError("encoding must be a string");if("string"==typeof F&&!e.isEncoding(F))throw new TypeError("Unknown encoding: "+F)}else"number"==typeof i&&(i&=255);if(s<0||this.length<s||this.length<k)throw new RangeError("Out of range index");if(k<=s)return this;var U;if(s>>>=0,k=void 0===k?this.length:k>>>0,i||(i=0),"number"==typeof i)for(U=s;U<k;++U)this[U]=i;else{var Y=e.isBuffer(i)?i:re(new e(i,F).toString()),J=Y.length;for(U=0;U<k-s;++U)this[U+s]=Y[U%J]}return this};var _e=/[^+\/0-9A-Za-z-_]/g;function De(S){return S<16?"0"+S.toString(16):S.toString(16)}function re(S,i){i=i||1/0;for(var s,k=S.length,F=null,D=[],U=0;U<k;++U){if((s=S.charCodeAt(U))>55295&&s<57344){if(!F){if(s>56319){(i-=3)>-1&&D.push(239,191,189);continue}if(U+1===k){(i-=3)>-1&&D.push(239,191,189);continue}F=s;continue}if(s<56320){(i-=3)>-1&&D.push(239,191,189),F=s;continue}s=65536+(F-55296<<10|s-56320)}else F&&(i-=3)>-1&&D.push(239,191,189);if(F=null,s<128){if((i-=1)<0)break;D.push(s)}else if(s<2048){if((i-=2)<0)break;D.push(s>>6|192,63&s|128)}else if(s<65536){if((i-=3)<0)break;D.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;D.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return D}function me(S){return y.toByteArray(function Me(S){if((S=function pe(S){return S.trim?S.trim():S.replace(/^\s+|\s+$/g,"")}(S).replace(_e,"")).length<2)return"";for(;S.length%4!=0;)S+="=";return S}(S))}function ce(S,i,s,k){for(var F=0;F<k&&!(F+s>=i.length||F>=S.length);++F)i[F+s]=S[F];return F}}).call(this,h(
/*! ./../../../webpack/buildin/global.js */
"./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/isarray/index.js":
/*!**********************************************************************!*\
                !*** ./node_modules/node-libs-browser/node_modules/isarray/index.js ***!
                \**********************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h={}.toString;P.exports=Array.isArray||function(u){return"[object Array]"==h.call(u)}},"./node_modules/object-sizeof/byte_size.js":
/*!*************************************************!*\
                !*** ./node_modules/object-sizeof/byte_size.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports={STRING:2,BOOLEAN:4,NUMBER:8}},"./node_modules/object-sizeof/index.js":
/*!*********************************************!*\
                !*** ./node_modules/object-sizeof/index.js ***!
                \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";var u=h(
/*! ./byte_size */
"./node_modules/object-sizeof/byte_size.js"),y=h(
/*! buffer/ */
"./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer;function g(d,e){if(null==e)return 0;for(var n=0,f=function m(d){const e=[];for(var n in d)e.push(n);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(d);Array.prototype.push.apply(e,f)}return e}(e),o=0;o<f.length;o++){var t=f[o];if("object"==typeof e[t]&&null!==e[t]){if(d.has(e[t]))continue;d.add(e[t])}n+=C(d)(t);try{n+=C(d)(e[t])}catch(p){p instanceof RangeError&&(n=0)}}return n}function C(d){return function(n){if(y.isBuffer(n))return n.length;switch(typeof n){case"string":return n.length*u.STRING;case"boolean":return u.BOOLEAN;case"number":return u.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(n)?Symbol.keyFor(n).length*u.STRING:(n.toString().length-8)*u.STRING;case"object":return Array.isArray(n)?n.map(C(d)).reduce(function(t,p){return t+p},0):g(d,n);default:return 0}}}P.exports=function x(d){return C(new WeakSet)(d)}},"./node_modules/parseqs/index.js":
/*!***************************************!*\
                !*** ./node_modules/parseqs/index.js ***!
                \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){v.encode=function(h){var u="";for(var y in h)h.hasOwnProperty(y)&&(u.length&&(u+="&"),u+=encodeURIComponent(y)+"="+encodeURIComponent(h[y]));return u},v.decode=function(h){for(var u={},y=h.split("&"),m=0,g=y.length;m<g;m++){var C=y[m].split("=");u[decodeURIComponent(C[0])]=decodeURIComponent(C[1])}return u}},"./node_modules/parseuri/index.js":
/*!****************************************!*\
                !*** ./node_modules/parseuri/index.js ***!
                \****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];P.exports=function(C){var x=C,d=C.indexOf("["),e=C.indexOf("]");-1!=d&&-1!=e&&(C=C.substring(0,d)+C.substring(d,e).replace(/:/g,";")+C.substring(e,C.length));for(var n=h.exec(C||""),f={},o=14;o--;)f[u[o]]=n[o]||"";return-1!=d&&-1!=e&&(f.source=x,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=function y(g,C){var d=C.replace(/\/{2,9}/g,"/").split("/");return("/"==C.substr(0,1)||0===C.length)&&d.splice(0,1),"/"==C.substr(C.length-1,1)&&d.splice(d.length-1,1),d}(0,f.path),f.queryKey=function m(g,C){var x={};return C.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(d,e,n){e&&(x[e]=n)}),x}(0,f.query),f}},"./node_modules/process/browser.js":
/*!*****************************************!*\
                !*** ./node_modules/process/browser.js ***!
                \*****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var u,y,h=P.exports={};function m(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}function C(R){if(u===setTimeout)return setTimeout(R,0);if((u===m||!u)&&setTimeout)return u=setTimeout,setTimeout(R,0);try{return u(R,0)}catch{try{return u.call(null,R,0)}catch{return u.call(this,R,0)}}}!function(){try{u="function"==typeof setTimeout?setTimeout:m}catch{u=m}try{y="function"==typeof clearTimeout?clearTimeout:g}catch{y=g}}();var n,d=[],e=!1,f=-1;function o(){!e||!n||(e=!1,n.length?d=n.concat(d):f=-1,d.length&&t())}function t(){if(!e){var R=C(o);e=!0;for(var I=d.length;I;){for(n=d,d=[];++f<I;)n&&n[f].run();f=-1,I=d.length}n=null,e=!1,function x(R){if(y===clearTimeout)return clearTimeout(R);if((y===g||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(R);try{return y(R)}catch{try{return y.call(null,R)}catch{return y.call(this,R)}}}(R)}}function p(R,I){this.fun=R,this.array=I}function w(){}h.nextTick=function(R){var I=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)I[b-1]=arguments[b];d.push(new p(R,I)),1===d.length&&!e&&C(t)},p.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=w,h.addListener=w,h.once=w,h.off=w,h.removeListener=w,h.removeAllListeners=w,h.emit=w,h.prependListener=w,h.prependOnceListener=w,h.listeners=function(R){return[]},h.binding=function(R){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(R){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},"./node_modules/query-string/index.js":
/*!********************************************!*\
                !*** ./node_modules/query-string/index.js ***!
                \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";const u=h(
/*! strict-uri-encode */
"./node_modules/strict-uri-encode/index.js"),y=h(
/*! decode-uri-component */
"./node_modules/decode-uri-component/index.js"),m=h(
/*! split-on-first */
"./node_modules/split-on-first/index.js"),g=h(
/*! filter-obj */
"./node_modules/filter-obj/index.js");function e(b){if("string"!=typeof b||1!==b.length)throw new TypeError("arrayFormatSeparator must be single character string")}function n(b,O){return O.encode?O.strict?u(b):encodeURIComponent(b):b}function f(b,O){return O.decode?y(b):b}function o(b){return Array.isArray(b)?b.sort():"object"==typeof b?o(Object.keys(b)).sort((O,N)=>Number(O)-Number(N)).map(O=>b[O]):b}function t(b){const O=b.indexOf("#");return-1!==O&&(b=b.slice(0,O)),b}function w(b){const O=(b=t(b)).indexOf("?");return-1===O?"":b.slice(O+1)}function R(b,O){return O.parseNumbers&&!Number.isNaN(Number(b))&&"string"==typeof b&&""!==b.trim()?b=Number(b):O.parseBooleans&&null!==b&&("true"===b.toLowerCase()||"false"===b.toLowerCase())&&(b="true"===b.toLowerCase()),b}function I(b,O){e((O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O)).arrayFormatSeparator);const N=function d(b){let O;switch(b.arrayFormat){case"index":return(N,a,l)=>{O=/\[(\d*)\]$/.exec(N),N=N.replace(/\[\d*\]$/,""),O?(void 0===l[N]&&(l[N]={}),l[N][O[1]]=a):l[N]=a};case"bracket":return(N,a,l)=>{O=/(\[\])$/.exec(N),l[N=N.replace(/\[\]$/,"")]=O?void 0!==l[N]?[].concat(l[N],a):[a]:a};case"comma":case"separator":return(N,a,l)=>{const E="string"==typeof a&&a.includes(b.arrayFormatSeparator),T="string"==typeof a&&!E&&f(a,b).includes(b.arrayFormatSeparator);a=T?f(a,b):a;const B=E||T?a.split(b.arrayFormatSeparator).map(j=>f(j,b)):null===a?a:f(a,b);l[N]=B};default:return(N,a,l)=>{l[N]=void 0!==l[N]?[].concat(l[N],a):a}}}(O),a=Object.create(null);if("string"!=typeof b||!(b=b.trim().replace(/^[?#&]/,"")))return a;for(const l of b.split("&")){if(""===l)continue;let[E,T]=m(O.decode?l.replace(/\+/g," "):l,"=");T=void 0===T?null:["comma","separator"].includes(O.arrayFormat)?T:f(T,O),N(f(E,O),T,a)}for(const l of Object.keys(a)){const E=a[l];if("object"==typeof E&&null!==E)for(const T of Object.keys(E))E[T]=R(E[T],O);else a[l]=R(E,O)}return!1===O.sort?a:(!0===O.sort?Object.keys(a).sort():Object.keys(a).sort(O.sort)).reduce((l,E)=>{const T=a[E];return l[E]=T&&"object"==typeof T&&!Array.isArray(T)?o(T):T,l},Object.create(null))}v.extract=w,v.parse=I,v.stringify=(b,O)=>{if(!b)return"";e((O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O)).arrayFormatSeparator);const N=T=>O.skipNull&&(b=>null==b)(b[T])||O.skipEmptyString&&""===b[T],a=function x(b){switch(b.arrayFormat){case"index":return O=>(N,a)=>{const l=N.length;return void 0===a||b.skipNull&&null===a||b.skipEmptyString&&""===a?N:null===a?[...N,[n(O,b),"[",l,"]"].join("")]:[...N,[n(O,b),"[",n(l,b),"]=",n(a,b)].join("")]};case"bracket":return O=>(N,a)=>void 0===a||b.skipNull&&null===a||b.skipEmptyString&&""===a?N:null===a?[...N,[n(O,b),"[]"].join("")]:[...N,[n(O,b),"[]=",n(a,b)].join("")];case"comma":case"separator":return O=>(N,a)=>null==a||0===a.length?N:0===N.length?[[n(O,b),"=",n(a,b)].join("")]:[[N,n(a,b)].join(b.arrayFormatSeparator)];default:return O=>(N,a)=>void 0===a||b.skipNull&&null===a||b.skipEmptyString&&""===a?N:null===a?[...N,n(O,b)]:[...N,[n(O,b),"=",n(a,b)].join("")]}}(O),l={};for(const T of Object.keys(b))N(T)||(l[T]=b[T]);const E=Object.keys(l);return!1!==O.sort&&E.sort(O.sort),E.map(T=>{const B=b[T];return void 0===B?"":null===B?n(T,O):Array.isArray(B)?B.reduce(a(T),[]).join("&"):n(T,O)+"="+n(B,O)}).filter(T=>T.length>0).join("&")},v.parseUrl=(b,O)=>{O=Object.assign({decode:!0},O);const[N,a]=m(b,"#");return Object.assign({url:N.split("?")[0]||"",query:I(w(b),O)},O&&O.parseFragmentIdentifier&&a?{fragmentIdentifier:f(a,O)}:{})},v.stringifyUrl=(b,O)=>{O=Object.assign({encode:!0,strict:!0},O);const N=t(b.url).split("?")[0]||"",a=v.extract(b.url),l=v.parse(a,{sort:!1}),E=Object.assign(l,b.query);let T=v.stringify(E,O);T&&(T=`?${T}`);let B=function p(b){let O="";const N=b.indexOf("#");return-1!==N&&(O=b.slice(N)),O}(b.url);return b.fragmentIdentifier&&(B=`#${n(b.fragmentIdentifier,O)}`),`${N}${T}${B}`},v.pick=(b,O,N)=>{N=Object.assign({parseFragmentIdentifier:!0},N);const{url:a,query:l,fragmentIdentifier:E}=v.parseUrl(b,N);return v.stringifyUrl({url:a,query:g(l,O),fragmentIdentifier:E},N)},v.exclude=(b,O,N)=>{const a=Array.isArray(O)?l=>!O.includes(l):(l,E)=>!O(l,E);return v.pick(b,a,N)}},"./node_modules/sdp-transform/lib/grammar.js":
/*!***************************************************!*\
                !*** ./node_modules/sdp-transform/lib/grammar.js ***!
                \***************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h=P.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(u){return u.encoding?"rtpmap:%d %s/%s/%s":u.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(u){return null!=u.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(u){return null!=u.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(u){return"extmap:%d"+(u.direction?"/%s":"%v")+(u["encrypt-uri"]?" %s":"%v")+" %s"+(u.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(u){return null!=u.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(u){var y="candidate:%s %d %s %d %s %d typ %s";return y+=null!=u.raddr?" raddr %s rport %d":"%v%v",y+=null!=u.tcptype?" tcptype %s":"%v",null!=u.generation&&(y+=" generation %d"),(y+=null!=u["network-id"]?" network-id %d":"%v")+(null!=u["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(u){var y="ssrc:%d";return null!=u.attribute&&(y+=" %s",null!=u.value&&(y+=":%s")),y}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(u){return null!=u.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(u){return u.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(u){return"imageattr:%s %s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(u){return"simulcast:%s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(u){return"ts-refclk:%s"+(null!=u.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(u){var y="mediaclk:";return y+=null!=u.id?"id=%s %s":"%v%s",y+=null!=u.mediaClockValue?"=%s":"",(y+=null!=u.rateNumerator?" rate=%s":"")+(null!=u.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(h).forEach(function(u){h[u].forEach(function(m){m.reg||(m.reg=/(.*)/),m.format||(m.format="%s")})})},"./node_modules/sdp-transform/lib/index.js":
/*!*************************************************!*\
                !*** ./node_modules/sdp-transform/lib/index.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./parser */
"./node_modules/sdp-transform/lib/parser.js"),y=h(
/*! ./writer */
"./node_modules/sdp-transform/lib/writer.js");v.write=y,v.parse=u.parse,v.parseParams=u.parseParams,v.parseFmtpConfig=u.parseFmtpConfig,v.parsePayloads=u.parsePayloads,v.parseRemoteCandidates=u.parseRemoteCandidates,v.parseImageAttributes=u.parseImageAttributes,v.parseSimulcastStreamList=u.parseSimulcastStreamList},"./node_modules/sdp-transform/lib/parser.js":
/*!**************************************************!*\
                !*** ./node_modules/sdp-transform/lib/parser.js ***!
                \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=function(d){return String(Number(d))===d?Number(d):d},m=function(d,e,n){var f=d.name&&d.names;d.push&&!e[d.push]?e[d.push]=[]:f&&!e[d.name]&&(e[d.name]={});var o=d.push?{}:f?e[d.name]:e;(function(d,e,n,f){if(f&&!n)e[f]=u(d[1]);else for(var o=0;o<n.length;o+=1)null!=d[o+1]&&(e[n[o]]=u(d[o+1]))})(n.match(d.reg),o,d.names,d.name),d.push&&e[d.push].push(o)},g=h(
/*! ./grammar */
"./node_modules/sdp-transform/lib/grammar.js"),C=RegExp.prototype.test.bind(/^([a-z])=(.*)/);v.parse=function(d){var e={},n=[],f=e;return d.split(/(\r\n|\r|\n)/).filter(C).forEach(function(o){var t=o[0],p=o.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),f=n[n.length-1]);for(var w=0;w<(g[t]||[]).length;w+=1){var R=g[t][w];if(R.reg.test(p))return m(R,f,p)}}),e.media=n,e};var x=function(d,e){var n=e.split(/=(.+)/,2);return 2===n.length?d[n[0]]=u(n[1]):1===n.length&&e.length>1&&(d[n[0]]=void 0),d};v.parseParams=function(d){return d.split(/;\s?/).reduce(x,{})},v.parseFmtpConfig=v.parseParams,v.parsePayloads=function(d){return d.toString().split(" ").map(Number)},v.parseRemoteCandidates=function(d){for(var e=[],n=d.split(" ").map(u),f=0;f<n.length;f+=3)e.push({component:n[f],ip:n[f+1],port:n[f+2]});return e},v.parseImageAttributes=function(d){return d.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(x,{})})},v.parseSimulcastStreamList=function(d){return d.split(";").map(function(e){return e.split(",").map(function(n){var f,o=!1;return"~"!==n[0]?f=u(n):(f=u(n.substring(1,n.length)),o=!0),{scid:f,paused:o}})})}},"./node_modules/sdp-transform/lib/writer.js":
/*!**************************************************!*\
                !*** ./node_modules/sdp-transform/lib/writer.js ***!
                \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./grammar */
"./node_modules/sdp-transform/lib/grammar.js"),y=/%[sdv%]/g,m=function(d){var e=1,n=arguments,f=n.length;return d.replace(y,function(o){if(e>=f)return o;var t=n[e];switch(e+=1,o){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}})},g=function(d,e,n){var o=[d+"="+(e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format)];if(e.names)for(var t=0;t<e.names.length;t+=1)o.push(e.name?n[e.name][e.names[t]]:n[e.names[t]]);else o.push(n[e.name]);return m.apply(null,o)},C=["v","o","s","i","u","e","p","c","b","t","r","z","a"],x=["i","c","b","a"];P.exports=function(d,e){e=e||{},null==d.version&&(d.version=0),null==d.name&&(d.name=" "),d.media.forEach(function(t){null==t.payloads&&(t.payloads="")});var f=e.innerOrder||x,o=[];return(e.outerOrder||C).forEach(function(t){u[t].forEach(function(p){p.name in d&&null!=d[p.name]?o.push(g(t,p,d)):p.push in d&&null!=d[p.push]&&d[p.push].forEach(function(w){o.push(g(t,p,w))})})}),d.media.forEach(function(t){o.push(g("m",u.m[0],t)),f.forEach(function(p){u[p].forEach(function(w){w.name in t&&null!=t[w.name]?o.push(g(p,w,t)):w.push in t&&null!=t[w.push]&&t[w.push].forEach(function(R){o.push(g(p,w,R))})})})}),o.join("\r\n")+"\r\n"}},"./node_modules/socket.io-client/lib/index.js":
/*!****************************************************!*\
                !*** ./node_modules/socket.io-client/lib/index.js ***!
                \****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! ./url */
"./node_modules/socket.io-client/lib/url.js"),y=h(
/*! socket.io-parser */
"./node_modules/socket.io-parser/index.js"),m=h(
/*! ./manager */
"./node_modules/socket.io-client/lib/manager.js"),g=h(
/*! debug */
"./node_modules/debug/src/browser.js")("socket.io-client");P.exports=v=x;var C=v.managers={};function x(d,e){"object"==typeof d&&(e=d,d=void 0),e=e||{};var R,n=u(d),f=n.source,o=n.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||C[o]&&n.path in C[o].nsps?(g("ignoring socket cache for %s",f),R=m(f,e)):(C[o]||(g("new io instance for %s",f),C[o]=m(f,e)),R=C[o]),n.query&&!e.query&&(e.query=n.query),R.socket(n.path,e)}v.protocol=y.protocol,v.connect=x,v.Manager=h(
/*! ./manager */
"./node_modules/socket.io-client/lib/manager.js"),v.Socket=h(
/*! ./socket */
"./node_modules/socket.io-client/lib/socket.js")},"./node_modules/socket.io-client/lib/manager.js":
/*!******************************************************!*\
                !*** ./node_modules/socket.io-client/lib/manager.js ***!
                \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! engine.io-client */
"./node_modules/engine.io-client/lib/index.js"),y=h(
/*! ./socket */
"./node_modules/socket.io-client/lib/socket.js"),m=h(
/*! component-emitter */
"./node_modules/component-emitter/index.js"),g=h(
/*! socket.io-parser */
"./node_modules/socket.io-parser/index.js"),C=h(
/*! ./on */
"./node_modules/socket.io-client/lib/on.js"),x=h(
/*! component-bind */
"./node_modules/component-bind/index.js"),d=h(
/*! debug */
"./node_modules/debug/src/browser.js")("socket.io-client:manager"),e=h(
/*! indexof */
"./node_modules/indexof/index.js"),n=h(
/*! backo2 */
"./node_modules/backo2/index.js"),f=Object.prototype.hasOwnProperty;function o(t,p){if(!(this instanceof o))return new o(t,p);t&&"object"==typeof t&&(p=t,t=void 0),(p=p||{}).path=p.path||"/socket.io",this.nsps={},this.subs=[],this.opts=p,this.reconnection(!1!==p.reconnection),this.reconnectionAttempts(p.reconnectionAttempts||1/0),this.reconnectionDelay(p.reconnectionDelay||1e3),this.reconnectionDelayMax(p.reconnectionDelayMax||5e3),this.randomizationFactor(p.randomizationFactor||.5),this.backoff=new n({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==p.timeout?2e4:p.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var w=p.parser||g;this.encoder=new w.Encoder,this.decoder=new w.Decoder,this.autoConnect=!1!==p.autoConnect,this.autoConnect&&this.open()}P.exports=o,o.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},o.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},o.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},m(o.prototype),o.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},o.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},o.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},o.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},o.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},o.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},o.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},o.prototype.open=o.prototype.connect=function(t,p){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=u(this.uri,this.opts);var w=this.engine,R=this;this.readyState="opening",this.skipReconnect=!1;var I=C(w,"open",function(){R.onopen(),t&&t()}),b=C(w,"error",function(a){if(d("connect_error"),R.cleanup(),R.readyState="closed",R.emitAll("connect_error",a),t){var l=new Error("Connection error");l.data=a,t(l)}else R.maybeReconnectOnOpen()});if(!1!==this._timeout){var O=this._timeout;d("connect attempt will timeout after %d",O),0===O&&I.destroy();var N=setTimeout(function(){d("connect attempt timed out after %d",O),I.destroy(),w.close(),w.emit("error","timeout"),R.emitAll("connect_timeout",O)},O);this.subs.push({destroy:function(){clearTimeout(N)}})}return this.subs.push(I),this.subs.push(b),this},o.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(C(t,"data",x(this,"ondata"))),this.subs.push(C(t,"ping",x(this,"onping"))),this.subs.push(C(t,"pong",x(this,"onpong"))),this.subs.push(C(t,"error",x(this,"onerror"))),this.subs.push(C(t,"close",x(this,"onclose"))),this.subs.push(C(this.decoder,"decoded",x(this,"ondecoded")))},o.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},o.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},o.prototype.ondata=function(t){this.decoder.add(t)},o.prototype.ondecoded=function(t){this.emit("packet",t)},o.prototype.onerror=function(t){d("error",t),this.emitAll("error",t)},o.prototype.socket=function(t,p){var w=this.nsps[t];if(!w){w=new y(this,t,p),this.nsps[t]=w;var R=this;w.on("connecting",I),w.on("connect",function(){w.id=R.generateId(t)}),this.autoConnect&&I()}function I(){~e(R.connecting,w)||R.connecting.push(w)}return w},o.prototype.destroy=function(t){var p=e(this.connecting,t);~p&&this.connecting.splice(p,1),!this.connecting.length&&this.close()},o.prototype.packet=function(t){d("writing packet %j",t);var p=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),p.encoding?p.packetBuffer.push(t):(p.encoding=!0,this.encoder.encode(t,function(w){for(var R=0;R<w.length;R++)p.engine.write(w[R],t.options);p.encoding=!1,p.processPacketQueue()}))},o.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},o.prototype.cleanup=function(){d("cleanup");for(var t=this.subs.length,p=0;p<t;p++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},o.prototype.close=o.prototype.disconnect=function(){d("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},o.prototype.onclose=function(t){d("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},o.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var p=this.backoff.duration();d("will wait %dms before reconnect attempt",p),this.reconnecting=!0;var w=setTimeout(function(){t.skipReconnect||(d("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(R){R?(d("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",R.data)):(d("reconnect success"),t.onreconnect())}))},p);this.subs.push({destroy:function(){clearTimeout(w)}})}},o.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},"./node_modules/socket.io-client/lib/on.js":
/*!*************************************************!*\
                !*** ./node_modules/socket.io-client/lib/on.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=function h(u,y,m){return u.on(y,m),{destroy:function(){u.removeListener(y,m)}}}},"./node_modules/socket.io-client/lib/socket.js":
/*!*****************************************************!*\
                !*** ./node_modules/socket.io-client/lib/socket.js ***!
                \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! socket.io-parser */
"./node_modules/socket.io-parser/index.js"),y=h(
/*! component-emitter */
"./node_modules/component-emitter/index.js"),m=h(
/*! to-array */
"./node_modules/to-array/index.js"),g=h(
/*! ./on */
"./node_modules/socket.io-client/lib/on.js"),C=h(
/*! component-bind */
"./node_modules/component-bind/index.js"),x=h(
/*! debug */
"./node_modules/debug/src/browser.js")("socket.io-client:socket"),d=h(
/*! parseqs */
"./node_modules/parseqs/index.js"),e=h(
/*! has-binary2 */
"./node_modules/has-binary2/index.js");P.exports=o;var n={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=y.prototype.emit;function o(t,p,w){this.io=t,this.nsp=p,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},w&&w.query&&(this.query=w.query),this.io.autoConnect&&this.open()}y(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[g(t,"open",C(this,"onopen")),g(t,"packet",C(this,"onpacket")),g(t,"close",C(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},o.prototype.send=function(){var t=m(arguments);return t.unshift("message"),this.emit.apply(this,t),this},o.prototype.emit=function(t){if(n.hasOwnProperty(t))return f.apply(this,arguments),this;var p=m(arguments),w={type:(void 0!==this.flags.binary?this.flags.binary:e(p))?u.BINARY_EVENT:u.EVENT,data:p,options:{}};return w.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof p[p.length-1]&&(x("emitting packet with ack id %d",this.ids),this.acks[this.ids]=p.pop(),w.id=this.ids++),this.connected?this.packet(w):this.sendBuffer.push(w),this.flags={},this},o.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},o.prototype.onopen=function(){if(x("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?d.encode(this.query):this.query;x("sending connect packet with query %s",t),this.packet({type:u.CONNECT,query:t})}else this.packet({type:u.CONNECT})},o.prototype.onclose=function(t){x("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},o.prototype.onpacket=function(t){if(t.nsp===this.nsp||t.type===u.ERROR&&"/"===t.nsp)switch(t.type){case u.CONNECT:this.onconnect();break;case u.EVENT:case u.BINARY_EVENT:this.onevent(t);break;case u.ACK:case u.BINARY_ACK:this.onack(t);break;case u.DISCONNECT:this.ondisconnect();break;case u.ERROR:this.emit("error",t.data)}},o.prototype.onevent=function(t){var p=t.data||[];x("emitting event %j",p),null!=t.id&&(x("attaching ack callback to event"),p.push(this.ack(t.id))),this.connected?f.apply(this,p):this.receiveBuffer.push(p)},o.prototype.ack=function(t){var p=this,w=!1;return function(){if(!w){w=!0;var R=m(arguments);x("sending ack %j",R),p.packet({type:e(R)?u.BINARY_ACK:u.ACK,id:t,data:R})}}},o.prototype.onack=function(t){var p=this.acks[t.id];"function"==typeof p?(x("calling ack %s with %j",t.id,t.data),p.apply(this,t.data),delete this.acks[t.id]):x("bad ack %s",t.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},o.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){x("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(x("performing disconnect (%s)",this.nsp),this.packet({type:u.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(t){return this.flags.compress=t,this},o.prototype.binary=function(t){return this.flags.binary=t,this}},"./node_modules/socket.io-client/lib/url.js":
/*!**************************************************!*\
                !*** ./node_modules/socket.io-client/lib/url.js ***!
                \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! parseuri */
"./node_modules/parseuri/index.js"),y=h(
/*! debug */
"./node_modules/debug/src/browser.js")("socket.io-client:url");P.exports=function m(g,C){var x=g;C=C||typeof location<"u"&&location,null==g&&(g=C.protocol+"//"+C.host),"string"==typeof g&&("/"===g.charAt(0)&&(g="/"===g.charAt(1)?C.protocol+g:C.host+g),/^(https?|wss?):\/\//.test(g)||(y("protocol-less url %s",g),g=typeof C<"u"?C.protocol+"//"+g:"https://"+g),y("parse %s",g),x=u(g)),x.port||(/^(http|ws)$/.test(x.protocol)?x.port="80":/^(http|ws)s$/.test(x.protocol)&&(x.port="443")),x.path=x.path||"/";var e=-1!==x.host.indexOf(":")?"["+x.host+"]":x.host;return x.id=x.protocol+"://"+e+":"+x.port,x.href=x.protocol+"://"+e+(C&&C.port===x.port?"":":"+x.port),x}},"./node_modules/socket.io-parser/binary.js":
/*!*************************************************!*\
                !*** ./node_modules/socket.io-parser/binary.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! isarray */
"./node_modules/isarray/index.js"),y=h(
/*! ./is-buffer */
"./node_modules/socket.io-parser/is-buffer.js"),m=Object.prototype.toString,g="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===m.call(Blob),C="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===m.call(File);function x(e,n){if(!e)return e;if(y(e)){var f={_placeholder:!0,num:n.length};return n.push(e),f}if(u(e)){for(var o=new Array(e.length),t=0;t<e.length;t++)o[t]=x(e[t],n);return o}if("object"==typeof e&&!(e instanceof Date)){for(var p in o={},e)o[p]=x(e[p],n);return o}return e}function d(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(u(e))for(var f=0;f<e.length;f++)e[f]=d(e[f],n);else if("object"==typeof e)for(var o in e)e[o]=d(e[o],n);return e}v.deconstructPacket=function(e){var n=[],o=e;return o.data=x(e.data,n),o.attachments=n.length,{packet:o,buffers:n}},v.reconstructPacket=function(e,n){return e.data=d(e.data,n),e.attachments=void 0,e},v.removeBlobs=function(e,n){var o=0,t=e;(function f(p,w,R){if(!p)return p;if(g&&p instanceof Blob||C&&p instanceof File){o++;var I=new FileReader;I.onload=function(){R?R[w]=this.result:t=this.result,--o||n(t)},I.readAsArrayBuffer(p)}else if(u(p))for(var b=0;b<p.length;b++)f(p[b],b,p);else if("object"==typeof p&&!y(p))for(var O in p)f(p[O],O,p)})(t),o||n(t)}},"./node_modules/socket.io-parser/index.js":
/*!************************************************!*\
                !*** ./node_modules/socket.io-parser/index.js ***!
                \************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){var u=h(
/*! debug */
"./node_modules/debug/src/browser.js")("socket.io-parser"),y=h(
/*! component-emitter */
"./node_modules/component-emitter/index.js"),m=h(
/*! ./binary */
"./node_modules/socket.io-parser/binary.js"),g=h(
/*! isarray */
"./node_modules/isarray/index.js"),C=h(
/*! ./is-buffer */
"./node_modules/socket.io-parser/is-buffer.js");function x(){}v.protocol=4,v.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],v.CONNECT=0,v.DISCONNECT=1,v.EVENT=2,v.ACK=3,v.ERROR=4,v.BINARY_EVENT=5,v.BINARY_ACK=6,v.Encoder=x,v.Decoder=o;var d=v.ERROR+'"encode error"';function e(I){var b=""+I.type;if((v.BINARY_EVENT===I.type||v.BINARY_ACK===I.type)&&(b+=I.attachments+"-"),I.nsp&&"/"!==I.nsp&&(b+=I.nsp+","),null!=I.id&&(b+=I.id),null!=I.data){var O=function n(I){try{return JSON.stringify(I)}catch{return!1}}(I.data);if(!1===O)return d;b+=O}return u("encoded %j as %s",I,b),b}function o(){this.reconstructor=null}function t(I){var b=0,O={type:Number(I.charAt(0))};if(null==v.types[O.type])return R("unknown packet type "+O.type);if(v.BINARY_EVENT===O.type||v.BINARY_ACK===O.type){for(var N=b+1;"-"!==I.charAt(++b)&&b!=I.length;);var a=I.substring(N,b);if(a!=Number(a)||"-"!==I.charAt(b))throw new Error("Illegal attachments");O.attachments=Number(a)}if("/"===I.charAt(b+1)){for(N=b+1;++b&&","!==(l=I.charAt(b))&&b!==I.length;);O.nsp=I.substring(N,b)}else O.nsp="/";var E=I.charAt(b+1);if(""!==E&&Number(E)==E){for(N=b+1;++b;){var l;if(null==(l=I.charAt(b))||Number(l)!=l){--b;break}if(b===I.length)break}O.id=Number(I.substring(N,b+1))}if(I.charAt(++b)){var T=function p(I){try{return JSON.parse(I)}catch{return!1}}(I.substr(b));if(!1===T||O.type!==v.ERROR&&!g(T))return R("invalid payload");O.data=T}return u("decoded %s as %j",I,O),O}function w(I){this.reconPack=I,this.buffers=[]}function R(I){return{type:v.ERROR,data:"parser error: "+I}}x.prototype.encode=function(I,b){u("encoding packet %j",I),v.BINARY_EVENT===I.type||v.BINARY_ACK===I.type?function f(I,b){m.removeBlobs(I,function O(N){var a=m.deconstructPacket(N),l=e(a.packet),E=a.buffers;E.unshift(l),b(E)})}(I,b):b([e(I)])},y(o.prototype),o.prototype.add=function(I){var b;if("string"==typeof I)b=t(I),v.BINARY_EVENT===b.type||v.BINARY_ACK===b.type?(this.reconstructor=new w(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!C(I)&&!I.base64)throw new Error("Unknown type: "+I);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(b=this.reconstructor.takeBinaryData(I))&&(this.reconstructor=null,this.emit("decoded",b))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},w.prototype.takeBinaryData=function(I){if(this.buffers.push(I),this.buffers.length===this.reconPack.attachments){var b=m.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},w.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},"./node_modules/socket.io-parser/is-buffer.js":
/*!****************************************************!*\
                !*** ./node_modules/socket.io-parser/is-buffer.js ***!
                \****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){(function(u){P.exports=function C(x){return y&&u.isBuffer(x)||m&&(x instanceof ArrayBuffer||g(x))};var y="function"==typeof u&&"function"==typeof u.isBuffer,m="function"==typeof ArrayBuffer,g=function(x){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(x):x.buffer instanceof ArrayBuffer}}).call(this,h(
/*! ./../node-libs-browser/node_modules/buffer/index.js */
"./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/split-on-first/index.js":
/*!**********************************************!*\
                !*** ./node_modules/split-on-first/index.js ***!
                \**********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";P.exports=(u,y)=>{if("string"!=typeof u||"string"!=typeof y)throw new TypeError("Expected the arguments to be of type `string`");if(""===y)return[u];const m=u.indexOf(y);return-1===m?[u]:[u.slice(0,m),u.slice(m+y.length)]}},"./node_modules/strict-uri-encode/index.js":
/*!*************************************************!*\
                !*** ./node_modules/strict-uri-encode/index.js ***!
                \*************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";P.exports=u=>encodeURIComponent(u).replace(/[!'()*]/g,y=>`%${y.charCodeAt(0).toString(16).toUpperCase()}`)},"./node_modules/to-array/index.js":
/*!****************************************!*\
                !*** ./node_modules/to-array/index.js ***!
                \****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){P.exports=function h(u,y){for(var m=[],g=(y=y||0)||0;g<u.length;g++)m[g-y]=u[g];return m}},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
                !*** (webpack)/buildin/global.js ***!
                \***********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){var h;h=function(){return this}();try{h=h||new Function("return this")()}catch{"object"==typeof window&&(h=window)}P.exports=h},"./node_modules/yeast/index.js":
/*!*************************************!*\
                !*** ./node_modules/yeast/index.js ***!
                \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v,h){"use strict";var x,u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),y=64,m={},g=0,C=0;function d(f){var o="";do{o=u[f%y]+o,f=Math.floor(f/y)}while(f>0);return o}function n(){var f=d(+new Date);return f!==x?(g=0,x=f):f+"."+d(g++)}for(;C<y;C++)m[u[C]]=C;n.encode=d,n.decode=function e(f){var o=0;for(C=0;C<f.length;C++)o=o*y+m[f.charAt(C)];return o},P.exports=n},"./package.json":
/*!**********************!*\
                !*** ./package.json ***!
                \**********************/
/*! exports provided: name, version, description, main, types, scripts, repository, files, author, license, devDependencies, dependencies, default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P){P.exports=JSON.parse('{"name":"skyway-js","version":"4.4.5","description":"The official JavaScript SDK for SkyWay","main":"dist/skyway.js","types":"skyway-js.d.ts","scripts":{"test":"karma start ./karma.conf.js","clean":"del ./dist","lint":"eslint .","build":"NODE_ENV=production webpack","dev":"webpack -w"},"repository":{"type":"git","url":"git+https://github.com/skyway/skyway-js-sdk"},"files":["dist/skyway.js","skyway-js.d.ts","LICENSE","CHANGELOG.md","README.md"],"author":"NTT Communications Corp.","license":"Apache-2.0","devDependencies":{"babel-loader":"7.1.5","babel-plugin-espower":"2.4.0","babel-plugin-istanbul":"4.1.6","babel-preset-es2015":"^6.24.1","del-cli":"^2.0.0","eslint":"^6.1.0","eslint-config-prettier":"^6.0.0","eslint-plugin-prettier":"^3.1.0","inject-loader":"^4.0.1","karma":"^4.2.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^1.1.2","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^4.0.2","mocha":"^6.2.0","power-assert":"^1.6.1","prettier":"^1.18.2","sinon":"^7.3.2","webpack":"^4.38.0","webpack-cli":"^3.3.6"},"dependencies":{"@jitsi/sdp-interop":"^0.1.13","@types/node":"^12.6.8","detect-browser":"^4.6.0","enum":"^3.0.4","events":"^3.0.0","js-binarypack":"0.0.9","object-sizeof":"^1.4.0","query-string":"^6.8.2","sdp-transform":"^2.11.0","socket.io-client":"^2.2.0","socket.io-parser":"~3.3.0"}}')},"./src/peer.js":
/*!**********************************!*\
                !*** ./src/peer.js + 12 modules ***!
                \**********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@jitsi/sdp-interop/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/detect-browser/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/enum/lib/enum.js (<- Module uses injected variables (global)) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/events/events.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/has-binary2/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/js-binarypack/lib/binarypack.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/object-sizeof/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/query-string/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/sdp-transform/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/socket.io-client/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/socket.io-parser/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./package.json (<- Module is not an ECMAScript module) */function(P,v,h){"use strict";h.r(v);var u=h("./node_modules/events/events.js"),y=h.n(u),m=h("./node_modules/enum/lib/enum.js"),g=h("./node_modules/socket.io-client/lib/index.js"),C=h.n(g),x=h("./node_modules/query-string/index.js"),d=h.n(x),B={DISPATCHER_HOST:"dispatcher.webrtc.ecl.ntt.com",DISPATCHER_PORT:443,DISPATCHER_SECURE:!0,DISPATCHER_TIMEOUT:1e4,TURN_HOST:"turn.webrtc.ecl.ntt.com",TURN_PORT:443,MESSAGE_TYPES:{CLIENT:new m.default(["SEND_OFFER","SEND_ANSWER","SEND_CANDIDATE","SEND_LEAVE","ROOM_JOIN","ROOM_LEAVE","ROOM_GET_LOGS","ROOM_GET_USERS","ROOM_SEND_DATA","SFU_GET_OFFER","SFU_ANSWER","SFU_CANDIDATE","PING","UPDATE_CREDENTIAL","SEND_FORCE_CLOSE"]),SERVER:new m.default(["OPEN","ERROR","OFFER","ANSWER","CANDIDATE","LEAVE","AUTH_EXPIRES_IN","ROOM_LOGS","ROOM_USERS","ROOM_DATA","ROOM_USER_JOIN","ROOM_USER_LEAVE","SFU_OFFER","FORCE_CLOSE"])},maxChunkSize:16300,maxDataSize:20971520,minBroadcastIntervalMs:100,maxNumberOfAttempts:10,reconnectionAttempts:2,numberServersToTry:3,sendInterval:1,pingInterval:25e3,defaultConfig:{iceServers:[{urls:"stun:stun.webrtc.ecl.ntt.com:3478",url:"stun:stun.webrtc.ecl.ntt.com:3478"}],iceTransportPolicy:"all"}};const j="SkyWay: ",V=new m.default({NONE:0,ERROR:1,WARN:2,FULL:3});var _=new class L{constructor(){this._logLevel=V.NONE.value,this.LOG_LEVELS=V}setLogLevel(r){switch(r.value&&(r=r.value),parseInt(r,10)){case 0:default:this._logLevel=V.NONE.value;break;case 1:this._logLevel=V.ERROR.value;break;case 2:this._logLevel=V.WARN.value;break;case 3:this._logLevel=V.FULL.value}}warn(...r){this._logLevel>=V.WARN.value&&console.warn(j,...r)}error(...r){this._logLevel>=V.ERROR.value&&console.error(j,...r)}log(...r){this._logLevel>=V.FULL.value&&console.log(j,...r)}},G=h("./node_modules/detect-browser/index.js");var q={validateId:function X(ie){return!ie||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(ie)},validateKey:function z(ie){return!ie||/^[a-z0-9]{8}(-[a-z0-9]{4}){3}-[a-z0-9]{12}$/.exec(ie)},randomId:function H(){return(Math.random().toString(36)+"0000000000000000000").substr(2,16)},randomToken:function ae(){return Math.random().toString(36).substr(2)},joinArrayBuffers:function ge(ie){const r=ie.reduce((M,W)=>M+W.byteLength,0),c=new Uint8Array(r);let A=0;for(const M of ie)c.set(new Uint8Array(M),A),A+=M.byteLength;return c.buffer},blobToArrayBuffer:function Ne(ie,r){const c=new FileReader;c.onload=A=>{r(A.target.result)},c.readAsArrayBuffer(ie)},isSecure:function Fe(){return"https:"===location.protocol},detectBrowser:function Pe(){const{name:ie,version:r}=Object(G.detect)(),[c,A,M]=r.split(".").map(W=>parseInt(W));return{name:ie,major:c,minor:A,patch:M}},isPlanBSafari:function ne(){const{name:ie}=Object(G.detect)();return!("safari"!==ie&&"ios"!==ie||RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))}},be=h("./package.json");var Ie=class xe extends y.a{constructor(r,c){super(),this._isOpen=!1,this._isPeerIdSet=!1,this._queue=[],this._io=null,this._key=r,this._reconnectAttempts=0,c.host&&c.port?this.signalingServerUrl=`${c.secure?"https://":"http://"}${c.host}:${c.port}`:this._dispatcherUrl=`${c.dispatcherSecure||B.DISPATCHER_SECURE?"https://":"http://"}${c.dispatcherHost||B.DISPATCHER_HOST}:${c.dispatcherPort||B.DISPATCHER_PORT}/signaling`}get isOpen(){return!!(this._io&&this._io.connected&&this._isOpen)}start(r,c,A){var M=this;return Z(function*(){let W=`apiKey=${M._key}&token=${c}&platform=javascript&sdk_version=${be.version}`;if(r&&(W+=`&peerId=${r}`,M._isPeerIdSet=!0),A&&(W+=`&credential=${encodeURIComponent(JSON.stringify(A))}`),M._dispatcherUrl)try{M.signalingServerUrl=yield M._fetchSignalingServerUrlWithRetry()}catch(te){return void M.emit("error",te)}const $=q.detectBrowser(),fe=("ios"===$.name||"safari"===$.name)&&$.major>=15?["polling"]:["polling","websocket"];M._io=C()(M.signalingServerUrl,{"force new connection":!0,query:W,reconnectionAttempts:B.reconnectionAttempts,transports:fe}),M._io.on("reconnect_failed",()=>{M._stopPings(),M._connectToNewServer()}),M._io.on("error",te=>{_.error(te)}),M._setupMessageHandlers()})()}_connectToNewServer(){var r=this;return Z(function*(){if(r._reconnectAttempts>=B.numberServersToTry)r.emit("error","Could not connect to server.");else{try{r.signalingServerUrl=yield r._fetchSignalingServerUrlWithRetry()}catch(c){return void r.emit("error",c)}r._io.io.uri=r.signalingServerUrl,r._io.connect(),r._reconnectAttempts++}})()}_fetchSignalingServerUrlWithRetry(){var r=this;return Z(function*(){for(let c=0;c<B.maxNumberOfAttempts;c++){const A=yield r._fetchSignalingServer().catch(M=>{_.warn(M)});if(A&&A.port&&A.host&&(!r.signalingServerUrl||-1===r.signalingServerUrl.indexOf(A.host)))return`${A.secure?"https://":"http://"}${A.host}:${A.port}`}throw new Error("Could not get signaling server url.")})()}_fetchSignalingServer(){return new Promise((r,c)=>{const A=new XMLHttpRequest;A.timeout=B.DISPATCHER_TIMEOUT,A.open("GET",this._dispatcherUrl,!0),A.onerror=()=>{c(new Error("There was a problem with the request for the dispatcher. Check your peer options and network connections."))},A.onabort=()=>{c(new Error("The request for the dispatcher was aborted."))},A.ontimeout=()=>{c(new Error("The request for the dispatcher timed out. Check your firewall, network speed, SkyWay failure information"))},A.onload=()=>{if(200===A.status)try{const M=JSON.parse(A.responseText);if(M&&M.domain)return void r({host:M.domain,port:443,secure:!0});c(new Error("The dispatcher server returned an invalid JSON response. have no signaling server domain in JSON."))}catch{c(new Error("The dispatcher server returned an invalid JSON response."))}else c(new Error("Connection failed. Unexpected response: "+A.status))},A.send(null)})}send(r,c){r?this.isOpen?!0===this._io.connected&&this._io.emit(r,c):this._queue.push({type:r,message:c}):this._io.emit("error","Invalid message")}close(){this.isOpen&&(this._stopPings(),this._io.disconnect(),this._isOpen=!1)}reconnect(){this._io.connect()}updateCredential(r){const c=d.a.parse(this._io.io.opts.query);c.credential?c.credential=encodeURIComponent(JSON.stringify(r)):_.warn("Adding a credential when one wasn't specified before."),this._io.io.opts.query=d.a.stringify(c),this.send(B.MESSAGE_TYPES.CLIENT.UPDATE_CREDENTIAL.key,r)}_setupMessageHandlers(){B.MESSAGE_TYPES.SERVER.enums.forEach(r=>{this._io.on(r.key,r.key===B.MESSAGE_TYPES.SERVER.OPEN.key?c=>{!c||!c.peerId||(this._isPeerIdSet||(this._io.io.opts.query+=`&peerId=${c.peerId}`,this._isPeerIdSet=!0),this._reconnectAttempts=0,this._startPings(),this._sendQueuedMessages(),this._isOpen||(this._isOpen=!0,this.emit(r.key,c)))}:c=>{this.emit(r.key,c)})})}_sendQueuedMessages(){for(const r of this._queue)this.send(r.type,r.message);this._queue=[]}_startPings(){this._pingIntervalId||(this._pingIntervalId=setInterval(()=>{this.send(B.MESSAGE_TYPES.CLIENT.PING.key)},B.pingInterval))}_stopPings(){clearInterval(this._pingIntervalId),this._pingIntervalId=void 0}},Be=h("./node_modules/sdp-transform/lib/index.js"),Ee=h.n(Be),_e=h("./node_modules/@jitsi/sdp-interop/lib/index.js");var pe=new class Me{unifiedToPlanB(r){const A=(new _e.Interop).toPlanB(r).sdp,M=new Set,W=/a=ssrc:\d+ msid:(\w+)/g;let $;for(;$=W.exec(A);)M.add($[1]);const se=A.replace("a=msid-semantic:WMS *",`a=msid-semantic:WMS ${Array.from(M).join(" ")}`);return new RTCSessionDescription({type:"offer",sdp:se})}addVideoBandwidth(r,c){return this._validateBandwidth(c),this._addBandwidth(r,c,"video")}addAudioBandwidth(r,c){return this._validateBandwidth(c),this._addBandwidth(r,c,"audio")}filterVideoCodec(r,c){return this._filterCodec(r,c,"video")}filterAudioCodec(r,c){return this._filterCodec(r,c,"audio")}ensureUnifiedPlan(r){return r.split("\r\n").map(A=>A.startsWith("a=msid-semantic")?"a=msid-semantic:WMS *":A).join("\r\n")}_filterCodec(r,c,A){if(void 0===c)throw new Error("codec is not passed");const M=Ee.a.parse(r);return M.media=M.media.map(W=>{if(W.type===A){W.rtp=W.rtp.filter(se=>se.codec===c);const $=W.rtp.reduce((se,fe)=>[...se,fe.payload],[]);if(0===W.rtp.length)throw new Error(`${c} does not exist`);W.fmtp&&(W.fmtp=W.fmtp.filter(se=>$.includes(se.payload))),W.rtcpFb&&(W.rtcpFb=W.rtcpFb.filter(se=>$.includes(se.payload))),W.payloads=$.join(" ")}return W}),Ee.a.write(M)}_addBandwidth(r,c,A){const M=Ee.a.parse(r);return M.media=M.media.map(W=>(W.type===A&&(W.bandwidth=[{type:"AS",limit:c.toString()},{type:"TIAS",limit:(1e3*c).toString()}]),W)),Ee.a.write(M)}_validateBandwidth(r){if(void 0===r)throw new Error("bandwidth is not passed");if(!/^\d+$/.test(r))throw new Error(`${r} is not a number`)}};const De=new m.default(["addStream","dcCreated","offerCreated","answerCreated","iceCandidate","iceConnectionFailed","negotiationNeeded","error"]);class re extends y.a{constructor(){super(),this._offerQueue=[],this._isExpectingAnswer=!1,this._isNegotiationAllowed=!0,this._isExecutingHandleOffer=!1,this.hasRemoteDescription=!1}startConnection(r={}){var c=this;return Z(function*(){if(c._pc=c._createPeerConnection(r.pcConfig),c._setupPCListeners(),c.originator=r.originator,c._audioBandwidth=r.audioBandwidth,c._videoBandwidth=r.videoBandwidth,c._audioCodec=r.audioCodec,c._videoCodec=r.videoCodec,c._type=r.type,"media"===c._type)if(r.stream){const A=r.stream.getVideoTracks(),M=r.stream.getAudioTracks(),W=c._getReceiveOnlyState(r);A.length>0?A.forEach($=>c._pc.addTrack($,r.stream)):W.video&&c._pc.addTransceiver("video",{direction:"recvonly"}),M.length>0?M.forEach($=>c._pc.addTrack($,r.stream)):W.audio&&c._pc.addTransceiver("audio",{direction:"recvonly"})}else c.originator&&(c._pc.addTransceiver("audio",{direction:"recvonly"}),c._pc.addTransceiver("video",{direction:"recvonly"}));if(c.originator){if("data"===c._type){const W=c._pc.createDataChannel(r.label||"",r.dcInit||{});c.emit(re.EVENTS.dcCreated.key,W)}}else yield c.handleOffer(r.offer)})()}replaceStream(r){if(!this._pc)return;this._isNegotiationAllowed=!0;const c=this,A=r.getVideoTracks(),M=r.getAudioTracks(),W=this._pc.getSenders(),$=W.find(te=>te.track&&"video"===te.track.kind),se=W.find(te=>te.track&&"audio"===te.track.kind);function fe(te,ye,Ve){if(void 0!==ye||void 0!==te){if(void 0===ye)return void c._pc.removeTrack(te);if(void 0===te)return void c._pc.addTrack(ye,Ve);te.track.id!==ye.id&&te.replaceTrack(ye)}}fe($,A[0],r),fe(se,M[0],r)}handleOffer(r){var c=this;return Z(function*(){if(c._lastOffer&&r&&c._lastOffer.sdp===r.sdp)return;if(c._isNegotiationAllowed=!0,"have-remote-offer"===c._pc.signalingState||c._isExecutingHandleOffer)return void c._offerQueue.push(r);let A;c._lastOffer=r,c._isExecutingHandleOffer=!0;try{yield c._setRemoteDescription(r),A=yield c._makeAnswerSdp().catch(M=>_.error(M))}finally{c._isExecutingHandleOffer=!1}if("stable"===c._pc.signalingState){const M=c._offerQueue.shift();M&&c.handleOffer(M)}c.emit(re.EVENTS.answerCreated.key,A)})()}handleAnswer(r){var c=this;return Z(function*(){c._isNegotiationAllowed=!0,c._isExpectingAnswer?(yield c._setRemoteDescription(r),c._isExpectingAnswer=!1):c._pc.onnegotiationneeded&&c._pc.onnegotiationneeded()})()}handleCandidate(r){var c=this;return Z(function*(){c._pc&&(yield c._pc.addIceCandidate(new RTCIceCandidate(r)).then(()=>_.log("Successfully added ICE candidate")).catch(A=>_.error("Failed to add ICE candidate",A)))})()}cleanup(){_.log("Cleaning up PeerConnection"),this._pc&&("closed"!==this._pc.readyState||"closed"!==this._pc.signalingState)&&this._pc.close(),this._pc=null}_createPeerConnection(r={}){return _.log("Creating RTCPeerConnection"),r.sdpSemantics="unified-plan",new RTCPeerConnection(r)}_setupPCListeners(){var r=this;const c=this._pc;c.ontrack=A=>{_.log("Received remote media stream track"),A.streams.forEach(M=>{this.emit(re.EVENTS.addStream.key,M)})},c.ondatachannel=A=>{_.log("Received data channel"),this.emit(re.EVENTS.dcCreated.key,A.channel)},c.onicecandidate=A=>{A.candidate&&""!==A.candidate.candidate?(_.log("Generated ICE candidate for:",A.candidate),this.emit(re.EVENTS.iceCandidate.key,A.candidate)):_.log("ICE candidates gathering complete")},c.oniceconnectionstatechange=()=>{switch(c.iceConnectionState){case"completed":_.log("iceConnectionState is completed"),c.onicecandidate=()=>{};break;case"disconnected":_.log("iceConnectionState is disconnected, trying reconnect by browser");break;case"failed":_.log("iceConnectionState is failed, closing connection"),this.emit(re.EVENTS.iceConnectionFailed.key);break;default:_.log(`iceConnectionState is ${c.iceConnectionState}`)}},c.onconnectionstatechange=()=>{_.log(`connectionState is ${c.connectionState}`),"failed"===c.connectionState&&"disconnected"===c.iceConnectionState&&(_.log("connectionState is failed, closing connection"),this.emit(re.EVENTS.iceConnectionFailed.key))},c.onnegotiationneeded=Z(function*(){if(_.log("`negotiationneeded` triggered"),"stable"===c.signalingState&&r._isNegotiationAllowed&&(r._isNegotiationAllowed=!1,r.originator)){const A=yield r._makeOfferSdp();r._setLocalDescription(A),r.emit(re.EVENTS.negotiationNeeded.key)}}),c.onsignalingstatechange=()=>{if(_.log(`signalingState is ${c.signalingState}`),"stable"===c.signalingState&&!this._isExecutingHandleOffer){const A=this._offerQueue.shift();A&&this.handleOffer(A)}}}_makeOfferSdp(){var r=this;return Z(function*(){let c;try{c=yield r._pc.createOffer()}catch(A){throw A.type="webrtc",_.error(A),r.emit(re.EVENTS.error.key,A),_.log("Failed to createOffer, ",A),A}return _.log("Created offer."),r._audioBandwidth&&(c.sdp=pe.addAudioBandwidth(c.sdp,r._audioBandwidth)),r._videoBandwidth&&(c.sdp=pe.addVideoBandwidth(c.sdp,r._videoBandwidth)),r._audioCodec&&(c.sdp=pe.filterAudioCodec(c.sdp,r._audioCodec)),r._videoCodec&&(c.sdp=pe.filterVideoCodec(c.sdp,r._videoCodec)),c})()}_makeAnswerSdp(){var r=this;return Z(function*(){let c;try{c=yield r._pc.createAnswer()}catch(A){throw A.type="webrtc",_.error(A),r.emit(re.EVENTS.error.key,A),_.log("Failed to createAnswer, ",A),A}_.log("Created answer."),r._audioBandwidth&&(c.sdp=pe.addAudioBandwidth(c.sdp,r._audioBandwidth)),r._videoBandwidth&&(c.sdp=pe.addVideoBandwidth(c.sdp,r._videoBandwidth)),r._audioCodec&&(c.sdp=pe.filterAudioCodec(c.sdp,r._audioCodec)),r._videoCodec&&(c.sdp=pe.filterVideoCodec(c.sdp,r._videoCodec));try{yield r._pc.setLocalDescription(c)}catch(A){throw A.type="webrtc",_.error(A),r.emit(re.EVENTS.error.key,A),_.log("Failed to setLocalDescription, ",A),A}return _.log("Set localDescription: answer"),_.log(`Setting local description ${JSON.stringify(c.sdp)}`),c})()}_setLocalDescription(r){var c=this;return Z(function*(){_.log(`Setting local description ${JSON.stringify(r.sdp)}`);try{yield c._pc.setLocalDescription(r)}catch(A){throw A.type="webrtc",_.error(A),c.emit(re.EVENTS.error.key,A),_.log("Failed to setLocalDescription, ",A),A}_.log("Set localDescription: offer"),c._isExpectingAnswer=!0,c.emit(re.EVENTS.offerCreated.key,r)})()}_setRemoteDescription(r){var c=this;return Z(function*(){_.log(`Setting remote description ${JSON.stringify(r)}`);try{yield c._pc.setRemoteDescription(new RTCSessionDescription(r)),c.hasRemoteDescription=!0}catch(A){throw A.type="webrtc",_.error(A),c.emit(re.EVENTS.error.key,A),_.log("Failed to setRemoteDescription: ",A),A}_.log("Set remoteDescription:",r.type)})()}_getReceiveOnlyState(r={}){const c={audio:!1,video:!1},A=r.stream instanceof MediaStream,M=!!A&&0!==r.stream.getAudioTracks().length,W=!!A&&0!==r.stream.getVideoTracks().length;return!1===A&&void 0===r.audioReceiveEnabled&&void 0===r.videoReceiveEnabled?(c.audio=!0,c.video=!0,c):(r.audioReceiveEnabled&&!1===M&&(c.audio=!0),r.videoReceiveEnabled&&!1===W&&(c.video=!0),!1===r.audioReceiveEnabled&&M&&_.warn("Option audioReceiveEnabled will be treated as true, because passed stream has MediaStreamTrack(kind = audio)"),!1===r.videoReceiveEnabled&&W&&_.warn("Option videoReceiveEnabled will be treated as true, because passed stream has MediaStreamTrack(kind = video)"),c)}static get EVENTS(){return De}}var ue=re;const je=new m.default(["candidate","offer","answer","close","forceClose"]);class me extends y.a{constructor(r,c){if(super(),c=c||{},this.constructor===me)throw new TypeError("Cannot construct Connection instances directly");this._options=c,this.open=!1,this.type=void 0,this.metadata=this._options.metadata,this.remoteId=r,this._negotiator=new ue,this._idPrefix="c_",this._randomIdSuffix=q.randomToken(),this._setupNegotiatorMessageHandlers()}get id(){return this._options.connectionId||this._idPrefix+this._randomIdSuffix}handleAnswer(r){var c=this;return Z(function*(){c._pcAvailable?(yield c._negotiator.handleAnswer(r.answer),c.open=!0,c._handleQueuedMessages()):(_.log(`Queuing ANSWER message in ${c.id} from ${c.remoteId}`),c._queuedMessages.push({type:B.MESSAGE_TYPES.SERVER.ANSWER.key,payload:r}))})()}handleCandidate(r){!this._negotiator.originator||this._negotiator.hasRemoteDescription?this._pcAvailable?this._negotiator.handleCandidate(r.candidate):(_.log(`Queuing CANDIDATE message in ${this.id} from ${this.remoteId}`),this._queuedMessages.push({type:B.MESSAGE_TYPES.SERVER.CANDIDATE.key,payload:r})):this._queuedMessages.push({type:B.MESSAGE_TYPES.SERVER.CANDIDATE.key,payload:r})}updateOffer(r){this.open?this._negotiator.handleOffer(r.offer):this._options.payload=r}getPeerConnection(){return this.open?this._negotiator._pc:null}_handleQueuedMessages(){for(const r of this._queuedMessages)switch(r.type){case B.MESSAGE_TYPES.SERVER.ANSWER.key:this.handleAnswer(r.payload);break;case B.MESSAGE_TYPES.SERVER.CANDIDATE.key:this.handleCandidate(r.payload);break;default:_.warn("Unrecognized message type:",r.type,"from peer:",this.remoteId)}this._queuedMessages=[]}close(r=void 0){this.open&&(this.open=!1,this._negotiator.cleanup(),this.emit(me.EVENTS.close.key),r?this.emit(me.EVENTS.forceClose.key):void 0===r&&_.warn("Default value of the forceClose parameter will change false to true from future versions."))}_setupNegotiatorMessageHandlers(){this._negotiator.on(ue.EVENTS.answerCreated.key,r=>{this.emit(me.EVENTS.answer.key,{answer:r,dst:this.remoteId,connectionId:this.id,connectionType:this.type})}),this._negotiator.on(ue.EVENTS.offerCreated.key,r=>{const c={offer:r,dst:this.remoteId,connectionId:this.id,connectionType:this.type,metadata:this.metadata};this.serialization&&(c.serialization=this.serialization),this.label&&(c.label=this.label),this.dcInit&&(c.dcInit=this.dcInit),this.emit(me.EVENTS.offer.key,c)}),this._negotiator.on(ue.EVENTS.iceCandidate.key,r=>{this.emit(me.EVENTS.candidate.key,{candidate:r,dst:this.remoteId,connectionId:this.id,connectionType:this.type})}),this._negotiator.on(ue.EVENTS.iceConnectionFailed.key,()=>{this.close(!1)})}get peer(){return _.warn(`${this.constructor.name}.peer is deprecated and may be removed from a future version. Please use ${this.constructor.name}.remoteId instead.`),this.remoteId}static get EVENTS(){return je}}var ce=me,Ue=h("./node_modules/js-binarypack/lib/binarypack.js"),S=h.n(Ue),i=h("./node_modules/object-sizeof/index.js"),s=h.n(i);const k=new m.default(["open","data","error"]);k.extend(ce.EVENTS.enums);const F=new m.default(["binary","binary-utf8","json","none"]);class D extends ce{constructor(r,c){if(super(r,c),this._idPrefix="dc_",this.type="data",this._isOnOpenCalled=!1,this.label=this._options.label||this.id,this.dcInit=this._options.dcInit||{},this.serialization=D.SERIALIZATIONS.binary.key,this._options.serialization){if(!D.SERIALIZATIONS.get(this._options.serialization))throw new Error("Invalid serialization");this.serialization=this._options.serialization,this._isUnreliableDCInit(this.dcInit)&&(_.warn("You can not specify serialization with unreliable mode enabled."),this.serialization=D.SERIALIZATIONS.binary.key)}this._sendBuffer=[],this._receivedData={},this._queuedMessages=this._options.queuedMessages||[],this._negotiator.on(ue.EVENTS.dcCreated.key,A=>{this._dc=A,this._dc.binaryType="arraybuffer",this._setupMessageHandlers(),!this._isOnOpenCalled&&"open"===this._dc.readyState&&this._dc.onopen()}),this._options.payload&&(this._options.payload.pcConfig=this._options.pcConfig)}startConnection(){var r=this;return Z(function*(){yield r._negotiator.startConnection(r._options.payload||{originator:!0,type:"data",label:r.label,dcInit:r.dcInit,pcConfig:r._options.pcConfig}),r._pcAvailable=!0,r._handleQueuedMessages()})()}_setupMessageHandlers(){this._dc.onopen=()=>{this._isOnOpenCalled||(_.log("Data channel connection success"),this.open=!0,this._isOnOpenCalled=!0,this.emit(D.EVENTS.open.key))},this._dc.onmessage=r=>{this._handleDataMessage(r)},this._dc.onclose=()=>{_.log("DataChannel closed for:",this.id),this.close(!1)},this._dc.onerror=r=>{_.error(r)}}_handleDataMessage(r){if(this.serialization===D.SERIALIZATIONS.none.key)return void this.emit(D.EVENTS.data.key,r.data);if(this.serialization===D.SERIALIZATIONS.json.key)return void this.emit(D.EVENTS.data.key,JSON.parse(r.data));const c=S.a.unpack(r.data);let A=this._receivedData[c.id];if(A||(A=this._receivedData[c.id]={size:c.size,type:c.type,name:c.name,mimeType:c.mimeType,totalParts:c.totalParts,parts:new Array(c.totalParts),receivedParts:0}),A.receivedParts++,A.parts[c.index]=c.data,A.receivedParts===A.totalParts){delete this._receivedData[c.id];const M=q.joinArrayBuffers(A.parts),W=S.a.unpack(M);let $;switch(A.type){case"Blob":$=new Blob([new Uint8Array(W)],{type:A.mimeType});break;case"File":$=new File([new Uint8Array(W)],A.name,{type:A.mimeType});break;default:$=W}this.emit(D.EVENTS.data.key,$)}}send(r){if(!this.open)return void this.emit(D.EVENTS.error.key,new Error("Connection is not open. You should listen for the `open` event before sending messages."));if(null==r)return;if(this.serialization===D.SERIALIZATIONS.none.key)return this._sendBuffer.push(r),void this._startSendLoop();if(this.serialization===D.SERIALIZATIONS.json.key)return this._sendBuffer.push(JSON.stringify(r)),void this._startSendLoop();const c=S.a.pack(r),A=c.size,M=r.constructor.name,W={id:q.randomId(),type:M,size:A,totalParts:0};"File"===M&&(W.name=r.name),r instanceof Blob&&(W.mimeType=r.type);const $=B.maxChunkSize-s()(W),se=Math.ceil(A/$);W.totalParts=se;for(let fe=0;fe<se;fe++){const te=c.slice(fe*$,(fe+1)*$);W.index=fe,W.data=te,q.blobToArrayBuffer(S.a.pack(W),ye=>{this._sendBuffer.push(ye),this._startSendLoop()})}}close(r){const c=A=>{super.close(A),this._isOnOpenCalled=!1};this._dc?(this._dc.onclose=()=>{_.log("DataChannel closed for:",this.id),c(r)},"closing"!==this._dc.readyState&&("closed"===this._dc.readyState?c(r):this._dc.close())):c(r)}_startSendLoop(){this.sendInterval||(this.sendInterval=setInterval(()=>{const r=this._sendBuffer.shift();try{this._dc.send(r)}catch{this._sendBuffer.push(r)}0===this._sendBuffer.length&&(clearInterval(this.sendInterval),this.sendInterval=void 0)},B.sendInterval))}_isUnreliableDCInit(r){return!!r&&("maxRetransmits"in r||"maxPacketLifeTime"in r)}static get SERIALIZATIONS(){return F}static get EVENTS(){return k}}var U=D;const Y=new m.default(["stream"]);Y.extend(ce.EVENTS.enums);class J extends ce{constructor(r,c){super(r,c),this._idPrefix="mc_",this.type="media",this.localStream=this._options.stream,this._queuedMessages=this._options.queuedMessages||[],this._pcAvailable=!1}startConnection(){var r=this;return Z(function*(){r._options.originator&&(yield r._negotiator.startConnection({type:"media",stream:r.localStream,originator:r._options.originator,pcConfig:r._options.pcConfig,videoBandwidth:r._options.videoBandwidth,audioBandwidth:r._options.audioBandwidth,videoCodec:r._options.videoCodec,audioCodec:r._options.audioCodec,videoReceiveEnabled:r._options.videoReceiveEnabled,audioReceiveEnabled:r._options.audioReceiveEnabled}),r._pcAvailable=!0,r._handleQueuedMessages())})()}answer(r,c={}){this.localStream?_.warn("localStream already exists on this MediaConnection. Are you answering a call twice?"):(this._options.payload.stream=r,this.localStream=r,this._negotiator.startConnection({type:"media",stream:this.localStream,originator:!1,offer:this._options.payload.offer,pcConfig:this._options.pcConfig,audioBandwidth:c.audioBandwidth,videoBandwidth:c.videoBandwidth,videoCodec:c.videoCodec,audioCodec:c.audioCodec}),this._pcAvailable=!0,this._handleQueuedMessages(),this.open=!0)}replaceStream(r){this._negotiator.replaceStream(r),this.localStream=r}_setupNegotiatorMessageHandlers(){super._setupNegotiatorMessageHandlers(),this._negotiator.on(ue.EVENTS.addStream.key,r=>{_.log("Receiving stream",r),(!this.remoteStream||this.remoteStream.id!==r.id)&&(this.remoteStream=r,this.emit(J.EVENTS.stream.key,r))})}static get EVENTS(){return Y}}var K=J,oe=h("./node_modules/socket.io-parser/index.js"),Q=h.n(oe),Ce=h("./node_modules/has-binary2/index.js"),Re=h.n(Ce);const He=new m.default(["stream","open","close","peerJoin","peerLeave","error","data","log"]),Ye=new m.default(["offer","answer","candidate","leave","close","getLog","broadcast"]);class ke extends y.a{constructor(r,c,A={}){if(super(),this.constructor===ke)throw new TypeError("Cannot construct Room instances directly");this.name=r,this._options=A,this._peerId=c,this._localStream=this._options.stream,this._pcConfig=this._options.pcConfig,this.lastSent=0,this.messageQueue=[],this.sendIntervalID=null}validateSendDataSize(r){const c=Re()([r]),A={type:c?Q.a.BINARY_EVENT:Q.a.EVENT,data:[r]};let W;if((new Q.a.Encoder).encode(A,se=>{W=c?se[1].byteLength:se[0].length}),W>B.maxDataSize)throw new Error("The size of data to send must be less than 20 MB");return!0}_sendData(r,c){const A=B.minBroadcastIntervalMs,M=Date.now();if(0==this.messageQueue.length&&M-this.lastsend>=A)return this.lastsend=M,void this.emit(c,r);this.messageQueue.push({msg:r,key:c}),null===this.sendIntervalID&&(this.sendIntervalID=setInterval(()=>{if(0===this.messageQueue.length)return clearInterval(this.sendIntervalID),void(this.sendIntervalID=null);const $=this.messageQueue.shift();this.lastsend=Date.now(),this.emit($.key,$.msg)},A))}handleData(r){this.emit(ke.EVENTS.data.key,{data:r.data,src:r.src})}handleLog(r){this.emit(ke.EVENTS.log.key,r)}getLog(){this.emit(ke.MESSAGE_EVENTS.getLog.key,{roomName:this.name})}static get EVENTS(){return He}static get MESSAGE_EVENTS(){return Ye}}var Ae=ke;const Le=new m.default([]);Le.extend(Ae.EVENTS.enums);const We=new m.default(["offerRequest","candidate"]);We.extend(Ae.MESSAGE_EVENTS.enums);class de extends Ae{constructor(r,c,A){super(r,c,A),this.remoteStreams={},this.members=[],this._open=!1,this._msidMap={},this._unknownStreams={},this._negotiator=new ue}call(r){r&&(this._localStream=r),this.emit(de.MESSAGE_EVENTS.offerRequest.key,{roomName:this.name})}handleOffer(r){let c=r.offer;q.isPlanBSafari()&&(c=pe.unifiedToPlanB(c)),this._connectionStarted?this._negotiator.handleOffer(c):(this._negotiator.startConnection({type:"media",stream:this._localStream,pcConfig:this._options.pcConfig,offer:c}),this._setupNegotiatorMessageHandlers(),this._connectionStarted=!0)}_setupNegotiatorMessageHandlers(){this._negotiator.on(ue.EVENTS.addStream.key,r=>{const c=r;if(this._msidMap[c.id]){if(c.peerId=this._msidMap[c.id],c.peerId===this._peerId)return;const A=this.remoteStreams[c.id];if(A&&A.id===c.id)return;this.remoteStreams[c.id]=c,this.emit(de.EVENTS.stream.key,c),_.log(`Received remote media stream for ${c.peerId} in ${this.name}`)}else this._unknownStreams[c.id]=c}),this._negotiator.on(ue.EVENTS.negotiationNeeded.key,()=>{this.emit(de.MESSAGE_EVENTS.offerRequest.key,{roomName:this.name})}),this._negotiator.on(ue.EVENTS.answerCreated.key,r=>{q.isPlanBSafari()||(r.sdp=pe.ensureUnifiedPlan(r.sdp)),this.emit(de.MESSAGE_EVENTS.answer.key,{roomName:this.name,answer:r})}),this._negotiator.on(ue.EVENTS.iceConnectionFailed.key,()=>{this.close()}),this._negotiator.on(ue.EVENTS.iceCandidate.key,r=>{this.emit(de.MESSAGE_EVENTS.candidate.key,{roomName:this.name,candidate:r})})}handleJoin(r){const{src:c,roomMembers:A}=r;if(c===this._peerId)return this._open=!0,this.members=A.filter(M=>M!==c),this.call(this._localStream),void this.emit(de.EVENTS.open.key);this.members.push(c),this.emit(de.EVENTS.peerJoin.key,c)}handleLeave(r){if(!this._open)return;const c=r.src,A=this.members.indexOf(c);A>=0&&this.members.splice(A,1);for(const M in this.remoteStreams)this.remoteStreams[M].peerId===c&&(delete this.remoteStreams[M],delete this._msidMap[M],delete this._unknownStreams[M]);this.emit(de.EVENTS.peerLeave.key,c)}send(r){this._open&&this.validateSendDataSize(r)&&this._sendData({roomName:this.name,data:r},de.MESSAGE_EVENTS.broadcast.key)}close(){this._open&&(this._negotiator&&this._negotiator.cleanup(),this._open=!1,this.emit(de.MESSAGE_EVENTS.leave.key,{roomName:this.name}),this.emit(de.EVENTS.close.key))}replaceStream(r){this._localStream=r,this._negotiator.replaceStream(r)}updateMsidMap(r={}){this._msidMap=r;for(const c of Object.keys(this._unknownStreams))if(this._msidMap[c]){const A=this._unknownStreams[c];if(A.peerId=this._msidMap[A.id],delete this._unknownStreams[c],A.peerId===this._peerId)return;this.remoteStreams[A.id]=A,this.emit(de.EVENTS.stream.key,A)}}getPeerConnection(){return this._connectionStarted?this._negotiator._pc:null}static get EVENTS(){return Le}static get MESSAGE_EVENTS(){return We}}var Se=de;const ze=new m.default([]);ze.extend(Ae.EVENTS.enums);const Ge=new m.default(["broadcastByDC","getPeers"]);Ge.extend(Ae.MESSAGE_EVENTS.enums);class le extends Ae{constructor(r,c,A){super(r,c,A),this.connections={},this._queuedMessages={}}call(r){r&&(this._localStream=r),this.emit(le.MESSAGE_EVENTS.getPeers.key,{roomName:this.name,type:"media"})}connect(){this.emit(le.MESSAGE_EVENTS.getPeers.key,{roomName:this.name,type:"data"})}makeMediaConnections(r){this._makeConnections(r,"media",{stream:this._localStream,pcConfig:this._pcConfig,originator:!0,videoBandwidth:this._options.videoBandwidth,audioBandwidth:this._options.audioBandwidth,videoCodec:this._options.videoCodec,audioCodec:this._options.audioCodec,videoReceiveEnabled:this._options.videoReceiveEnabled,audioReceiveEnabled:this._options.audioReceiveEnabled})}makeDataConnections(r){this._makeConnections(r,"data",{pcConfig:this._pcConfig})}handleJoin(r){const c=r.src;if(c===this._peerId)return this.call(this._localStream),void this.emit(le.EVENTS.open.key);this.emit(le.EVENTS.peerJoin.key,c)}handleLeave(r){const c=r.src;this._deleteConnections(c),this.emit(le.EVENTS.peerLeave.key,c)}handleOffer(r){const c=r.connectionId;let A=this._getConnection(r.src,c);if(A)A.updateOffer(r);else if("media"===r.connectionType){if(this._hasConnection(r.src)&&this._peerId>r.src)return;A=new K(r.src,{connectionId:c,payload:r,metadata:r.metadata,queuedMessages:this._queuedMessages[c],pcConfig:this._pcConfig}),A.startConnection(),_.log("MediaConnection created in OFFER"),this._addConnection(r.src,A),this._setupMessageHandlers(A),A.answer(this._localStream,{videoBandwidth:this._options.videoBandwidth,audioBandwidth:this._options.audioBandwidth,videoCodec:this._options.videoCodec,audioCodec:this._options.audioCodec,videoReceiveEnabled:this._options.videoReceiveEnabled,audioReceiveEnabled:this._options.audioReceiveEnabled})}else _.warn(`Received malformed connection type: ${r.connectionType}`)}handleAnswer(r){const c=this._getConnection(r.src,r.connectionId);c&&c.handleAnswer(r)}handleCandidate(r){const c=this._getConnection(r.src,r.connectionId);c?c.handleCandidate(r):(void 0===this._queuedMessages[r.connectionId]&&(this._queuedMessages[r.connectionId]=[]),this._queuedMessages[r.connectionId].push({type:B.MESSAGE_TYPES.SERVER.CANDIDATE.key,payload:r}))}send(r){this.validateSendDataSize(r)&&this._sendData({roomName:this.name,data:r},le.MESSAGE_EVENTS.broadcast.key)}close(){for(const c in this.connections)this.connections.hasOwnProperty(c)&&this.connections[c].forEach(A=>{A.close(!1)});this.emit(le.MESSAGE_EVENTS.leave.key,{roomName:this.name}),this.emit(le.EVENTS.close.key)}replaceStream(r){this._localStream=r;for(const c in this.connections)this.connections.hasOwnProperty(c)&&this.connections[c].forEach(A=>{"media"===A.type&&A.replaceStream(r)})}getPeerConnections(){const r={};for(const[c,[A]]of Object.entries(this.connections)){const M=A.getPeerConnection();M&&(r[c]=M)}return r}_addConnection(r,c){this.connections[r]||(this.connections[r]=[]),this.connections[r].push(c)}_makeConnections(r,c,A){r.filter(M=>M!==this._peerId).filter(M=>!this._hasConnection(M)).forEach(M=>{let W;switch(c){case"data":W=new U(M,A);break;case"media":W=new K(M,A);break;default:return}W.startConnection(),this._addConnection(M,W),this._setupMessageHandlers(W),_.log(`${c} connection to ${M} created in ${this.name}`)})}_deleteConnections(r){this.connections[r]&&(this.connections[r].forEach(c=>{c.close(!1)}),delete this.connections[r])}_getConnection(r,c){return this.connections&&this.connections[r]?this.connections[r].filter(M=>M.id===c)[0]:null}_hasConnection(r){return this.connections[r]&&this.connections[r].length>0}_setupMessageHandlers(r){r.on(ce.EVENTS.offer.key,c=>{c.roomName=this.name,this.emit(le.MESSAGE_EVENTS.offer.key,c)}),r.on(ce.EVENTS.answer.key,c=>{c.roomName=this.name,this.emit(le.MESSAGE_EVENTS.answer.key,c)}),r.on(ce.EVENTS.candidate.key,c=>{c.roomName=this.name,this.emit(le.MESSAGE_EVENTS.candidate.key,c)}),"media"===r.type&&r.on(K.EVENTS.stream.key,c=>{c.peerId=r.remoteId,this.emit(le.EVENTS.stream.key,c)})}static get EVENTS(){return ze}static get MESSAGE_EVENTS(){return Ge}}var Te=le;const Ke=new m.default(["open","error","call","connection","expiresin","close","disconnected"]);class he extends y.a{constructor(r,c){super(),this.connections={},this.rooms={},this._queuedMessages={},r&&r.constructor===Object?(c=r,r=void 0):r&&(r=r.toString()),this.options=Object.assign({},{debug:_.LOG_LEVELS.NONE,secure:!0,config:B.defaultConfig,turn:!0,dispatcherSecure:B.DISPATCHER_SECURE,dispatcherHost:B.DISPATCHER_HOST,dispatcherPort:B.DISPATCHER_PORT},c),this.options.token=q.randomToken(),_.setLogLevel(this.options.debug),q.validateId(r)?q.validateKey(c.key)?("/"===this.options.host&&(this.options.host=window.location.hostname),void 0===c.secure&&443!==this.options.port&&(this.options.secure=void 0),this._initializeServerConnection(r)):this._abort("invalid-key",`API KEY "${this.options.key}" is invalid`):this._abort("invalid-id",`ID "${r}" is invalid`)}call(r,c,A={}){if(!this._checkOpenStatus())return;A.originator=!0,A.stream=c,A.pcConfig=this._pcConfig;const M=new K(r,A);return M.startConnection(),_.log("MediaConnection created in call method"),this._addConnection(r,M),M}connect(r,c={}){if(!this._checkOpenStatus())return;c.pcConfig=this._pcConfig;const A=new U(r,c);return A.startConnection(),_.log("DataConnection created in connect method"),this._addConnection(r,A),A}joinRoom(r,c={}){if(this._checkOpenStatus()){if(!r){const A=new Error("Room name must be defined.");return A.type="room-error",_.error(A),this.emit(he.EVENTS.error.key,A),null}return c.pcConfig=this._pcConfig,c.peerId=this.id,"sfu"===c.mode?this._initializeSfuRoom(r,c):this._initializeFullMeshRoom(r,c)}}getConnection(r,c){if(this._checkOpenStatus()){if(this.connections[r])for(const A of this.connections[r])if(A.id===c)return A;return null}}get open(){return this.socket&&this.socket.isOpen}destroy(){this._cleanup(),this.disconnect(!0)}disconnect(r=!1){r||_.warn("Use peer's destroy method instead. This method may be removed in future versions."),this.open&&(this.socket.close(),this.emit(he.EVENTS.disconnected.key,this.id))}reconnect(){_.warn("Recreate peer instance instead. This method may be removed in future versions."),this.open||this.socket.reconnect()}updateCredential(r){this.socket.updateCredential(r)}listAllPeers(r){if(!this._checkOpenStatus())return;r=r||function(){};const c=this,A=new XMLHttpRequest;A.open("get",`${this.socket.signalingServerUrl}/api/apikeys/${this.options.key}/clients/`,!0),A.onerror=function(){c._abort("server-error","Could not get peers from the server."),r([])},A.onreadystatechange=function(){if(4===A.readyState)if(401===A.status){r([]);const W=new Error("It doesn't look like you have permission to list peers IDs. Please enable the SkyWay REST API on dashboard");W.type="list-error",_.error(W),c.emit(he.EVENTS.error.key,W)}else r(200===A.status?JSON.parse(A.responseText):[])},A.send(null)}fetchPeerExists(r){var c=this;return Z(function*(){if(!c.open)throw new Error("Peer is not yet connected to signaling server");const A=(new Date).getTime();if(void 0!==c._lastFetchPeerExistsTime&&A-c._lastFetchPeerExistsTime<1e3)throw new Error("fetchPeerExists can only be called once per second");c._lastFetchPeerExistsTime=A;const M=`${c.socket.signalingServerUrl}/api/apikeys/${c.options.key}/peers/${r}/exists`,W=yield fetch(M);if(200===W.status)return(yield W.json()).exists;{const $=yield W.text();throw new Error($)}})()}_checkOpenStatus(){return this.open||this._emitNotConnectedError(),this.open}_emitNotConnectedError(){_.warn("You cannot connect to a new Peer because you are not connecting to SkyWay server now.You can create a new Peer to reconnect, or call reconnect() on this peer if you believe its ID to still be available.");const r=new Error("Cannot connect to new Peer before connecting to SkyWay server or after disconnecting from the server.");r.type="disconnected",_.error(r),this.emit(he.EVENTS.error.key,r)}_initializeServerConnection(r){this.socket=new Ie(this.options.key,{secure:this.options.secure,host:this.options.host,port:this.options.port,dispatcherSecure:this.options.dispatcherSecure,dispatcherHost:this.options.dispatcherHost,dispatcherPort:this.options.dispatcherPort}),this._setupMessageHandlers(),this.socket.on("error",c=>{this._abort("socket-error",c)}),this.socket.on("disconnect",()=>{this.disconnect(!0);const c=new Error("Lost connection to server.");c.type="socket-error",_.error(c),this.emit(he.EVENTS.error.key,c)}),this.socket.start(r,this.options.token,this.options.credential)}_initializeSfuRoom(r,c={}){if(this.rooms[r])return this.rooms[r];const A=new Se(r,this.id,c);return this.rooms[r]=A,this._setupSFURoomMessageHandlers(A),this.socket.send(B.MESSAGE_TYPES.CLIENT.ROOM_JOIN.key,{roomName:r,roomType:"sfu"}),A}_initializeFullMeshRoom(r,c={}){if(this.rooms[r])return this.rooms[r];const A=new Te(r,this.id,c);return this.rooms[r]=A,this._setupMeshRoomMessageHandlers(A),this.socket.send(B.MESSAGE_TYPES.CLIENT.ROOM_JOIN.key,{roomName:r,roomType:"mesh"}),A}_setupMessageHandlers(){this.socket.on(B.MESSAGE_TYPES.SERVER.OPEN.key,r=>{this.id=r.peerId,this._pcConfig=Object.assign({},this.options.config);const c=this._pcConfig.iceServers;this._pcConfig.iceServers=c?c.slice():[];const A=r.turnCredential;let M,W;if("object"==typeof A?(M=A.username,W=A.credential):"string"==typeof A&&(M=`${this.options.key}$${this.id}`,W=A),!0===this.options.turn&&M&&W){const $=[{protocol:"turn",transport:"tcp"},{protocol:"turn",transport:"udp"}];"edge"!==q.detectBrowser().name&&$.push({protocol:"turns",transport:"tcp"});for(const fe of $){const te=fe.protocol,ye=fe.transport;this._pcConfig.iceServers.push({urls:`${te}:${B.TURN_HOST}:${B.TURN_PORT}?transport=${ye}`,url:`${te}:${B.TURN_HOST}:${B.TURN_PORT}?transport=${ye}`,username:M,credential:W})}_.log("SkyWay TURN Server is available")}else _.log("SkyWay TURN Server is unavailable");this.emit(he.EVENTS.open.key,this.id)}),this.socket.on(B.MESSAGE_TYPES.SERVER.ERROR.key,r=>{const c=new Error(r.message);c.type=r.type,_.error(c),this.emit(he.EVENTS.error.key,c)}),this.socket.on(B.MESSAGE_TYPES.SERVER.LEAVE.key,r=>{_.log(`Received leave message from ${r}`),this._cleanupPeer(r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.FORCE_CLOSE.key,({src:r,connectionId:c})=>{const A=this.getConnection(r,c);A&&A.close(!1)}),this.socket.on(B.MESSAGE_TYPES.SERVER.AUTH_EXPIRES_IN.key,r=>{_.log(`Credential expires in ${r}`),this.emit(he.EVENTS.expiresin.key,r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.OFFER.key,r=>{const c=r.roomName;if(c){const W=this.rooms[c];return void(W&&W.handleOffer(r))}const A=r.connectionId;let M=this.getConnection(r.src,A);M?M.updateOffer(r):("media"===r.connectionType?(M=new K(r.src,{connectionId:A,payload:r,metadata:r.metadata,originator:!1,queuedMessages:this._queuedMessages[A],pcConfig:this._pcConfig}),M.startConnection(),_.log("MediaConnection created in OFFER"),this._addConnection(r.src,M),this.emit(he.EVENTS.call.key,M)):"data"===r.connectionType?(M=new U(r.src,{connectionId:A,payload:r,metadata:r.metadata,label:r.label,dcInit:r.dcInit,serialization:r.serialization,queuedMessages:this._queuedMessages[A],pcConfig:this._pcConfig}),M.startConnection(),_.log("DataConnection created in OFFER"),this._addConnection(r.src,M),this.emit(he.EVENTS.connection.key,M)):_.warn("Received malformed connection type: ",r.connectionType),delete this._queuedMessages[A])}),this.socket.on(B.MESSAGE_TYPES.SERVER.ANSWER.key,r=>{const c=r.roomName;if(c){const M=this.rooms[c];return void(M&&M.handleAnswer(r))}const A=this.getConnection(r.src,r.connectionId);A?A.handleAnswer(r):this._storeMessage(B.MESSAGE_TYPES.SERVER.ANSWER.key,r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.CANDIDATE.key,r=>{const c=r.roomName;if(c){const M=this.rooms[c];return void(M&&M.handleCandidate(r))}const A=this.getConnection(r.src,r.connectionId);A?A.handleCandidate(r):this._storeMessage(B.MESSAGE_TYPES.SERVER.CANDIDATE.key,r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.ROOM_USER_JOIN.key,r=>{const c=this.rooms[r.roomName];c&&c.handleJoin(r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.ROOM_USER_LEAVE.key,r=>{const c=this.rooms[r.roomName];c&&c.handleLeave(r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.ROOM_DATA.key,r=>{const c=this.rooms[r.roomName];c&&c.handleData(r)}),this.socket.on(B.MESSAGE_TYPES.SERVER.ROOM_LOGS.key,r=>{const c=this.rooms[r.roomName];c&&c.handleLog(r.log)}),this.socket.on(B.MESSAGE_TYPES.SERVER.ROOM_USERS.key,r=>{const c=this.rooms[r.roomName];c&&("media"===r.type?c.makeMediaConnections(r.userList):c.makeDataConnections(r.userList))}),this.socket.on(B.MESSAGE_TYPES.SERVER.SFU_OFFER.key,r=>{const c=this.rooms[r.roomName];c&&(c.updateMsidMap(r.msids),c.handleOffer(r))})}_setupConnectionMessageHandlers(r){r.on(ce.EVENTS.candidate.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_CANDIDATE.key,c)}),r.on(ce.EVENTS.answer.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_ANSWER.key,c)}),r.on(ce.EVENTS.offer.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_OFFER.key,c)}),r.on(ce.EVENTS.forceClose.key,()=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_FORCE_CLOSE.key,{dst:r.remoteId,connectionId:r.id})})}_setupRoomMessageHandlers(r){r.on(Se.MESSAGE_EVENTS.broadcast.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.ROOM_SEND_DATA.key,c)}),r.on(Se.MESSAGE_EVENTS.getLog.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.ROOM_GET_LOGS.key,c)}),r.on(Se.MESSAGE_EVENTS.leave.key,c=>{delete this.rooms[r.name],this.socket.send(B.MESSAGE_TYPES.CLIENT.ROOM_LEAVE.key,c)})}_setupSFURoomMessageHandlers(r){this._setupRoomMessageHandlers(r),r.on(Se.MESSAGE_EVENTS.offerRequest.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SFU_GET_OFFER.key,c)}),r.on(Se.MESSAGE_EVENTS.answer.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SFU_ANSWER.key,c)}),r.on(Se.MESSAGE_EVENTS.candidate.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SFU_CANDIDATE.key,c)})}_setupMeshRoomMessageHandlers(r){this._setupRoomMessageHandlers(r),r.on(Te.MESSAGE_EVENTS.offer.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_OFFER.key,c)}),r.on(Te.MESSAGE_EVENTS.answer.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_ANSWER.key,c)}),r.on(Te.MESSAGE_EVENTS.candidate.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.SEND_CANDIDATE.key,c)}),r.on(Te.MESSAGE_EVENTS.getPeers.key,c=>{this.socket.send(B.MESSAGE_TYPES.CLIENT.ROOM_GET_USERS.key,c)})}_abort(r,c){_.error("Aborting!"),this.disconnect(!0);const A=new Error(c);A.type=r,_.error(A),this.emit(he.EVENTS.error.key,A)}_addConnection(r,c){this.connections[r]||(this.connections[r]=[]),this.connections[r].push(c),this._setupConnectionMessageHandlers(c)}_storeMessage(r,c){this._queuedMessages[c.connectionId]||(this._queuedMessages[c.connectionId]=[]),this._queuedMessages[c.connectionId].push({type:r,payload:c})}_cleanup(){if(this.connections)for(const r of Object.keys(this.connections))this._cleanupPeer(r);this.emit(he.EVENTS.close.key)}_cleanupPeer(r){if(this.connections[r])for(const c of this.connections[r])c.close(!1)}static get EVENTS(){return Ke}}v.default=he},0:
/*!********************!*\
                !*** ws (ignored) ***!
                \********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(P,v){}}).default},9293:ve=>{function we(Z,P,v,h,u,y,m){try{var g=Z[y](m),C=g.value}catch(x){return void v(x)}g.done?P(C):Promise.resolve(C).then(h,u)}ve.exports=function ee(Z){return function(){var P=this,v=arguments;return new Promise(function(h,u){var y=Z.apply(P,v);function m(C){we(y,h,u,m,g,"next",C)}function g(C){we(y,h,u,m,g,"throw",C)}m(void 0)})}},ve.exports.__esModule=!0,ve.exports.default=ve.exports}}]);